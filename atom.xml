<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CepheusSun</title>
  <subtitle>Code for a better world.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.CepheusSun.com/"/>
  <updated>2017-12-20T06:49:58.776Z</updated>
  <id>http://www.CepheusSun.com/</id>
  
  <author>
    <name>CepheusSun</name>
    <email>cd_sunyang@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ–°æ‰‹åº”è¯¥æ€ä¹ˆå†™ Swift</title>
    <link href="http://www.CepheusSun.com/%E6%96%B0%E6%89%8B%E5%BA%94%E8%AF%A5%E6%80%8E%E4%B9%88%E5%86%99%20Swift.html"/>
    <id>http://www.CepheusSun.com/æ–°æ‰‹åº”è¯¥æ€ä¹ˆå†™ Swift.html</id>
    <published>2017-12-19T16:00:00.000Z</published>
    <updated>2017-12-20T06:49:58.776Z</updated>
    
    <content type="html"><![CDATA[<p>å·²ç»æœ‰å¥½å‡ ä¸ªäººè·Ÿæˆ‘æŠ±æ€¨è¿‡ä¸ºä»€ä¹ˆ swift é‡Œé¢æœ‰é‚£ä¹ˆå¤šé—®å·(<code>?</code>)è¿˜æœ‰å¹å·(<code>!</code>)äº†ã€‚æ°æ°å“ˆ, åœ¨åˆšåˆšå¼€å§‹å†™ swift çš„æ—¶å€™, æˆ‘ä¹Ÿé¢ä¸´ç€è¿™ç§é—®é¢˜ã€‚</p>
<p>æ˜¨å¤©ä¸€ä¸ªæœ‹å‹å‘äº†æˆ‘ä¸€è¡Œä»£ç , è®©æˆ‘çœ‹çœ‹åº”è¯¥æ€ä¹ˆå†™:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> pageiid = (<span class="keyword">self</span>.pageid?.intValue)! + <span class="number">1</span></div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç çœ‹èµ·æ¥å¾ˆæ“è›‹, ä½†æ˜¯ç³Ÿå¿ƒçš„æ˜¯, åœ¨åˆšåˆšå†™ swift çš„æ—¶å€™ï¼Œ æˆ‘å†™è¿‡æ›´æ¶å¿ƒçš„ä»£ç ã€‚</p>
<p>æ—¢ç„¶å¤§å®¶åœ¨åˆšåˆšå¼€å§‹å†™ swift çš„æ—¶å€™éƒ½é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚ä»Šå¤©å°±æ¥çœ‹çœ‹, è¿™æ ·çš„ä»£ç åº”è¯¥æ€æ ·å†™æ‰èƒ½è®©æˆ‘ä»¬æ›´çˆ½ã€‚</p>
<a id="more"></a>
<p>æˆ‘ä»¬éƒ½çŸ¥é“, æœ‰é—®å·(<code>?</code>)å’Œå¹å·(<code>!</code>)çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿâ€”<strong>Optional</strong></p>
<p>ç›¸ä¿¡å‡†å¤‡è¦è¯•è¯• swift çš„äººï¼Œæˆ–å¤šæˆ–å°‘éƒ½çœ‹åˆ°è¿‡, æˆ–è€…å¬è¯´è¿‡è¿™æ˜¯ swift ç›¸è¾ƒäº oc å¾ˆå¤§çš„åŒºåˆ«ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œé™¤äº†è¯­æ³•ä¸Šçš„å˜åŒ–ä»¥å¤–ï¼Œ swift å’Œ oc æœ€å¤§çš„åŒºåˆ«å°±åœ¨ äº<code>optional</code> äº†ã€‚ä¸ºäº†ç…§é¡¾åˆ°å®åœ¨æ˜¯å¤ªæ–°çš„æ–°æ‰‹(æ¯•ç«Ÿæˆ‘è‡ªå·±ä¹Ÿæ˜¯æ–°æ‰‹)ã€‚è¿˜æ˜¯ç®€å•çš„è®²è®²è¿™ä¸ªä¸œè¥¿å§ï¼</p>
<h2 id="ä»€ä¹ˆæ˜¯-Optional"><a href="#ä»€ä¹ˆæ˜¯-Optional" class="headerlink" title="ä»€ä¹ˆæ˜¯ Optional"></a>ä»€ä¹ˆæ˜¯ Optional</h2><p>è¿™ä¸€ç‚¹å°±æ²¡ä»€ä¹ˆå¯è¯´çš„ï¼Œåœ¨ swift ä¸­ Optional å®é™…ä¸Šæ˜¯ä¸€ä¸ªæšä¸¾ã€‚å¦‚æœè¦è‡ªå·±å®ç°ä¸€ä¸ªç±»ä¼¼çš„ä¸œè¥¿çš„è¯,  æ ¸å¿ƒçš„ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è¿™æ®µä»£ç ä¸é‡è¦</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">SYOptional</span>&lt;<span class="title">Wrapped</span>&gt; </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">case</span> <span class="keyword">none</span></div><div class="line">    <span class="keyword">case</span> some(<span class="type">Wrapped</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç åªæ˜¯è¦å‘Šè¯‰ä½ , è¿™ä¸ªæšä¸¾åªæœ‰ä¸¤ä¸ª case,  ä¸€ä¸ªæ˜¯ <code>.none</code> ä»£è¡¨è¿™ä¸ª optional æ˜¯æ²¡æœ‰å€¼çš„, ä¹Ÿå°±æ˜¯è¯´ä»–æ˜¯ nilã€‚å¦å¤–ä¸€ä¸ªå€¼ <code>.some</code> ä»£è¡¨è¿™ä¸ª optional æ˜¯æœ‰å€¼çš„ã€‚</p>
<p>è‹¹æœä¸ºä»€ä¹ˆè¦å¼•å…¥ optional è¿™ä¸ªæ¦‚å¿µ, åœ¨è¿™ä¸ªåœ°æ–¹å°±ä¸æ‰“ç®—èµ˜è¿°äº†ã€‚çœ‹ä¸‹é¢ä¸€æ®µè¯: </p>
<blockquote>
<p>â€œOptional å¯ä»¥è¯´æ˜¯ Swift çš„ä¸€å¤§ç‰¹è‰²ï¼Œå®ƒå®Œå…¨è§£å†³äº† â€œæœ‰â€ å’Œ â€œæ— â€ è¿™ä¸¤ä¸ªå›°æ‰°äº† Objective-C è®¸ä¹…çš„å“²å­¦æ¦‚å¿µï¼Œä¹Ÿä½¿å¾—ä»£ç å®‰å…¨æ€§å¾—åˆ°äº†å¾ˆå¤§çš„å¢åŠ ã€‚â€</p>
<p>æ‘˜å½•æ¥è‡ª: ç‹å· (onevcat). â€œSwifter - Swift å¿…å¤‡ Tips (ç¬¬å››ç‰ˆ)â€ã€‚ iBooks. </p>
</blockquote>
<p>ä¸ªäººè®¤ä¸º optional ç¡®å®æ˜¯ swift ä¸­éå¸¸å¥½çš„æ–°ç‰¹æ€§äº†ã€‚</p>
<p>æ¥ä¸‹æ¥, æˆ‘ä»¬çœ‹çœ‹ Optional çš„é‚£å‡ ä¸ªæ“ä½œç¬¦å·: <code>??</code>/ <code>!</code>/<code>?</code></p>
<p>è¿™äº›æ— éå°±æ˜¯ä¸€äº› swift ä¸­çš„è¯­æ³•ç³–è€Œå·²ã€‚å…·ä½“ä»€ä¹ˆæ„æ€ï¼Œæˆ‘ä»¬æ¥å¾€ä¸‹çœ‹ã€‚</p>
<h3 id="ï¼Ÿ"><a href="#ï¼Ÿ" class="headerlink" title="ï¼Ÿ"></a>ï¼Ÿ</h3><p><em>åœ¨å£°æ˜ä¸€ä¸ªå˜é‡æˆ–è€…å±æ€§çš„æ—¶å€™:</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> optionalString: <span class="type">String</span>?</div></pre></td></tr></table></figure>
<p>æœ€åçš„<code>?</code>è¡¨ç¤ºè¿™ä¸ª <code>optionalString</code> æ˜¯ä¸€ä¸ªå¯é€‰ç±»å‹(optional)ã€‚è¿™é‡Œçš„ <code>Stringï¼Ÿ</code> å°±æ˜¯ <code>Optional&lt;String&gt;</code> çš„æ„æ€ã€‚</p>
<p><em>åœ¨ä½¿ç”¨å˜é‡çš„æ—¶å€™:</em></p>
<p>å¦‚æœè¿™æ ·å†™ç¼–è¯‘å™¨æ˜¯ä¼šæŠ¥é”™çš„, </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">optionalString.lowercased()</div></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™ç¼–è¯‘å™¨ä¼šæç¤ºä½ åœ¨ <code>optionalString</code> åé¢æ·»åŠ ä¸€ä¸ª<code>?</code></p>
<p>è¿™ä¸ªé—®å·å°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ª <code>optionalString</code> æ˜¯ä¸€ä¸ªå¯é€‰ç±»å‹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span>!</div><div class="line">    <span class="keyword">var</span> son: <span class="type">Son</span>!</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span>?</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p: <span class="type">Person</span>?</div><div class="line"></div><div class="line"><span class="built_in">print</span>(p?.son.name)</div><div class="line"><span class="comment">// Playground: nil</span></div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç è¡¨ç¤ºï¼Œå¦‚æœåœ¨ä¸€è¡Œä»£ç é‡Œçš„æŸä¸ªåœ°æ–¹å‡ºç° nil ç€, è¿™è¡Œä»£ç ä¹Ÿå°†ä¼šè¿”å› nilã€‚(è¿™ä¸€ç‚¹æœ‰ç‚¹ç±»ä¼¼ oc ä¸­ç»™ nil å‘é€æ¶ˆæ¯)ã€‚è¿™æ ·å†™æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯åœ¨ç»´æŠ¤ä»£ç çš„æ—¶å€™, çœ‹åˆ° ï¼Ÿå°±çŸ¥é“è¿™ä¸ªä¸œè¥¿æ˜¯å¯é€‰ç±»å‹äº†ã€‚ä¹Ÿå°±æ˜¯<strong>å‘Šè¯‰æˆ‘ä»¬åœ¨ç¨‹åºè¿è¡ŒæœŸé—´è¿™ä¸ªä¸œè¥¿æ˜¯å¯èƒ½ä¸ºç©ºçš„ã€‚</strong></p>
<h3 id="ï¼"><a href="#ï¼" class="headerlink" title="ï¼"></a>ï¼</h3><p>æ¥ä¸‹æ¥å°±æ˜¯ <code>!</code>  äº†ã€‚è¿™ä¸ªä¸œè¥¿è·Ÿ<code>?</code> ä¸€æ ·ã€‚</p>
<p><em>åœ¨å£°æ˜ä¸€ä¸ªå˜é‡æˆ–è€…å±æ€§çš„æ—¶å€™:</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> something: <span class="type">String</span>!</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªç”¨æ³•æœ‰ä¸€ä¸ªä¸“é—¨çš„å«æ³•ï¼š<strong>éšå¼è§£åŒ…å¯é€‰ç±»å‹</strong>ã€‚ è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯é€‰ç±»å‹ï¼Œåœ¨å¯¹ä»–çš„æˆå‘˜æˆ–è€…æ˜¯æ–¹æ³•è¿›è¡Œè®¿é—®çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬è‡ªåŠ¨è§£åŒ…ã€‚ä¹Ÿå°±è¯´è¯´ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åŠ ä¸Š<code>!</code> è¿™ä¸ªç¬¦å·ã€‚æ¢æˆæˆ‘ä»¬è‡ªå·±çš„è¯å¯ä»¥è¿™æ ·ç†è§£:</p>
<p><strong>åœ¨å£°æ˜ä¸€ä¸ªå˜é‡æˆ–è€…å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æ˜ç¡®çš„çŸ¥é“åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è®¿é—®åˆ°è¿™ä¸ªå˜é‡æˆ–è€…å±æ€§çš„æ—¶å€™ï¼Œä»–çš„å€¼ä¸€å®šä¸ä¸ºç©ºã€‚é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨éšå¼è§£åŒ…å¯é€‰ç±»å‹ã€‚</strong>å¦‚æœè¦ä¸¾ä¾‹çš„è¯: æˆ‘æƒ³æˆ‘ä¼šä¸¾ XIB çš„ä¾‹å­ã€‚ä» SB æˆ–è€… XIB ä¸­æ‹–å‡ºæ¥çš„æ§ä»¶, éƒ½æ˜¯è¿™æ ·å­å£°æ˜çš„ã€‚</p>
<p><em>åœ¨è®¿é—®å˜é‡æˆ–è€…å±æ€§çš„æ—¶å€™:</em></p>
<p>å¯¹äºä¸€ä¸ªå¯é€‰ç±»å‹æ¥è¯´ï¼Œ æœ‰äº›æ—¶å€™ç¼–è¯‘å™¨ä¼šæé†’æˆ‘ä»¬åœ¨è¿™ä¸ªå¯¹è±¡åé¢æ·»åŠ <code>!</code> å°±åƒæœ€å¼€å§‹æˆ‘æœ‹å‹å‘ç»™æˆ‘çš„ä»£ç ä¸€æ ·:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> pageiid = (<span class="keyword">self</span>.pageid?.intValue)! + <span class="number">1</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä¸€ä¸ªæ–¹æ³•éœ€è¦ä¼ å…¥çš„æ˜¯ä¸€ä¸ªä¸å¯é€‰ç±»å‹ä½œä¸ºå‚æ•°ã€‚è¿™æ—¶å€™å¦‚æœå¼ºåˆ¶ä¼ å…¥ä¸€ä¸ªå¯é€‰ç±»å‹çš„è¯ã€‚ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”æé†’æˆ‘ä»¬åœ¨è¿™ä¸ªå¯é€‰ç±»å‹å˜é‡åé¢æ·»åŠ ä¸€ä¸ª<code>!</code> ã€‚ è¿™ä¸ªåšæ³•å°±æ˜¯<strong>å¼ºåˆ¶è§£åŒ…</strong>ã€‚ ç›¸å½“äºæ˜¯ç›´æ¥è®¿é—®è¿™ä¸ªå¯é€‰ç±»å‹çš„ <code>.some</code> ã€‚ </p>
<h3 id=""><a href="#" class="headerlink" title="??"></a>??</h3><p>è¿™ä¸ªåªéœ€è¦èŠ±ä¸€å¥è¯å°±èƒ½å¤Ÿè®²æ¸…æ¥šäº†ï¼Œè¿™æ˜¯ç»™è¿™ä¸ª optional é»˜è®¤å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> optionalString: <span class="type">String</span>?</div><div class="line"><span class="keyword">var</span> defaultValue = optionalString ?? <span class="string">"defaultValue"</span></div></pre></td></tr></table></figure>
<p>å¦‚æœ <code>optionalString</code> æœ‰å€¼çš„è¯  <code>defaultValue</code> å°±æ˜¯  <code>optionalString</code> çš„å€¼ã€‚åä¹‹å°±æ˜¯ <code>&quot;defaultValue&quot;</code>ã€‚</p>
<h2 id="æ€ä¹ˆå†™å¥½-Optional"><a href="#æ€ä¹ˆå†™å¥½-Optional" class="headerlink" title="æ€ä¹ˆå†™å¥½ Optional"></a>æ€ä¹ˆå†™å¥½ Optional</h2><p>å¤§æ¦‚è®²å®Œäº†ä¸€äº›åŸºæœ¬çš„æ¦‚å¿µã€‚ä¸‹é¢å°±æ¥è¯´è¯´å¦‚ä½•é¿å…åœ¨ä»£ç ä¸­å‡ºç°å„ç§ <code>?</code> \ <code>!</code> çš„æƒ…å†µã€‚å…¶å®å¯¹æ–°æ‰‹æ¥è¯´ã€‚å‡ ä¹éƒ½æ˜¯å› ä¸ºç¼–è¯‘å™¨æç¤ºï¼Œç„¶åè‡ªåŠ¨åŠ ä¸Šå»çš„å„ç§ <code>?</code> å’Œ <code>!</code> ã€‚ ä¸å¾—ä¸è¯´ï¼Œè¿™æ ·çš„ä»£ç æ˜¯éå¸¸ä¸‘é™‹çš„ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜, çŸ¥é“ optional çš„åŸç†å½“ç„¶æ˜¯æœ€é‡è¦çš„ã€‚</p>
<h3 id="é¿å…ä½¿ç”¨-Optional"><a href="#é¿å…ä½¿ç”¨-Optional" class="headerlink" title="é¿å…ä½¿ç”¨ Optional"></a>é¿å…ä½¿ç”¨ Optional</h3><p>å†™äº†ä¸€æ®µæ—¶é—´ä¹‹åï¼Œæˆ‘å‘ç°å¾ˆå¤šæ—¶å€™ optional çš„ä½¿ç”¨éƒ½æ˜¯æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰çš„ã€‚å°±åƒæˆ‘æœ‹å‹ç»™æˆ‘çš„ä¾‹å­ä¸€æ ·ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®åˆå§‹å€¼çš„æ–¹æ³•æ¥é¿å…ä½¿ç”¨ optional</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> pageid: <span class="type">Int</span> = <span class="number">0</span></div></pre></td></tr></table></figure>
<p>é€šè¿‡è¿™ç§æ–¹æ³•å°±èƒ½å¤Ÿé¿å…ä½¿ç”¨åˆ° optionalï¼Œ ä¹Ÿå°±ä¸ä¼šæœ‰ä¸‹é¢çš„äº‹æƒ…äº†ã€‚å½“ç„¶è¿˜å¯ä»¥ä½¿ç”¨æ‡’åŠ è½½:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">lazy</span> <span class="keyword">var</span> tableView = <span class="type">UITableView</span>()</div></pre></td></tr></table></figure>
<p>ä¿è¯åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨è¿™ä¸ªå±æ€§çš„æ—¶å€™è¿™ä¸ªå±æ€§æ˜¯è‚¯å®šè¢«åˆå§‹åŒ–å‡ºæ¥äº†çš„ã€‚</p>
<p>å½“ç„¶è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨éšå¼è§£åŒ…å¯é€‰ç±»å‹å»é¿å…ä¹‹åçš„ä»£ç ä¸­å‡ºç° <code>?</code> \ <code>!</code></p>
<p>ä½†æ˜¯è¿™ä¸ªå…¶å®æ˜¯ä¸è¢«é¼“åŠ±çš„ã€‚</p>
<blockquote>
<p>é»˜è®¤ä¸è¦éšå¼è§£åŒ…å¯é€‰ç±»å‹ã€‚ åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ä½ éƒ½å¯èƒ½ä¼šå¿˜æ‰è¿™ä»¶äº‹æƒ…ã€‚ä½†æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹åº”è¯¥è¿™æ ·åšæ¥å‡å°‘ç¼–è¯‘å™¨çš„å‹åŠ›ã€‚è€Œä¸”æˆ‘ä»¬ä¹Ÿéœ€è¦å»ç†è§£è¿™ä»¶äº‹æƒ…èƒŒåçš„é€»è¾‘ã€‚</p>
</blockquote>
<h3 id="å¦‚ä½•è®¿é—®-Optional"><a href="#å¦‚ä½•è®¿é—®-Optional" class="headerlink" title="å¦‚ä½•è®¿é—® Optional"></a>å¦‚ä½•è®¿é—® Optional</h3><p>æ—¢ç„¶è®¾è®¡å‡ºæ¥çš„ Optional è‚¯å®šåœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­ä¸å¯é¿å…çš„è¦ä½¿ç”¨åˆ°å®ƒã€‚é‚£ä¹ˆåœ¨ä½¿ç”¨ Optional çš„æ—¶å€™æ€ä¹ˆå»é¿å…å‡ºç°åƒæœ€å¼€å§‹çš„é‚£ç§æƒ…å†µå‘¢ï¼Ÿ</p>
<p>è¿˜æ˜¯æ¥çœ‹è¿™è¡Œä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> pageiid = (<span class="keyword">self</span>.pageid?.intValue)! + <span class="number">1</span></div></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œå¦‚æœ <code>pageid</code> ä¸ºç©ºçš„è¯ï¼Œ å¼ºåˆ¶è§£åŒ…æ˜¯è‚¯å®šä¼šå´©æºƒçš„ã€‚è¿™ç§æƒ…å†µåº”è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿé™¤äº†æœ€å¼€å§‹è¯´çš„å£°æ˜çš„æ—¶å€™è®¾ç½®åˆå§‹å€¼ï¼Œè¿˜æœ‰å°±æ˜¯ç»™é»˜è®¤å€¼ã€‚å¦å¤–è¿˜æœ‰ Optional Map è¿™ç§æ–¹æ³•æ¥è®¿é—® Optioalï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> optionalVal = <span class="keyword">optional</span> &#123;</div><div class="line"> <span class="comment">// do someThing</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// ç­‰ä»·äº</span></div><div class="line"><span class="keyword">optional</span>.<span class="built_in">map</span>&#123; <span class="comment">// do someThing &#125;</span></div></pre></td></tr></table></figure>
<p>å¦å¤–è¿˜æœ‰ä¸€äº›æˆ‘åœ¨ç½‘ä¸Šæœé›†çš„ snippet ä¹Ÿèƒ½å¤Ÿå¾ˆèˆ’æœçš„è§£å†³ä¸€äº›é—®é¢˜:ç»™ Optional åŠ ä¸€ä¸ª extension:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Optional</span> </span>&#123; &#125;</div></pre></td></tr></table></figure>
<p>æ·»åŠ ä¸€äº›æ–¹æ³•:åŸºæœ¬ä¸Šéƒ½æ¥è‡ª <a href="https://github.com/JohnSundell/SwiftTips">GitHub</a> è¿™ä¸ªåº“</p>
<h3 id="require"><a href="#require" class="headerlink" title="require"></a>require</h3><p>å¯ä»¥å¼ºåˆ¶è¦æ±‚æŸä¸ª Optional åœ¨å½“å‰è¡Œä¸ä¸ºç©ºï¼Œä¸ºç©ºçš„è¯ä¼šè·‘å‡ºå¼‚å¸¸ã€‚è¿™ä¸ªç›¸å½“äºæ˜¯ä¼˜åŒ–äº†å¼ºåˆ¶è§£åŒ…çš„å¼‚å¸¸ä¿¡æ¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">   <span class="comment">/// å¼ºåˆ¶è¦æ±‚è¿™ä¸ª optional ä¸ä¸ºç©º</span></div><div class="line">   <span class="comment">///</span></div><div class="line">   <span class="comment">/// è¿™ä¸ªæ–¹æ³•è¿”å› optional çš„å€¼ï¼Œæˆ–è€…åœ¨optional ä¸ºç©ºçš„æ—¶å€™è§¦å‘ error</span></div><div class="line">   <span class="comment">///</span></div><div class="line">   <span class="comment">///</span></div><div class="line">   <span class="comment">/// - Parameters:</span></div><div class="line">   <span class="comment">///   - hint: ä¸ºç©ºæŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯</span></div><div class="line">   <span class="comment">///</span></div><div class="line">   <span class="comment">/// - Returns: optional çš„å€¼.    </span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">require</span><span class="params">(hint hintExpression: @autoclosure<span class="params">()</span></span></span> -&gt; <span class="type">String</span>? = <span class="literal">nil</span>,</div><div class="line">                file: <span class="type">StaticString</span> = #file,</div><div class="line">                line: <span class="type">UInt</span> = #line) -&gt; <span class="type">Wrapped</span> &#123;</div><div class="line">       <span class="keyword">guard</span> <span class="keyword">let</span> unwrapped = <span class="keyword">self</span> <span class="keyword">else</span> &#123;</div><div class="line">           <span class="keyword">var</span> message = <span class="string">"required value was nil <span class="subst">\(file)</span>, at line <span class="subst">\(line)</span>"</span></div><div class="line">           <span class="keyword">if</span> <span class="keyword">let</span> hint = hintExpression() &#123;</div><div class="line">               message.append(<span class="string">". Debugging hit: <span class="subst">\(hint)</span>"</span>)</div><div class="line">           &#125;</div><div class="line">           #<span class="keyword">if</span> !os(<span class="type">Linux</span>)</div><div class="line">           <span class="keyword">let</span> exception = <span class="type">NSException</span>(name: .invalidArgumentException,</div><div class="line">                                       reason: message,</div><div class="line">                                       userInfo: <span class="literal">nil</span>)</div><div class="line">           exception.raise()</div><div class="line">           #endif</div><div class="line">           </div><div class="line">           <span class="built_in">preconditionFailure</span>(message)</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> unwrapped</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h3 id="or"><a href="#or" class="headerlink" title="or"></a>or</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// ç”¨æ¥ä»£æ›¿ ?? æ“ä½œç¬¦, è¿™æ ·å†™å¯è¯»æ€§é«˜äº›</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Sample:</span></div><div class="line"><span class="comment">//  var a: String? = nil</span></div><div class="line"><span class="comment">//  let res = a.or("b")</span></div><div class="line"><span class="function"><span class="keyword">func</span> `<span class="title">or</span>`<span class="params">(value: Wrapped?)</span></span> -&gt; <span class="type">Optional</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span> ?? value</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="hasSome"><a href="#hasSome" class="headerlink" title="hasSome"></a>hasSome</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// ç”¨æ¥åˆ¤æ–­è¿™ä¸ª Optional æ˜¯ä¸æ˜¯ä¸ºç©ºäº†ã€‚</span></div><div class="line"><span class="keyword">var</span> hasSome: <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">    <span class="keyword">case</span> .<span class="keyword">none</span>: <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    <span class="keyword">case</span> .some: <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ifSome-ifNone"><a href="#ifSome-ifNone" class="headerlink" title="ifSome   ifNone"></a>ifSome   ifNone</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">   <span class="comment">// å¦‚æœ optional ä¸ä¸ºç©ºçš„è¯ï¼Œæ‰§è¡Œé—­åŒ…ï¼Œ å¹¶è¿”å›è¿™ä¸ª Optional</span></div><div class="line">@discardableResult</div><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">ifSome</span><span class="params">(<span class="number">_</span> handler: <span class="params">(Wrapped)</span></span></span> -&gt; <span class="type">Void</span>) -&gt; <span class="type">Optional</span> &#123;</div><div class="line">       <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">       <span class="keyword">case</span> .some(<span class="keyword">let</span> wrapped): handler(wrapped); <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">       <span class="keyword">case</span> .<span class="keyword">none</span>: <span class="keyword">return</span> <span class="keyword">self</span></div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">// å¦‚æœ optional ä¸ºç©ºçš„è¯ï¼Œæ‰§è¡Œé—­åŒ…ï¼Œ å¹¶è¿”å›è¿™ä¸ª Optional</span></div><div class="line">   @discardableResult</div><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">ifNone</span><span class="params">(<span class="number">_</span> handler: <span class="params">()</span></span></span> -&gt; ()) -&gt; <span class="type">Optional</span> &#123;</div><div class="line">       <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">       <span class="keyword">case</span> .some: <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">       <span class="keyword">case</span> .<span class="keyword">none</span>: handler(); <span class="keyword">return</span> <span class="keyword">self</span></div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸ºäº†é¿å…å†™å‡ºæ»¡æ˜¯ <code>?</code> å’Œ <code>!</code> çš„ä»£ç , æŒæ¡ Swift ä¸­å¯é€‰ç±»å‹çš„åŸºæœ¬çŸ¥è¯†æ˜¯å¾ˆå¿…è¦çš„ã€‚å¦å¤–ä¹Ÿéœ€è¦å»äº†è§£ Swift ä¸­ä¸ºä»€ä¹ˆè¦å¼•å…¥å¯é€‰ç±»å‹è¿™ä¸ªæ¦‚å¿µã€‚åœ¨ç¼–å†™ Swift ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦æˆ‘ä»¬ç¨‹åºå‘˜æ—¶åˆ»çŸ¥é“ç¨‹åºçš„é€»è¾‘æ˜¯æ€ä¹ˆæ ·çš„ï¼Œåœ¨è®¾è®¡ä¸€ä¸ªç±»çš„æ—¶å€™, è¦æ¸…æ¥šå®ƒçš„å±æ€§åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­é‚£äº›æ˜¯å¯èƒ½ä¸ºç©ºçš„ã€‚åœ¨æ²¡æœ‰å¿…è¦çš„æ—¶å€™ï¼Œå°½é‡çš„é¿å…æ˜¯ç”¨  Optional å‡å°‘ Optional çš„ä½¿ç”¨ï¼Œä¸€æ–¹é¢èƒ½è®©ä½ çš„ä»£ç é€»è¾‘æ›´å¯æ§ï¼Œä¸€æ–¹é¢ä¹Ÿèƒ½è®©ä½ çš„ä»£ç æ›´æ¼‚äº®ã€‚è‡³å°‘ä¸ä¼šå†è¢«ç¼–è¯‘å™¨ä¸€æ­¥ä¸€æ­¥çš„æå‡ºé‚£äº›æ¶å¿ƒçš„ä¸œè¥¿ã€‚<strong>æƒ³æ¸…æ¥šé€»è¾‘, åˆç†çš„è§„é¿, åŠ ä¸Šä¸€äº›å°æ‰‹æ®µ, è®©ä»£ç æ›´æ¼‚äº®, æ˜¯ä¸€ä»¶å¾ˆå¹¸ç¦çš„äº‹æƒ…ã€‚</strong> Optional èƒ½å¤Ÿè®©ä»£ç é€»è¾‘æ›´æ˜ç¡®, å‡å°‘å¾ˆå¤šä¸å¿…è¦çš„crashï¼Œå¦‚æœä¸å½“ä½¿ç”¨, crash ä¹Ÿä¸ä¼šå°‘å“¦ã€‚</p>
<p>æœ€åæˆ‘ä¸€ç›´è§‰å¾—ï¼ŒæŒæ¡äº† Optional æ˜¯æ€ä¹ˆå›äº‹ï¼Œ ä»¥åŠ Optional æ€ä¹ˆç”¨æœ€å¥½ï¼Œ åŸºæœ¬ä¸Šå°±ç®—æ˜¯å…¥é—¨äº† Swift äº†ã€‚</p>
<p>å¯¹äº†æœ‹å‹çš„ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> pageiid: <span class="type">NSString</span>?   <span class="comment">// è¿™æ˜¯å±æ€§å£°æ˜</span></div><div class="line"><span class="keyword">let</span> pageiid = (<span class="keyword">self</span>.pageid?.intValue)! + <span class="number">1</span>  <span class="comment">// è¿™æ˜¯æŸä¸ªæ–¹æ³•é‡Œé¢çš„ä»£ç </span></div></pre></td></tr></table></figure>
<ul>
<li>ä¸ºä»€ä¹ˆè¦ç”¨ NSString?</li>
<li>ä¸ºä»€ä¹ˆè¦ Optional</li>
<li>ä¸ºä»€ä¹ˆè¦å¼ºåˆ¶è§£åŒ…?</li>
</ul>
<p>ä¸ºä»€ä¹ˆè¦ NSStringï¼Ÿè¿™ä¸ªæˆ‘çœŸä¸çŸ¥é“ï¼Œ ä»–åªè¯´äº†æ¥å£è¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼›ä¸ºä»€ä¹ˆè¦ Optionalï¼Ÿè¿™ä¸ªæˆ‘ä¹Ÿä¸çŸ¥é“ï¼›ä¸ºä»€ä¹ˆè¦å¼ºåˆ¶è§£åŒ…ï¼Ÿè¿™æˆ‘çŸ¥é“ï¼Œè‚¯å®šæ˜¯ Xcode è‡ªåŠ¨å¸®ä»–æ”¹çš„å•ŠğŸ˜‚</p>
<p>ç„¶åæˆ‘ç»™ä»–æ”¹æˆäº†è¿™æ ·:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> pageid: <span class="type">Int</span> = <span class="number">0</span> </div><div class="line"><span class="keyword">self</span>.pageid +=<span class="number">1</span></div><div class="line"><span class="string">"<span class="subst">\(<span class="keyword">self</span>.pageid)</span>"</span></div></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–çš„æ—¶å€™é»˜è®¤åˆå§‹å€¼ä¸º0ï¼Œé¿å… Optional çš„ä½¿ç”¨ä¹Ÿé¿å…äº†åé¢çš„å¼ºåˆ¶è§£åŒ…ã€‚</p>
<p>ä½¿ç”¨ Int ä»£æ›¿ NSStringã€‚ç¬¬ä¸€æ˜¯ä¸æƒ³ç”¨ NSStringï¼Œ ç¬¬äºŒæ˜¯ï¼Œåœ¨ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œè¿™ä¸ªå€¼åº”è¯¥å°±æ˜¯ int ç±»å‹çš„</p>
<p>åœ¨æ¥å£ç»„è£…å‚æ•°çš„åœ°æ–¹ï¼Œå°† int è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚è¿™ä¸ªé€»è¾‘åº”è¯¥æ˜¯æ¥å£çš„äº‹æƒ…ï¼Œä¸åº”è¯¥æ‹¿ä¸šåŠ¡å±‚çš„é€»è¾‘å»å°†å°±å®ƒã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å·²ç»æœ‰å¥½å‡ ä¸ªäººè·Ÿæˆ‘æŠ±æ€¨è¿‡ä¸ºä»€ä¹ˆ swift é‡Œé¢æœ‰é‚£ä¹ˆå¤šé—®å·(&lt;code&gt;?&lt;/code&gt;)è¿˜æœ‰å¹å·(&lt;code&gt;!&lt;/code&gt;)äº†ã€‚æ°æ°å“ˆ, åœ¨åˆšåˆšå¼€å§‹å†™ swift çš„æ—¶å€™, æˆ‘ä¹Ÿé¢ä¸´ç€è¿™ç§é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¨å¤©ä¸€ä¸ªæœ‹å‹å‘äº†æˆ‘ä¸€è¡Œä»£ç , è®©æˆ‘çœ‹çœ‹åº”è¯¥æ€ä¹ˆå†™:&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; pageiid = (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.pageid?.intValue)! + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ®µä»£ç çœ‹èµ·æ¥å¾ˆæ“è›‹, ä½†æ˜¯ç³Ÿå¿ƒçš„æ˜¯, åœ¨åˆšåˆšå†™ swift çš„æ—¶å€™ï¼Œ æˆ‘å†™è¿‡æ›´æ¶å¿ƒçš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶å¤§å®¶åœ¨åˆšåˆšå¼€å§‹å†™ swift çš„æ—¶å€™éƒ½é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚ä»Šå¤©å°±æ¥çœ‹çœ‹, è¿™æ ·çš„ä»£ç åº”è¯¥æ€æ ·å†™æ‰èƒ½è®©æˆ‘ä»¬æ›´çˆ½ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Swift ä¸­ class æ€ä¹ˆæ”¯æŒ Codable</title>
    <link href="http://www.CepheusSun.com/Swift-%E4%B8%AD-class-%E6%80%8E%E4%B9%88%E6%94%AF%E6%8C%81-Codable.html"/>
    <id>http://www.CepheusSun.com/Swift-ä¸­-class-æ€ä¹ˆæ”¯æŒ-Codable.html</id>
    <published>2017-12-15T03:34:57.000Z</published>
    <updated>2017-12-15T03:34:54.014Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰ç¿»è¯‘è¿‡ <a href="www.mikeash.com">Mike Ash</a> çš„æ–‡ç«  <a href="http://www.jianshu.com/p/febdd25ae525">Swift 4.0: Codable</a>ã€‚ ä¹‹åæœ‰è¯»è€…<a href="http://www.jianshu.com/u/a1045c1ac0ce"><a href="http://www.jianshu.com/u/a1045c1ac0ce">DevHank</a></a> æäº†ä¸ªé—®é¢˜:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-2e0f76a36a18ce9d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>è¿…é€Ÿçš„åœ¨ Playgrounds ä¸Šé¢ä¸‹å†™äº†ä¸€ä¸ªä¾‹å­:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">class Father: Codable &#123;</div><div class="line">    var familyName: String = ""</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Son: Father &#123;</div><div class="line">    var name: String = ""  </div><div class="line">&#125;</div><div class="line"></div><div class="line">let jsonText = """</div><div class="line">&#123;</div><div class="line">    "familyName": "F",</div><div class="line">    "name": "N"</div><div class="line">&#125;</div><div class="line">"""</div><div class="line"></div><div class="line">let data = jsonText.data(using: .utf8)!</div><div class="line">do &#123;</div><div class="line">    let son: Son = try JSONDecoder().decode(Son.self, from: data)</div><div class="line">    print(son.familyName)</div><div class="line">&#125; catch let error &#123;</div><div class="line">    print(error)</div><div class="line">&#125;</div><div class="line">// F</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¥ä¸ºäº‹æƒ…å°±ç®—ç»“æŸäº†ã€‚åæ¥å®åœ¨æ˜¯æœ‰äº›ä¸å¦¥, ç„¶ååœ¨ä»£ç ä¸­æ·»åŠ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(son.name)</div></pre></td></tr></table></figure>
<p>å‘ç°å‡ºäº†é—®é¢˜ã€‚æ‰€ä»¥å°è¯•è®©å­ç±»éµå®ˆ Codable åè®®ã€‚ ä¸¤ä¸ªç±»çš„ä»£ç æ”¹æˆäº†è¿™æ ·</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> familyName: <span class="type">String</span> = <span class="string">""</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span>: <span class="title">Father</span>, <span class="title">Codable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">""</span>   </div><div class="line">&#125;</div><div class="line"><span class="comment">// N</span></div></pre></td></tr></table></figure>
<p>ä¸éš¾å¾—å‡ºç»“è®º:<strong>ç®€å•çš„æ·»åŠ  Codableï¼Œ åœ¨ç»§æ‰¿ä¸­æ˜¯æ— æ•ˆçš„ã€‚åœ¨å“ªä¸ªç±»ä¸­éµå®ˆçš„ Codableï¼Œ å…¶å­ç±»æˆ–è€…çˆ¶ç±»çš„æˆå‘˜éƒ½ä¼šè¢«å¿½ç•¥ã€‚</strong></p>
<p>å†å›åˆ° <a href="http://www.jianshu.com/p/febdd25ae525">Swift 4.0: Codable</a>è¿™ç¯‡æ–‡ç« ä¸­ï¼šæœ‰è¿™ä¹ˆä¸€å¥è¯</p>
<blockquote>
<p>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ key åµŒå¥—åœ¨ Person ç±»ä¸­ã€‚å¦‚æœæˆ‘ä»¬è‡ªå·±æ¥åšè¿™ä»¶äº‹æƒ…ï¼Œè¿™ä¸ªåµŒå¥—ç±»å‹ä¼šæ˜¯è¿™æ ·çš„ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´, ç›¸å…³çš„ <code>CodingKey</code> å’Œ <code>encode(to:)</code> ã€<code>init(from:)</code>æ–¹æ³•éƒ½æ˜¯ç¼–è¯‘å™¨åŠ ä¸Šå»çš„ã€‚è¿™ä¹ˆçœ‹æ¥è¿™ä¸ªé—®é¢˜å°±æœ‰è§£å†³æ–¹æ¡ˆäº†:<strong>è‡ªå·±å®ç° Codable ä»¥åŠç›¸å…³çš„å®ç°ã€‚</strong></p>
<p>è¿™æ®µè¯æˆ‘åœ¨ <a href="https://developer.apple.com/videos/play/wwdc2017/212/">WWDC</a> (å¤§æ¦‚ç¬¬28ã€9åˆ†é’Ÿ)ä¸­ï¼Œå¾—åˆ°äº†è‹¹æœå®˜æ–¹çš„è¯å®ã€‚</p>
<p>æ‰€ä»¥åˆå†™äº†ä¸‹é¢çš„ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>: <span class="title">Codable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> familyName: <span class="type">String</span> = <span class="string">""</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span>: <span class="title">Father</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">""</span></div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">enum</span> <span class="title">CodingKeys</span>: <span class="title">String</span>, <span class="title">CodingKey</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> name = <span class="string">"name"</span></div><div class="line">        <span class="keyword">case</span> familyName = <span class="string">"familyName"</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// å¦‚æœè¦ JSON -&gt; Son å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•</span></div><div class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(from decoder: <span class="type">Decoder</span>) <span class="keyword">throws</span> &#123;</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</div><div class="line">        <span class="keyword">let</span> container = <span class="keyword">try</span> decoder.container(keyedBy: <span class="type">CodingKeys</span>.<span class="keyword">self</span>)</div><div class="line">        name = <span class="keyword">try</span> container.decode(<span class="type">String</span>.<span class="keyword">self</span>, forKey: .name)</div><div class="line">        familyName = <span class="keyword">try</span> container.decode(<span class="type">String</span>.<span class="keyword">self</span>, forKey: .familyName)</div><div class="line">    &#125;</div><div class="line">  	<span class="comment">// å¦‚æœè¦ Son -&gt; JSON å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•</span></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">encode</span><span class="params">(to encoder: Encoder)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">        <span class="keyword">var</span> container = encoder.container(keyedBy: <span class="type">CodingKeys</span>.<span class="keyword">self</span>)</div><div class="line">        <span class="keyword">try</span> container.encode(name, forKey: .name)</div><div class="line">        <span class="keyword">try</span> container.encode(familyName, forKey: .familyName)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//N</span></div><div class="line"><span class="comment">//F</span></div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ä¸­, çˆ¶ç±»éµå®ˆäº† Codable åè®®, ç„¶åæˆ‘åœ¨å­ç±»ä¸­è‡ªå·±å®ç°äº† CodingKey ç›¸å…³çš„ä»£ç ã€‚æœ€åçš„ç»“æœ, ä¹Ÿæ˜¯å¯å–œçš„ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰ç¿»è¯‘è¿‡ &lt;a href=&quot;www.mikeash.com&quot;&gt;Mike Ash&lt;/a&gt; çš„æ–‡ç«  &lt;a href=&quot;http://www.jianshu.com/p/febdd25ae525&quot;&gt;Swift 4.0: Codable&lt;/a&gt;ã€‚ ä¹‹åæœ‰è¯»è€…&lt;a href=&quot;http://www.jianshu.com/u/a1045c1ac0ce&quot;&gt;&lt;a href=&quot;http://www.jianshu.com/u/a1045c1ac0ce&quot;&gt;DevHank&lt;/a&gt;&lt;/a&gt; æäº†ä¸ªé—®é¢˜:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1769276-2e0f76a36a18ce9d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿…é€Ÿçš„åœ¨ Playgrounds ä¸Šé¢ä¸‹å†™äº†ä¸€ä¸ªä¾‹å­:&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;class Father: Codable &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    var familyName: String = &quot;&quot;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;class Son: Father &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    var name: String = &quot;&quot;  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;let jsonText = &quot;&quot;&quot;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &quot;familyName&quot;: &quot;F&quot;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &quot;name&quot;: &quot;N&quot;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&quot;&quot;&quot;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;let data = jsonText.data(using: .utf8)!&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;do &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    let son: Son = try JSONDecoder().decode(Son.self, from: data)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    print(son.familyName)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125; catch let error &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    print(error)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;// F&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¥ä¸ºäº‹æƒ…å°±ç®—ç»“æŸäº†ã€‚åæ¥å®åœ¨æ˜¯æœ‰äº›ä¸å¦¥, ç„¶ååœ¨ä»£ç ä¸­æ·»åŠ &lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(son.name)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‘ç°å‡ºäº†é—®é¢˜ã€‚æ‰€ä»¥å°è¯•è®©å­ç±»éµå®ˆ Codable åè®®ã€‚ ä¸¤ä¸ªç±»çš„ä»£ç æ”¹æˆäº†è¿™æ ·&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>ExpressibleByStringLiteral</title>
    <link href="http://www.CepheusSun.com/ExpressibleByStringLiteral.html"/>
    <id>http://www.CepheusSun.com/ExpressibleByStringLiteral.html</id>
    <published>2017-11-26T16:00:00.000Z</published>
    <updated>2017-11-27T08:00:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»å­—é¢æ„æ€ä¸Šçœ‹ï¼Œ<strong>é€šè¿‡å­—ç¬¦ä¸²å­—é¢æ„æ€è¡¨è¾¾</strong>ã€‚è¿™æ˜¯ä¸€ä¸ªåè®®,  å°±æ˜¯è¯´å®ç°è¿™ä¸ªåè®®å¯ä»¥é€šè¿‡å­—é¢æ„æ€å®ä¾‹åŒ–è¿™ä¸ªç±»ã€‚</p>
<p>æˆ‘ä»¬æŸ¥çœ‹ String è¿™ä¸ªç±», Swift å®é™…ä¸Šå·²ç»ç»™ String è¿™ä¸ªç±»å®ç°äº† <code>ExpressibleByStringLiteral</code> è¿™ä¸ªåè®®ã€‚æ‰€ä»¥å¯ä»¥é€šè¿‡</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> aString = <span class="string">"this is a string"</span></div></pre></td></tr></table></figure>
<p>æ¥åˆå§‹åŒ–ä¸€ä¸ª String å¯¹è±¡ã€‚é€šè¿‡æŸ¥çœ‹<a href="https://developer.apple.com/documentation/swift/expressiblebystringliteral">æ–‡æ¡£</a>ï¼š</p>
<p>è¿™ä¸ªåè®®å·²ç»è¢«</p>
<ul>
<li>CSLocalizedString</li>
<li>StaticString</li>
<li>NSMutableString</li>
<li>String</li>
<li>NSString</li>
<li>SubString</li>
<li>Selector</li>
</ul>
<p>è¿™å‡ ä¸ªä¸œè¥¿å®ç°äº†ã€‚</p>
<p>è¿™ä¸ªåè®®æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°è¿™ä¸ªåè®®ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬æ›´ç®€å•çš„åˆå§‹åŒ–ä¸€äº›ä¸œè¥¿ã€‚æ¯”å¦‚è¯´: URLã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­, æ¯æ¬¡åˆå§‹åŒ–ä¸€ä¸ª URL éƒ½éœ€è¦</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> urls = <span class="type">URL</span>.<span class="keyword">init</span>(string: <span class="string">"https://www.baidu.com"</span>)</div></pre></td></tr></table></figure>
<p>è¿™æ ·æ¥åˆå§‹åŒ–ä¸€ä¸ª URL å‡ºæ¥ï¼Œ è¿™ä¸ªåˆå§‹åŒ–å‡ºæ¥çš„ URL åˆæ˜¯ä¸€ä¸ª optional çš„ï¼Œåœ¨ä½¿ç”¨çš„ä½¿ç”¨è¿˜éœ€è¦ç»™ä»–è§£åŒ…ä»€ä¹ˆçš„ã€‚ä½†æ˜¯æ¯æ¬¡éƒ½è¦è¿™æ ·å®åœ¨æ˜¯å¾ˆçƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªåè®®æ¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">URL</span>: <span class="title">ExpressibleByStringLiteral</span> </span>&#123;</div><div class="line">    </div><div class="line"><span class="keyword">public</span> <span class="keyword">init</span>(stringLiteral value: <span class="type">String</span>) &#123;</div><div class="line">	<span class="keyword">guard</span> <span class="keyword">let</span> url = <span class="type">URL</span>(string: <span class="string">"<span class="subst">\(value)</span>"</span>) <span class="keyword">else</span> &#123;</div><div class="line">		<span class="built_in">preconditionFailure</span>(<span class="string">"This url: <span class="subst">\(value)</span> is not invalid"</span>)</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">self</span> = url</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>è¿™æ ·å°±å¯ä»¥é€šè¿‡</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> url: <span class="type">URL</span> = <span class="string">"https://www.baidu.com"</span></div><div class="line"><span class="keyword">let</span> task = <span class="type">URLSession</span>.shared.dataTask(with: url)</div><div class="line"><span class="keyword">let</span> task2 = <span class="type">URLSession</span>.shared.dataTask(with: <span class="string">"https://www.baidu.com"</span>)</div></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼å»åˆå§‹åŒ–ä¸€ä¸ª URL äº†ï¼Œç„¶åå½“è¿™ä¸ª URL ä¸å¯¹çš„æ—¶å€™å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>å½“ç„¶è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç±», ä¹Ÿå¯ä»¥é€šè¿‡å®ç°è¿™ä¸ªåè®®çš„æ–¹å¼æ¥åšè¿™ä»¶äº‹æƒ…ã€‚æ¯”å¦‚è¯´:</p>
<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªå•†å“ç±»</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Product</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> `id`: <span class="type">String</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªç»“æ„ä½“æˆ‘ä»¬éœ€è¦è¿™æ ·å®ç°</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> p = <span class="type">Product</span>(id: <span class="string">"xx"</span>)</div></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™æˆ‘ä»¬å†å®ç°è¿™ä¸ªåè®®</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Product</span>: <span class="title">ExpressibleByStringLiteral</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(stringLiteral value: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span> = <span class="type">Product</span>(id: value)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> p2: <span class="type">Product</span> = <span class="string">"xx"</span></div></pre></td></tr></table></figure>
<p>å½“ç„¶è¿˜å¯ä»¥ç›´æ¥é€šè¿‡ä¸€ä¸ªå­—ç¬¦ä¸²åˆå§‹åŒ–ä¸€ä¸ª Controller è¿™ç§åšæ³•ã€‚</p>
<p><strong>å½“ç„¶ï¼Œæœ¬äººè¿˜æ˜¯ä¸æ”¯æŒå¯¹è¿™ç§è‡ªå®šä¹‰çš„ç±»åšè¿™ç§äº‹æƒ…ï¼Œç¡®å®æ˜¯ä¸€ç§éå¸¸é£éªšçš„åšæ³•ã€‚æš‚æ—¶æ²¡æœ‰æƒ³åˆ°ååˆ†å…·ä½“çš„åœºæ™¯ã€‚ä½†æ˜¯çŸ¥é“è¿™ä¸ªå°æŠ€å·§è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</strong></p>
<p>ä¸è¿‡ï¼Œå¯¹<code>URL</code> <code>Date</code> è¿™ç±»ï¼Œåœ¨å¼€å‘ä¸­ç»å¸¸ä¼šä»¥å­—ç¬¦ä¸²æ¥è¡¨ç¤ºï¼Œä½†æ˜¯åˆæ˜¯å­—ç¬¦ä¸²ä¸œè¥¿æ¥è¯´ï¼Œè¿™æ ·å»å†™è¿˜æ˜¯æŒºä¸é”™çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Date</span>: <span class="title">ExpressibleByStringLiteral</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(stringLiteral value: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">let</span> dateformatter = <span class="type">DateFormatter</span>()</div><div class="line">        dateformatter.dateFormat = <span class="string">"YYYY-MM-dd"</span></div><div class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> date = dateformatter.date(from: value) <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">preconditionFailure</span>(<span class="string">"This date: <span class="subst">\(value)</span> is not invalid"</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">self</span> = date</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> date: <span class="type">Date</span> = <span class="string">"1990-09-09"</span></div></pre></td></tr></table></figure>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-11-27-070845.png" alt=""></p>
<p>çœ‹äº†ä¸€ä¸‹ï¼Œè¿˜æœ‰å¥½å‡ ç§ç±»ä¼¼çš„åè®®ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»å­—é¢æ„æ€ä¸Šçœ‹ï¼Œ&lt;strong&gt;é€šè¿‡å­—ç¬¦ä¸²å­—é¢æ„æ€è¡¨è¾¾&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ä¸ªåè®®,  å°±æ˜¯è¯´å®ç°è¿™ä¸ªåè®®å¯ä»¥é€šè¿‡å­—é¢æ„æ€å®ä¾‹åŒ–è¿™ä¸ªç±»ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æŸ¥çœ‹ String è¿™ä¸ªç±», Swift å®é™…ä¸Šå·²ç»ç»™ String è¿™ä¸ªç±»å®ç°äº† &lt;code&gt;ExpressibleByStringLiteral&lt;/code&gt; è¿™ä¸ªåè®®ã€‚æ‰€ä»¥å¯ä»¥é€šè¿‡&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; aString = &lt;span class=&quot;string&quot;&gt;&quot;this is a string&quot;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ¥åˆå§‹åŒ–ä¸€ä¸ª String å¯¹è±¡ã€‚é€šè¿‡æŸ¥çœ‹&lt;a href=&quot;https://developer.apple.com/documentation/swift/expressiblebystringliteral&quot;&gt;æ–‡æ¡£&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªåè®®å·²ç»è¢«&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CSLocalizedString&lt;/li&gt;
&lt;li&gt;StaticString&lt;/li&gt;
&lt;li&gt;NSMutableString&lt;/li&gt;
&lt;li&gt;String&lt;/li&gt;
&lt;li&gt;NSString&lt;/li&gt;
&lt;li&gt;SubString&lt;/li&gt;
&lt;li&gt;Selector&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™å‡ ä¸ªä¸œè¥¿å®ç°äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªåè®®æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°è¿™ä¸ªåè®®ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬æ›´ç®€å•çš„åˆå§‹åŒ–ä¸€äº›ä¸œè¥¿ã€‚æ¯”å¦‚è¯´: URLã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­, æ¯æ¬¡åˆå§‹åŒ–ä¸€ä¸ª URL éƒ½éœ€è¦&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; urls = &lt;span class=&quot;type&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(string: &lt;span class=&quot;string&quot;&gt;&quot;https://www.baidu.com&quot;&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ ·æ¥åˆå§‹åŒ–ä¸€ä¸ª URL å‡ºæ¥ï¼Œ è¿™ä¸ªåˆå§‹åŒ–å‡ºæ¥çš„ URL åˆæ˜¯ä¸€ä¸ª optional çš„ï¼Œåœ¨ä½¿ç”¨çš„ä½¿ç”¨è¿˜éœ€è¦ç»™ä»–è§£åŒ…ä»€ä¹ˆçš„ã€‚ä½†æ˜¯æ¯æ¬¡éƒ½è¦è¿™æ ·å®åœ¨æ˜¯å¾ˆçƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªåè®®æ¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;URL&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;ExpressibleByStringLiteral&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(stringLiteral value: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;guard&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; url = &lt;span class=&quot;type&quot;&gt;URL&lt;/span&gt;(string: &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;subst&quot;&gt;\(value)&lt;/span&gt;&quot;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;preconditionFailure&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;This url: &lt;span class=&quot;subst&quot;&gt;\(value)&lt;/span&gt; is not invalid&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; = url&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>æœ€è¿‘å¾ˆç«çš„ Safe Area åˆ°åº•æ˜¯ä»€ä¹ˆ</title>
    <link href="http://www.CepheusSun.com/SafeArea.html"/>
    <id>http://www.CepheusSun.com/SafeArea.html</id>
    <published>2017-10-23T16:00:00.000Z</published>
    <updated>2017-10-24T08:38:49.358Z</updated>
    
    <content type="html"><![CDATA[<p>iOS 7 ä¹‹åè‹¹æœç»™ <em>UIViewController</em> å¼•å…¥äº† <em>topLayoutGuide</em> å’Œ <em>bottomLayoutGuide</em> ä¸¤ä¸ªå±æ€§æ¥æè¿°ä¸å¸Œæœ›è¢«é€æ˜çš„çŠ¶æ€æ æˆ–è€…å¯¼èˆªæ é®æŒ¡çš„æœ€é«˜ä½ç½®(status bar, navigation bar, toolbar, tab bar ç­‰)ã€‚è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ª length å±æ€§( <em>topLayoutGuide.length</em>)ã€‚ è¿™ä¸ªå€¼å¯èƒ½ç”±å½“å‰çš„ ViewController æˆ–è€… NavigationController æˆ–è€… TabbarController å†³å®šã€‚</p>
<ul>
<li>ä¸€ä¸ªç‹¬ç«‹çš„ViewControllerï¼Œä¸åŒ…å«äºä»»ä½•å…¶ä»–çš„ViewControllerã€‚å¦‚æœçŠ¶æ€æ å¯è§ï¼ŒtopLayoutGuideè¡¨ç¤ºçŠ¶æ€æ çš„åº•éƒ¨ï¼Œå¦åˆ™è¡¨ç¤ºè¿™ä¸ªViewControllerçš„ä¸Šè¾¹ç¼˜ã€‚</li>
<li>åŒ…å«äºå…¶ä»–ViewControllerçš„ViewControllerä¸å¯¹è¿™ä¸ªå±æ€§èµ·å†³å®šä½œç”¨ï¼Œè€Œæ˜¯ç”±å®¹å™¨ViewControllerå†³å®šè¿™ä¸ªå±æ€§çš„å«ä¹‰ï¼š<ul>
<li>å¦‚æœå¯¼èˆªæ ï¼ˆNavigation Barï¼‰å¯è§ï¼ŒtopLayoutGuideè¡¨ç¤ºå¯¼èˆªæ çš„åº•éƒ¨ã€‚</li>
<li>å¦‚æœçŠ¶æ€æ å¯è§ï¼ŒtopLayoutGuideè¡¨ç¤ºçŠ¶æ€æ çš„åº•éƒ¨ã€‚</li>
<li>å¦‚æœéƒ½ä¸å¯è§ï¼Œè¡¨ç¤ºViewControllerçš„ä¸Šè¾¹ç¼˜ã€‚<br>è¿™éƒ¨åˆ†è¿˜æ¯”è¾ƒå¥½ç†è§£ï¼Œæ€»ä¹‹æ˜¯å±å¹•ä¸Šæ–¹ä»»ä½•é®æŒ¡å†…å®¹çš„æ çš„æœ€åº•éƒ¨ã€‚</li>
</ul>
</li>
</ul>
<p>iOS 11 å¼€å§‹å¼ƒç”¨äº†è¿™ä¸¤ä¸ªå±æ€§ï¼Œ å¹¶ä¸”å¼•å…¥äº† Safe Area è¿™ä¸ªæ¦‚å¿µã€‚è‹¹æœå»ºè®®: <strong>ä¸è¦æŠŠ Control æ”¾åœ¨ Safe Area ä¹‹å¤–çš„åœ°æ–¹</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// These objects may be used as layout items in the NSLayoutConstraint API</span></div><div class="line"><span class="meta">@available</span>(iOS, introduced: <span class="number">7.0</span>, deprecated: <span class="number">11.0</span>)</div><div class="line">open <span class="keyword">var</span> topLayoutGuide: <span class="type">UILayoutSupport</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line"></div><div class="line"><span class="meta">@available</span>(iOS, introduced: <span class="number">7.0</span>, deprecated: <span class="number">11.0</span>)</div><div class="line">open <span class="keyword">var</span> bottomLayoutGuide: <span class="type">UILayoutSupport</span> &#123; <span class="keyword">get</span> &#125;</div></pre></td></tr></table></figure>
<p>ä»Šå¤©, æ¥ç ”ç©¶ä¸€ä¸‹ iOS 11 ä¸­æ–°å¼•å…¥çš„è¿™ä¸ª APIã€‚</p>
<a id="more"></a>
<h3 id="UIView-ä¸­çš„-safe-area"><a href="#UIView-ä¸­çš„-safe-area" class="headerlink" title="UIView ä¸­çš„ safe area"></a>UIView ä¸­çš„ safe area</h3><p>iOS 11 ä¸­ UIViewController çš„ topLayoutGuide å’Œ bottonLayoutGuide ä¸¤ä¸ªå±æ€§è¢« UIView ä¸­çš„ safe area æ›¿ä»£äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="keyword">var</span> safeAreaInsets: <span class="type">UIEdgeInsets</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line"></div><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">safeAreaInsetsDidChange</span><span class="params">()</span></span></div></pre></td></tr></table></figure>
<p><strong>safeAreaInsets</strong></p>
<p>è¿™ä¸ªå±æ€§è¡¨ç¤ºç›¸å¯¹äºå±å¹•å››ä¸ªè¾¹çš„é—´è·ï¼Œ è€Œä¸ä»…ä»…æ˜¯é¡¶éƒ¨è¿˜æœ‰åº•éƒ¨ã€‚è¿™ä¹ˆè¯´å¥½åƒæ²¡æœ‰ä»€ä¹ˆæ„Ÿè§‰, æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹è¿™ä¸ªä¸œè¥¿åˆ†åˆ«åœ¨ iPhone X å’Œ iPhone 8 ä¸­æ˜¯ä»€ä¹ˆæ ·çš„å§ï¼</p>
<p>ä»€ä¹ˆéƒ½æ²¡æœ‰åš, åªæ˜¯æ–°å»ºäº†ä¸€ä¸ªå·¥ç¨‹ç„¶ååœ¨ <code>Main.storyboard</code> ä¸­çš„ <em>UIViewController</em> ä¸­æ‹–äº†ä¸€ä¸ªæ©™è‰²çš„ View å¹¶ä¸”è®¾ç½®çº¦æŸä¸º:</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-23-035620.jpg" width="300"><br><br></center>

<p>åœ¨ <code>ViewController.swift</code> çš„ <code>viewDidLoad</code> ä¸­æ‰“å°</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        <span class="built_in">print</span>(view.safeAreaInsets)</div><div class="line">    &#125;</div><div class="line"><span class="comment">// æ— è®ºæ˜¯iPhone 8 è¿˜æ˜¯ iPhone X è¾“å‡ºç»“æœå‡ä¸º</span></div><div class="line"><span class="comment">// UIEdgeInsets(top: 0.0, left: 0.0, bottom: 0.0, right: 0.0)</span></div></pre></td></tr></table></figure>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-23-035012.jpg" width="500"><br><br></center>

<center>iPhone 8 VS iPhone X Safe Area (ç«–å±)</center>

<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-23-035302.jpg" width="500"><br><br></center>

<center>iPhone 8 VS iPhone X Safe Area (æ¨ªå±)</center>

<p>è¿™æ ·å¯¹æ¯”å¯ä»¥çœ‹å‡º, iPhone X åŒæ—¶å…·æœ‰ä¸Šä¸‹, è¿˜æœ‰å·¦å³çš„ Safe Areaã€‚</p>
<p><strong>å†æ¥çœ‹è¿™ä¸ªä¾‹å­: </strong> æ‹–ä¸¤ä¸ªè‡ªå®šä¹‰çš„ View, è¿™ä¸ª View ä¸Šæœ‰ä¸€ä¸ª æ˜¾ç¤ºå¾ˆå¤šå­—çš„Labelã€‚ç„¶åè®¾ç½®è¿™ä¸¤ä¸ª View çš„çº¦æŸåˆ†åˆ«æ˜¯:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> view1 = <span class="type">MyView</span>()</div><div class="line"><span class="keyword">let</span> view2 = <span class="type">MyView</span>()</div><div class="line">view.addSubview(view1)</div><div class="line">view.addSubview(view2)</div><div class="line"><span class="keyword">let</span> screenW = <span class="type">UIScreen</span>.main.bounds.size.width</div><div class="line"><span class="keyword">let</span> screenH = <span class="type">UIScreen</span>.main.bounds.size.height</div><div class="line"></div><div class="line">view1.frame = <span class="type">CGRect</span>(</div><div class="line">	x: <span class="number">0</span>,</div><div class="line">	y: <span class="number">0</span>,</div><div class="line">	width:screenW,</div><div class="line">	height: <span class="number">200</span>)</div><div class="line"></div><div class="line">view2.frame = <span class="type">CGRect</span>(</div><div class="line">	x: <span class="number">0</span>,</div><div class="line">	y: screenH - <span class="number">200</span>,</div><div class="line">	width:screenW,</div><div class="line">	height: <span class="number">200</span>)</div></pre></td></tr></table></figure>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-23-042453.jpg" width="300"><br><br></center>

<p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œ å­è§†å›¾è¢«é¡¶éƒ¨çš„åˆ˜æµ·ä»¥åŠåº•éƒ¨çš„ home æŒ‡ç¤ºåŒºæŒ¡ä½äº†ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ frame å¸ƒå±€æˆ–è€… auto layout æ¥ä¼˜åŒ–è¿™ä¸ªåœ°æ–¹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> insets = <span class="type">UIApplication</span>.shared.delegate?.window??.safeAreaInsets ?? <span class="type">UIEdgeInsets</span>.zero</div><div class="line">            </div><div class="line">view1.frame = <span class="type">CGRect</span>(</div><div class="line">	x: insets.<span class="keyword">left</span>,</div><div class="line">	y: insets.top,</div><div class="line">	width:view.bounds.width - insets.<span class="keyword">left</span> - insets.<span class="keyword">right</span>,</div><div class="line">	height: <span class="number">200</span>)</div><div class="line"></div><div class="line">view2.frame = <span class="type">CGRect</span>(</div><div class="line">	x: insets.<span class="keyword">left</span>,</div><div class="line">	y: screenH - insets.bottom - <span class="number">200</span>,</div><div class="line">	width:view.bounds.width - insets.<span class="keyword">left</span> - insets.<span class="keyword">right</span>,</div><div class="line">	height: <span class="number">200</span>)</div></pre></td></tr></table></figure>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-23-052419.jpg" width="300"><br><br></center>

<p>è¿™æ ·èµ·æ¥å¥½å¤šäº†,  è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ›´å¥½çš„åŠæ³•æ˜¯ç›´æ¥åœ¨è‡ªå®šä¹‰çš„ View ä¸­ä¿®æ”¹ Label çš„å¸ƒå±€:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutSubviews</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">super</span>.layoutSubviews()</div><div class="line">	<span class="keyword">if</span> #available(iOS <span class="number">11.0</span>, *) &#123;</div><div class="line">		label.frame = safeAreaLayoutGuide.layoutFrame</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-23-052726.jpg" width="300"><br><br></center>

<p>è¿™æ ·, ä¸ä»…ä»…æ˜¯åœ¨ ViewController ä¸­èƒ½å¤Ÿä½¿ç”¨ safe area äº†ã€‚</p>
<h3 id="UIViewController-ä¸­çš„-safe-area"><a href="#UIViewController-ä¸­çš„-safe-area" class="headerlink" title="UIViewController ä¸­çš„ safe area"></a>UIViewController ä¸­çš„ safe area</h3><p>åœ¨ iOS 11 ä¸­ UIViewController æœ‰ä¸€ä¸ªæ–°çš„å±æ€§</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="keyword">var</span> additionalSafeAreaInsets: <span class="type">UIEdgeInsets</span></div></pre></td></tr></table></figure>
<p>å½“ view controller çš„å­è§†å›¾è¦†ç›–äº†åµŒå…¥çš„å­ view controller çš„è§†å›¾çš„æ—¶å€™ã€‚æ¯”å¦‚è¯´ï¼Œ å½“ UINavigationController å’Œ UITabbarController ä¸­çš„ bar æ˜¯åŠé€æ˜(translucent) çŠ¶æ€çš„æ—¶å€™, å°±æœ‰ <code>additionalSafeAreaInsets</code></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-24-034928.jpg" width="300"></p>
<p>è‡ªå®šä¹‰çš„ View ä¸Šé¢çš„ label å¸ƒå±€å…¼å®¹äº† safe areaã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// UIView</span></div><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">safeAreaInsetsDidChange</span><span class="params">()</span></span></div><div class="line"></div><div class="line"><span class="comment">//UIViewController</span></div><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">viewSafeAreaInsetsDidChange</span><span class="params">()</span></span></div></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯ UIView å’Œ UIViewController çš„ safe area insets å‘ç”Ÿæ”¹å˜æ—¶è°ƒç”¨çš„æ–¹æ³•ï¼Œå¦‚æœéœ€è¦åšä¸€äº›å¤„ç†ï¼Œå¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•ã€‚æœ‰ç‚¹ç±»ä¼¼äº KVO çš„æ„æ€ã€‚</p>
<h4 id="æ¨¡æ‹Ÿ-iPhone-X-çš„-safe-area"><a href="#æ¨¡æ‹Ÿ-iPhone-X-çš„-safe-area" class="headerlink" title="æ¨¡æ‹Ÿ iPhone X çš„ safe area"></a>æ¨¡æ‹Ÿ iPhone X çš„ safe area</h4><p>é¢å¤–çš„ safe area insets ä¹Ÿèƒ½ç”¨æ¥æµ‹è¯•ä½ çš„ app æ˜¯å¦æ”¯æŒ iPhone Xã€‚åœ¨æ²¡æœ‰ iPhone X ä¹Ÿä¸æ–¹ä¾¿ä½¿ç”¨æ¨¡æ‹Ÿå™¨çš„æ—¶å€™ï¼Œ è¿™ä¸ªè¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//ç«–å±</div><div class="line">additionalSafeAreaInsets.top = 24.0</div><div class="line">additionalSafeAreaInsets.bottom = 34.0</div><div class="line"></div><div class="line">//ç«–å±, status bar éšè—</div><div class="line">additionalSafeAreaInsets.top = 44.0</div><div class="line">additionalSafeAreaInsets.bottom = 34.0</div><div class="line"></div><div class="line">//æ¨ªå±</div><div class="line">additionalSafeAreaInsets.left = 44.0</div><div class="line">additionalSafeAreaInsets.bottom = 21.0</div><div class="line">additionalSafeAreaInsets.right = 44.0</div></pre></td></tr></table></figure>
<h3 id="UIScrollView-ä¸­çš„-safe-area"><a href="#UIScrollView-ä¸­çš„-safe-area" class="headerlink" title="UIScrollView ä¸­çš„ safe area"></a>UIScrollView ä¸­çš„ safe area</h3><p>åœ¨ scroll view ä¸ŠåŠ ä¸€ä¸ª labelã€‚è®¾ç½®scroll çš„çº¦æŸä¸º:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">scrollView.snp.makeConstraints &#123; (make) <span class="keyword">in</span></div><div class="line">    make.edges.equalToSuperview()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-24-064951.jpg" width="300"></p>
<p>iOS 7 ä¸­å¼•å…¥ UIViewController çš„ <em>automaticallyAdjustsScrollViewInsets</em> å±æ€§åœ¨ iOS11 ä¸­è¢«åºŸå¼ƒæ‰äº†ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ UIScrollView  çš„ <em>contentInsetAdjustmentBehavior</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">UIScrollViewContentInsetAdjustmentBehavior</span> : <span class="title">Int</span> </span>&#123;    </div><div class="line">    <span class="keyword">case</span> automatic          <span class="comment">//default value</span></div><div class="line">    <span class="keyword">case</span> scrollableAxes</div><div class="line">    <span class="keyword">case</span> never</div><div class="line">    <span class="keyword">case</span> always</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="keyword">var</span> contentInsetAdjustmentBehavior: <span class="type">UIScrollViewContentInsetAdjustmentBehavior</span></div></pre></td></tr></table></figure>
<h4 id="Content-Insets-Adjustment-Behavior"><a href="#Content-Insets-Adjustment-Behavior" class="headerlink" title="Content Insets Adjustment Behavior"></a>Content Insets Adjustment Behavior</h4><p><em>never</em> ä¸åšè°ƒæ•´ã€‚</p>
<p><em>scrollableAxes</em> content insets åªä¼šé’ˆå¯¹ scrollview æ»šåŠ¨æ–¹å‘åšè°ƒæ•´ã€‚</p>
<p><em>always</em> content insets ä¼šé’ˆå¯¹ä¸¤ä¸ªæ–¹å‘éƒ½åšè°ƒæ•´ã€‚</p>
<p><em>automatic</em> è¿™æ˜¯é»˜è®¤å€¼ã€‚å½“ä¸‹é¢çš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œ å®ƒè·Ÿ always æ˜¯ä¸€ä¸ªæ„æ€</p>
<ul>
<li>èƒ½å¤Ÿæ°´å¹³æ»šåŠ¨ï¼Œä¸èƒ½å‚ç›´æ»šåŠ¨</li>
<li>scroll view æ˜¯ å½“å‰ view controller çš„ç¬¬ä¸€ä¸ªè§†å›¾</li>
<li>è¿™ä¸ªcontroller æ˜¯è¢«navigation controller æˆ–è€… tab bar controller ç®¡ç†çš„</li>
<li><em>automaticallyAdjustsScrollViewInsets</em> ä¸º true</li>
</ul>
<p>åœ¨å…¶ä»–æƒ…å†µä¸‹ <em>automoatc</em> è·Ÿ <em>scrollableAxes</em> ä¸€æ ·</p>
<h4 id="Adjusted-Content-Insets"><a href="#Adjusted-Content-Insets" class="headerlink" title="Adjusted Content Insets"></a>Adjusted Content Insets</h4><p>iOS 11 ä¸­ UIScrollView æ–°åŠ äº†ä¸€ä¸ªå±æ€§: <em>adjustedContentInset</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="keyword">var</span> adjustedContentInset: <span class="type">UIEdgeInsets</span> &#123; <span class="keyword">get</span> &#125;</div></pre></td></tr></table></figure>
<p><em>adjustedContentInset</em> å’Œ <em>contentInset</em> ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>åœ¨åŒæ—¶æœ‰ navigation å’Œ tab bar çš„ view controller ä¸­æ·»åŠ ä¸€ä¸ª scrollview ç„¶ååˆ†åˆ«æ‰“å°ä¸¤ä¸ªå€¼:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//iOS 10</span></div><div class="line"><span class="comment">//contentInset = UIEdgeInsets(top: 64.0, left: 0.0, bottom: 49.0, right: 0.0)</span></div><div class="line"><span class="comment">//iOS 11</span></div><div class="line"><span class="comment">//contentInset = UIEdgeInsets(top: 0.0, left: 0.0, bottom: 0.0, right: 0.0)</span></div><div class="line"><span class="comment">//adjustedContentInset = UIEdgeInsets(top: 64.0, left: 0.0, bottom: 49.0, right: 0.0)</span></div></pre></td></tr></table></figure>
<p>ç„¶åå†è®¾ç½®:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç»™ scroll view çš„å››ä¸ªæ–¹å‘éƒ½åŠ  10 çš„é—´è·</span></div><div class="line">scrollView.contentInset = <span class="type">UIEdgeInsets</span>(top: <span class="number">10</span>, <span class="keyword">left</span>: <span class="number">10</span>, bottom: <span class="number">10</span>, <span class="keyword">right</span>: <span class="number">10</span>)</div></pre></td></tr></table></figure>
<p>æ‰“å°:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//iOS 10</span></div><div class="line"><span class="comment">//contentInset = UIEdgeInsets(top: 74.0, left: 10.0, bottom: 59.0, right: 10.0)</span></div><div class="line"><span class="comment">//iOS 11</span></div><div class="line"><span class="comment">//contentInset = UIEdgeInsets(top: 10.0, left: 10.0, bottom: 10.0, right: 10.0)</span></div><div class="line"><span class="comment">//adjustedContentInset = UIEdgeInsets(top: 74.0, left: 10.0, bottom: 59.0, right: 10.0)</span></div></pre></td></tr></table></figure>
<p>ç”±æ­¤å¯è§ï¼Œåœ¨ iOS 11 ä¸­ scroll view å®é™…çš„ content inset å¯ä»¥é€šè¿‡ <em>adjustedContentInset</em> è·å–ã€‚è¿™å°±æ˜¯è¯´å¦‚æœä½ è¦é€‚é… iOS 10 çš„è¯ã€‚è¿™ä¸€éƒ¨åˆ†çš„é€»è¾‘æ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<p>ç³»ç»Ÿè¿˜æä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥ç›‘å¬è¿™ä¸ªå±æ€§çš„æ”¹å˜</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//UIScrollView</span></div><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">adjustedContentInsetDidChange</span><span class="params">()</span></span></div><div class="line"></div><div class="line"><span class="comment">//UIScrollViewDelegate</span></div><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line"><span class="keyword">optional</span> <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">scrollViewDidChangeAdjustedContentInset</span><span class="params">(<span class="number">_</span> scrollView: UIScrollView)</span></span></div></pre></td></tr></table></figure>
<h3 id="UITableView-ä¸­çš„-safe-area"><a href="#UITableView-ä¸­çš„-safe-area" class="headerlink" title="UITableView ä¸­çš„ safe area"></a>UITableView ä¸­çš„ safe area</h3><p>æˆ‘ä»¬ç°åœ¨å†æ¥çœ‹ä¸€ä¸‹ UITableView ä¸­ safe area çš„æƒ…å†µã€‚æˆ‘ä»¬å…ˆæ·»åŠ ä¸€ä¸ªæœ‰è‡ªå®šä¹‰ header ä»¥åŠè‡ªå®šä¹‰ cell çš„ tableviewã€‚è®¾ç½®è¾¹æ¡†ä¸º self.view çš„è¾¹æ¡†ã€‚ä¹Ÿå°±æ˜¯</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tableView.snp.makeConstraints &#123; (make) <span class="keyword">in</span></div><div class="line">	make.edges.equalToSuperview()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tableView.frame = view.bounds</div></pre></td></tr></table></figure>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-23-073208.jpg"></p>
<p>è‡ªå®šä¹‰çš„ header ä¸Šé¢æœ‰ä¸€ä¸ª lableï¼Œè‡ªå®šä¹‰çš„ cell ä¸Šé¢ä¹Ÿæœ‰ä¸€ä¸ª labelã€‚å°†å±å¹•æ¨ªå±ä¹‹åä¼šå‘ç°ï¼Œcell ä»¥åŠ header çš„å¸ƒå±€å‡è‡ªåŠ¨ç•™å‡ºäº† safe area ä»¥å¤–çš„è·ç¦»ã€‚cell è¿˜æ˜¯é‚£ä¹ˆå¤§ï¼Œåªæ˜¯ cell çš„ contnt view ç•™å‡ºäº†ç›¸åº”çš„è·ç¦»ã€‚è¿™å…¶å®æ˜¯ UITableView ä¸­æ–°å¼•å…¥çš„å±æ€§ç®¡ç†çš„:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="keyword">var</span> insetsContentViewsToSafeArea: <span class="type">Bool</span></div></pre></td></tr></table></figure>
<p><code>insetsContentViewsToSafeArea</code> çš„é»˜è®¤å€¼æ˜¯ trueï¼Œ å°†å…¶è®¾ç½®æˆ no ä¹‹å:</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-24-025524.jpg"></p>
<p>å¯ä»¥çœ‹å‡ºæ¥ footer å’Œ cell çš„ content view çš„å¤§å°è·Ÿ cell çš„å¤§å°ç›¸åŒäº†ã€‚è¿™å°±æ˜¯è¯´ï¼š<strong>åœ¨ iOS 11 ä¸‹, å¹¶ä¸éœ€è¦æ”¹å˜ header/footer/cell çš„å¸ƒå±€ï¼Œ ç³»ç»Ÿä¼šè‡ªåŠ¨åŒºé€‚é… safe area</strong></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯, Xcode 9 ä¸­ä½¿ç”¨ IB æ‹–å‡ºæ¥çš„ TableView é»˜è®¤çš„è¾¹æ¡†æ˜¯ safe area çš„ã€‚æ‰€ä»¥å®é™…è¿è¡Œèµ·æ¥ tableview éƒ½æ˜¯åœ¨ safe area ä¹‹å†…çš„ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-24-live.gif"></p>
<h3 id="UICollectionView-ä¸­çš„-safe-area"><a href="#UICollectionView-ä¸­çš„-safe-area" class="headerlink" title="UICollectionView ä¸­çš„ safe area"></a>UICollectionView ä¸­çš„ safe area</h3><p>æˆ‘ä»¬åœ¨åšä¸€ä¸ªç›¸åŒçš„ collection view æ¥çœ‹ä¸€ä¸‹ collection view ä¸­æ˜¯ä»€ä¹ˆæƒ…å†µ:</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-24-025524.jpg"></p>
<p>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨äº† <code>UICollectionViewFlowLayout</code> çš„ collection viewã€‚ æ»‘åŠ¨æ–¹å‘æ˜¯ç«–å‘çš„ã€‚cell é€æ˜ï¼Œ cell çš„ content view æ˜¯ç™½è‰²çš„ã€‚è¿™äº›éƒ½è·Ÿä¸Šé¢ table view ä¸€æ ·ã€‚header(UICollectionReusableView) æ²¡æœ‰ content view çš„æ¦‚å¿µ, æ‰€ä»¥ç»™å…¶è‡ªèº«è®¾ç½®äº†çº¢è‰²çš„èƒŒæ™¯ã€‚</p>
<p>ä»æˆªå›¾ä¸Šå¯ä»¥çœ‹å‡ºæ¥ï¼Œ collection view å¹¶æ²¡æœ‰é»˜è®¤ç»™ header cell footer æ·»åŠ safe area çš„é—´è·ã€‚èƒ½å¤Ÿå°†å¸ƒå±€è°ƒæ•´åˆ°åˆé€‚çš„æƒ…å†µçš„æ–¹æ³•åªæœ‰å°† header/ footer / cell çš„å­è§†å›¾è·Ÿå…¶ safe area å…³è”èµ·æ¥ã€‚è·Ÿ IB ä¸­æ‹– table view ä¸€ä¸ªé“ç†ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-24-030448.jpg"></p>
<p>ç°åœ¨æˆ‘ä»¬å†è¯•è¯•æŠŠå¸ƒå±€è°ƒæ•´æˆæ›´åƒ collection view é‚£æ ·:</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-24-030732.jpg"></p>
<p>æˆªå›¾ä¸Šå¯ä»¥çœ‹å‡ºæ¥æ¨ªå±ä¸‹, å·¦å³ä¸¤è¾¹çš„ cell éƒ½è¢«åˆ˜æµ·æŒ¡ä½äº†ã€‚è¿™ç§æƒ…å†µä¸‹, æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ section insets æ¥é€‚é… safe area æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯å† iOS 11 ä¸­ï¼Œ UICollectionViewFlowLayout æä¾›äº†ä¸€ä¸ªæ–°çš„å±æ€§ <em>sectionInsetReference</em> æ¥å¸®ä½ åšè¿™ä»¶äº‹æƒ…ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">UICollectionViewFlowLayoutSectionInsetReference</span> : <span class="title">Int</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">case</span> fromContentInset</div><div class="line"></div><div class="line">    <span class="keyword">case</span> fromSafeArea</div><div class="line"></div><div class="line">    <span class="keyword">case</span> fromLayoutMargins</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/// The reference boundary that the section insets will be defined as relative to. Defaults to `.fromContentInset`.</span></div><div class="line"><span class="comment">/// <span class="doctag">NOTE:</span> Content inset will always be respected at a minimum. For example, if the sectionInsetReference equals `.fromSafeArea`, but the adjusted content inset is greater that the combination of the safe area and section insets, then section content will be aligned with the content inset instead.</span></div><div class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</div><div class="line">open <span class="keyword">var</span> sectionInsetReference: <span class="type">UICollectionViewFlowLayoutSectionInsetReference</span></div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œç³»ç»Ÿé»˜è®¤æ˜¯ä½¿ç”¨ <code>.fromContentInset</code> æˆ‘ä»¬å†åˆ†åˆ«ä¿®æ”¹, çœ‹å…·ä½“ä¼šæ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚ </p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-24-032133.jpg"></p>
<center>fromSafeArea</center>

<p>è¿™ç§æƒ…å†µä¸‹ section content insets ç­‰äºåŸæ¥çš„å¤§å°åŠ ä¸Š safe area insets çš„å¤§å°ã€‚</p>
<p>è·Ÿä½¿ç”¨ <code>.fromLayoutMargins</code> ç›¸ä¼¼ä½¿ç”¨è¿™ä¸ªå±æ€§ colection view çš„ layout margins ä¼šè¢«æ·»åŠ åˆ° section content insets ä¸Šé¢ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-24-032133.jpg"></p>
<h3 id="IB-ä¸­çš„-Safe-Area"><a href="#IB-ä¸­çš„-Safe-Area" class="headerlink" title="IB ä¸­çš„ Safe Area"></a>IB ä¸­çš„ Safe Area</h3><p>å‰é¢çš„ä¾‹å­éƒ½è¯´çš„æ˜¯ç”¨ä»£ç å¸ƒå±€è¦å®ç°çš„éƒ¨åˆ†ã€‚ä½†æ˜¯å¾ˆå¤šäººéƒ½è¿˜æ˜¯ä¹ æƒ¯ç”¨ Interface Builder æ¥å†™ UI ç•Œé¢ã€‚è‹¹æœåœ¨ WWDC 2107 Session 412 ä¸­æåˆ°:<strong>Storyboards ä¸­çš„ safe area æ˜¯å‘ä¸‹å…¼å®¹çš„</strong> ä¹Ÿå°±æ˜¯è¯´, å³ä½¿åœ¨ iOS10 åŠä»¥ä¸‹çš„ target ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ safe area æ¥åšå¸ƒå±€ã€‚<strong>å”¯ä¸€éœ€è¦åšçš„å°±æ˜¯ç»™æ¯ä¸ª stroyboard å‹¾é€‰ Use Safe Area Layout Guide</strong>ã€‚å®é™…æµ‹è¯•çœ‹ï¼Œåº”è¯¥æ˜¯ iOS9 ä»¥åéƒ½åªéœ€è¦è¿™ä¹ˆåšã€‚</p>
<p><strong>çŸ¥è¯†ç‚¹</strong>: åœ¨ä½¿ç”¨ IB è®¾ç½®çº¦æŸä¹‹åï¼Œ æ³¨æ„çœ‹ç›¸å¯¹çš„æ˜¯ superview è¿˜æ˜¯ topLayoutGuide/bottomLayoutGuideï¼Œ åŒ…æ‹¬åœ¨ Xcode 9 ä¸­å‹¾é€‰äº† Use Safe Area Layout Guide ä¹‹åï¼Œé»˜è®¤åº”è¯¥æ˜¯ç›¸å¯¹äº safe area äº†ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol>
<li>åœ¨é€‚é… iPhone X çš„æ—¶å€™é¦–å…ˆæ˜¯è¦ç†è§£ safe area æ˜¯æ€ä¹ˆå›äº‹ã€‚ç›²ç›®çš„ <code>if iPhoneX{}</code> åªä¼šç»™ä¹‹åçš„å·¥ä½œä»£ç æ›´å¤šçš„éº»çƒ¦ã€‚</li>
<li>å¦‚æœåªéœ€è¦é€‚é…åˆ° iOS9 ä¹‹å‰çš„ storyboard éƒ½åªéœ€è¦åšä¸€ä»¶äº‹æƒ…ã€‚</li>
<li>Xcode9 ç”¨ IB å¯ä»¥çœ‹å¾—å‡ºæ¥, safe area åˆ°å¤„éƒ½æ˜¯äº†ã€‚ç†è§£èµ·æ¥å¾ˆç®€å•ã€‚å°±æ˜¯ç³»ç»Ÿå¯¹æ¯ä¸ª View éƒ½æ·»åŠ äº† safe areaï¼Œ è¿™ä¸ªåŒºåŸŸçš„å¤§å°ï¼Œæ˜¯å¦è·Ÿ view çš„å¤§å°ç›¸åŒæ˜¯ç³»ç»Ÿæ¥å†³å®šçš„ã€‚åœ¨è¿™ä¸ª View ä¸Šçš„å¸ƒå±€åªéœ€è¦ç›¸å¯¹äº safe area å°±å¯ä»¥äº†ã€‚æ¯ä¸ª View çš„ safe area éƒ½å¯ä»¥é€šè¿‡ iOS 11 æ–°å¢çš„ API <strong>safeAreaInsets</strong> æˆ–è€… <strong>safeAreaLayoutGuide</strong> è·å–ã€‚</li>
<li>å¯¹ä¸ UIViewController æ¥è¯´æ–°å¢äº† <strong>additionalSafeAreaInsets</strong> è¿™ä¸ªå±æ€§, ç”¨æ¥ç®¡ç†æœ‰ tabbar æˆ–è€… navigation bar çš„æƒ…å†µä¸‹é¢å¤–çš„æƒ…å†µã€‚</li>
<li>å¯¹äº UIScrollViewï¼Œ UITableViewï¼Œ UICollectionView è¿™ä¸‰ä¸ªæ§ä»¶æ¥è¯´ï¼Œç³»ç»Ÿä»¥åŠåšäº†å¤§å¤šæ•°çš„äº‹æƒ…ã€‚<ul>
<li>scrollView åªéœ€è¦è®¾ç½® contentInsetAdjustmentBehavior å°±å¯ä»¥å¾ˆå®¹æ˜“çš„é€‚é…å¸¦ iPhoneX</li>
<li>tableView åªéœ€è¦åœ¨ cell header footer ç­‰è®¾ç½®çº¦æŸçš„æ—¶å€™ç›¸å¯¹äº safe area æ¥åš</li>
<li>å¯¹ collection view æ¥è¯´ä¿®æ”¹ <em>sectionInsetReference</em> ä¸º .safeArea å°±å¯ä»¥åšå¤§å¤šæ•°çš„äº‹æƒ…äº†ã€‚</li>
</ul>
</li>
<li>æ€»çš„æ¥è¯´ï¼Œ safe area å¯ä»¥çœ‹ä½œæ˜¯ç³»ç»Ÿåœ¨æ‰€æœ‰çš„ view ä¸ŠåŠ äº†ä¸€ä¸ªè™šæ‹Ÿçš„ viewï¼Œ è¿™ä¸ªè™šæ‹Ÿçš„ view çš„å¤§å°ç­‰éƒ½æ˜¯è·Ÿ view çš„ä½ç½®ç­‰æœ‰å…³çš„(å½“ç„¶æ˜¯åœ¨ iPhoneXä¸Šæ‰æœ‰å€¼) <strong>ä»¥ååœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œè‡ªå®šä¹‰çš„æ§ä»¶éƒ½å°½é‡é’ˆå¯¹ safe area è¿™ä¸ªè™šæ‹Ÿçš„ view è¿›è¡Œå¸ƒå±€ã€‚</strong></li>
</ol>
<p><a href="https://medium.com/rosberryapps/ios-safe-area-ca10e919526f">å‚è€ƒæ–‡ç« </a> å¯èƒ½éœ€è¦æ¢¯å­<br><a href="https://useyourloaf.com/blog/safe-area-layout-guide/">å‚è€ƒæ–‡ç« </a> å¯èƒ½éœ€è¦æ¢¯å­</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;iOS 7 ä¹‹åè‹¹æœç»™ &lt;em&gt;UIViewController&lt;/em&gt; å¼•å…¥äº† &lt;em&gt;topLayoutGuide&lt;/em&gt; å’Œ &lt;em&gt;bottomLayoutGuide&lt;/em&gt; ä¸¤ä¸ªå±æ€§æ¥æè¿°ä¸å¸Œæœ›è¢«é€æ˜çš„çŠ¶æ€æ æˆ–è€…å¯¼èˆªæ é®æŒ¡çš„æœ€é«˜ä½ç½®(status bar, navigation bar, toolbar, tab bar ç­‰)ã€‚è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ª length å±æ€§( &lt;em&gt;topLayoutGuide.length&lt;/em&gt;)ã€‚ è¿™ä¸ªå€¼å¯èƒ½ç”±å½“å‰çš„ ViewController æˆ–è€… NavigationController æˆ–è€… TabbarController å†³å®šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªç‹¬ç«‹çš„ViewControllerï¼Œä¸åŒ…å«äºä»»ä½•å…¶ä»–çš„ViewControllerã€‚å¦‚æœçŠ¶æ€æ å¯è§ï¼ŒtopLayoutGuideè¡¨ç¤ºçŠ¶æ€æ çš„åº•éƒ¨ï¼Œå¦åˆ™è¡¨ç¤ºè¿™ä¸ªViewControllerçš„ä¸Šè¾¹ç¼˜ã€‚&lt;/li&gt;
&lt;li&gt;åŒ…å«äºå…¶ä»–ViewControllerçš„ViewControllerä¸å¯¹è¿™ä¸ªå±æ€§èµ·å†³å®šä½œç”¨ï¼Œè€Œæ˜¯ç”±å®¹å™¨ViewControllerå†³å®šè¿™ä¸ªå±æ€§çš„å«ä¹‰ï¼š&lt;ul&gt;
&lt;li&gt;å¦‚æœå¯¼èˆªæ ï¼ˆNavigation Barï¼‰å¯è§ï¼ŒtopLayoutGuideè¡¨ç¤ºå¯¼èˆªæ çš„åº•éƒ¨ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœçŠ¶æ€æ å¯è§ï¼ŒtopLayoutGuideè¡¨ç¤ºçŠ¶æ€æ çš„åº•éƒ¨ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœéƒ½ä¸å¯è§ï¼Œè¡¨ç¤ºViewControllerçš„ä¸Šè¾¹ç¼˜ã€‚&lt;br&gt;è¿™éƒ¨åˆ†è¿˜æ¯”è¾ƒå¥½ç†è§£ï¼Œæ€»ä¹‹æ˜¯å±å¹•ä¸Šæ–¹ä»»ä½•é®æŒ¡å†…å®¹çš„æ çš„æœ€åº•éƒ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;iOS 11 å¼€å§‹å¼ƒç”¨äº†è¿™ä¸¤ä¸ªå±æ€§ï¼Œ å¹¶ä¸”å¼•å…¥äº† Safe Area è¿™ä¸ªæ¦‚å¿µã€‚è‹¹æœå»ºè®®: &lt;strong&gt;ä¸è¦æŠŠ Control æ”¾åœ¨ Safe Area ä¹‹å¤–çš„åœ°æ–¹&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// These objects may be used as layout items in the NSLayoutConstraint API&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@available&lt;/span&gt;(iOS, introduced: &lt;span class=&quot;number&quot;&gt;7.0&lt;/span&gt;, deprecated: &lt;span class=&quot;number&quot;&gt;11.0&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;open &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; topLayoutGuide: &lt;span class=&quot;type&quot;&gt;UILayoutSupport&lt;/span&gt; &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt; &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@available&lt;/span&gt;(iOS, introduced: &lt;span class=&quot;number&quot;&gt;7.0&lt;/span&gt;, deprecated: &lt;span class=&quot;number&quot;&gt;11.0&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;open &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; bottomLayoutGuide: &lt;span class=&quot;type&quot;&gt;UILayoutSupport&lt;/span&gt; &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt; &amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä»Šå¤©, æ¥ç ”ç©¶ä¸€ä¸‹ iOS 11 ä¸­æ–°å¼•å…¥çš„è¿™ä¸ª APIã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://www.CepheusSun.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="iOS11" scheme="http://www.CepheusSun.com/tags/iOS11/"/>
    
  </entry>
  
  <entry>
    <title>Swift4 ä¸­çš„èŒƒå‹çº¦æŸ</title>
    <link href="http://www.CepheusSun.com/Swift4%E4%B8%AD%E7%9A%84%E8%8C%83%E5%9E%8B%E7%BA%A6%E6%9D%9F.html"/>
    <id>http://www.CepheusSun.com/Swift4ä¸­çš„èŒƒå‹çº¦æŸ.html</id>
    <published>2017-10-18T16:00:00.000Z</published>
    <updated>2017-10-19T09:58:50.192Z</updated>
    
    <content type="html"><![CDATA[<p>èŒƒå‹å¯ä»¥è¯´æ˜¯ Swift è·Ÿ OC ç›¸æ¯”æœ€å¤§çš„ä¼˜åŠ¿äº†ã€‚é€šè¿‡ç»™åƒé›†åˆè¿™ç±»ä¸œè¥¿å…³è”èŒƒå‹, å¯ä»¥å†™å‡ºæ›´å¯é¢„æµ‹å¹¶ä¸”æ›´å®‰å…¨çš„ä»£ç ã€‚åœ¨ Swift4 ä¸­ç±»å‹çº¦æŸæ›´ä¸ºå¼ºå¤§ï¼Œ å®ƒèƒ½å¤Ÿè®©æˆ‘ä»¬æ›´èƒ½å¤Ÿè½»è€Œæ˜“ä¸¾çš„åšå¾ˆå¤šäº‹æƒ…ã€‚å³ä½¿æ˜¯é€šç”¨ä»£ç , ä¹Ÿèƒ½å……åˆ†çš„åˆ©ç”¨ Swift çš„ç±»å‹ç³»ç»Ÿã€‚</p>
<h2 id="ä¾‹1"><a href="#ä¾‹1" class="headerlink" title="ä¾‹1:"></a>ä¾‹1:</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚æ¯”å¦‚è¯´ç»™ä¸€ä¸ªæ•°å­—æ•°å­—æ±‚å’Œã€‚æˆ‘ä»¬å¯èƒ½ä¼šäº›è¿™æ ·çš„ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åœ¨è¿™æ®µä»£ç ä¸­, æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•, æ¥å—ä¸€ä¸ª Int æ•°ç»„ä½œä¸ºå‚æ•°, åœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨é«˜é˜¶å‡½æ•° reduce æœ€åè¿”å›è¿™ä¸ªç»“æœã€‚</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(<span class="number">_</span> numbers: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">return</span> numbers.<span class="built_in">reduce</span>(<span class="number">0</span>, +)</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line">sum(array) <span class="comment">// 15</span></div></pre></td></tr></table></figure>
<p>ä½¿ç”¨èŒƒå‹çº¦æŸ, æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å®ç°è¿™ä¸ªéœ€æ±‚:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åœ¨è¿™æ®µä»£ç ä¸­, æˆ‘ä»¬ç»™ Array æ·»åŠ äº†ç±»å‹çº¦æŸçš„ Extensionã€‚å½“æ•°ç»„çš„ Element éµå®ˆäº† Numeric åè®®çš„æ—¶å€™, Array å°±æ‹¥æœ‰ sum è¿™ä¸ªæ–¹æ³•ã€‚</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span> <span class="title">where</span> <span class="title">Element</span>: <span class="title">Numeric</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">()</span></span> -&gt; <span class="type">Element</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">reduce</span>(<span class="number">0</span>, +)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">array.sum() <span class="comment">// 15</span></div></pre></td></tr></table></figure>
<p>ä¸¤è€…ç›¸æ¯”, ä½¿ç”¨èŒƒå‹çº¦æŸæœ€å¤§çš„ä¼˜åŠ¿æ˜¯ä½¿ç”¨æ‰©å±•, èƒ½å¤Ÿè®©è¿™ä¸ªåŠŸèƒ½è·Ÿè°ƒç”¨è€…æ›´ç´§å¯†ã€‚æ¯”è¾ƒä¸€ä¸‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> sum = sum(array)</div><div class="line"><span class="keyword">let</span> sum = array.sum()</div></pre></td></tr></table></figure>
<p>åœ¨ OC é‡Œé¢ï¼Œ å¯èƒ½æœ‰äº›åŒå­¦ä¼šå†™ä¸€ä¸ª <code>XXXTool</code> ä¹‹ç±»çš„ç±», æ¥å°è£…è¿™ç§ç±»å‹çš„åŠŸèƒ½ã€‚ æˆ–è€…æ˜¯ç›´æ¥å†™æˆ C çš„å‡½æ•°ã€‚ä½†æ˜¯ä¸è®ºæ€ä¹ˆå†™,  è¿™æ ·è²Œä¼¼éƒ½ä¸æ˜¯ç‰¹åˆ«çš„ OOPã€‚æˆ–è€…OC è¿˜å¯ä»¥ç›´æ¥ç»™ NSArray åŠ ä¸€ä¸ª category, ç„¶åå†å®ç°ç›¸ä¼¼çš„åŠŸèƒ½ã€‚ä½†æ˜¯, è¿™æ ·åšä¸å°±ç­‰äºæ‰€æœ‰çš„ array éƒ½å…·æœ‰è¿™ä¸ªåŠŸèƒ½äº†å—ï¼Ÿ</p>
<a id="more"></a>
<h2 id="ä¾‹2"><a href="#ä¾‹2" class="headerlink" title="ä¾‹2"></a>ä¾‹2</h2><p>å†æ¥çœ‹è¿™æ ·çš„éœ€æ±‚: è®¡ç®—æŸä¸ªåŒ…å«å­—ç¬¦ä¸²é›†åˆä¸­æœ‰å¤šå°‘ä¸ªå•è¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™é›†åˆæ·»åŠ ä¸€ä¸ªæ‰©å±•è½»æ¾çš„å®Œæˆè¿™ä»¶äº‹æƒ…ã€‚ç»™ <code>Collection</code> æ·»åŠ ä¸€ä¸ªçº¦æŸ, é™åˆ¶é›†åˆä¸­çš„ <code>Element</code> æ˜¯ <code>String</code>ç±»å‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Collection</span> <span class="title">where</span> <span class="title">Element</span> == <span class="title">String</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">countWords</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">reduce</span>(<span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">let</span> components = $<span class="number">1</span>.components(separatedBy: .whitespacesAndNewlines)</div><div class="line">            <span class="keyword">return</span> $<span class="number">0</span> + components.<span class="built_in">count</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> array2 = [<span class="string">"sunny"</span>,<span class="string">"cloudy"</span>,<span class="string">"apple orange"</span>]</div><div class="line">array2.countWords() <span class="comment">// 4</span></div></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸€ä¸ªå¾ˆé…·çš„åšæ³•æ˜¯çº¦æŸé›†åˆç±»å‹ä¸­çš„ <code>Element</code> æ˜¯ <code>Closure</code>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Sequence</span> <span class="title">where</span> <span class="title">Element</span> ==  () -&gt; <span class="title">Void</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">callAll</span><span class="params">()</span></span> &#123;</div><div class="line">        forEach &#123; $<span class="number">0</span>() &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> closure1 = &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"1"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> closure2 = &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"2"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> array3 = [closure1, closure2]</div><div class="line">array3.callAll() </div><div class="line"><span class="comment">//1</span></div><div class="line"><span class="comment">//2</span></div></pre></td></tr></table></figure>
<h2 id="ä¾‹3"><a href="#ä¾‹3" class="headerlink" title="ä¾‹3"></a>ä¾‹3</h2><p>è¿˜æœ‰ä¸€ä¸ªå¾ˆå¥½ç”¨çš„ç‰¹æ€§æ˜¯ä½¿ç”¨åè®®å®šä¹‰ API çš„æ—¶å€™ã€‚è¿™å‡ ä¹æ˜¯å†™å¯æµ‹è¯•ä»£ç ä»¥åŠåŠŸèƒ½è§£è€¦çš„æœ€ä½³å®è·µäº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨éœ€è¦çµæ´»ä½¿ç”¨åµŒå¥—ç±»å‹çš„æ—¶å€™, è¿™å¯èƒ½ä¼šæœ‰ç‚¹éº»çƒ¦ã€‚</p>
<p>çœ‹ä¾‹å­å§ï¼æˆ‘ä»¬ç»å¸¸éƒ½æƒ³è¦å®šä¹‰ä¸€äº›é€šç”¨çš„ APIï¼Œ æ¥ç®¡ç†ç¨‹åºä¸­çš„å„ç§ modelã€‚è¿™æ—¶å€™è‚¯å®šä¼šæƒ³è¦å®šä¹‰ä¸€ä¸ªåè®®:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ModelManager</span> </span>&#123;</div><div class="line">    associatedtype <span class="type">Model</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å†æ¥å®šä¸€ä¸ªæŸ¥æ‰¾ç¬¦åˆæŸä¸ªæ¡ä»¶çš„æ–¹æ³•:ä¼ å…¥æŸä¸ªæŸ¥è¯¢æ¡ä»¶, ç„¶åè¿”å›ç¬¦åˆè¿™ä¸ªæ¡ä»¶çš„æ¨¡å‹æ•°ç»„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ModelManager</span> </span>&#123;</div><div class="line">    associatedtype <span class="type">Model</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">models</span><span class="params">(matching query: String)</span></span> -&gt; [<span class="type">Model</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™ï¼Œ è¿™ä¸ªåè®®å˜æˆäº†è¿™æ ·ã€‚è¿™ä¸ªæ ·å­ä¾ç„¶æœ‰é—®é¢˜ï¼Œä¸å¤Ÿçµæ´», è€Œä¸”è¿˜æœ‰ä¸€ä¸ªå¾ˆææ€–çš„é—®é¢˜: ç¡¬ç¼–ç ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¯•ç€ä½¿ç”¨èŒƒå‹çº¦æŸæ¥ä½¿ç”¨ Swift çš„ç±»å‹ç³»ç»Ÿ, è®©è¿™ä¸ªåŠŸèƒ½æ›´çµæ´», å¹¶ä¸”ä½¿ç”¨ç±»å‹ç³»ç»Ÿæ¥è§£å†³ç¡¬ç¼–ç çš„é—®é¢˜ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œ å†ç»™ <code>ModelManager</code>  å…³è”ä¸¤ä¸ªç±»å‹ï¼Œ <code>Query</code> å’Œ <code>Collection</code>ã€‚<code>Query</code> ç”¨æ¥æè¿°æŸ¥è¯¢çš„æ¡ä»¶ã€‚ä»–å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿, åªè¦èƒ½å¤Ÿæè¿°æŸ¥è¯¢æ¡ä»¶å°±å¯ä»¥ã€‚å½“ç„¶, ä¸ªäººè®¤ä¸ºå¯èƒ½ enum æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚<code>Collection</code>ç”¨æ¥æè¿°æŸ¥è¯¢ç»“æœ, ä»–ç”¨æ¥é™åˆ¶è¿”å›çš„ç»“æœå°±æ˜¯è¿™ä¸ªç®¡ç†ç±»çš„æ¨¡å‹ã€‚ç°åœ¨è¿™ä¸ªåè®®å°±æˆè¿™æ ·äº†:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ModelManager</span> </span>&#123;</div><div class="line">    associatedtype <span class="type">Model</span></div><div class="line">    associatedtype <span class="type">Collection</span>: <span class="type">Swift</span>.<span class="type">Collection</span> <span class="keyword">where</span> <span class="type">Collection</span>.<span class="type">Element</span> == <span class="type">Model</span></div><div class="line">    associatedtype <span class="type">Query</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">models</span><span class="params">(matching query: Query)</span></span> -&gt; <span class="type">Collection</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ‰äº†ä¸Šé¢çš„åŸºç¡€, å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°ä¸€äº›å…·æœ‰æŸ¥è¯¢åŠŸèƒ½çš„æ¨¡å‹ç®¡ç†ç±»äº†ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬è¦ç”¨æˆ·ç®¡ç†ç±», éœ€è¦é€šè¿‡ç”¨æˆ·å§“åå’Œå¹´é¾„æ®µæ¥æŸ¥è¯¢ç¬¦åˆè¦æ±‚çš„ç”¨æˆ·:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å®šä¹‰ User æ¨¡å‹</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">User</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// å®šä¹‰ User ç®¡ç†ç±»</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserManager</span>: <span class="title">ModelManager</span> </span>&#123;</div><div class="line">    <span class="keyword">typealias</span> <span class="type">Model</span> = <span class="type">User</span></div><div class="line">    <span class="comment">// æŸ¥è¯¢æ¡ä»¶, å§“åæˆ–è€…å¹´é¾„</span></div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Query</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> name(<span class="type">String</span>)</div><div class="line">        <span class="keyword">case</span> ageRange(<span class="type">Range</span>&lt;<span class="type">Int</span>&gt;)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// æŸ¥è¯¢æ–¹æ³•</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">models</span><span class="params">(matching query: Query)</span></span> -&gt; [<span class="type">User</span>] &#123;</div><div class="line">        <span class="comment">// è¿™é‡Œåšäº†å‡ ä¸ªå‡çš„æ•°æ®</span></div><div class="line">        <span class="keyword">let</span> user1 = <span class="type">User</span>(</div><div class="line">            name: <span class="string">"sunny"</span>,</div><div class="line">            age: <span class="number">25</span>)</div><div class="line">        <span class="keyword">let</span> user2 = <span class="type">User</span>(</div><div class="line">            name: <span class="string">"lily"</span>,</div><div class="line">            age: <span class="number">18</span>)</div><div class="line">        <span class="keyword">let</span> user3 = <span class="type">User</span>(</div><div class="line">            name: <span class="string">"michael"</span>,</div><div class="line">            age: <span class="number">30</span>)</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> users = [user1, user2, user3]</div><div class="line">        </div><div class="line">        <span class="keyword">switch</span> query &#123;</div><div class="line">        <span class="keyword">case</span> .name(<span class="keyword">let</span> name):</div><div class="line">            <span class="keyword">return</span> users.<span class="built_in">filter</span>&#123; $<span class="number">0</span>.name == name &#125;</div><div class="line">        <span class="keyword">case</span> .ageRange(<span class="keyword">let</span> range):</div><div class="line">            <span class="keyword">return</span> users.<span class="built_in">filter</span>&#123; range ~= $<span class="number">0</span>.age &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> manager = <span class="type">UserManager</span>()</div><div class="line">manager.models(matching: .name(<span class="string">"sunny"</span>)) <span class="comment">// [&#123;name "sunny", age 25&#125;]</span></div><div class="line">manager.models(matching: .ageRange(<span class="number">10</span> ..&lt; <span class="number">20</span>)) <span class="comment">// [&#123;name "lily", age 18&#125;]</span></div></pre></td></tr></table></figure>
<p>å¯¹æœ‰äº›æ¨¡å‹æ¥è¯´, ä½¿ç”¨å­—å…¸æ¥ä½œä¸ºè¿”å›çš„ <code>Collection</code>å¯èƒ½æ˜¯æ›´å¥½çš„æ–¹æ³•ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­æ˜¯ç”¨æ¥é€šè¿‡å½±ç‰‡åç§°å’Œå¯¼æ¼”åå­—æ¥ç­›é€‰ç”µå½±çš„ä¾‹å­ã€‚è¿”å›çš„ç»“æœé€šè¿‡ç”µå½±åˆ†ç±»æ¥åšåˆ†ç±»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å®šä¹‰ç”µå½±åˆ†ç±»çš„æšä¸¾, å› ä¸ºè¦ä½œä¸ºå­—å…¸çš„ Key æ‰€æœ‰éœ€è¦ Hashable åè®®ã€‚</span></div><div class="line"><span class="comment">// ä½¿ç”¨String ç±»å‹çš„æšä¸¾åªæ˜¯ä¸ºäº† hashValue</span></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Genre</span>: <span class="title">String</span>, <span class="title">Hashable</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> cartoon = <span class="string">"cartoon"</span></div><div class="line">    <span class="keyword">case</span> action = <span class="string">"action"</span></div><div class="line">    <span class="keyword">case</span> comedy = <span class="string">"Comedy"</span></div><div class="line">    </div><div class="line">    <span class="keyword">var</span> hashValue: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.rawValue.hashValue</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> ==<span class="params">(lhs: Genre, rhs: Genre)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> lhs.rawValue == rhs.rawValue</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// å®šä¹‰ç”µå½±æ¨¡å‹, å› ä¸ºè¦ä½œä¸ºå­—å…¸çš„ Key æ‰€æœ‰éœ€è¦ Hashable åè®®ã€‚</span></div><div class="line"><span class="comment">// ä½¿ç”¨String ç±»å‹çš„æšä¸¾åªæ˜¯ä¸ºäº† hashValue</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Movie</span>: <span class="title">Hashable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> director: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> genre: <span class="type">Genre</span></div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="keyword">var</span> hashValue: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Int</span>(<span class="string">"<span class="subst">\(name.hashValue)</span>"</span> + <span class="string">"<span class="subst">\(director.hashValue)</span>"</span>)!</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> ==<span class="params">(lhs: Movie, rhs: Movie)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> lhs.name == rhs.name &amp;&amp; lhs.director == rhs.director &amp;&amp; lhs.genre == rhs.genre</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MovieManager</span>: <span class="title">ModelManager</span> </span>&#123;</div><div class="line">    <span class="keyword">typealias</span> <span class="type">Model</span>  = (key: <span class="type">Genre</span>, value: <span class="type">Movie</span>)</div><div class="line">    </div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Query</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> name(<span class="type">String</span>)</div><div class="line">        <span class="keyword">case</span> director(<span class="type">String</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">models</span><span class="params">(matching query: Query)</span></span> -&gt; [<span class="type">Genre</span> : <span class="type">Movie</span>] &#123;</div><div class="line">	    <span class="comment">// æ–¹æ³•è·Ÿä¸Šä¸ªä¾‹å­å·®ä¸å¤š, å°±ä¸å®ç°äº†</span></div><div class="line">        <span class="keyword">return</span> [:]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨èŒƒå‹çº¦æŸèƒ½å¤Ÿå¾ˆå®¹æ˜“çš„è¿›è¡Œé¢å‘åè®®ç¼–ç¨‹(POP)ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;èŒƒå‹å¯ä»¥è¯´æ˜¯ Swift è·Ÿ OC ç›¸æ¯”æœ€å¤§çš„ä¼˜åŠ¿äº†ã€‚é€šè¿‡ç»™åƒé›†åˆè¿™ç±»ä¸œè¥¿å…³è”èŒƒå‹, å¯ä»¥å†™å‡ºæ›´å¯é¢„æµ‹å¹¶ä¸”æ›´å®‰å…¨çš„ä»£ç ã€‚åœ¨ Swift4 ä¸­ç±»å‹çº¦æŸæ›´ä¸ºå¼ºå¤§ï¼Œ å®ƒèƒ½å¤Ÿè®©æˆ‘ä»¬æ›´èƒ½å¤Ÿè½»è€Œæ˜“ä¸¾çš„åšå¾ˆå¤šäº‹æƒ…ã€‚å³ä½¿æ˜¯é€šç”¨ä»£ç , ä¹Ÿèƒ½å……åˆ†çš„åˆ©ç”¨ Swift çš„ç±»å‹ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¾‹1&quot;&gt;&lt;a href=&quot;#ä¾‹1&quot; class=&quot;headerlink&quot; title=&quot;ä¾‹1:&quot;&gt;&lt;/a&gt;ä¾‹1:&lt;/h2&gt;&lt;p&gt;é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚æ¯”å¦‚è¯´ç»™ä¸€ä¸ªæ•°å­—æ•°å­—æ±‚å’Œã€‚æˆ‘ä»¬å¯èƒ½ä¼šäº›è¿™æ ·çš„ä»£ç :&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åœ¨è¿™æ®µä»£ç ä¸­, æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•, æ¥å—ä¸€ä¸ª Int æ•°ç»„ä½œä¸ºå‚æ•°, åœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨é«˜é˜¶å‡½æ•° reduce æœ€åè¿”å›è¿™ä¸ªç»“æœã€‚&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt; numbers: [Int])&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; numbers.&lt;span class=&quot;built_in&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, +)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; array = [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sum(array) &lt;span class=&quot;comment&quot;&gt;// 15&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä½¿ç”¨èŒƒå‹çº¦æŸ, æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å®ç°è¿™ä¸ªéœ€æ±‚:&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åœ¨è¿™æ®µä»£ç ä¸­, æˆ‘ä»¬ç»™ Array æ·»åŠ äº†ç±»å‹çº¦æŸçš„ Extensionã€‚å½“æ•°ç»„çš„ Element éµå®ˆäº† Numeric åè®®çš„æ—¶å€™, Array å°±æ‹¥æœ‰ sum è¿™ä¸ªæ–¹æ³•ã€‚&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Element&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;Numeric&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Element&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, +)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;array.sum() &lt;span class=&quot;comment&quot;&gt;// 15&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸¤è€…ç›¸æ¯”, ä½¿ç”¨èŒƒå‹çº¦æŸæœ€å¤§çš„ä¼˜åŠ¿æ˜¯ä½¿ç”¨æ‰©å±•, èƒ½å¤Ÿè®©è¿™ä¸ªåŠŸèƒ½è·Ÿè°ƒç”¨è€…æ›´ç´§å¯†ã€‚æ¯”è¾ƒä¸€ä¸‹:&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sum = sum(array)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sum = array.sum()&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ OC é‡Œé¢ï¼Œ å¯èƒ½æœ‰äº›åŒå­¦ä¼šå†™ä¸€ä¸ª &lt;code&gt;XXXTool&lt;/code&gt; ä¹‹ç±»çš„ç±», æ¥å°è£…è¿™ç§ç±»å‹çš„åŠŸèƒ½ã€‚ æˆ–è€…æ˜¯ç›´æ¥å†™æˆ C çš„å‡½æ•°ã€‚ä½†æ˜¯ä¸è®ºæ€ä¹ˆå†™,  è¿™æ ·è²Œä¼¼éƒ½ä¸æ˜¯ç‰¹åˆ«çš„ OOPã€‚æˆ–è€…OC è¿˜å¯ä»¥ç›´æ¥ç»™ NSArray åŠ ä¸€ä¸ª category, ç„¶åå†å®ç°ç›¸ä¼¼çš„åŠŸèƒ½ã€‚ä½†æ˜¯, è¿™æ ·åšä¸å°±ç­‰äºæ‰€æœ‰çš„ array éƒ½å…·æœ‰è¿™ä¸ªåŠŸèƒ½äº†å—ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Scrum å®è·µæ­¥éª¤(æ‘˜è‡ª:ã€Šæ•æ·é©å‘½ã€‹)</title>
    <link href="http://www.CepheusSun.com/Scrum%E5%AE%9E%E8%B7%B5%E6%AD%A5%E9%AA%A4(%E6%91%98%E8%87%AA%E3%80%8A%E6%95%8F%E6%8D%B7%E9%9D%A9%E5%91%BD).html"/>
    <id>http://www.CepheusSun.com/Scrumå®è·µæ­¥éª¤(æ‘˜è‡ªã€Šæ•æ·é©å‘½).html</id>
    <published>2017-10-16T16:00:00.000Z</published>
    <updated>2017-10-17T05:05:49.889Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç°åœ¨è¿™å®¶å…¬å¸å¸¦äº†ä¸€æ®µæ—¶é—´äº†ï¼Œå‘ç°äº†å¾ˆå¤šå› ä¸ºæµç¨‹çš„ä¸å®Œå–„, å„ä¸ªæµç¨‹ä¹‹é—´çš„è¡”æ¥çš„ä¸é¡ºç•…å¸¦æ¥çš„â€æµªè´¹â€ã€‚åŠ ä¸Šä¹‹å‰æœ‰è¿‡çš„æ•æ·å¼€å‘çš„ç»éªŒ, å’Œçœ‹è¿‡çš„ä¸€äº›æƒ³è¿‡çš„èµ„æ–™ã€‚åˆåœ¨å¾®ä¿¡è¯»ä¹¦ä¸Šçœ‹äº†ã€Šæ•æ·é©å‘½ã€‹è¿™æœ¬ä¹¦,  æ‰å‘ç°æ•æ·å¼€å‘åŸæ¥æ˜¯ä¸€é—¨éå¸¸å‰å®³çš„å­¦é—®ã€‚åœ¨çœ‹ä¹¦çš„è¿‡ç¨‹ä¸­å°±æƒ³ç€è‡ªå·±æ€»ç»“å†™ä¸€ä¸ªç±»ä¼¼äºâ€œç ´.å®ˆ.ç¦»(å…ˆå­¦ä¹ è§„åˆ™å’Œå½¢å¼,  æŒæ¡ä¹‹åå†è¿›è¡Œåˆ›æ–°ã€‚æœ€åå†ç‰¹åˆ«ç†Ÿæ‚‰çš„çŠ¶æ€ä¸‹ï¼Œå°±å¯ä»¥æ‘†è„±å½¢å¼çš„æŸç¼šï¼Œéšæ€§å‘æŒ¥ã€‚å› ä¸ºä¸€åˆ‡éƒ½å·²çƒ‚ç†Ÿäºå¿ƒã€‚å‡ ä¹å¯ä»¥åœ¨ä¸‹æ„è¯†çš„çŠ¶æ€ä¸‹åšå‡ºå†³å®šã€‚)â€çš„ä¸œè¥¿ã€‚çœ‹åˆ°æœ€åå°±çœ‹åˆ°äº†è¿™ä¹ˆä¸€æ®µã€‚</p>
<a id="more"></a>
<ol>
<li><p><strong>æŒ‘é€‰ä¸€ä½äº§å“è´Ÿè´£äººã€‚</strong>è¿™ä¸ªäººå¿…é¡»çŸ¥é“è‡ªå·±å¸¦é¢†çš„å›¢é˜Ÿéœ€è¦åšä»€ä¹ˆã€åˆ¶é€ ä»€ä¹ˆäº§å“ä»¥åŠå–å¾—ä»€ä¹ˆæˆæœï¼Œå¿…é¡»å…¨é¢è€ƒè™‘åˆ°é£é™©ä¸å›æŠ¥ã€ä»€ä¹ˆå…·æœ‰å¯è¡Œæ€§ã€ä»€ä¹ˆèƒ½åšä»¥åŠä»–ä»¬å¯¹ä»€ä¹ˆå¯Œæœ‰çƒ­æƒ…ã€‚</p>
</li>
<li><p><strong>æŒ‘é€‰ä¸€ä¸ªå›¢é˜Ÿã€‚</strong>çœŸæ­£åšäº‹çš„æ˜¯è°ï¼Ÿè¿™ä¸ªå›¢é˜Ÿå¿…é¡»èƒ½å¤Ÿè½å®äº§å“è´Ÿè´£äººçš„æ„¿æ™¯ã€‚å›¢é˜Ÿè§„æ¨¡å®œå°ä¸å®œå¤§ï¼Œä¸€èˆ¬3ï½9äººè¾ƒä¸ºåˆé€‚ã€‚</p>
</li>
<li><p><strong>æŒ‘é€‰ Scrum ä¸»ç®¡ã€‚</strong>ä¸»ç®¡ä¸º Scrum è¿‡ç¨‹è´Ÿè´£ï¼Œè´Ÿè´£åŸ¹è®­å›¢é˜Ÿå…¶ä»–æˆå‘˜ï¼Œç¡®ä¿ Scrum å¾—åˆ°æ­£ç¡®è¿ç”¨ï¼Œå¸®åŠ©å›¢é˜Ÿæ¶ˆé™¤ä¸€åˆ‡éšœç¢ã€‚</p>
</li>
<li><p><strong>æ‹Ÿå®šå¾…åŠäº‹é¡¹æ¸…å•ï¼Œå¹¶ç¡®å®šä¼˜å…ˆé¡ºåºã€‚</strong>è¿™ä¸ªæ¸…å•é«˜å±‹å»ºç“´åœ°åˆ—å‡ºä¸ºäº†è½å®äº§å“è´Ÿè´£äººçš„æ„¿æ™¯è€Œéœ€è¦å®Œæˆçš„æ‰€æœ‰äº‹é¡¹ã€‚åœ¨äº§å“çš„æ•´ä¸ªç ”å‘è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªæ¸…å•ä¸€ç›´å­˜åœ¨ï¼Œå¹¶æœ‰æ‰€æ¼”å˜ï¼Œç›¸å½“äºäº§å“ç ”å‘çš„â€œè·¯çº¿å›¾â€ã€‚æ— è®ºåœ¨ä»»ä½•æ—¶é—´ï¼Œæƒ³è¦çŸ¥é“ä¸€ä¸ªå›¢é˜Ÿè¦åšçš„æ‰€æœ‰äº‹é¡¹(æŒ‰ç…§ä¼˜å…ˆé¡ºåºæ’åˆ—)ï¼Œå¾…åŠäº‹é¡¹æ¸…å•éƒ½æ˜¯å”¯ä¸€å…·æœ‰å†³å®šæ€§çš„å‚è€ƒä¾æ®ã€‚å¾…åŠäº‹é¡¹æ¸…å•åªæœ‰ä¸€ä»½ï¼Œæ„å‘³ç€äº§å“è´Ÿè´£äººä»å¤´åˆ°å°¾å¿…é¡»ä¸æ–­åœ°å¯¹ä¼˜å…ˆé¡ºåºåŠ ä»¥è°ƒæ•´ã€‚äº§å“è´Ÿè´£äººåº”è¯¥ä¸æ‰€æœ‰åˆ©ç›Šç›¸å…³è€…å’Œå›¢é˜Ÿè¿›è¡Œåå•†ï¼Œä»¥ç¡®ä¿äº§å“å¾…åŠäº‹é¡¹æ¸…å•æ—¢èƒ½åæ˜ ç”¨æˆ·çš„éœ€æ±‚ï¼Œåˆä¸ä¼šè¶…å‡ºå›¢é˜Ÿçš„èƒ½åŠ›èŒƒå›´ã€‚</p>
</li>
<li><p><strong>æ”¹è¿›å’Œè¯„ä¼°å¾…åŠäº‹é¡¹æ¸…å•ã€‚</strong>è®©è´Ÿè´£å®é™…å¼€å‘å·¥ä½œçš„å›¢é˜Ÿå¯¹å¾…åŠäº‹é¡¹ä½œå‡ºè¯„ä¼°ï¼Œæ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„ç¯èŠ‚ã€‚å›¢é˜Ÿåº”è¯¥å®¡è§†æ¯ä¸ªäº‹é¡¹ï¼Œçœ‹çœ‹æ˜¯å¦åˆ‡å®å¯è¡Œã€‚ä½†è¦å®Œæˆè¿™äº›äº‹é¡¹ï¼Œç°æœ‰çš„ä¿¡æ¯è¶³å¤Ÿå—ï¼Ÿè¯¥é¡¹ç›®æ˜¯å¦ç»†åˆ†åˆ°äº†å¯ä»¥è¯„ä¼°çš„ç¨‹åº¦ï¼Ÿå›¢é˜Ÿæ˜¯å¦å…·æœ‰äº†æ¯ä¸ªæˆå‘˜éƒ½èƒ½æ¥å—ã€ç”¨äºè¯„å®šä¸€ä¸ªäº‹é¡¹å·²å®Œæˆçš„æ ‡å‡†ï¼Ÿä¸€ä¸ªäº‹é¡¹èƒ½å¤Ÿå¸¦æ¥æ˜¾è‘—çš„ä»·å€¼ï¼Ÿå„ä¸ªäº‹é¡¹åœ¨å®Œæˆåå¿…é¡»äº§ç”Ÿèƒ½å¤Ÿç”¨æ¥å±•ç¤ºçš„æˆæœï¼Œå¦‚æœè¿™ä¸ªæˆæœèƒ½å¤Ÿäº¤ä»˜ç»™å®¢æˆ·è¯•ç”¨ä¼šæ›´å¥½ã€‚ä¸è¦ç”¨æ‰€éœ€å°æ—¶å»è¯„ä¼°ï¼Œä¸€ä½äººä»¬æ ¹æœ¬ä¸æ“…é•¿åšå‡ºè¿™ä¹ˆç²¾ç¡®çš„è¯„ä¼°ã€‚è¦ç”¨ç›¸å¯¹éš¾åº¦å»è¯„ä¼°ï¼Œæ¯”å¦‚ï¼Œéš¾åº¦æ˜¯å°ã€ä¸­æˆ–å¤§ã€‚æ›´å¥½çš„æ–¹å¼æ˜¯é‡‡ç”¨æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ•°å­—(1,2,3,5,8,13,21â€¦â€¦)ã€‚</p>
</li>
<li><p><strong>å†²åˆºè§„åˆ’ä¼šã€‚</strong>è¿™æ˜¯ä¸€åœº Scrum ä¼šè®®ã€‚å›¢é˜Ÿæˆå‘˜ã€Scrum ä¸»ç®¡ä»¥åŠäº§å“è´Ÿè´£äººååˆ°ä¸€èµ·ï¼Œè§„åˆ’å†²åˆºçš„å†…å®¹ã€‚å†²åˆºå‘¨æœŸä¸€èˆ¬æ˜¯å›ºå®šçš„ï¼Œä¸è¶…è¿‡ä¸€ä¸ªæœˆï¼Œå¤§éƒ¨åˆ†æ˜¯ä¸€è‡³ä¸¤å‘¨ã€‚å›¢é˜Ÿè¦ä»å¾…åŠäº‹é¡¹çš„é¡¶ç«¯ç€æ‰‹(å³ä»æœ€é‡è¦çš„äº‹é¡¹ç€æ‰‹)ï¼Œçœ‹çœ‹ä¸€ä¸ªå†²åˆºé˜¶æ®µä¸­èƒ½å®Œæˆå¤šå°‘ã€‚å¦‚æœå›¢é˜Ÿå·²ç»å¼€å±•è¿‡å¥½å‡ ä¸ªå†²åˆºï¼Œé‚£å°±è®°å½•ä¸‹æ¯ä¸ªå†²åˆºå®Œæˆäº‹é¡¹çš„â€ç‚¹æ•°â€œã€‚è¿™ä¸ªæ•°å­—ç›¸å½“äºå›¢é˜Ÿçš„é€Ÿåº¦ã€‚ Scrum ä¸»ç®¡ä¸å›¢é˜Ÿæˆå‘˜åº”åŠªåŠ›åœ¨æ¯ä¸€ä¸ªå†²åˆºé˜¶æ®µä¸­æé«˜è¿™ä¸ªæ•°å­—ã€‚å›¢é˜Ÿæˆå‘˜å’Œäº§å“è´Ÿè´£äººä¹Ÿå¯ä»¥å€ŸåŠ©â€œç‚¹æ•°â€ç¡®ä¿æ¯ä¸ªäººéƒ½èƒ½å¤Ÿäº†è§£å¾…åŠäº‹é¡¹å¯¹äºè½å®æœ€ç»ˆæ„¿æ™¯çš„ä½œç”¨ã€‚å¯¹äºå†²åˆºç›®æ ‡ï¼Œå³åœ¨è¿™ä¸€å†²åˆºé˜¶æ®µå®Œæˆé‚£äº›äº‹é¡¹ï¼Œæ‰€æœ‰äººéƒ½åº”å½¢æˆå…±è¯†ã€‚</p>
<p>â€‹    Scrum çš„åŸºçŸ³ä¹‹ä¸€åœ¨äºï¼Œäº§å“è´Ÿè´£äººå‘Šè¯‰å¼€å‘å›¢é˜Ÿä»–éœ€è¦å®Œæˆäº§å“è®¢å•ä¸­çš„é‚£äº›è®¢å•é¡¹ã€‚å¼€å‘å›¢é˜Ÿå†³å®šåœ¨ä¸‹ä¸€æ¬¡å†²åˆºä¸­ä»–ä»¬èƒ½å¤Ÿæ‰¿è¯ºå®Œæˆå¤šå°‘è®¢å•é¡¹ã€‚åœ¨å†²åˆºçš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿå˜æ›´å†²åˆºå†…å®¹ã€‚å›¢é˜Ÿå¿…é¡»åœ¨å†²åˆºé˜¶æ®µè‡ªä¸»å·¥ä½œã€‚</p>
</li>
<li><p><strong>å·¥ä½œé€æ˜åŒ–ã€‚</strong>åœ¨ Scrum ä¸­ï¼Œæœ€å¸¸è§çš„åšæ³•æ˜¯å‡†å¤‡ä¸€å—ç™½æ¿ï¼Œä¸Šé¢åˆ†æˆä¸‰æ ï¼šå¾…åŠäº‹é¡¹ã€åœ¨åŠäº‹é¡¹ã€å®Œæˆäº‹é¡¹ã€‚æŠŠå¾…åŠäº‹é¡¹å†™åˆ°ä¾¿ç­¾çº¸ä¸Šï¼Œéšç€è¿›åº¦çš„æ¨è¿›ï¼Œå°†ç›¸åº”çš„ä¾¿ç­¾çº¸è½¬ç§»åˆ°å…¶ä»–æ ç›®ã€‚</p>
<p>â€‹    è®©å·¥ä½œé€æ˜åŒ–çš„å¦ä¸€ä¸ªå·¥å…·æ˜¯ç‡ƒå°½å›¾ã€‚åœ¨è¿™å¼ å›¾ä¸­ï¼Œä¸€ä¸ªè½´ä»£è¡¨å·¥ä½œé‡ï¼Œå¦ä¸€ä¸ªè½´ä»£è¡¨æ—¶é—´ã€‚æ¯å¤©ï¼ŒScrum ä¸»ç®¡éƒ½ä¼šè®°å½•å¾…å®Œæˆçš„å‰©ä½™ç‚¹æ•°ï¼Œè€Œåç”»åœ¨ç‡ƒå°½å›¾ã€‚ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œè¯¥å›¾æ˜¯ä¸€æ¡å‘ä¸‹çš„æ›²çº¿ï¼Œéšç€å‰©ä½™å·¥ä½œçš„å®Œæˆï¼Œâ€œç‡ƒå°½â€è‡³é›¶ã€‚</p>
</li>
<li><p><strong>æ¯æ—¥ç«‹ä¼šã€‚</strong>è¿™æ˜¯ Scrum çš„æ´»åŠ›æºæ³‰ã€‚å›¢é˜Ÿæ¯å¤©åœ¨å›ºå®šæ—¶é—´è¿›è¡Œå†…éƒ¨æ²Ÿé€šï¼Œæ—¶é—´ä¸€èˆ¬ä¸è¶…è¿‡15åˆ†é’Ÿï¼Œä¸”ç«™ç«‹è¿›è¡Œï¼ŒScrum ä¸»ç®¡æƒ³å›¢é˜Ÿæˆå‘˜æå‡ºä¸‹åˆ—é—®é¢˜:</p>
<ol>
<li><p>ä½ æ˜¨å¤©åšäº†ä»€ä¹ˆå»å¸®åŠ©å›¢é˜Ÿå®Œæˆå†²åˆºï¼Ÿ</p>
</li>
<li><p>ä»Šå¤©ä½ æ‰“ç®—åšä»€ä¹ˆæ¥å¸®åŠ©å›¢é˜Ÿå®Œæˆå†²åˆºï¼Ÿ</p>
</li>
<li><p>ä»€ä¹ˆå› ç´ é˜»ç¢äº†å›¢é˜Ÿçš„å‰è¿›ä¹‹è·¯ï¼Ÿ</p>
</li>
</ol>
</li>
</ol>
<p>â€‹        Scrumä¸»ç®¡è¦é—®çš„é—®é¢˜å°±æ˜¯è¿™ä¹ˆå¤šï¼æ•´ä¸ªä¼šè®®çš„å†…å®¹å°±æ˜¯è¿™ä¹ˆå¤šï¼å¦‚æœä¼šè®®æ—¶é—´è¶…è¿‡15åˆ†é’Ÿï¼Œé‚£å°±è¯´æ˜å¼€ä¼šçš„æ–¹æ³•å­˜åœ¨é—®é¢˜ã€‚è¿™æ ·åšçš„æ„ä¹‰åœ¨äºè®©æ•´ä¸ªå›¢é˜Ÿæ¸…æ¥šåœ°çŸ¥é“åœ¨è¿™ä¸€ä¸ªå†²åˆºå‘¨æœŸå†…å„é¡¹ä»»åŠ¡çš„è¿›å±•ã€‚æ‰€æœ‰ä»»åŠ¡éƒ½èƒ½æŒ‰æ—¶å®Œæˆå—ï¼Ÿæœ‰æ²¡æœ‰æœºä¼šå¸®åŠ©å…¶ä»–å›¢é˜Ÿæˆå‘˜å…‹æœéšœç¢ï¼Ÿå›¢é˜Ÿçš„ä»»åŠ¡éƒ½ä¸æ˜¯è‡ªä¸Šè€Œä¸‹åˆ†æ´¾çš„ï¼Œè€Œæ˜¯è‡ªä¸»å†³å®šã€è‡ªä¸»å®Œæˆçš„ï¼Œä¹Ÿä¸éœ€è¦å‘ä¸Šå¸åšè¯¦ç»†çš„æ±‡æŠ¥ã€‚Scrum ä¸»ç®¡è´Ÿè´£æ¶ˆé™¤å›¢é˜Ÿé¢ä¸´çš„éšœç¢ã€‚</p>
<ol>
<li><p><strong>å†²åˆºè¯„ä¼°æˆ–å†²åˆºå±•ç¤ºã€‚</strong>åœ¨å†²åˆºç»“æŸå‰ï¼Œç»™äº§å“è´Ÿè´£äººå±•ç¤ºæˆæœï¼Œä¹Ÿå°±æ˜¯å±•ç¤ºå“ªäº›äº‹é¡¹å¯ä»¥æŒªåˆ°â€œå®Œæˆäº‹é¡¹â€é‚£ä¸€æ ï¼Œå¹¶ä¸”æ¥å—è¯„ä»·ã€‚è¿™æ˜¯ä¸€åœºå…¬å¼€çš„ä¼šè®®ï¼Œä»»ä½•äººéƒ½å¯ä»¥æ˜¯å‚ä¸è€…ï¼Œä¸ä»…ä»…åŒ…æ‹¬äº§å“è´Ÿè´£äººã€Scrum ä¸»ç®¡åŠå¼€å‘å›¢é˜Ÿï¼Œè¿˜åŒ…æ‹¬åˆ©ç›Šç›¸å…³è€…ã€ç®¡ç†äººå‘˜ä¸å®¢æˆ·ã€‚<br>â€‹        å›¢é˜Ÿåº”è¯¥åªå±•ç¤ºé‚£äº›ç¬¦åˆâ€œå®Œæˆå®šä¹‰â€çš„äº‹é¡¹ï¼Œä¹Ÿå°±æ˜¯å…¨éƒ¨å®Œæˆï¼Œä¸éœ€è¦åœ¨åšå·¥ä½œå°±èƒ½äº¤ä»˜çš„æˆæœã€‚è¿™ä¸ªæˆæœæˆ–è®¸ä¸æ˜¯å®Œæˆçš„äº§å“ï¼Œä½†è‡³å°‘æ˜¯ä¸€é¡¹å®Œæ•´çš„ã€å¯ä»¥ä½¿ç”¨çš„åŠŸèƒ½ã€‚</p>
</li>
<li><p><strong>å†²åˆºå›é¡¾ã€‚</strong>å›¢é˜Ÿå±•ç¤ºä¹‹å‰å†²ä¸­åˆ›é€ çš„æˆæœï¼Œä¹Ÿå°±æ˜¯å±•ç¤ºå·²å®Œæˆçš„äº‹é¡¹ï¼Œçœ‹çœ‹å¯ä»¥ä¸ºé¡¾å®¢ä¼ é€’å“ªäº›ä»·å€¼ï¼Œå¹¶å¾æ±‚åé¦ˆæ„è§ï¼Œå¤§å®¶å°±ä¼šåä¸‹æ¥æƒ³æƒ³å“ªäº›äº‹æ‰§è¡Œå¾—å¾ˆé¡ºåˆ©ï¼Œå“ªäº›äº‹åº”è¯¥åšçš„æ›´å¥½ï¼Œä»¥åŠåœ¨ä¸‹ä¸€ä¸ªå†²åˆºé˜¶æ®µä¸­åšå‡ºä»€ä¹ˆæ”¹å–„ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•å‘ç°æµç¨‹ä¸­çš„å“ªä¸ªç¯èŠ‚éœ€è¦æ”¹å–„å‘¢ï¼Ÿ</p>
<p>â€‹    è¦è®©è¿™ä¸ªå†²åˆºå›é¡¾è¿‡ç¨‹æœ‰æ•ˆï¼Œå›¢é˜Ÿéœ€è¦äº’ç›¸ä¿¡ä»»ã€‚å¿…é¡»è®°ä½å…³é”®çš„ä¸€ç‚¹ï¼Œå³å¤§å®¶ä¸è¦ä»å›¢é˜Ÿä¸­æ‰¾ä¸€ä¸ªäººå½“æˆè´£å¤‡å¯¹è±¡ï¼Œè€Œæ˜¯è¦å°†æ³¨æ„åŠ›é›†ä¸­åœ¨æµç¨‹ä¸Šï¼Œè®¤çœŸåˆ†æä¸€ä¸‹å‡ ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆä¼šå‘ç”Ÿé‚£ä»¶äº‹ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬å½“æ—¶å¿½ç•¥äº†ï¼Ÿæ€æ ·æ‰èƒ½åŠ å¿«å·¥ä½œè¿›åº¦ï¼Ÿä½œä¸ºä¸€ä¸ªå›¢é˜Ÿï¼Œå¤§å®¶è¦é›†æ€å¹¿ç›Šï¼Œå…±åŒå¯»æ±‚é—®é¢˜è§£å†³ä¹‹é“ã€‚è¿™ä¸€ç‚¹æ˜¯è‡³å…³é‡è¦çš„ã€‚</p>
<p>â€‹    äºæ­¤åŒæ—¶ï¼Œå›¢é˜Ÿå¿…é¡»æœ‰å‹‡æ°”æŠŠçœŸæ­£çš„éšœç¢æ‘†åˆ°å°é¢ä¸Šæ¥ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†è§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯ä¸ºäº†æŒ‡è´£æŸä¸ªæˆå‘˜ã€‚å›¢é˜Ÿæˆå‘˜å¿…é¡»èƒ½å¤Ÿè®¤çœŸæ¢è®¨é—®é¢˜ï¼Œå¹¶è™šå¿ƒæ¥å—ä»–äººåé¦ˆçš„æ„è§å’Œå»ºè®®ï¼Œä»¥ä¾¿å¯»æ±‚é—®é¢˜è§£å†³ä¹‹é“ï¼Œè€Œéåªæƒ³ç€ä¸ºè‡ªå·±è¾©è§£ã€‚</p>
<p>â€‹    ç„¶åå°±è¿›å…¥äº†å…³é”®ç¯èŠ‚ã€‚å›¢é˜Ÿç¡®å®šä¸€ä¸ªæœ€å€¼å¾—æ”¹å–„çš„åœ°æ–¹ï¼Œå°†å…¶è®¾å®šä¸ºä¸‹ä¸€ä¸ªå†²åˆºé˜¶æ®µçš„é¦–è¦ä»»åŠ¡ï¼Œå½“ç„¶ï¼Œæ”¹å–„çš„ç»“æœå¿…é¡»é€šè¿‡â€œéªŒæ”¶æµ‹è¯•â€ã€‚ä½ å¦‚ä½•è¯æ˜è‡ªå·±æˆåŠŸçš„å®Œæˆäº†æ”¹å–„ï¼Ÿä½ éœ€è¦ç”¨å…·ä½“çš„ã€å¯æ“ä½œçš„æ–¹å¼ç•Œå®šä»€ä¹ˆæ˜¯â€œæˆåŠŸâ€ï¼Œè¿™æ ·ï¼Œåœ¨ä¸‹ä¸€ä¸ªå†²åˆºå›é¡¾ä¼šè®®ä¸­æ‰èƒ½å¾ˆå¿«åˆ¤æ–­å‡ºæ˜¯å¦å·²å®Œæˆæ”¹å–„ã€‚</p>
</li>
<li><p><strong>ä¸Šä¸€ä¸ªå†²åˆºé˜¶æ®µç»“æŸåï¼Œç«‹å³å¼€å§‹æ–°çš„å†²åˆºé˜¶æ®µã€‚</strong>åˆ©ç”¨åœ¨ä¹‹å‰çš„å†²åˆºè¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿåœ¨æ¶ˆé™¤éšœç¢ã€æ”¹å–„æµç¨‹æ–¹é¢ç§¯ç´¯çš„ç»éªŒã€‚</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ç°åœ¨è¿™å®¶å…¬å¸å¸¦äº†ä¸€æ®µæ—¶é—´äº†ï¼Œå‘ç°äº†å¾ˆå¤šå› ä¸ºæµç¨‹çš„ä¸å®Œå–„, å„ä¸ªæµç¨‹ä¹‹é—´çš„è¡”æ¥çš„ä¸é¡ºç•…å¸¦æ¥çš„â€æµªè´¹â€ã€‚åŠ ä¸Šä¹‹å‰æœ‰è¿‡çš„æ•æ·å¼€å‘çš„ç»éªŒ, å’Œçœ‹è¿‡çš„ä¸€äº›æƒ³è¿‡çš„èµ„æ–™ã€‚åˆåœ¨å¾®ä¿¡è¯»ä¹¦ä¸Šçœ‹äº†ã€Šæ•æ·é©å‘½ã€‹è¿™æœ¬ä¹¦,  æ‰å‘ç°æ•æ·å¼€å‘åŸæ¥æ˜¯ä¸€é—¨éå¸¸å‰å®³çš„å­¦é—®ã€‚åœ¨çœ‹ä¹¦çš„è¿‡ç¨‹ä¸­å°±æƒ³ç€è‡ªå·±æ€»ç»“å†™ä¸€ä¸ªç±»ä¼¼äºâ€œç ´.å®ˆ.ç¦»(å…ˆå­¦ä¹ è§„åˆ™å’Œå½¢å¼,  æŒæ¡ä¹‹åå†è¿›è¡Œåˆ›æ–°ã€‚æœ€åå†ç‰¹åˆ«ç†Ÿæ‚‰çš„çŠ¶æ€ä¸‹ï¼Œå°±å¯ä»¥æ‘†è„±å½¢å¼çš„æŸç¼šï¼Œéšæ€§å‘æŒ¥ã€‚å› ä¸ºä¸€åˆ‡éƒ½å·²çƒ‚ç†Ÿäºå¿ƒã€‚å‡ ä¹å¯ä»¥åœ¨ä¸‹æ„è¯†çš„çŠ¶æ€ä¸‹åšå‡ºå†³å®šã€‚)â€çš„ä¸œè¥¿ã€‚çœ‹åˆ°æœ€åå°±çœ‹åˆ°äº†è¿™ä¹ˆä¸€æ®µã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ•æ·å¼€å‘" scheme="http://www.CepheusSun.com/categories/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://www.CepheusSun.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="æ•æ·å¼€å‘" scheme="http://www.CepheusSun.com/tags/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>ä½ å¥½ï¼è‹¥å°”ç›–</title>
    <link href="http://www.CepheusSun.com/%E4%BD%A0%E5%A5%BD%EF%BC%81%E8%8B%A5%E5%B0%94%E7%9B%96.html"/>
    <id>http://www.CepheusSun.com/ä½ å¥½ï¼è‹¥å°”ç›–.html</id>
    <published>2017-10-06T06:02:57.000Z</published>
    <updated>2017-10-07T19:13:39.695Z</updated>
    
    <content type="html"><![CDATA[<p>å›½åº†æ¥äº†ä¸€æ¬¡è¯´èµ°å°±èµ°ï¼Œé™¤äº†å¼€è½¦å¾ˆç´¯ï¼Œè¿˜æœ‰è½»å¾®çš„é«˜åŸååº”ï¼Œä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚</p>
<p>ä¸€æ¬¡æ—…è¡Œï¼Œè¿˜æ˜¯æƒ³åˆ°äº†å¾ˆå¤šâ€¦</p>
<a id="more"></a>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-623549c6a8bce98a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="çº¢åŸçš„ç‰§æ°‘å®¶"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-e99cc3ebc8621174.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="èŠ±æ¹–"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-e2f6516dadda9c14.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="å¤©ç©º"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-dfa9c5ac1727db9c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="æ¾æ½˜ï¼Œå°•åŠ›å°å¤§æ¡¥"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-4ae9c9f84459574e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="åœ¨è·¯ä¸Š"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-c2ab626a5629dbeb.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="è²Œä¼¼æ˜¯ç™½æ²³"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-cbd39de9355eb7c5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="å¥³ä¼´"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-bd52c466ac8c3f33.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="çº¢åŸçš„é©¬ï¼Œé»„æ˜"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1769276-5758663bb051f786.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="æˆ‘ï¼Œå’Œæˆ‘çš„è½¦"></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-052546.jpg" alt=""><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-052701.jpg" alt=""></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-052720.jpg" alt=""></p>
<p>è¿™ä¸ªæ—¶å€™æµ·æ‹”ä¸€ç›´åœ¨ç½‘ä¸Šçˆ¬ã€‚</p>
<p>ç‰¦ç‰›å°±å¼€å§‹å¤šäº†èµ·æ¥äº†, ä¹‹åæ²¿é€”éƒ½æœ‰å¾ˆå¤šçš„ç‰¦ç‰›ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-052756.jpg" alt=""></p>
<p>åŸè°…æˆ‘å•åç©çš„ä¸å¥½ï¼Œ å¤§ä¸Šåˆçš„æ‹æˆäº†è¿™æ ·ã€‚æˆ‘ä»¬ä¹Ÿä¸æ–­çš„è¦åœä¸‹è½¦æ¥æ‹ç…§ä»€ä¹ˆçš„ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-052902.jpg" alt=""></p>
<p>è¿æ°”çœŸçš„å¾ˆå¥½ï¼Œ æˆ–è€…æ˜¯çœŸçš„å­£èŠ‚åˆ°äº†ã€‚æ²¿é€”æœ‰å¥½å‡ åå…¬é‡Œéƒ½æ˜¯è¿™æ ·çš„æ™¯è‰²ã€‚åœ¨å¾€å‰èµ°æ²¡å¤šä¹…, å°±å¼€å§‹å‡ºç°è‰åŸçš„ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-053052.jpg" alt=""></p>
<p>ç¬¬ä¸€æ¬¡çœ‹è§è‰åŸï¼ŒçœŸçš„å¾ˆå…´å¥‹ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-053127.jpg" alt=""></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-054014.jpg" alt=""></p>
<p>è¿™å¼ ç…§ç‰‡å¾ˆæ¼‚äº®, è¿œå¤„çš„é›ªå±±, è·¯ï¼Œäº‘ , è‰åŸã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-054323.jpg" alt=""></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-054415.jpg" alt=""></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-054444.jpg" alt=""></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-054521.jpg" alt=""></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-054553.jpg" alt=""></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-10-06-054621.jpg" alt=""></p>
<p>2017å¹´å›½åº†ã€‚ æˆéƒ½-æˆçŒã€éƒ½æ±¶é«˜é€Ÿ-æ±¶å·-G213-æ¾æ½˜-G213-è‹¥å°”ç›–-S209-çº¢åŸ-G317-é©¬å°”åº·-G317-ç†å¿-æ±¶å·-æˆéƒ½</p>
<p>è¿™ä¸€æ¬¡ï¼Œç®—æ˜¯åœ†äº†è‰åŸæ¢¦äº†ï¼Œä¸€ç›´éƒ½å¾ˆæƒ³åˆ°è‰åŸï¼Œåˆ°æ²™æ¼ ï¼Œåˆ°å¤§æµ·ã€‚</p>
<p>è¿™ä¸€æ¬¡ï¼Œä¹Ÿå­¦åˆ°äº†å¥½å¤šä¸œè¥¿ï¼Œè‡³å°‘åœ¨åœ°ç†ä¸Šé¢ï¼Œæ›´æ¸…æ¥šå“ªé‡Œæ˜¯å“ªé‡Œäº†ã€‚</p>
<p>è¿™ä¸€è¶Ÿï¼Œæ¯«æ— å‹åŠ›çš„æŒ¨ä½äº†4300çš„æµ·æ‹”ï¼Œåœ¨4300æµ·æ‹”çš„åœ°æ–¹å¿«è·‘çˆ¬å¡ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„æ„Ÿè§‰ã€‚ä»¥åå¯ä»¥æ‰¾æœºä¼šå»è¥¿è—äº†ã€‚</p>
<p>è¿æ°”å¾ˆå¥½ï¼Œå› ä¸ºå‰æ®µæ—¶é—´ä¹å¯¨æ²Ÿåœ°éœ‡çš„ç¼˜æ•…ï¼Œå…¨ç¨‹äº¤é€šååˆ†ç•…é€šï¼Œä»¥è‡³äºåœ¨213å›½é“ä¸Šï¼Œè¶…é€Ÿäº†ï¼Œ6åˆ†ã€‚è¿˜å¥½å¹³æ—¶å¼€è½¦ç¨³ï¼Œåœ¨æˆéƒ½å‡ ä¹ä¸å¯èƒ½è¿ç« æ‰£åˆ†ã€‚</p>
<p>ä¹Ÿæ˜¯å› ä¸ºè¿æ°”å§ï¼Œä¹Ÿä¸å«è¿æ°”ã€‚åœ¨æ¾æ½˜çš„æ—¶å€™ä¸‹äº†ä¸€åœºé›¨ã€‚ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæ¾æ½˜å»è‹¥å°”ç›–çš„è·¯ä¸Šï¼Œé‡åˆ°äº†å‡ ä¹100å…¬é‡Œçš„é›ªå±±ã€‚å¾ˆæ¼‚äº®ï¼Œç‰¹åˆ«æ˜¯é…åˆç€é›ªåœ°é‡Œçš„ç‰¦ç‰›ã€‚æˆéƒ½å…¨å¹´ä¸ä¸‹é›ªï¼Œæ‰€ä»¥å¾ˆéœ‡æ’¼ã€‚</p>
<p>è·¯ä¸Šçš„é£æ™¯çœŸçš„å¾ˆæ¼‚äº®ï¼Œç”šè‡³æ¯”æœ€ç»ˆçš„ç›®çš„åœ°è¿˜è¦æ¼‚äº®ã€‚è¿™æ¬¡å‡ºé—¨å®é™…ä¸Šæ˜¯æ²¡æœ‰ç›®çš„åœ°çš„ï¼Œå‡ºé—¨çš„æ—¶å€™åªæ˜¯æƒ³çœ‹çœ‹èƒ½èµ°å¤šè¿œã€‚ç„¶åä¸€ä¸å°å¿ƒå°±èµ°åˆ°äº†è‹¥å°”ç›–ã€‚åœ¨èŠ±æ¹–ç©äº†ä¹‹åï¼Œè¿˜æƒ³è¿‡ç»§ç»­å¾€å‰èµ°çš„ï¼Œèµ°äº†å¯èƒ½ä¸€ä¸ªå°æ—¶ï¼Œæƒ³ç€å†å¾€å‰å°±æ˜¯ç”˜è‚ƒå¢ƒå†…äº†ï¼Œå½“æ—¶ä¸çŸ¥é“ç”˜è‚ƒæœ‰ä»€ä¹ˆå¥½ç©çš„å°±å†³å®šå¾€å›èµ°çº¢åŸäº†ã€‚åæ¥æŸ¥äº†ä¸‹ç”˜å—ï¼Œå…¶å®å†å¾€å‰èµ°èµ°è¿˜æ˜¯å¾ˆæœ‰æ„æ€çš„ã€‚èŠ±æ¹–ï¼Œå› ä¸ºå­£èŠ‚çš„åŸå› ï¼Œå¹¶æ²¡æœ‰èŠ±ï¼Œåªæ˜¯é‡Œé¢æœ‰ä¸€ä¸ªæ¹–ï¼Œå¹¶æ²¡æœ‰getåˆ°ä»€ä¹ˆï¼Œé‚£è¾¹è·¯é€”ä¸Šæ¹–ä¸å¤šï¼Œæ°´åˆ°æŒºå¤šï¼Œåœ¨Google earthä¸Šçœ‹æ¹–éƒ½ç¦»è·¯è¿œã€‚ä¸çŸ¥é“é‚£é‡Œæ˜¯æ— äººåŒºè¿˜æ˜¯æ€ä¹ˆæ ·ã€‚é™¤äº†é‚£ä¸ªæ¹–ï¼Œå°±åªæœ‰è‰åŸäº†ï¼Œä½†æ˜¯æ²¿é€”åŸºæœ¬ä¸Šéƒ½æ˜¯æ— ç©·æ— å°½çš„è‰åŸï¼Œæ‰€ä»¥â€¦â€¦</p>
<p>ä¸Šäº†é«˜åŸä¹‹åï¼Œæ•´ä¸ªçš„æ—…é€”éƒ½æ˜¯æ‘„å½±çˆ±å¥½è€…çš„å¤©å ‚ï¼ŒçœŸçš„æ˜¯éšä¾¿ä¸€æ‹éƒ½æ˜¯æ¡Œé¢çš„æ„Ÿè§‰ã€‚æˆ‘è¿™ç§æ¸£æ¸£ï¼Œéƒ½æ‹åˆ°äº†ä¸€äº›è‡ªå·±è¿˜è›®å–œæ¬¢çš„ç…§ç‰‡ã€‚</p>
<p>è‹¥å°”ç›–åˆ°çº¢åŸï¼Œè¿™æ¡è·¯ï¼Œè·¯å†µéå¸¸å¥½ã€‚é£æ™¯ä¸ªäººè§‰å¾—æ¯”æ¾æ½˜åˆ°è‹¥å°”ç›–çš„è‰åŸæ¼‚äº®ã€‚ä½†æ˜¯æ¾æ½˜çº¿ä¸Šæ¯•ç«Ÿå‡ åå…¬é‡Œé›ªå±±ï¼Œéƒ½å¾ˆå–œæ¬¢ã€‚</p>
<p>å‡†å¤‡å·¥ä½œåšçš„ä¸å¥½ï¼Œæ‰€ä»¥è¿™æ¬¡æ—…è¡Œæ²¡æœ‰å°½å…´ã€‚</p>
<p>è‡ªé©¾æ¸¸ï¼Œå¾ˆç»™åŠ›ã€‚å°±æ˜¯å¼€è½¦çš„äººå¾ˆè¾›è‹¦ã€‚è¿™ä¸€æ¬¡å…¨ç¨‹æˆ‘è‡ªå·±å¼€è½¦ã€‚è¦æ˜¯æœ‰ä¸€ä¸ªæ¯”è¾ƒä¿¡ä»»é©¾é©¶æŠ€æœ¯çš„è€å¸æœºåŒè¡Œå°±å¥½äº†ï¼Œå¯ä»¥æ¢ç€å¼€ã€‚åœ¨è‹¥å°”ç›–ï¼Œå› ä¸ºå¤ªç´¯ï¼Œéƒ½æŠŠè½¦åœè·¯è¾¹ç¡äº†åŠä¸ªå°æ—¶ã€‚å‰ä¸€å¤©è®¤åºŠï¼Œå‡ ä¹ä¸€å¤œæ²¡ç¡ã€‚</p>
<p>é«˜åŸåœŸè±ªçœŸå¤šã€‚éª‘é©¬çš„æ—¶å€™è·Ÿç‰§æ°‘èŠå¤©ï¼Œä»–ä»¬å®¶æœ€å¤šçš„æ—¶å€™æœ‰2000å¤šå¤´ç‰¦ç‰›ï¼Œå‡ åƒåˆ°ä¸€ä¸‡å¤šä¸€å¤´ï¼Œéšéšä¾¿ä¾¿ä¸€ä¸¤åƒä¸‡çš„å®¶åº•å„¿å•Šã€‚æˆ‘å¾—å†™å¤šå°‘ä»£ç ã€‚</p>
<p>é«˜åŸä¹ŸæŒºè½åçš„ï¼Œè·Ÿæˆ‘èŠå¤©çš„ç‰§æ°‘å±…ç„¶å¨¶äº†ä¿©åª³å¦‡å„¿ï¼Œè€Œä¸”å½“åœ°æ‰“å¥³äººå¾ˆæ­£å¸¸ã€‚æƒ³æƒ³æˆéƒ½çš„è€™è€³æœµï¼Œå”‰â€¦â€¦</p>
<p>ä¸‹æ¬¡æƒ³èµ°èµ°åº·å®šæ–°éƒ½æ¡¥è¿™æ¡çº¿ï¼Œçœ‹çœ‹èƒ½èµ°å¤šè¿œã€‚</p>
<p>æœ‰æœºä¼šè¿˜æ˜¯è¦èµ°åˆ°é’æµ·æ¹–ã€‚æ”¾å‡å‰ä¸€ä¸ªæœˆè¿˜åœ¨è€ƒè™‘è¦ä¸è¦å»å‘¢ï¼Ÿ</p>
<p>è¥¿è—æ˜¯ä¸€å®šè¦å»çš„ï¼Œå·è—çº¿é‚£ä¹ˆç¾ã€‚</p>
<p>ä¸‹æ¬¡æ¢è½¦ä¸€å®šæ¢è¶Šé‡ï¼Œå‡ºå»ç©ï¼Œè¿˜æ˜¯æ’é‡å¤§ç‚¹çš„è¶Šé‡å¾—åŠ²å„¿å•Šã€‚è‡³å°‘æ’é‡è¦å¤§ç‚¹å•Šï¼Œ1.6çš„æ’é‡ï¼Œè·‘èµ·æ¥çœŸçš„å¥½è¾›è‹¦ã€‚</p>
<p>ä»¥åè¿˜æ˜¯è¦å¤šè¯»ä¹¦ï¼Œåˆ°æ¾æ½˜çš„æ—¶å€™ï¼Œç¬¬ä¸€æƒ³åˆ°çš„å±…ç„¶æ˜¯æ¾æ½˜é»„é¾™ï¼Œè€Œä¸æ˜¯æ–‡æˆå…¬ä¸»ã€‚å¥½æ­¹å—è¿‡é«˜ç­‰æ•™è‚²ï¼Œä»Šå¹´ä¹Ÿå¤šå¤šå°‘å°‘å…³æ³¨äº†ä¸€ä¸‹å†å²ï¼Œå®åœ¨æ˜¯ä¸åº”è¯¥å•Šï¼</p>
<p>ä»¥åè¿˜æ˜¯åº”è¯¥å¸¦ç€çˆ¶æ¯å»è¿™äº›åœ°æ–¹ï¼Œè¿™ä¸¤å¹´å› ä¸ºè€å¦ˆå¤ªå¿™å¯èƒ½æ²¡æœºä¼šï¼Œçœ‹åˆ°è¿™æ ·çš„é›ªï¼Œè¿™æ ·çš„é£æ™¯ï¼Œå¥¹è‚¯å®šä¼šéå¸¸å…´å¥‹çš„ã€‚</p>
<p>å›æ¥ä¹‹åçœ‹åˆ°è¿½é€è—ç¾šç¾Šçš„æ¶ˆæ¯ï¼ŒçœŸçš„æ˜¯ä¸çŸ¥é“è¯´ä»€ä¹ˆã€‚æ—…è¡Œï¼Œè¿˜æ˜¯åº”è¯¥å¸¦ç€ä¿¡ä»°ï¼Œå¸¦ç€å¯¹å¤§è‡ªç„¶çš„æ•¬ç•å»çš„ã€‚ä¸çŸ¥é“è¿™äº›äººæ—…è¡Œçš„æ„ä¹‰æ˜¯ä»€ä¹ˆã€‚</p>
<p>æœ¬æ¥ä»¥ä¸ºä¼šçœ‹åˆ°æœæ‹œçš„äººï¼Œç¡®å®æ²¡æœ‰è¿™ä»½å¹¸è¿ã€‚ç½‘ä¸Šæœ‰äººè¯´æ„šæ˜§ï¼Œä¸ç®¡æ€ä¹ˆæ ·ï¼Œä¹Ÿåº”è¯¥å°Šé‡åˆ«äººçš„ä¿¡ä»°ï¼Œä»–ä»¬ä¿¡ä»°è¿™äº›ï¼Œè·Ÿæˆ‘ä»¬ä¿¡ä»°ç§‘å­¦ä¸€æ ·ï¼Œæ²¡æœ‰é«˜ä½ä¹‹åˆ†ï¼Œä¿¡ä»°æ˜¯æ— ä»·çš„ï¼Œè€Œå¤§å¤šæ•°ä¸­å›½äººç¼ºçš„å°±æ˜¯è¿™ä¸ªã€‚</p>
<p>å¾ˆæƒ³ä¿æŠ¤ä½è¿™äº›ä¸œè¥¿ï¼Œç½‘ä¸Šçœ‹åˆ°ï¼Œé’è—é«˜åŸçš„å†°å·æ¶ˆå¤±çš„é€Ÿåº¦ï¼Œå®åœ¨æ„Ÿåˆ°ç—›å¿ƒã€‚å°±è·Ÿäººçš„ç”Ÿè€ç—…æ­»ä¸€æ ·ï¼Œè¿™ä»¶äº‹æƒ…è®©æˆ‘æ„Ÿè§‰å¾ˆæ— åŠ›ã€‚è¦æ˜¯èƒ½å¥½å¥½çš„ä¿æŠ¤å°±å¥½äº†ã€‚</p>
<p>å›æ¥ä¹‹åå¥½å¥½çœ‹çœ‹ä½™ç§‹é›¨å…ˆç”Ÿçš„ã€Šå±±æ²³ä¹‹ä¹¦ã€‹ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹ï¼Œä¸€è·¯éƒ½åœ¨æ„Ÿå¹å½“å¹´çº¢å†›é•¿å¾æ—¶å€™çš„ä¸æ˜“ã€‚æˆ‘ä»¬è¿˜æ˜¯åº”è¯¥çæƒœç°åœ¨çš„ä¸€åˆ‡ï¼Œä½œä¸ºå…šå‘˜ï¼Œè¿˜æ˜¯è§‰å¾—æˆ‘ä»¬çš„å¹²éƒ¨ä»¬éƒ½åº”è¯¥å»ä½“éªŒä¸€ä¸‹é•¿å¾è·¯ï¼Œå¥½å¥½çš„æƒ³æƒ³é‚£äº›è€å‰è¾ˆã€‚å…šä¸å¿˜æœ¬ï¼Œå…šå‘˜å¹²éƒ¨æ›´ä¸åº”è¯¥â€¦</p>
<p>ä¸‹æ¬¡å»é«˜åŸåº”è¯¥:</p>
<p>1.å¸¦å†¬å¤©çš„è¡£æœï¼Œæ¯•ç«Ÿè‹¥å°”ç›–å…¨å¹´å¹³å‡æ°”æ¸©åªæœ‰2åº¦ã€‚</p>
<p>2.å¸¦å”‡è†ï¼Œé£å¹çš„å˜´å·´çœŸçš„å¥½å¹²ã€‚</p>
<p>3.å¸¦å¸ç¯·ç¡è¢‹ã€‚ä¸€ä¸ªç‰§æ°‘å‘Šè¯‰æˆ‘çš„ï¼Œè¿™æ ·ç¡®å®å¾ˆé…·ã€‚</p>
<p>4.çº¢æ™¯å¤©ï¼ŒæŠ±ç€å¯¹è‡ªå·±å¯¹åŒä¼´è´Ÿè´£çš„æ€åº¦ã€‚æå‰é¢„é˜²é«˜åŸååº”ã€‚çº¢åŸå‡ºæ¥åœ¨é•¿æ±Ÿé»„æ²³åˆ†æ°´å²­æœ‰4300+çš„æµ·æ‹”ï¼Œçº¢åŸ3500å·¦å³ï¼ŒåŠ ä¸Šæ¶åŠ£çš„æ°”å€™ã€‚è™½ç„¶åªæ˜¯åœ¨é’è—é«˜åŸçš„è¾¹ç¼˜ã€‚å¾ˆå¤šäººè¿˜æ˜¯ä¼šé«˜åçš„ï¼Œåœ¨çº¢åŸçš„é…’åº—é‡åˆ°äº†å¥½å‡ ä¸ªé«˜åçš„æ¸¸å®¢ã€‚</p>
<p>5.çˆ±æŠ¤å“ªé‡Œçš„ä¸€è‰ä¸€æœ¨ï¼Œä»¥åŠå¯èƒ½é‡åˆ°çš„ç‰›ç¾Šé©¬ã€‚</p>
<p>æœ€åäº†ã€‚</p>
<p>å¾ˆçˆ±æ—…è¡Œï¼Œå¾ˆçˆ±å¤§è‡ªç„¶ã€‚å¸Œæœ›é‚£é‡Œä¸€åˆ‡éƒ½å¥½ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å›½åº†æ¥äº†ä¸€æ¬¡è¯´èµ°å°±èµ°ï¼Œé™¤äº†å¼€è½¦å¾ˆç´¯ï¼Œè¿˜æœ‰è½»å¾®çš„é«˜åŸååº”ï¼Œä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ¬¡æ—…è¡Œï¼Œè¿˜æ˜¯æƒ³åˆ°äº†å¾ˆå¤šâ€¦&lt;/p&gt;
    
    </summary>
    
      <category term="æ¸¸è®°" scheme="http://www.CepheusSun.com/categories/%E6%B8%B8%E8%AE%B0/"/>
    
    
      <category term="æ¸¸è®°" scheme="http://www.CepheusSun.com/tags/%E6%B8%B8%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>åŠå¹´çš„è¿œç¨‹åŠå…¬æˆ‘å­¦åˆ°äº†ä»€ä¹ˆ</title>
    <link href="http://www.CepheusSun.com/%E5%8D%8A%E5%B9%B4%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%8A%9E%E5%85%AC%E6%88%91%E5%AD%A6%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88.html"/>
    <id>http://www.CepheusSun.com/åŠå¹´çš„è¿œç¨‹åŠå…¬æˆ‘å­¦åˆ°äº†ä»€ä¹ˆ.html</id>
    <published>2017-08-29T16:00:00.000Z</published>
    <updated>2017-08-30T10:04:36.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://dev.to/peteranglea/6-months-of-working-remotely-taught-me-a-thing-orten">6 Months of Working Remotely Taught Me a Thing or Ten</a>è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨ Twitter ä¸Šçœ‹åˆ°çš„, ä½œè€…è‡ªèº«å…·æœ‰åŠå¹´çš„è¿œç¨‹å¼€å‘ç»å†ã€‚ä½œä¸ºä¸€ç§è¿˜ç®—æ¯”è¾ƒæ–°çš„å›¢é˜Ÿåˆä½œæ–¹å¼, è¿œç¨‹åŠå…¬è¿™ç§å½¢å¼å¯¹è‡ªèº«ä»¥åŠå›¢é˜Ÿéƒ½æœ‰ç€æ¯”è¾ƒé«˜çš„è¦æ±‚ã€‚æˆ‘æœ¬èº«å¯¹è¿™æ ·çš„å·¥ä½œæ–¹å¼ä¹Ÿéå¸¸å‘å¾€(è™½ç„¶åœ¨ç›®å‰çœ‹æ¥ä¸å¤§å¯èƒ½å®ç°)ï¼Œä½†æ˜¯è¿˜æ˜¯å¸Œæœ›èƒ½å¤Ÿå­¦åˆ°æ›´å¤šæœ‰ç”¨çš„ä¸œè¥¿â€¦</p>
<a id="more"></a>
<p>ä¸‹é¢æ˜¯æ–‡ç« çš„ç¿»è¯‘:</p>
<p>å…­ä¸ªæœˆä»¥å‰, æˆ‘å…¥èŒ Helix Education è¿™å®¶å…¬å¸çš„é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆã€‚å·¥ä½œå†…å®¹è·Ÿæˆ‘ä¹‹å‰çš„å·¥ä½œç»å†åŸºæœ¬ç›¸åŒ: åˆ¶ä½œç½‘é¡µ,  å†™ä»£ç , ä¸ä½œå®¶è¿˜æœ‰è®¾è®¡å¸ˆåˆä½œã€‚</p>
<p>å”¯ä¸€çš„åŒºåˆ«æ˜¯æˆ‘ç°åœ¨æ˜¯è¿œç¨‹åŠå…¬äº†ã€‚å¹¶ä¸”, æˆ‘è·Ÿæˆ‘çš„åŒäº‹ä»¬åŸºæœ¬ä¸Šéƒ½ä¸åœ¨åŒä¸€ä¸ªæ—¶åŒºã€‚</p>
<p>å¼€å§‹ç¬¬ä¸€ä»½è¿œç¨‹åŠå…¬çš„å·¥ä½œä¹‹å‰,  æˆ‘å¹¶ä¸çŸ¥é“, æˆ‘éœ€è¦å‡†å¤‡äº›ä»€ä¹ˆä¸œè¥¿ã€‚åœ¨æ¥å—è¿™ä¸ªæŒ‘æˆ˜ä¹‹å‰, æˆ‘æŸ¥äº†å¾ˆå¤šèµ„æ–™ã€‚æˆ‘è¿˜æ˜¯ä¸ç¡®å®šå®ƒä¼šè·Ÿåˆ«äººè¯´çš„é‚£ä¹ˆå¥½, è¿˜æ˜¯ä¼šç»™æˆ‘çš„å·¥ä½œã€å­¦ä¹ ä¸­å¸¦æ¥ä¸€åœºç¾éš¾ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨çœ‹èµ·æ¥, è¿œç¨‹åŠå…¬æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚æœ‰å¾ˆå¤šçš„ä¼˜ç‚¹, ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚å¦‚æœä½ è‡ªå·±æ­£åœ¨è¿œç¨‹åŠå…¬æˆ–è€…æ‰“ç®—æ‰¾ä¸€ä¸ªè¿™æ ·çš„å·¥ä½œ, ä¸‹é¢æ˜¯æˆ‘åœ¨å…­ä¸ªæœˆçš„æ—¶é—´é‡Œæ€»ç»“åˆ°äº†åç‚¹ç»éªŒã€‚</p>
<h3 id="1-è®©åˆ«äººéšæ—¶èƒ½æ‰¾åˆ°ä½ "><a href="#1-è®©åˆ«äººéšæ—¶èƒ½æ‰¾åˆ°ä½ " class="headerlink" title="1. è®©åˆ«äººéšæ—¶èƒ½æ‰¾åˆ°ä½ "></a>1. è®©åˆ«äººéšæ—¶èƒ½æ‰¾åˆ°ä½ </h3><p>è¿™æ˜¯æˆ‘åœ¨å‰è¾ˆé‚£é‡Œå¾—åˆ°æœ€å¥½çš„ç»éªŒäº†ã€‚åœ¨å®¶åŠå…¬, è‚¯å®šä¼šæœ‰å¾ˆå¤šéœ€è¦æ²Ÿé€šçš„éƒ¨åˆ†, å¦‚æœä½ ä»€ä¹ˆæ—¶å€™è”ç³»ä¸ä¸Šäº†, éœ€è¦è”ç³»åˆ°ä½ çš„é‚£ä¸ªäººçš„å·¥ä½œå°±ä¸å¾—ä¸è¢«ä½ ç»™è€½è¯¯ã€‚</p>
<p>åªæœ‰1åˆ†é’Ÿçš„äº‹æƒ…ï¼Œå´ç­‰äº†ä½ å¥½å‡ ä¸ªå°æ—¶ã€‚ä½ å°±ä¼šåœ¨ä½ çš„åŒäº‹çš„å¿ƒä¸­æ ‘ç«‹â€é‚£å“¥ä»¬æ€»æ˜¯ä¸åœ¨â€çš„å½¢è±¡ã€‚</p>
<p>è¿œç¨‹åŠå…¬, å°±å¿…é¡»è¦é¿å…ç»™åˆ«äººç•™ä¸‹è¿™ç§å°è±¡ã€‚</p>
<p>åŠªåŠ›å»ºç«‹èµ·éšæ—¶éƒ½èƒ½æ‰¾åˆ°ä½ çš„å½¢è±¡ã€‚åŠæ—¶è·å–é¡¹ç›®æœ€è¿‘çš„çŠ¶æ€, ä¸ç„¶ä½ å°±è·Ÿä½ çš„åŒäº‹ä¸åŒæ­¥äº†ã€‚</p>
<p>ä½ ä»¬ä¹‹é—´å¯èƒ½è¿˜ä¼šæœ‰æ—¶å·®ã€‚ç”±äºæ—¶å·®çš„å…³ç³», æˆ‘çš„æ—¶é—´æ¯”æˆ‘çš„åŒäº‹æ—©äº†ä¸¤ä¸ªå°æ—¶ã€‚å¦‚æœæ²¡æœ‰å¿…è¦å¼ºè¡ŒæŠŠæ—¶é—´è°ƒæ•´åŒæ­¥çš„è¯, ä¸€å®šè¦ç¡®å®šåˆ«äººçŸ¥é“åœ¨ä»€ä¹ˆæ—¶å€™èƒ½å¤ŸåŠæ—¶çš„è”ç³»åˆ°ä½ ã€‚å¹¶ä¸”ç¡®å®èƒ½å¤Ÿè”ç³»åˆ°ä½ ã€‚åˆ©ç”¨åªæœ‰ä½ è‡ªå·±åœ¨å·¥ä½œçš„æ—¶é—´å°½å¯èƒ½çš„é«˜æ•ˆå·¥ä½œã€‚ è¿™æ ·åš, ä½ æ‰æœ‰æ—¶é—´å»ç»™å…¶ä»–äººæ²Ÿé€šã€‚</p>
<h3 id="2-æ²Ÿé€šçš„æ—¶å€™è¯´æ¸…æ¥š"><a href="#2-æ²Ÿé€šçš„æ—¶å€™è¯´æ¸…æ¥š" class="headerlink" title="2. æ²Ÿé€šçš„æ—¶å€™è¯´æ¸…æ¥š"></a>2. æ²Ÿé€šçš„æ—¶å€™è¯´æ¸…æ¥š</h3><p>è¿œç¨‹åŠå…¬ç»å¤§éƒ¨åˆ†çš„æ²Ÿé€šéƒ½æ˜¯é€šè¿‡ Chat Slackï¼Œ HipChatï¼Œ text messages è¿™äº›æ–¹å¼è¿›è¡Œçš„ã€‚è·Ÿé¢å¯¹é¢çš„æ²Ÿé€šä¸åŒ, æ²¡æœ‰äº†é‚£äº›è¯­è¨€è¡¨è¾¾çš„æŠ€å·§å’Œé¢éƒ¨è¡¨æƒ…, å¾ˆå®¹æ˜“å‡ºç°åœ¨ç†è§£ä¸Šçš„åå·®ã€‚</p>
<p>é™¤éä½ å’ŒåŒäº‹ä¹‹é—´å·²ç»éå¸¸äº†è§£äº†, ä¸è¦å°çœ‹<strong>é¿å…ç†è§£åå·®</strong>è¿™ä»¶äº‹æƒ…ã€‚åœ¨ä½ ç‚¹å‡»å‘é€æŒ‰é’®çš„æ—¶å€™,  çœ‹ä¸€ä¸‹ä½ åˆ°åº•è¯´äº†ä»€ä¹ˆã€‚ç¡®ä¿è¿™äº›è¯åœ¨ä¸åŒçš„å¿ƒæƒ…æˆ–è€…è¯­è°ƒä¸‹ä»–ä»¬çš„æ„æ€ä¸ä¼šè¢«è¯¯è§£ã€‚</p>
<p>å½“ä½ ä»¬åœ¨è¿›è¡Œè§†é¢‘ä¼šè®®çš„æ—¶å€™, å°½å¯èƒ½çš„ç®€æ´ã€‚ è§†é¢‘ä¼ é€è¿‡ç¨‹ä¸­å¶å°”å‡ºç°çš„å¡é¡¿, å¯èƒ½ä¼šå¸¦æ¥ä¸€äº›è¯¯è§£, æˆ–è€…ä¼šè¢«è¦æ±‚é‡æ–°è¯´ä¸€éã€‚è¿˜æœ‰å°±æ˜¯å¾®ç¬‘, <strong>å¾®ç¬‘èƒ½æå‡ä½ çš„é¢œå€¼å“¦ï¼ </strong></p>
<h3 id="3-åˆ«æ€»æ˜¯è°ˆå·¥ä½œ"><a href="#3-åˆ«æ€»æ˜¯è°ˆå·¥ä½œ" class="headerlink" title="3. åˆ«æ€»æ˜¯è°ˆå·¥ä½œ"></a>3. åˆ«æ€»æ˜¯è°ˆå·¥ä½œ</h3><p>èŠ±ç‚¹æ—¶é—´å»äº†è§£ä½ çš„åŒäº‹,  å°¤å…¶æ˜¯åœ¨åŠ å…¥æ–°çš„å›¢é˜Ÿçš„æ—¶å€™ã€‚ä¸è¦æ¯æ¬¡äº¤æµéƒ½æ˜¯åœ¨è¯´å·¥ä½œã€‚</p>
<p>è·Ÿä»–ä»¬èŠèŠæ‰“æ‹›å‘¼, èŠèŠå¤©æ°”, èŠèŠåŠå…¬å®¤å…«å¦(ä½†æ˜¯ä¸è¦å¤ªå¤šç®¡é—²äº‹)ã€‚å› ä¸ºä½ ä¸åœ¨åŠå…¬å®¤é‡Œé¢, æ‰€ä»¥ä½ ä¹Ÿå¬ä¸åˆ°å¥¹ä»¬åœ¨åŠå…¬å®¤é‡Œé¢çš„æ‰“è¶£, æˆ–è€…æ˜¯é‚£äº›èŒ¶æ°´é—´è°ˆè¯ã€‚</p>
<p>é™¤éæ˜¯é½å¿ƒååŠ›çš„å»åšæŸä»¶äº‹æƒ…, æŸä¸ªåŒäº‹çš„ç”Ÿæ—¥, æœ‰äººç¦»å¼€è¿™ä¸ªå›¢é˜Ÿ, æˆ–è€…æ˜¯é‡è¦çš„é€šçŸ¥ã€‚å…¶ä»–çš„éƒ¨åˆ†, ä½ éƒ½ä¼šé”™è¿‡ã€‚</p>
<h3 id="4-å¤šè¡¨è¾¾æ­£é¢ç§¯æçš„ä¸œè¥¿"><a href="#4-å¤šè¡¨è¾¾æ­£é¢ç§¯æçš„ä¸œè¥¿" class="headerlink" title="4. å¤šè¡¨è¾¾æ­£é¢ç§¯æçš„ä¸œè¥¿"></a>4. å¤šè¡¨è¾¾æ­£é¢ç§¯æçš„ä¸œè¥¿</h3><p>ä½ è¿˜éœ€è¦å»åŸ¹å…»å‡ºå›¢é˜Ÿåä½œçš„æ„Ÿè§‰ã€‚ä½ æ²¡åŠæ³•è·Ÿä»–ä»¬ä¸€èµ·åˆ†äº«æ¯ä¸€ä»¶å°æˆåŠŸ, ä½†æ˜¯æœ‰ä¸€ä¸ªç§¯æçš„å…³ç³»èƒ½å¤Ÿè®©ä½ æ›´è½»æ¾çš„æŠŠå·¥ä½œåšå¥½ã€‚</p>
<p>æœ‰äº›åŒäº‹å¯èƒ½æ²¡æœ‰é‚£ä¹ˆé¢‘ç¹çš„è·Ÿä½ æ²Ÿé€šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹, è¦å°½é‡è®©ä»–ä»¬å¾—åˆ°å…³äºä½ çš„æ¶ˆæ¯éƒ½æ˜¯æ­£é¢çš„ã€‚è¿™å°±åˆå›åˆ°äº†ä¸€ä¸ªäº‹å®ä¸Š:<strong>è¦ç§¯æåœ°å»å¡‘é€ åˆ«äººå¯¹è‡ªå·±çš„å°è±¡, æ²¡æœ‰äººå–œæ¬¢ä¸€ä¸ªæ¶ˆæçš„äººã€‚</strong></p>
<h3 id="5-èˆ’é€‚çš„å·¥ä½œç¯å¢ƒèƒ½å¤Ÿæé«˜æ•ˆç‡"><a href="#5-èˆ’é€‚çš„å·¥ä½œç¯å¢ƒèƒ½å¤Ÿæé«˜æ•ˆç‡" class="headerlink" title="5. èˆ’é€‚çš„å·¥ä½œç¯å¢ƒèƒ½å¤Ÿæé«˜æ•ˆç‡"></a>5. èˆ’é€‚çš„å·¥ä½œç¯å¢ƒèƒ½å¤Ÿæé«˜æ•ˆç‡</h3><p>å¯¹æƒ³è¿œç¨‹åŠå…¬çš„äººæ¥è¯´, èƒ½å¤Ÿåœ¨è‡ªå·±å–œæ¬¢çš„å’–å•¡å…å·¥ä½œæ˜¯éå¸¸è¯±äººçš„ã€‚ä½†è€å®è¯´, è¿™ä¸å¤§ç°å®ã€‚åœ¨å®¶é‡Œçš„åŠå…¬æ¡Œä¸Š, æˆ‘çš„æ•ˆç‡æ˜¯å¹³å¸¸çš„ä¸‰å€(æœ‰ä¸‰ä¸ªå±å¹•, ç¬”è®°æœ¬ + ä¸¤ä¸ªåˆ†å±)ã€‚å¦‚æœéœ€è¦, æ˜¯ä¸æ˜¯çš„æ¢ä¸€ä¸ªåœ°æ–¹, ä½†æ˜¯æ”¾å¼ƒæ¸¸ç‰§ç”Ÿæ´»çš„è¯, ä½ ä¼šå·¥ä½œçš„æ›´å¥½ã€‚</p>
<p>è¿˜æœ‰, <strong>ä¸è¦åœ¨å§å®¤å·¥ä½œ</strong>ã€‚ä¸€å®šè¦æŠŠå·¥ä½œå’Œä¸ªäººç”Ÿæ´»åˆ†å¼€(åœ¨åºŠä¸Šèººä¸€ä¼š, è¿™å¤ªè¯±äººäº†)ã€‚å¦‚æœå¯ä»¥çš„è¯, åœ¨å®¶é‡Œåˆ’ä¸€ä¸ªç©ºé—´å‡ºæ¥ã€‚ä¸å—æ‰“æ‰°çš„å·¥ä½œ(å°¤å…¶æ˜¯æœ‰å°å­©, æˆ–è€…æ˜¯æ€»æ˜¯æ‰“æ–­ä½ æ³¨æ„åŠ›çš„çŒ«),  ç„¶ååœ¨å·¥ä½œç»“æŸä¹‹åå†å‡ºæ¥ã€‚</p>
<p>ä¸ºäº†é¿å…ä¹…å, å»ºè®®å»æä¸€ä¸ªå‡é™æ¡Œã€‚æˆ‘è‡ªå·±è¿˜æœ‰ä¸€ä¸ªçƒæ¤…, å®ƒèƒ½å¤Ÿå¸®åŠ©æˆ‘ç‡ƒçƒ§å¡è·¯é‡Œ, ä¿æŒæ›´å¥åº·çš„å§¿åŠ¿, å¹¶ä¸”è¿˜æŒºæœ‰è¶£çš„ã€‚</p>
<h3 id="6-ç©¿ä¸Šè£¤å­å·¥ä½œ"><a href="#6-ç©¿ä¸Šè£¤å­å·¥ä½œ" class="headerlink" title="6. ç©¿ä¸Šè£¤å­å·¥ä½œ"></a>6. ç©¿ä¸Šè£¤å­å·¥ä½œ</h3><p>å¦å¤–ä¸€ä¸ªå·²ç»è¿œç¨‹åŠå…¬å¾ˆé•¿æ—¶é—´çš„æœ‹å‹å‘Šè¯‰æˆ‘, ä¸Šåˆå¼€å§‹å·¥ä½œä¹‹å‰å°±è¦æŠŠä¸€åˆ‡å‡†å¤‡å¥½ã€‚æ•´ç†å¥½è¢«å­, æ¢³å¥½å¤´å‘ã€‚ç©¿ä¸Šè¡£æœ(å®Œå…¨ç©¿å¥½-åŒ…æ‹¬è£¤å­) ã€‚ ä»–ä»¬é€šè¿‡è§†é¢‘é€šè¯åªèƒ½çœ‹è§ä½ çš„è„¸, å¹¶ä¸ä»£ç ä½ èƒ½é‚£ä¹ˆè‡ªç”±ã€‚</p>
<p>ä½ å¯ä»¥è€ƒè™‘ç©¿çš„è·Ÿåœ¨åŠå…¬å®¤ä¸Šç­ä¸€æ ·, å…å¾—åˆ«äººè¯´ä½ æˆå¤©ç©¿ç¡è¡£ä¸Šç­ã€‚åœ¨å¼€å§‹å·¥ä½œä¹‹å‰å°±è®©è‡ªå·±ä¸€åˆ‡å°±ç»ª, èƒ½å¤Ÿè®©ä½ å¾ˆå¿«çš„è¿›å…¥å·¥ä½œçŠ¶æ€, ä¹Ÿèƒ½å¸®åŠ©ä½ æˆ˜èƒœæƒ°æ€§æ€æƒ³ã€‚</p>
<h3 id="7-å¤šå‡ºé—¨"><a href="#7-å¤šå‡ºé—¨" class="headerlink" title="7. å¤šå‡ºé—¨"></a>7. å¤šå‡ºé—¨</h3><p>å³ä½¿ä½ å¾ˆäº«å—ç‹¬å¤„,  ä¹Ÿè¦æ”¾å¼ƒéšå£«è¿™ç§å€¾å‘ã€‚æˆ‘ç»å¸¸å‘ç°æˆ‘å·²ç»å¥½å¤šå¤©æ²¡å‡ºè¿‡é—¨äº†ã€‚</p>
<p>å»çœ‹çœ‹ä½ çš„ä¿¡ç®±(çœŸçš„é‚£ç§, btw, å›½äººè²Œä¼¼çœ‹äº†ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰)ã€‚åˆé¤æ—¶é—´å‡ºå»èµ°èµ°ã€‚å‘¨æœ«è¿˜æ˜¯è¦èµ°å‡ºå», å³ä½¿æ˜¯å¸®äººè·‘è…¿å„¿ã€‚</p>
<p>æ•£æ­¥ã€é˜³å…‰èƒ½å¯¹ä½ çš„å·¥ä½œæ•ˆç‡, ç²¾ç¥å¥åº·äº§ç”Ÿå¥‡æ•ˆã€‚ä¹Ÿèƒ½è®©ä½ çš„æ€ç»´æ´»æ³›èµ·æ¥, è¯´ä¸å®šä»€ä¹ˆæ—¶å€™å°±äº§ç”Ÿäº†ä»€ä¹ˆå¥‡æ•ˆã€‚</p>
<p>è·Ÿè¿™ä¸ªè¿˜æœ‰ç‚¹å…³ç³»çš„æ˜¯ã€‚æ¯å¤©ç»“æŸå·¥ä½œä¹‹å, å°±æ²¡åœ¨å›å»æ¥ç€åšäº†ã€‚åœ¨è¿œç¨‹å·¥ä½œçš„äººæ¥è¯´, è¿™ç‚¹å¾ˆéš¾ã€‚ æ¯•ç«Ÿå·¥ä½œå°±åœ¨ä½ çš„éš”å£æˆ¿é—´ã€‚ä½†æ˜¯å°½é‡ä¸è¦å›åˆ°åŠå…¬æ¡Œä¸Šã€‚æ¯å¤©æ™šä¸Šéƒ½åˆ—å‡ºæ¥ä¸€ä¸ªæ˜å¤©éœ€è¦å®Œæˆçš„å·¥ä½œæ¸…å•, ç„¶åç­‰åˆ°æ˜å¤©è¯´ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦åœ¨ä½ å®¶é‡Œåˆ’å‡ºå•ç‹¬çš„ç©ºé—´æ¥å·¥ä½œçš„åŸå› ã€‚</p>
<h3 id="8-å¤šè§†é¢‘äº¤æµ"><a href="#8-å¤šè§†é¢‘äº¤æµ" class="headerlink" title="8. å¤šè§†é¢‘äº¤æµ"></a>8. å¤šè§†é¢‘äº¤æµ</h3><p>ä¸€ç›´æŠŠè‡ªå·±éš”ç¦»èµ·æ¥, åªæ˜¯æ‰“æ‰“ç”µè¯, ä¸å¯èƒ½å»ºç«‹èµ·æ¥æ­£å¸¸çš„äººé™…å…³ç³»ã€‚åœ¨è·Ÿä½ äº¤æµçš„æ—¶å€™, äººä»¬éœ€è¦çœ‹è§ä½ çš„è„¸ã€‚æœ‰ä¸ªæœ‹å‹å‘Šè¯‰æˆ‘, ä»–ä»æ¥æ²¡æœ‰è®©æŸä¸ªè¿œç¨‹å‘˜å·¥æ‰“å¼€è¿‡æ‘„åƒå¤´, æœ€åçš„ç»“æœæ˜¯, ä»–å®Œå…¨ä¸äº†è§£ã€‚</p>
<h3 id="9-åŒæ—¶åšå¤šä¸ªé¡¹ç›®"><a href="#9-åŒæ—¶åšå¤šä¸ªé¡¹ç›®" class="headerlink" title="9. åŒæ—¶åšå¤šä¸ªé¡¹ç›®"></a>9. åŒæ—¶åšå¤šä¸ªé¡¹ç›®</h3><p>ä½ æ²¡çœ‹é”™ï¼ è¿™å¬èµ·æ¥åƒæ˜¯è¦ä½ ä»ä¸¤å¤´ç‚¹èœ¡çƒ›ã€‚ä½†æ˜¯å¦‚æœæ˜¯åœ¨è¿œç¨‹åŠå…¬çš„è¯ã€‚ä½ ä¸å¯èƒ½æ€»æ˜¯èƒ½éšæ—¶æ‰¾åˆ°ä½ çš„åŒäº‹ã€‚ç­‰åˆ«äººå›ä½ æ¶ˆæ¯çš„æ—¶å€™, è¿™æ ·æ‰èƒ½å¤Ÿéšæ—¶æœ‰äº‹æƒ…åšã€‚</p>
<p>è¿œç¨‹åŠå…¬ï¼Œåœ¨æ²Ÿé€šä¸Šè‚¯å®šæ˜¯ä½æ•ˆçš„ã€‚è¦åœ¨è¿™ä¸€ç‚¹ä¸Šæå‰åšå¥½å‡†å¤‡ã€‚</p>
<h3 id="10-åˆ©ç”¨è¿œç¨‹åŠå…¬çš„ç¦åˆ©-å¤šæ‰¿æ‹…è´Ÿè´£"><a href="#10-åˆ©ç”¨è¿œç¨‹åŠå…¬çš„ç¦åˆ©-å¤šæ‰¿æ‹…è´Ÿè´£" class="headerlink" title="10. åˆ©ç”¨è¿œç¨‹åŠå…¬çš„ç¦åˆ©, å¤šæ‰¿æ‹…è´Ÿè´£"></a>10. åˆ©ç”¨è¿œç¨‹åŠå…¬çš„ç¦åˆ©, å¤šæ‰¿æ‹…è´Ÿè´£</h3><p>æˆ‘æ²¡æœ‰è¯´è°ã€‚è¿œç¨‹åŠå…¬æœ‰å¾ˆå¤šçš„ç¦åˆ©ã€‚è¿™æ˜¯åªæœ‰è¿œç¨‹åŠå…¬è€…ç‰¹æƒã€‚è·Ÿå…¶ä»–åŒäº‹ç›¸æ¯”, ä½ èŠ‚çº¦äº†å¾ˆå¤šçš„æ—¶é—´å’Œé‡‘é’±ä¸Šçš„å¼€é”€ã€‚ä¸è¦å»ç‚«è€€è¿™äº›(æ²¡äººå–œæ¬¢è·Ÿè¿™ç§äººä¸€èµ·å·¥ä½œ)ã€‚</p>
<p>å¥½å¥½çš„åˆ©ç”¨ä½ çš„ç©ºé—²æ—¶é—´, æ— è®ºæ˜¯å¯¹ä½ è‡ªå·±, è¿˜æ˜¯å¯¹å›¢é˜Ÿéƒ½æ˜¯æœ‰å¥½å¤„çš„ã€‚ä¸ç”¨æ¯å¤©æ—©ä¸ŠæŒ¤1ä¸ªå°æ—¶åœ°é“, ä½ å¯ä»¥æ¯”åˆ«äººå¤šä¼‘æ¯ä¸€ä¼šå„¿ã€‚æ‰€ä»¥åœ¨å·¥ä½œçš„æ—¶å€™å°±åº”è¯¥æ›´åŠªåŠ›çš„å·¥ä½œã€‚ä½ ä¹Ÿå¯ä»¥åˆ©ç”¨ä¸€éƒ¨åˆ†çš„æ—¶é—´æ¥é˜…è¯», å¬å¬å¹¿æ’­, æˆ–è€…å­¦ä¹ ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è¿œç¨‹åŠå…¬æ˜¯ä¸€é¡¹ç‰¹æƒã€‚ ä¸ä¸€å®šæ˜¯æœ€ç†æƒ³çš„æ–¹å¼, ä½†æ˜¯ä»–ä¼šå¸¦æ¥å¾ˆå¤§çš„å›æŠ¥ã€‚çŸ¥é“å®ƒæ½œåœ¨çš„é£é™©,  å¹¶åŠªåŠ›çš„å»å¼¥è¡¥è¿™äº›ç¼ºé™·ã€‚ä½ ä¼šå˜å¾—æ›´é«˜æ•ˆ,  è·ŸåŒäº‹çš„å…³ç³»ä¼šæ›´å¥½,  è®©è€æ¿æ›´å¼€å¿ƒï¼</p>
<p>å¥½äº†,  å›å»å·¥ä½œå§ï¼</p>
<p>åˆ«å¿˜äº†ç©¿è£¤å­å“¦ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://dev.to/peteranglea/6-months-of-working-remotely-taught-me-a-thing-orten&quot;&gt;6 Months of Working Remotely Taught Me a Thing or Ten&lt;/a&gt;è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨ Twitter ä¸Šçœ‹åˆ°çš„, ä½œè€…è‡ªèº«å…·æœ‰åŠå¹´çš„è¿œç¨‹å¼€å‘ç»å†ã€‚ä½œä¸ºä¸€ç§è¿˜ç®—æ¯”è¾ƒæ–°çš„å›¢é˜Ÿåˆä½œæ–¹å¼, è¿œç¨‹åŠå…¬è¿™ç§å½¢å¼å¯¹è‡ªèº«ä»¥åŠå›¢é˜Ÿéƒ½æœ‰ç€æ¯”è¾ƒé«˜çš„è¦æ±‚ã€‚æˆ‘æœ¬èº«å¯¹è¿™æ ·çš„å·¥ä½œæ–¹å¼ä¹Ÿéå¸¸å‘å¾€(è™½ç„¶åœ¨ç›®å‰çœ‹æ¥ä¸å¤§å¯èƒ½å®ç°)ï¼Œä½†æ˜¯è¿˜æ˜¯å¸Œæœ›èƒ½å¤Ÿå­¦åˆ°æ›´å¤šæœ‰ç”¨çš„ä¸œè¥¿â€¦&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥ä½œæ–¹å¼" scheme="http://www.CepheusSun.com/categories/%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F/"/>
    
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="å·¥ä½œæ–¹å¼" scheme="http://www.CepheusSun.com/tags/%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>Swift4.Codable</title>
    <link href="http://www.CepheusSun.com/Swift4.Codable.html"/>
    <id>http://www.CepheusSun.com/Swift4.Codable.html</id>
    <published>2017-08-28T16:15:23.000Z</published>
    <updated>2017-08-29T07:46:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>WWDC2017ä¸­å‘å¸ƒçš„ Swift4.0 æœ‰ä¸€ä¸ªæœ‰è¶£çš„æ–°ç‰¹æ€§ï¼š Coadble. ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠè¿™ä¸ª Swift4.0 å¸¦æ¥çš„åè®®ï¼</p>
<h3 id="Serialization"><a href="#Serialization" class="headerlink" title="Serialization"></a>Serialization</h3><p>å¯¹ç°åœ¨éœ€è¦éšæ—¶è”ç½‘çš„ç§»åŠ¨åº”ç”¨æ¥è¯´ï¼ŒæŠŠå€¼åºåˆ—åŒ–æˆèƒ½å¤Ÿåœ¨ç¡¬ç›˜æˆ–è€…é€šè¿‡ç½‘ç»œä¼ é€çš„æ•°æ®æ˜¯ä¸€ä¸ªåŸºæœ¬çš„éœ€æ±‚ã€‚ä½†æ˜¯åœ¨è‹¹æœçš„ç”Ÿæ€ä¸­æˆ‘ä»¬çš„é€‰æ‹©å¾ˆæœ‰é™ã€‚</p>
<a id="more"></a>
<ol>
<li><code>NSCoding</code> åè®®æä¾›äº†å¯¹å¤æ‚å¯¹è±¡çš„åºåˆ—åŒ–èƒ½åŠ›ï¼Œå®ƒåœ¨è‡ªå®šä¹‰ç±»å‹èº«ä¸Šä¹Ÿæ˜¯æœ‰æ•ˆçš„ã€‚ä½†æ˜¯ï¼Œä¸å®Œå–„çš„ç³»åˆ—åŒ–æ ¼å¼å¹¶ä¸é€‚åˆè·¨å¹³å°çš„éœ€æ±‚, å¹¶ä¸”ä»–éœ€è¦æˆ‘ä»¬æ‰‹å†™ä»£ç æ¥åšç¼–è§£ç çš„å·¥ä½œã€‚</li>
<li><code>NSPropertyListSerialization</code> å’Œ <code>NSJSONSerialization</code> èƒ½å¤Ÿè®©æ•°æ®èƒ½å¤Ÿåœ¨ Cocoa ç±»(NSDictionary/NSString)å’Œå±æ€§åˆ—è¡¨ä»¥åŠ JSON ä¹‹é—´è½¬æ¢ã€‚JSON å‡ ä¹æ˜¯æ‰€æœ‰ç½‘ç»œä¼ è¾“çš„æ ‡å‡†æ ¼å¼ã€‚ç”±äºè¿™äº›API åªæä¾›äº†åŸºç¡€ç±»å‹çš„è½¬æ¢, æˆ‘ä»¬å¿…é¡»è¦ç¼–å†™å¾ˆå¤šä»£ç ä»è¿™äº›å€¼ä¸­å–å‡ºå…·ä½“ç±»å‹ä¿¡æ¯ã€‚è¿™äº›ä»£ç é€šå¸¸éƒ½æ˜¯å¾ˆéš¾å¤ç”¨çš„ï¼Œè€Œä¸”è¿™ç§æ–¹å¼å¯¹è„æ•°æ®çš„å¤„ç†èƒ½åŠ›ä¹Ÿä¸è¡Œã€‚</li>
<li><code>NSXMLParser</code> and <code>NSXMLDocument</code> è¿™ç§æ–¹å¼æ˜¯ç»™é‚£äº›å—è™ç‹‚ï¼Œæˆ–è€…æ˜¯é‚£äº›æ·±é™· XML æ³¥æ½­çš„äººä½¿ç”¨çš„ã€‚åŸºæœ¬æ•°æ®å’Œæ¨¡å‹å¯¹è±¡ä¹‹é—´è½¬æ¢çš„å·¥ä½œè¿˜æ˜¯éœ€è¦ç¨‹åºå‘˜æ¥åšã€‚</li>
</ol>
<p>è¿™äº›æ–¹æ³•å¾€å¾€ä¼šå¸¦æ¥å¤§é‡çš„æ ·æ¿ä»£ç ã€‚å£°æ˜ä¸€ä¸ªå«åš foo çš„ Stirng å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¼šé€šè¿‡å°† String å­˜å‚¨åœ¨ foo ä¸‹è¿›è¡Œç¼–ç ï¼Œå¹¶é€šè¿‡æ£€ç´¢ foo è¿™ä¸ª key ï¼Œæ‰¾åˆ°è¿™ä¸ªå€¼ï¼Œç„¶åæŠŠå®ƒè½¬æ¢æˆStringã€‚å¦‚æœåœ¨å…¶ä¸­çš„æŸä¸ªè¿‡ç¨‹ä¸­å¤±è´¥çš„è¯ï¼Œå°±æŠ›å‡ºé”™è¯¯ã€‚ç„¶ååœ¨å£°æ˜ç¬¬äºŒä¸ªå±æ€§â€¦..</p>
<p>ç¨‹åºå‘˜å½“ç„¶ä¸å¯èƒ½ä¼šå–œæ¬¢è¿™ç±»é‡å¤æ€§çš„å·¥ä½œã€‚è¿™ç§å·¥ä½œæ˜¯è®¡ç®—æœºåšçš„äº‹æƒ…ã€‚æˆ‘ä»¬åªæƒ³è¦åšè¿™æ ·çš„äº‹æƒ…:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Whatevet</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> foo: <span class="type">String</span></div><div class="line">  <span class="keyword">var</span> bar: <span class="type">String</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åä»–å°±å¯ä»¥åºåˆ—åŒ–äº†ã€‚è¿™å…¶å®æ˜¯æœ‰å¯èƒ½çš„ï¼Œæ¯•ç«Ÿæ‰€æœ‰å¿…è¦çš„ä¿¡æ¯éƒ½æœ‰äº†ã€‚</p>
<p>æ˜ å°„æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„æ–¹æ³•ï¼Œå¾ˆå¤š OC çš„ç¨‹åºå‘˜éƒ½å†™è¿‡è‡ªåŠ¨å°† JSON è½¬æ¢æˆ OC ç±»å‹çš„ä»£ç ã€‚OC åœ¨è¿è¡Œæ—¶èƒ½å¤Ÿæä¾›è½¬æ¢éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ã€‚ä½†æ˜¯å¯¹ Swift æ¥è¯´å‘¢ï¼Ÿ æˆ‘ä»¬å½“ç„¶ä¹Ÿèƒ½å¤Ÿä½¿ç”¨ OC çš„ runtime æˆ–è€…ä½¿ç”¨ Swift çš„é•œåƒ, ç„¶åç”¨ä¸€äº›å¾ˆå¥‡æ€ªçš„æ–¹æ³•æ¥å¼¥è¡¥ä»–åœ¨è¿™æ–¹é¢çš„ä¸è¶³ã€‚</p>
<p>åœ¨è‹¹æœçš„ç”Ÿæ€ç³»ç»Ÿä¹‹å¤–ï¼Œè¿™å·²ç»æ˜¯å¾ˆå¤šè¯­è¨€å¸¸è§çš„è§£å†³æ–¹æ¡ˆäº†ã€‚ä½†æ˜¯è¿™ä¹Ÿå¯èƒ½å¸¦æ¥å¥‡æ€ªçš„å®‰å…¨æ¼æ´ã€‚</p>
<p>æ˜ å°„å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚è®©ä»–å‡ºé”™å¹¶ä¸”å¯¼è‡´å®‰å…¨é—®é¢˜æ˜¯å¾ˆå®¹æ˜“çš„äº‹æƒ…ã€‚å®ƒæ²¡æœ‰ä½¿ç”¨é™æ€ç±»å‹ï¼Œå¯¼è‡´äº†å¾ˆå¤šbugéƒ½åªèƒ½åœ¨è¿è¡Œæ—¶æ‰èƒ½æš´éœ²å‡ºæ¥ã€‚å¹¶ä¸”å®ƒçš„æ•ˆç‡ä¹Ÿä¸é«˜ï¼Œå› ä¸ºå®ƒå¯¹å…ƒæ•°æ®åšäº†å¾ˆå¤šçš„å­—ç¬¦ä¸²æŸ¥æ‰¾ã€‚</p>
<p>Swift é‡‡ç”¨äº†ç¼–è¯‘å™¨ä»£ç ç”Ÿæˆçš„æ–¹æ³•ï¼Œæ¥åšè¿™ä»¶äº‹æƒ…ã€‚è¿™å°±æ˜¯è¯´æœ‰äº›å†…å®¹æ˜¯è¢«åµŒå…¥åˆ°ç¼–è¯‘å™¨ç§çš„ã€‚ä½†æ˜¯è¿™æ ·åšæ•ˆç‡å´å¾ˆé«˜ï¼Œå…·å¤‡é™æ€ç±»å‹æ‰€æœ‰ä¼˜ç‚¹çš„åŒæ—¶ï¼Œåœ¨ä½¿ç”¨ä¸Šä¹Ÿä¸ä¼šå¸¦æ¥ä»€ä¹ˆéº»çƒ¦ã€‚</p>
<h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Swift æ–°å¼•å…¥çš„ Codable æ˜¯å»ºç«‹åœ¨ä¸€äº›åŸºç¡€åè®®ä¹‹ä¸Šçš„ã€‚</p>
<p><code>Encodable</code> è¿™ä¸ªåè®®ç”¨åœ¨é‚£äº›éœ€è¦è¢«ç¼–ç çš„ç±»å‹ä¸Šã€‚å¦‚æœéµå®ˆäº†è¿™ä¸ªåè®®ï¼Œå¹¶ä¸”è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯ Encodable çš„ï¼Œ ç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨çš„ç”Ÿæˆç›¸å…³çš„å®ç°ã€‚å¦‚æœä¸æ˜¯ï¼Œæˆ–è€…è¯´ä½ éœ€è¦è‡ªå®šä¹‰ä¸€äº›ä¸œè¥¿ï¼Œå°±éœ€è¦è‡ªå·±å®ç°äº†ã€‚</p>
<p><code>Decodable</code>è¿™ä¸ªåè®®è·Ÿ <code>Encodable</code> ç›¸åï¼Œå®ƒè¡¨ç¤ºé‚£äº›èƒ½å¤Ÿè¢«è§£æ¡£çš„ç±»å‹ã€‚è·Ÿ <code>Encodable</code> ä¸€æ ·,ç¼–è¯‘å™¨ä¹Ÿä¼šè‡ªåŠ¨ä¸ºä½ ç”Ÿæˆç›¸å…³çš„å®ç°ï¼Œå‰ææ˜¯æ‰€æœ‰å±æ€§éƒ½æ˜¯ Decodable çš„</p>
<p>ç”±äºè¿™ä¸¤ä¸ªåè®®æ€»æ˜¯ä¸€èµ·å‡ºç°ï¼Œæ‰€ä»¥å°±å¼•å…¥äº†ç¬¬ä¸‰ä¸ªåè®®:<code>Codable</code> ã€‚<code>Codable</code>åªæ˜¯æŠŠ <code>Decodable</code>  å’Œ <code>Encodable</code> è¿åˆ°äº†ä¸€èµ·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typealias</span> <span class="type">Codable</span> = <span class="type">Decodable</span> &amp; <span class="type">Encodable</span></div></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªåè®®éƒ½å¾ˆç®€å•ã€‚æ¯ä¸€ä¸ªéƒ½åªæœ‰ä¸€ä¸ªå®ç°:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Encodable</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">func</span> <span class="title">encode</span><span class="params">(to encoder: Encoder)</span></span> <span class="keyword">throws</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Decodable</span> </span>&#123;</div><div class="line">	<span class="keyword">init</span>(from decoder: <span class="type">Decoder</span>) <span class="keyword">throws</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªåè®®è¯´æ˜äº†å¯¹è±¡èƒ½å¤Ÿè‡ªå·±ç¼–ç å’Œè§£ç è‡ªå·±ã€‚ä½ ä¸éœ€è¦å»è€ƒè™‘ä»–ä»¬çš„åŸºç¡€ç”¨æ³•ï¼Œå› ä¸º <code>Codable</code> å·²ç»ç»™ä½ æ·»åŠ äº†é»˜è®¤å®ç°çš„æ‰€æœ‰ç»†èŠ‚, åªæœ‰åœ¨ä½ éœ€è¦è‡ªå·±å®ç° Codable çš„æ—¶å€™æ‰éœ€è¦ç”¨åˆ°ä»–ä»¬ã€‚è¿™æ˜¯æ¯”è¾ƒå¤æ‚çš„éƒ¨åˆ†äº†ï¼Œåé¢æˆ‘ä»¬ä¼šå†è¯´è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªå« <code>CodingKey</code> çš„åè®®ï¼Œç”¨æ¥è¡¨ç¤ºç¼–ç å’Œè§£ç çš„ keyã€‚ä¸ä½¿ç”¨æ™®é€šçš„å­—ç¬¦ä¸²ç›¸æ¯”ï¼Œä»–ä¸ºç¨‹åºæ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„é™æ€ç±»å‹æ£€æŸ¥å±‚ã€‚ä»–æä¾›äº† String å’Œä¸€ä¸ªå¯é€‰çš„ Int ä½œä¸ºä½ç½®é”®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">CodingKey</span> </span>&#123;</div><div class="line">	<span class="keyword">var</span> stringValue: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">	<span class="keyword">init</span>?(stringValue: <span class="type">String</span>)</div><div class="line">	<span class="keyword">var</span> intValue: <span class="type">Int</span>? &#123; <span class="keyword">get</span> &#125;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">init</span>?(intValue: <span class="type">Int</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç¼–ç å™¨å’Œè§£ç å™¨"><a href="#ç¼–ç å™¨å’Œè§£ç å™¨" class="headerlink" title="ç¼–ç å™¨å’Œè§£ç å™¨"></a>ç¼–ç å™¨å’Œè§£ç å™¨</h3><p>Encoder å’Œ Decoder çš„åŸºæœ¬æ¦‚å¿µè·Ÿ NSCoder ç±»ä¼¼ã€‚å¯¹è±¡æ¥å—ä¸€ä¸ªç¼–ç å™¨ç„¶åè°ƒç”¨è‡ªå·±çš„æ–¹æ³•æ¥ç¼–ç æˆ–è€…è§£ç ã€‚</p>
<p><code>NSCoder</code> çš„API æ˜¯å¾ˆç›´æ¥çš„ã€‚NSCoder æœ‰ä¸€ç³»åˆ—åƒæ˜¯ <code>encodeObject:forKey</code> è¿˜æœ‰<code>encodeInteger:forKey</code>çš„æ–¹æ³•ã€‚å¯¹è±¡è°ƒç”¨ä»–ä»¬æ¥å®Œæˆä»–ä»¬çš„ç¼–ç ã€‚å½“ç„¶è¿˜æœ‰ä¸€äº›ä¸éœ€è¦ key çš„æ–¹æ³•æ¯”å¦‚è¯´<code>encodeObject:</code> å’Œ<code>encodeInteger</code> ã€‚ä»–ä»¬ä¸éœ€è¦é€šè¿‡é”®æ¥å®šä½ã€‚</p>
<p>Swift çš„ API å°±æ²¡é‚£ä¹ˆç›´æ¥äº†ã€‚ Encoder ä¸æä¾›ç¼–ç æ–¹æ³•è€Œæ˜¯æä¾›å®¹å™¨ï¼Œç”±å®¹å™¨æ¥åšç¼–ç çš„å·¥ä½œã€‚ä¸€ä¸ªç”¨äºé”®æ§ç¼–ç ï¼Œä¸€ä¸ªç”¨äºæ— é”®ç¼–ç ï¼Œä¸€ä¸ªç”¨æ¥ç¼–ç å•ä¸ªçš„å€¼ã€‚</p>
<p>è¿™æ ·è®¾è®¡èƒ½å¤Ÿè®©äº‹æƒ…æ›´æ¸…æ™°ï¼Œ ä¹Ÿæ›´é€‚åˆé‚£äº›ä¾¿äºæºå¸¦çš„åºåˆ—åŒ–æ ¼å¼ã€‚NSCoder æŒ‡éœ€è¦ä½¿ç”¨è‹¹æœçš„ç¼–ç æ ¼å¼ï¼Œæ‰€ä»¥æ”¾åœ¨ä¸€èµ·æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯ Encoder å¿…é¡»ä½¿ç”¨JSONè¿™ä¸€ç±»ä¸œè¥¿:å¦‚æœä¸€ä¸ªå¯¹è±¡ä½¿ç”¨äº†é”®ç¼–ç ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ª JSON å­—å…¸ï¼Œå¦‚æœä½¿ç”¨çš„æ— é”®ç¼–ç ï¼Œäº§ç”Ÿçš„å°±æ˜¯ä¸€ä¸ª JSON æ•°ç»„ã€‚ä½†æ˜¯å¦‚æœå¯¹è±¡æ˜¯ä¸ºç©ºï¼Œå¹¶ä¸”æ²¡æœ‰ç¼–ç å€¼å‘¢ï¼Ÿä½¿ç”¨ NSCoderï¼Œ æ˜¯æ— æ³•çŸ¥é“åˆ°åº•è¾“å‡ºä»€ä¹ˆçš„ã€‚è¦æ˜¯ä½¿ç”¨ <code>Encoder</code> çš„è¯, å¯¹è±¡ä¼šè¯·æ±‚ä¸€ä¸ªæœ‰é”®å®¹å™¨æˆ–è€…æ˜¯æ— é”®å®¹å™¨è¿™æ—¶å€™ç¼–ç å™¨å°±èƒ½å¤Ÿä»ä¸­çš„å€¼åˆ°åº•éœ€è¦è¿”å›ä»€ä¹ˆäº†ã€‚</p>
<p><code>Decoder</code> ä¹Ÿå·®ä¸å¤šï¼Œæˆ‘ä»¬ä¸ç›´æ¥ä»ä¸­è·å–è§£ç å€¼ï¼Œè€Œæ˜¯é€šè¿‡è¯·æ±‚ä¸€ä¸ªå®¹å™¨ï¼Œä»è¿™ä¸ªå®¹å™¨ä¸­è·å–ã€‚è·Ÿ <code>Encoder</code> ä¸€æ ·, <code>Decoder</code> ä¹Ÿæä¾›äº†æœ‰é”®å®¹å™¨ã€æ— é”®å®¹å™¨ï¼Œè¿˜æœ‰ç”¨æ¥è§£ç å•ä¸ªå€¼çš„å®¹å™¨ã€‚</p>
<p>å› ä¸ºå®¹å™¨è¿™ä¸ªè®¾è®¡ï¼Œ <code>Encoder</code> å’Œ<code>Decoder</code> è¿™ä¸¤ä¸ªåè®®å°±éå¸¸çš„å°çš„ã€‚ä»–ä»¬åªéœ€è¦å°‘é‡çš„ä¿¡æ¯(è·¯å¾„ info ä¹‹ç±»çš„), åŠ ä¸Šä¸€äº›è·å–å®¹å™¨çš„æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Encoder</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> codingPath: [<span class="type">CodingKey</span>?] &#123; <span class="keyword">get</span> &#125;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">var</span> userInfo: [<span class="type">CodingUserInfoKey</span> : <span class="type">Any</span>] &#123; <span class="keyword">get</span> &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">container</span>&lt;Key&gt;<span class="params">(keyedBy type: Key.<span class="keyword">Type</span>)</span></span></div><div class="line">          -&gt; <span class="type">KeyedEncodingContainer</span>&lt;<span class="type">Key</span>&gt; <span class="keyword">where</span> <span class="type">Key</span> : <span class="type">CodingKey</span></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">unkeyedContainer</span><span class="params">()</span></span> -&gt; <span class="type">UnkeyedEncodingContainer</span></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">singleValueContainer</span><span class="params">()</span></span> -&gt; <span class="type">SingleValueEncodingContainer</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Decoder</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> codingPath: [<span class="type">CodingKey</span>?] &#123; <span class="keyword">get</span> &#125;</div><div class="line">  <span class="keyword">var</span> userInfo: [<span class="type">CodingUserInfoKey</span> : <span class="type">Any</span>] &#123; <span class="keyword">get</span> &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">container</span>&lt;Key&gt;<span class="params">(keyedBy type: Key.<span class="keyword">Type</span>)</span></span> <span class="keyword">throws</span></div><div class="line">          -&gt; <span class="type">KeyedDecodingContainer</span>&lt;<span class="type">Key</span>&gt; <span class="keyword">where</span> <span class="type">Key</span> : <span class="type">CodingKey</span></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">unkeyedContainer</span><span class="params">()</span></span> <span class="keyword">throws</span> -&gt; <span class="type">UnkeyedDecodingContainer</span></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">singleValueContainer</span><span class="params">()</span></span> <span class="keyword">throws</span> -&gt; <span class="type">SingleValueDecodingContainer</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¤æ‚çš„éƒ¨åˆ†æ˜¯åœ¨è¿™äº›å®¹å™¨é‡Œé¢çš„ã€‚ä½ å¯ä»¥é€šè¿‡é€’å½’åœ¨ Codable çš„å±æ€§ä¸­èµ°åˆ°å¾ˆæ·±çš„èŠ‚ç‚¹ã€‚ä¸è¿‡ï¼ŒæŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è·å–å¯ä»¥è¢«ç¼–è§£ç çš„å…ƒæ•°æ®ç±»å‹ã€‚ åœ¨ Codable ä¸­è¿™ç§ç±»å‹å¯èƒ½æ˜¯å„ç§ <code>Int</code>ã€ <code>Float</code> ã€<code>Double</code>ã€ <code>Bool</code> ã€<code>String</code>â€¦.ã€‚è¿™å°±å½¢æˆäº†ä¸€æ•´å¥—ç›¸ä¼¼çš„ç¼–è§£ç æ–¹æ³•ã€‚æ— é”®å®¹å™¨ä¹Ÿç›´æ¥æ”¯æŒç¼–ç è¿™äº›ç±»å‹çš„åºåˆ—ã€‚</p>
<p>é™¤äº†è¿™äº›åŸºæœ¬çš„æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ–¹æ³•æ¥æ”¯æŒå„ç§ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<ul>
<li>KeyedDecodingContainer æœ‰ä¸ªå«åš <code>decodeIfPresent</code> çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª å¯é€‰ç±»å‹ï¼Œ å½“æ‰¾ä¸åˆ°æŸä¸ª key çš„æ—¶å€™ï¼Œè¿”å› nil è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>ç¼–ç å®¹å™¨ä¹Ÿæ”¯æŒè½¯ç¼–ç , åªæœ‰åœ¨å…¶ä»–å¯¹è±¡ä¹Ÿåœ¨ç¼–ç çš„æ—¶å€™æ‰ä¼šç¼–ç ã€‚è¿™ä¸ªå¯ä»¥ç”¨æ¥å¤„ç†ä¸€äº›å¤æ‚çš„çˆ¶å¼•ç”¨ã€‚</li>
<li>è¿˜æœ‰ä¸€å†™æ–¹æ³•ç”¨æ¥è·å–åµŒå¥—å®¹å™¨ï¼Œè¿™ç§å®¹å™¨èƒ½å¤Ÿç¼–ç ä¸åŒçš„å±‚æ¬¡ç»“æ„ã€‚</li>
<li>æœ€åè¿˜æœ‰è·å– super ç¼–è§£ç å™¨çš„æ–¹æ³•, è¿™ç§æ–¹æ³•èƒ½å¤Ÿè®©å­ç±»å’Œçˆ¶ç±»åœ¨ç¼–è§£ç çš„è¿‡ç¨‹ä¸­å…±å­˜,å­ç±»èƒ½å¤Ÿç›´æ¥ç¼–ç è‡ªå·±, ä¹Ÿèƒ½å¤Ÿé€šè¿‡è°ƒç”¨çˆ¶ç±»ç¼–ç å™¨æ¥ç¼–ç è‡ªå·±, å”¯ä¸€çš„è¦æ±‚æ˜¯ key ä¸å†²çªã€‚</li>
</ul>
<h3 id="å®ç°-Codable"><a href="#å®ç°-Codable" class="headerlink" title="å®ç° Codable"></a>å®ç° Codable</h3><p>å®ç° Codable æ˜¯å¾ˆç®€å•ï¼šéµå®ˆåè®®ï¼Œç„¶åç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨å¸®ä½ åšå‰©ä¸‹çš„äº‹æƒ…äº†ã€‚</p>
<p>è¦çŸ¥é“å®ƒåˆ°åº•å¹²äº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒçš„æœ€ç»ˆæ•ˆæœæ˜¯ä»€ä¹ˆæ ·çš„ï¼Œç„¶åå†çœ‹çœ‹å¦‚æœè¦è‡ªå·±æï¼Œåº”è¯¥åšäº›ä»€ä¹ˆã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹è¿™ä¸ª Codable çš„ç±»å‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Codable</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">  <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">  <span class="keyword">var</span> quest: <span class="type">String</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ key åµŒå¥—åœ¨ Person ç±»ä¸­ã€‚å¦‚æœæˆ‘ä»¬è‡ªå·±æ¥åšè¿™ä»¶äº‹æƒ…ï¼Œè¿™ä¸ªåµŒå¥—ç±»å‹ä¼šæ˜¯è¿™æ ·çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">enum</span> <span class="title">CodingKeys</span>: <span class="title">CodingKey</span> </span>&#123;</div><div class="line">  <span class="keyword">case</span> name</div><div class="line">  <span class="keyword">case</span> age</div><div class="line">  <span class="keyword">case</span> quest</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™äº›æšä¸¾å¯¹åº” Person ç±»ä¸­çš„å„ç§å±æ€§åç§°ã€‚ç¼–è¯‘å™¨å¾ˆæ™ºèƒ½çš„ç»™æ¯ä¸ªCodingKey çš„å€¼åŒ¹é…äº†å¯¹åº”çš„å±æ€§åï¼Œè¿™å°±æ˜¯è¯´å±æ€§åå°±æ˜¯å½’æ¡£è¿™ä¸ªå¯¹è±¡æ‰€è¦ç”¨çš„ key å€¼ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦ç”¨ä¸åŒçš„åç§°, åªéœ€è¦æä¾›æˆ‘ä»¬è‡ªå·±çš„ CodingKey ã€‚åƒè¿™æ ·:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">enum</span> <span class="title">CodingKeys</span>:<span class="title">String</span>, <span class="title">CodingKey</span> </span>&#123;</div><div class="line">  <span class="keyword">case</span> name = <span class="string">"person_name"</span></div><div class="line">  <span class="keyword">case</span> age</div><div class="line">  <span class="keyword">case</span> quest</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å†™å°±ä¼šè®© Person çš„ name å±æ€§é€šè¿‡ â€œperson_nameâ€æ¥å®ç°ç¼–ç å’Œè§£ç ã€‚è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦åšçš„æ‰€æœ‰äº‹æƒ…äº†ã€‚ç¼–è¯‘å™¨èƒ½å¤Ÿå¾ˆè½»æ¾çš„æ¥å—æˆ‘ä»¬è‡ªå®šä¹‰çš„ CodingKey ç±»å‹ï¼Œç„¶åå¸®ä½ å®ç° Codable å‰©ä¸‹çš„éƒ¨åˆ†ï¼Œå¹¶ä¸”è¿™äº›é»˜è®¤çš„å®ç°æ”¯æŒæˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»å‹ã€‚</p>
<p>ç¼–è¯‘å™¨åŒæ—¶ä¹Ÿç”Ÿæˆäº† <code>encode(to:)</code> ã€<code>init(from:)</code> ç›¸å…³çš„å®ç°ã€‚ <code>encode(to:)</code> çš„å®ç°, é¦–å…ˆè·å–åˆ°æœ‰é”®å®¹å™¨ç„¶åæŒ¨ä¸ªå» encode æ‰€æœ‰çš„å±æ€§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">encode</span><span class="params">(to encoder: Encoder)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">  <span class="keyword">var</span> container = encoder.container(keyedBy: <span class="type">CodingKeys</span>.<span class="keyword">self</span>)</div><div class="line">  </div><div class="line">  <span class="keyword">try</span> container.encode(name, forKey: .name)</div><div class="line">  <span class="keyword">try</span> container.encode(age, forKey: .age)</div><div class="line">  <span class="keyword">try</span> container.encode(quest, forKey: .quest)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¼–è¯‘å™¨ä¹Ÿä¼šå®ç° <code>inin(from:)</code> åƒæ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">init</span>(from decoder: <span class="type">Decoder</span>) <span class="keyword">throws</span> &#123;</div><div class="line">  <span class="keyword">let</span> container = <span class="keyword">try</span> decoder.container(keyedBy:<span class="type">CodingKeys</span>.<span class="keyword">self</span>)</div><div class="line">  </div><div class="line">  name = <span class="keyword">try</span> container.decode(<span class="type">String</span>.<span class="keyword">self</span>, forKey: .name)</div><div class="line">  age = <span class="keyword">try</span> container.decode(<span class="type">String</span>.<span class="keyword">self</span>, forKey: .age)</div><div class="line">  quest = <span class="keyword">try</span> container.decode(<span class="type">String</span>.<span class="keyword">self</span>, forKey: .quest)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯å…¨éƒ¨çš„ä¸œè¥¿äº†ã€‚å°±åƒ CodingKeys ä¸€æ ·, å¦‚æœä½ éœ€è¦è‡ªå®šä¹‰ä¸€äº›å…·ä½“çš„è¡Œä¸ºã€‚ä½ å¯ä»¥è‡ªå·±å®ç°ä½ éœ€è¦çš„éƒ¨åˆ†ï¼Œç„¶åè®©ç¼–è¯‘å™¨ä¸ºä½ è¡¥å…¨å‰©ä¸‹çš„éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œè¿˜æ˜¯æ²¡æœ‰åŠæ³•å»æŒ‡å®šæŸä¸€ä¸ªå±æ€§çš„è¡Œä¸ºï¼Œæ‰€ä»¥ï¼Œè¿˜æ˜¯éœ€è¦æŠŠæ‰€æœ‰çš„å±æ€§éƒ½å®ç°ä¸€è¾¹ï¼Œå³ä½¿ä½ å¸Œæœ›å…¶ä½™çš„éƒ¨åˆ†éƒ½æ˜¯é»˜è®¤çš„ã€‚ä¸è¿‡è¿™åº”è¯¥è¿˜å¥½å§ï¼ğŸ˜‚</p>
<p>å¦‚æœä½ å‡†å¤‡è‡ªå®šä¹‰æ‰€æœ‰çš„è¿‡é”™ã€‚Person ç±»å®Œæ•´çš„Codable å®ç°å¤§æ¦‚æ˜¯è¿™æ ·çš„:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span> </span>&#123;</div><div class="line">  <span class="keyword">private</span> <span class="class"><span class="keyword">enum</span> <span class="title">CodingKeys</span>: <span class="title">CodingKey</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> name</div><div class="line">    <span class="keyword">case</span> age</div><div class="line">    <span class="keyword">case</span> quest</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">encode</span><span class="params">(to encoder:Encoder)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">	<span class="keyword">var</span> container = encoder.container(keyedBy: <span class="type">CodingKeys</span>.<span class="keyword">self</span>)</div><div class="line"></div><div class="line">	<span class="keyword">try</span> container.encode(name, forKey: .name)</div><div class="line">	<span class="keyword">try</span> container.encode(age, forKey: .age)</div><div class="line">	<span class="keyword">try</span> container.encode(quest, forKey: .quest)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="keyword">init</span>(from decoder: <span class="type">Decoder</span>) <span class="keyword">throws</span> &#123;</div><div class="line">	<span class="keyword">let</span> container = <span class="keyword">try</span> decoder.container(keyedBy: <span class="type">CodingKeys</span>.<span class="keyword">self</span>)</div><div class="line"></div><div class="line">	name = <span class="keyword">try</span> container.decode(<span class="type">String</span>.<span class="keyword">self</span>, forKey: .name)</div><div class="line">	age = <span class="keyword">try</span> container.decode(<span class="type">Int</span>.<span class="keyword">self</span>, forKey: .age)</div><div class="line">	quest = <span class="keyword">try</span> container.decode(<span class="type">String</span>.<span class="keyword">self</span>, forKey: .quest)</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å®ç°-Encoderã€-Decoder"><a href="#å®ç°-Encoderã€-Decoder" class="headerlink" title="å®ç° Encoderã€ Decoder"></a>å®ç° Encoderã€ Decoder</h3><p>ä½ å¯èƒ½æ°¸è¿œéƒ½ä¸éœ€è¦è‡ªå·±å®ç° <code>Endocer</code> æˆ–è€…æ˜¯ <code>Decoder</code>. Swift å·²ç»å¾ˆå¥½çš„æ”¯æŒäº† JSONã€PropertyListã€‚è€Œè¿™ä¸¤ä¸ªåŸºæœ¬ä¸ŠåŒ…å«äº†æ‰€æœ‰çš„å¯èƒ½é‡è§çš„æ•°æ®æ ¼å¼ã€‚</p>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±å»å®ç°ä¸€å¥—æ¥æ”¯æŒä½ çš„è‡ªå®šä¹‰æ ¼å¼ã€‚container  åè®®çš„å¤§å°è¯´æ˜è¿™éœ€è¦èŠ±ç‚¹ç²¾åŠ›ï¼Œä½†æ˜¯è¿™åªæ˜¯å¤§å°çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯å¢åŠ äº†ä»€ä¹ˆå¤æ‚åº¦ã€‚</p>
<p>è¦å®ç°è‡ªå®šä¹‰çš„ <code>Encoder</code>,  ä½ éœ€è¦ä¸€ä¸ªå®ç°äº† Encoder åè®® åŒæ—¶ä¹Ÿè¦å®ç°å®¹å™¨åè®®çš„ä¸œè¥¿ã€‚å®ç°ä¸‰ä¸ªå®¹å™¨åè®®éœ€è¦å¤§é‡çš„æ¨¡ç‰ˆä»£ç ï¼Œæ¥å®ç°ç¼–è§£ç ã€‚</p>
<p>ä»–ä»¬å…·ä½“è¦æ€ä¹ˆåšå®Œå…¨æ˜¯çœ‹ä½ äº†ï¼Œ ç¼–ç å™¨å¯èƒ½éœ€è¦ä¿å­˜æ­£åœ¨è¢«ç¼–ç çš„çš„æ•°æ®ï¼Œå®¹å™¨éœ€è¦ç»™ç¼–ç å™¨æä¾›æ­£åœ¨è¢«ç¼–ç æ•°æ®çš„å„ç§ä¿¡æ¯ã€‚</p>
<p>å®ç°è‡ªå®šä¹‰çš„ <code>Decoder</code> ä¹Ÿå·®ä¸å¤šã€‚ä½ éœ€è¦åœ¨å®ç°è¿™ä¸ªåè®®çš„åŒæ—¶å®ç°å®¹å™¨åè®®ã€‚è§£ç å™¨ä¿å­˜åºåˆ—åŒ–æ•°æ®ï¼Œå®¹å™¨è·Ÿä»–é€šä¿¡æä¾›å…·ä½“çš„ç±»å‹ä¿¡æ¯ã€‚</p>
<h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>Swift 4 çš„ Codable çœ‹èµ·æ¥æ˜¯å¾ˆå¼ºå¤§ï¼Œä»–ä»¬ç®€åŒ–å¾ˆå¤šä»£ç ã€‚å¯¹ JSON æ¥è¯´ï¼Œ å£°æ˜å¯¹åº”çš„æ¨¡å‹æ¥éµå®ˆ Codable åè®®ï¼Œè®©åè®©ç¼–è¯‘å™¨åšå‰©ä¸‹çš„äº‹æƒ…ï¼Œå°±å®Œå…¨å¤Ÿäº†ã€‚å¦‚æœéœ€è¦ï¼Œä½ è¿˜å¯ä»¥å®ç°è¿™ä¸ªåè®®çš„æŸä¸€ä¸ªéƒ¨åˆ†æ¥æ»¡è¶³ä½ è‡ªå·±çš„éœ€æ±‚ï¼Œç”šè‡³ä½ è¿˜å¯ä»¥å®Œå…¨è‡ªå·±å®ç°ã€‚</p>
<p>Encoder å’Œ Decoder éƒ½å¾ˆå¤æ‚ï¼Œä½†æ˜¯æ²¡åŠæ³•ã€‚é€šè¿‡è‡ªå·±å®ç° Encoder å’Œ Decoder æ¥æ”¯æŒä¸€ä¸ªè‡ªå®šä¹‰æ•°æ®æ ¼å¼éœ€è¦åšä¸€äº›å·¥ä½œï¼Œä½†è¿™åŸºæœ¬ä¸Šä¹Ÿéƒ½æ˜¯åšä¸€äº›å¡«ç©ºé¢˜ã€‚</p>
<p><a href="https://www.mikeash.com/pyblog/friday-qa-2017-07-14-swiftcodable.html">åŸæ–‡åœ°å€:Friday Q&amp;A 2017-07-14: Swift.Codable</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;WWDC2017ä¸­å‘å¸ƒçš„ Swift4.0 æœ‰ä¸€ä¸ªæœ‰è¶£çš„æ–°ç‰¹æ€§ï¼š Coadble. ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠè¿™ä¸ª Swift4.0 å¸¦æ¥çš„åè®®ï¼&lt;/p&gt;
&lt;h3 id=&quot;Serialization&quot;&gt;&lt;a href=&quot;#Serialization&quot; class=&quot;headerlink&quot; title=&quot;Serialization&quot;&gt;&lt;/a&gt;Serialization&lt;/h3&gt;&lt;p&gt;å¯¹ç°åœ¨éœ€è¦éšæ—¶è”ç½‘çš„ç§»åŠ¨åº”ç”¨æ¥è¯´ï¼ŒæŠŠå€¼åºåˆ—åŒ–æˆèƒ½å¤Ÿåœ¨ç¡¬ç›˜æˆ–è€…é€šè¿‡ç½‘ç»œä¼ é€çš„æ•°æ®æ˜¯ä¸€ä¸ªåŸºæœ¬çš„éœ€æ±‚ã€‚ä½†æ˜¯åœ¨è‹¹æœçš„ç”Ÿæ€ä¸­æˆ‘ä»¬çš„é€‰æ‹©å¾ˆæœ‰é™ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>iOS å†…å­˜æ³„æ¼ä¸‰ä¸¤äº‹</title>
    <link href="http://www.CepheusSun.com/iOS%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E4%B8%89%E4%B8%A4%E4%BA%8B.html"/>
    <id>http://www.CepheusSun.com/iOS å†…å­˜æ³„æ¼ä¸‰ä¸¤äº‹.html</id>
    <published>2017-08-26T16:00:00.000Z</published>
    <updated>2017-08-27T15:40:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç›¸ä¿¡å¤§å®¶éƒ½æœ‰è¿‡é‡å†™ <code>dealloc</code> æ–¹æ³•æ¥æ£€æŸ¥æŸä¸ª view controller åœ¨æ¶ˆå¤±åæ˜¯å¦è¢«é‡Šæ”¾çš„ç»å†ã€‚è¿™å‡ ä¹æ˜¯ iOS ä¸­å¯»æ‰¾ç”±äºå¼•ç”¨å¾ªç¯é€ æˆå†…å­˜æ³„æ¼æœ€æœ‰æ•ˆçš„æ–¹æ³•äº†ã€‚åŸºæœ¬ä¸Šæ¯æ¬¡å‘å¸ƒï¼Œéƒ½ä¼šåšå¾ˆå¤šæ¬¡è¿™ç§äº‹æƒ…ã€‚ä¸å¾—ä¸è¯´è¿™ä»¶äº‹æƒ…å¾ˆæ— èŠï¼Œå¹¶ä¸”å¾ˆå¯èƒ½ä¼šå‡ºé”™ã€‚<strong>å¦‚æœæˆ‘ä»¬åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­, æå‰çš„å­¦ä¹ ç›¸å…³çš„çŸ¥è¯†, é‚£è¯¥å¤šå¥½ï¼Ÿ</strong></p>
<a id="more"></a>
<p>ä¸‹é¢æ˜¯ä¸¤ä¸ªå¾ˆå°‘è§çš„ <code>UIViewController</code>çš„å±æ€§:</p>
<ul>
<li><code>isBeingDismissed</code> å½“ä¸€ä¸ªæ¨¡æ€æ¨é€å‡ºæ¥çš„ view controller æ­£åœ¨æ¶ˆå¤±çš„æ—¶å€™, ä¸º: true.</li>
<li><code>isMovingFromParentViewController</code> ,å½“ä¸€ä¸ª view controller æ­£åœ¨ä»å®ƒçš„çˆ¶ view contrlller ä¸­ç§»é™¤çš„æ—¶å€™(åŒ…æ‹¬ä»ç³»ç»Ÿçš„å®¹å™¨è¯•å›¾æ¯”å¦‚è¯´ UINavigationController), ä¸ºtrue.</li>
</ul>
<p>å¦‚æœè¿™ä¸¤ä¸ªå±æ€§æœ‰ä¸€ä¸ªæ˜¯ <code>true</code> çš„è¯, è¿™ä¸ª view controller å°±ä¼šè‡ªåŠ¨çš„è¢«é‡Šæ”¾æ‰ã€‚æˆ‘ä»¬ä¸çŸ¥é“ä¸€ä¸ª view contrller å®Œæˆå†…éƒ¨çŠ¶æ€çš„æ”¹å˜ï¼Œå¹¶ä¸”è¢« ARC é‡Šæ”¾æ‰éœ€è¦è€—è´¹å¤šé•¿çš„æ—¶é—´ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å‡è®¾å®ƒä¸ä¼šè¶…è¿‡ä¸¤ç§’ã€‚</p>
<p>1.ç°åœ¨çœ‹çœ‹ä¸‹é¢çš„ä»£ç (æ–‡æœ«ä¼šæœ‰OCç‰ˆ):</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">dch_checkDeallocation</span><span class="params">(afterDelay delay: TimeInterval = <span class="number">2.0</span>)</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> rootParentViewController = dch_rootParentViewController</div><div class="line"></div><div class="line">        <span class="comment">// We donâ€™t check `isBeingDismissed` simply on this view controller because itâ€™s common</span></div><div class="line">        <span class="comment">// to wrap a view controller in another view controller (e.g. in UINavigationController)</span></div><div class="line">        <span class="comment">// and present the wrapping view controller instead.</span></div><div class="line">        <span class="keyword">if</span> isMovingFromParentViewController || rootParentViewController.isBeingDismissed &#123;</div><div class="line">            <span class="keyword">let</span> type = type(of: <span class="keyword">self</span>)</div><div class="line">            <span class="keyword">let</span> disappearanceSource: <span class="type">String</span> = isMovingFromParentViewController ? <span class="string">"removed from its parent"</span> : <span class="string">"dismissed"</span></div><div class="line"></div><div class="line">            <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() + delay, execute: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></div><div class="line">                <span class="built_in">assert</span>(<span class="keyword">self</span> == <span class="literal">nil</span>, <span class="string">"<span class="subst">\(type)</span> not deallocated after being <span class="subst">\(disappearanceSource)</span>"</span>)</div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> dch_rootParentViewController: <span class="type">UIViewController</span> &#123;</div><div class="line">        <span class="keyword">var</span> root = <span class="keyword">self</span></div><div class="line"></div><div class="line">        <span class="keyword">while</span> <span class="keyword">let</span> parent = root.parent &#123;</div><div class="line">            root = parent</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> root</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> åœ¨å»¶æ—¶æ“ä½œè¿™ä¸ªé—­åŒ…ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡ <code>[weak self]</code> æ¥é¿å…è¿™ä¸ªé—­åŒ…å¼ºå¼•ç”¨selfã€‚ç„¶åé€šè¿‡æ–­è¨€è®©ç¨‹åºåœ¨ <code>self</code> ä¸ä¸ºç©ºçš„æ—¶å€™æŠ›å‡ºå¼‚å¸¸ã€‚<strong>åªæœ‰å­˜åœ¨å¾ªç¯å¼•ç”¨çš„æƒ…å†µä¸‹è¿™ä¸ª view controller æ‰ä¸ä¸ºç©ºã€‚</strong></p>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åœ¨ <code>viewDidDisappear</code> ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚åªè¦æ˜¯ä½ éœ€è¦æ£€æŸ¥å®ƒåœ¨æ¶ˆå¤±åæ˜¯ä¸æ˜¯è¢«é‡Šæ”¾æ‰çš„ view controller éƒ½éœ€è¦æ·»åŠ è¿™ä¸ªæ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidDisappear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</div><div class="line">    <span class="keyword">super</span>.viewDidDisappear(animated)</div><div class="line"></div><div class="line">    dch_checkDeallocation()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœå‘å£°äº†å†…å­˜æ³„æ¼ï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸‹é¢çš„æ–­è¨€:</p>
<p><img src="http://holko.pl/public/images/deallocation_checker@2x.png" alt=""></p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰“å¼€ Xcode çš„ <a href="https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/debugging_with_xcode/chapters/special_debugging_workflows.html#//apple_ref/doc/uid/TP40015022-CH9-DontLinkElementID_1">Memory Graph Debugger</a> æ‰¾åˆ°å¹¶ä¸”è§£å†³è¿™äº›å¾ªç¯å¼•ç”¨ã€‚</p>
<ol>
<li>å¦å¤–åœ¨ twitter ä¸Šä¹Ÿçœ‹åˆ°äº†ç±»ä¼¼çš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ol>
<p><img src="https://pbs.twimg.com/media/DH_nWyhXUAIqByQ.png" alt=""></p>
<p>3.ä½¿ç”¨å›½äººå†™çš„ MLeaksFinder åœ¨æ¯æ¬¡å‘ç”Ÿå†…å­˜æ³„æ¼çš„æ—¶å€™éƒ½ä¼šå¼¹çª—ã€‚å¹¶ä¸”æ²¡æœ‰ä»£ç ä¾µå…¥æ€§ï¼Œåªéœ€è¦ä½¿ç”¨ CocosPod å¯¼å…¥å°±å¯ä»¥äº†ã€‚</p>
<p>4.åœ¨ä½¿ç”¨å›¾ç‰‡èµ„æºçš„æ—¶å€™ï¼Œå°‘ä½¿ç”¨  <code>imageNamed:</code> æ–¹æ³•å»è·å–ä½¿ç”¨é¢‘æ¬¡ä¸é«˜çš„å›¾ç‰‡èµ„æºã€‚å› ä¸ºä½¿ç”¨ <code>imageNamed:</code>åŠ è½½çš„å›¾ç‰‡èµ„æºä¼šä¸€ç›´å­˜åœ¨å†…å­˜é‡Œé¢ï¼Œ å¯¹å†…å­˜çš„æµªè´¹ä¹Ÿæ˜¯å·¨å¤§çš„ã€‚</p>
<p>5.ä¸Šé¢çš„æ–¹æ³•å†™äº†ä¸€ä¸ª OC ç‰ˆæœ¬çš„ï¼š </p>
<p>.h:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">#import &lt;UIKit/UIKit.h&gt;</div><div class="line"></div><div class="line">@interface UIViewController (FindLeaks)</div><div class="line"></div><div class="line"></div><div class="line">// é»˜è®¤ä¸º NO</div><div class="line">@property (nonatomic) BOOL noCheckLeaks;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>.m:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line">//</div><div class="line">//  UIViewController+FindLeaks.m</div><div class="line">//  Leaks</div><div class="line">//</div><div class="line">//  Created by sunny on 2017/8/27.</div><div class="line">//  Copyright Â© 2017å¹´ CepheusSun. All rights reserved.</div><div class="line">//</div><div class="line"></div><div class="line">#import &quot;UIViewController+FindLeaks.h&quot;</div><div class="line">#import &lt;objc/runtime.h&gt;</div><div class="line"></div><div class="line">static const char *noCheckLeaksKey = &quot;noChechLeaksKey&quot;;</div><div class="line"></div><div class="line">@interface NSObject (MethodSwizzling)</div><div class="line"></div><div class="line">+ (void)sy_swizzleInstanceSelector:(SEL)origSelector</div><div class="line">                   swizzleSelector:(SEL)swizzleSelector;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation UIViewController (FindLeaks)</div><div class="line"></div><div class="line">#pragma mark - Binding Property</div><div class="line">- (BOOL)noCheckLeaks &#123;</div><div class="line">    return [objc_getAssociatedObject(self, noCheckLeaksKey) boolValue];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)setNoCheckLeaks:(BOOL)noCheckLeaks &#123;</div><div class="line">    objc_setAssociatedObject(self, noCheckLeaksKey, [NSNumber numberWithBool:noCheckLeaks], OBJC_ASSOCIATION_RETAIN_NONATOMIC);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">#pragma mark - Check</div><div class="line">+ (void)load &#123;</div><div class="line">    </div><div class="line">#if DEBUG</div><div class="line">    [self sy_swizzleInstanceSelector:@selector(viewDidDisappear:) swizzleSelector:@selector(fl_viewDidDisappear:)];</div><div class="line">#endif</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)fl_viewDidDisappear:(BOOL)animated &#123;</div><div class="line">    [self fl_viewDidDisappear:animated];</div><div class="line">    if (!self.noCheckLeaks) &#123;</div><div class="line">        [self fl_checkDeallocationAfterDelay:2];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)fl_checkDeallocationAfterDelay:(NSTimeInterval)delay &#123;</div><div class="line">    UIViewController *root = [self fl_rootParentViewController];</div><div class="line">    if (self.isMovingFromParentViewController || root.isBeingDismissed) &#123;</div><div class="line">        NSString *type = NSStringFromClass([self class]);</div><div class="line">        NSString *disappearanceSource = self.isMovingFromParentViewController ? @&quot;removed from its parent&quot; : @&quot;dismissed&quot;;</div><div class="line">        __weak typeof(self) weakSelf = self;</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delay * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            NSString *assert = [NSString stringWithFormat:@&quot;%@ not deallocated after being %@&quot;,</div><div class="line">             type, disappearanceSource];</div><div class="line">            NSAssert(weakSelf == nil,assert);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (UIViewController *)fl_rootParentViewController &#123;</div><div class="line">    UIViewController *root = self;</div><div class="line">    while (root.parentViewController) &#123;</div><div class="line">        root = root.parentViewController;</div><div class="line">    &#125;</div><div class="line">    return root;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation NSObject (MethodSwizzling)</div><div class="line"></div><div class="line">+ (void)sy_swizzleInstanceSelector:(SEL)origSelector</div><div class="line">                   swizzleSelector:(SEL)swizzleSelector &#123;</div><div class="line">    </div><div class="line">    Method origMethod = class_getInstanceMethod(self, origSelector);</div><div class="line">    Method swizzleMethod = class_getInstanceMethod(self, swizzleSelector);</div><div class="line">    </div><div class="line">    BOOL isAdd = class_addMethod(self, origSelector, method_getImplementation(swizzleMethod), method_getTypeEncoding(swizzleMethod));</div><div class="line">    </div><div class="line">    if (!isAdd) &#123;</div><div class="line">        method_exchangeImplementations(origMethod, swizzleMethod);</div><div class="line">    &#125;else &#123;</div><div class="line">        class_replaceMethod(self, swizzleSelector, method_getImplementation(origMethod), method_getTypeEncoding(origMethod));</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>åªéœ€è¦åœ¨ä¸éœ€è¦æ£€æŸ¥çš„æ–¹æ³•ä¸­è®¾ç½®å±æ€§ä¸º YES å°±å¥½äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç›¸ä¿¡å¤§å®¶éƒ½æœ‰è¿‡é‡å†™ &lt;code&gt;dealloc&lt;/code&gt; æ–¹æ³•æ¥æ£€æŸ¥æŸä¸ª view controller åœ¨æ¶ˆå¤±åæ˜¯å¦è¢«é‡Šæ”¾çš„ç»å†ã€‚è¿™å‡ ä¹æ˜¯ iOS ä¸­å¯»æ‰¾ç”±äºå¼•ç”¨å¾ªç¯é€ æˆå†…å­˜æ³„æ¼æœ€æœ‰æ•ˆçš„æ–¹æ³•äº†ã€‚åŸºæœ¬ä¸Šæ¯æ¬¡å‘å¸ƒï¼Œéƒ½ä¼šåšå¾ˆå¤šæ¬¡è¿™ç§äº‹æƒ…ã€‚ä¸å¾—ä¸è¯´è¿™ä»¶äº‹æƒ…å¾ˆæ— èŠï¼Œå¹¶ä¸”å¾ˆå¯èƒ½ä¼šå‡ºé”™ã€‚&lt;strong&gt;å¦‚æœæˆ‘ä»¬åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­, æå‰çš„å­¦ä¹ ç›¸å…³çš„çŸ¥è¯†, é‚£è¯¥å¤šå¥½ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://www.CepheusSun.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Objective-C" scheme="http://www.CepheusSun.com/tags/Objective-C/"/>
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="http://www.CepheusSun.com/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªäººçš„æ•æ·å¼€å‘</title>
    <link href="http://www.CepheusSun.com/%E4%B8%80%E4%B8%AA%E4%BA%BA%E7%9A%84%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91.html"/>
    <id>http://www.CepheusSun.com/ä¸€ä¸ªäººçš„æ•æ·å¼€å‘.html</id>
    <published>2017-07-21T16:00:00.000Z</published>
    <updated>2017-07-22T09:41:39.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-114524.jpg" width="500"></p>
<p>ä¸è®ºæ˜¯åœ¨ä¸€äº›å¤§å‹çš„å¼€å‘å›¢é˜Ÿï¼Œè¿˜æ˜¯ä½œä¸ºç‹¬ç«‹å¼€å‘è€…ã€‚æˆ‘ä»¬ç»å¸¸ä¼šè¢«é¢„ç®—ã€æŠ€æœ¯è¿­ä»£ï¼Œä»¥åŠæ—¶é—´é™åˆ¶ã€‚æ‰¾åˆ°åˆé€‚çš„å·¥ä½œæ–¹å¼å»é€‚åº”è¿™äº›é™åˆ¶, æ˜¯æ‰€æœ‰å›¢é˜Ÿéƒ½éœ€è¦å»è€ƒè™‘çš„é—®é¢˜ã€‚</p>
<p><a href="https://www.raywenderlich.com/u/alex_andrews">Alex Andrews</a> åœ¨æˆç«‹ <a href="http://www.tenkettles.com/">Ten Kettles</a> çš„æ—¶å€™èŠ±äº†å¾ˆå¤šäº†ç²¾åŠ›å»è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚ç›´åˆ°æœ‰ä¸€å¤©ä¸Šå¸æŠŠæ•æ·å¼€å‘ç ¸åˆ°äº†ä»–çš„å¤´ä¸Šï¼Œå¾ˆå¿«ä»–å°±æ‰¾åˆ°äº†é€‚åˆä»–çš„æ•æ·å¼€å‘ä¹‹é“ã€‚ä»–è®¤ä¸ºæ•æ·å¼€å‘æå¤§çš„è§£æ”¾äº†ä»–çš„ç”Ÿäº§åŠ›ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±ä¼šèŠåˆ°ä»–æ˜¯æ€ä¹ˆè¿›è¡Œæ•æ·å¼€å‘çš„ã€‚</p>
<a id="more"></a>
<h2 id="è¿œå¤æ—¶ä»£"><a href="#è¿œå¤æ—¶ä»£" class="headerlink" title="è¿œå¤æ—¶ä»£"></a>è¿œå¤æ—¶ä»£</h2><p>2014å¹´ 3æœˆ 1 æ—¥ï¼Œæ˜¯ Ten Kettles æˆç«‹çš„ç¬¬ä¸€å¤©ã€‚é‚£æ—¶å€™æ•´ä¸ªå…¬å¸åªæœ‰æˆ‘ä¸€ä¸ªäººï¼Œæ²¡æœ‰æµç¨‹æ¥éµå¾ªã€‚ä»€ä¹ˆæ—¶å€™å¼€å§‹å·¥ä½œï¼Œåšä»€ä¹ˆè½¯ä»¶ï¼Œæ€ä¹ˆå®‰æ’ä»»åŠ¡â€¦â€¦. éƒ½ç”±æˆ‘è‡ªå·±å†³å®šã€‚</p>
<p>é‚£æ—¶å€™ï¼Œæˆ‘å–œæ¬¢ free styleï¼Œè™½ç„¶æœ‰æ—¶å€™ä¼šè®©æˆ‘ä¸å¤§èˆ’æœã€‚æ—©äº›æ—¶å€™ï¼Œæˆ‘åœ¨å…¶ä»–å…¬å¸åšæœç´¢å·¥ç¨‹å¸ˆ, é¢„ä¼°å·¥æœŸæ˜¯æˆ‘æœ€è‡ªè±ªçš„èƒ½åŠ›: ä½ ç»™æˆ‘ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘å‘Šè¯‰ä½ ä»€ä¹ˆæ—¶å€™å®Œæˆï¼Œåˆ°é‚£ä¸ªæ—¶å€™ï¼Œæˆ‘æŠŠä»£ç æ‹¿å‡ºæ¥ã€‚ç°åœ¨åš app è·Ÿé‚£æ—¶å€™æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è®¾è®¡äº§å“çš„äººæ¢äº†è€Œå·²ï¼Œä½†æ˜¯çŸ¥é“ 2014 å¹´å¹´åº•ï¼Œæˆ‘éƒ½è¿˜æ²¡æ„è¯†åˆ°è¿™ç‚¹ã€‚</p>
<p>åæ¥ï¼Œæˆ‘æ…¢æ…¢å‘ç°ç‹¬ç«‹å¼€å‘è€…è¿™ä¸ªç§°å‘¼ä¸æ˜¯ç‰¹åˆ«å‡†ç¡®ã€‚å› ä¸ºå†™ä»£ç ç”šè‡³éƒ½ä¸æ˜¯æˆ‘ç°åœ¨æœ€ä¸»è¦çš„å·¥ä½œå†…å®¹ï¼Œå½±å“æˆ‘å·¥ä½œæ•ˆç‡çš„äº‹æƒ…ä¸æ˜¯å†™ä»£ç ï¼Œè€Œæ˜¯è®¾è®¡äº§å“ã€‚</p>
<p><em>â€œå†åŠ ä¸€ä¸ªåŠŸèƒ½â€¦ â€œ</em></p>
<p><em>â€ä¸ï¼Œè¿™æ ·è®¾è®¡ä¸å¯¹â€¦ â€œ</em></p>
<p><em>â€åŠ è½½çš„æ—¶å€™ç­‰æœåŠ¡å™¨è¿”å›äº†åœ¨è¿›å…¥ä¸»ç•Œé¢â€¦.â€</em></p>
<p>è¿™äº›æƒ³æ³•ç®€ç›´æ— å¤„ä¸åœ¨, æˆ‘å‡ ä¹éšæ—¶éƒ½åœ¨è€ƒè™‘è¿™äº›é—®é¢˜ï¼</p>
<p>è¿™è®©æˆ‘çš„å·¥ä½œæ•ˆç‡ä¸¥é‡ä½ä¸‹ã€‚æˆ‘çš„éŸ³ä¹ç±»appï¼Œè¿œè¿œçš„è¶…å‡ºäº†è®¡åˆ’ã€‚è™½ç„¶æœ€ååšå‡ºäº†æ»¡æ„çš„äº§å“ï¼Œä½†æ˜¯ç°åœ¨å›è¿‡å¤´å»çœ‹ï¼Œæ€»æƒ³é—®è‡ªå·±ï¼Œä¸ºä»€ä¹ˆé‚£ä¹ˆé•¿çš„æ—¶é—´å´åªåšäº†è¿™ä¹ˆç‚¹äº‹æƒ…ï¼Ÿ</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-22-060635.jpg" width="500"></p>
<p>ç»“æœæ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯è¿‡ç¨‹å¹¶ä¸å®Œç¾ã€‚æˆ‘éœ€è¦ä¸€ä¸ªæ›´å¥½çš„å·¥ä½œæ–¹å¼ã€‚éœ€è¦ä¸€ä¸ªèƒ½è®©æˆ‘æ›´é«˜æ•ˆï¼Œæ›´èµšé’±ï¼Œæ›´å¹¸ç¦çš„å·¥ä½œæ–¹å¼ï¼</p>
<h2 id="å“‡ï¼Œæ•æ·å¼€å‘"><a href="#å“‡ï¼Œæ•æ·å¼€å‘" class="headerlink" title="å“‡ï¼Œæ•æ·å¼€å‘"></a>å“‡ï¼Œæ•æ·å¼€å‘</h2><p>ä¸€ç›´éƒ½åœ¨é‡å¤é‚£äº›æ— èŠä¸”è¿›å±•ç¼“æ…¢çš„å·¥ä½œã€‚æˆ‘å†³å®šç»™è‡ªå·±ä¸€ä¸ªæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘æŠŠç²¾åŠ›æ”¾åœ¨äº†ä¸€äº›å¤–åŒ…å·¥ä½œä¸Šé¢â€¦â€¦</p>
<p>çŸ¥é“æ¥è§¦åˆ°äº†ä¸€å®¶ä¸­ç­‰è§„æ¨¡çš„å…¬å¸, ä»–ä»¬æ­£å¥½åœ¨ä½¿ç”¨æ•æ·å¼€å‘æ¥è¿›è¡Œé¡¹ç›®ç®¡ç†ã€‚æˆ‘å¼€å§‹å»äº†è§£æ•æ·å¼€å‘çš„, æœŸæœ›å¥¹èƒ½å¤Ÿè®©æˆ‘æ›´é«˜æ•ˆçš„ç¼–ç¨‹ã€‚çœ‹äº†å¾ˆå¤šç›¸å…³çš„ä¹¦æˆ–è€…æ–‡ç« ä¹‹åï¼Œæˆ‘æƒŠå–œçš„å‘ç°æ•æ·å¼€å‘è§¦åŠåˆ°äº†çš„ä¸‰ä¸ªç—›ç‚¹ï¼š</p>
<ul>
<li>é«˜äº§å‡º</li>
<li>é«˜æ•ˆç‡</li>
<li>æ›´happy</li>
</ul>
<p>äºæ˜¯ï¼Œæˆ‘å¼€å§‹æ€è€ƒåœ¨æˆ‘è‡ªå·±çš„äº§å“ä¸­è¿ç”¨è¿™å¥—ç†è®ºã€‚</p>
<p>è¿™å®¶å…¬å¸çš„é¡¹ç›®åšå®Œï¼Œæˆ‘å»äº†è’™ç‰¹åˆ©å°”, æ‰“ç®—ç»™è‡ªå·±æ”¾ä¸ªå‡ï¼Œä¹Ÿä»”ç»†çš„æƒ³æƒ³æ€ä¹ˆè®©è¿™å¥—ç†è®ºç»™æˆ‘å¸¦æ¥æ•ˆç›Šã€‚æˆ‘é‡æ–°çœ‹ä¹‹å‰çš„ç¬”è®°ï¼Œé‡æ–°è¯»äº†ä¸¤æœ¬å¾ˆå¥½çš„ä¹¦ï¼Œæ€è€ƒäº†å®é™…æƒ…å†µä¸‹çš„ä¸€äº›é—®é¢˜ï¼Œæœ€åæ€»ç»“å‡ºäº†æ”¹é©æˆ‘çš„å…¬å¸çš„ä¸€äº›åŠæ³•ã€‚</p>
<h2 id="æ•æ·å¼€å‘çš„åŸºæœ¬åŸåˆ™"><a href="#æ•æ·å¼€å‘çš„åŸºæœ¬åŸåˆ™" class="headerlink" title="æ•æ·å¼€å‘çš„åŸºæœ¬åŸåˆ™"></a>æ•æ·å¼€å‘çš„åŸºæœ¬åŸåˆ™</h2><p>ä»€ä¹ˆæ˜¯æ•æ·å¼€å‘å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸€æ®µæˆ‘ç¬¬ä¸€æœ¬è¯»åˆ°çš„ä¹¦ä¸­çš„æ‘˜å½•:</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-124818.jpg" width="500"></p>
<blockquote>
<p>æ•æ·å›¢é˜Ÿé€šå¸¸ç”±7ä¸ªå·¦å³çš„äººç»„æˆï¼Œæ¯ä¸ªä»»åŠ¡é˜¶æ®µå«åšä¸€ä¸ª sprintï¼ŒåŒ…æ‹¬äº†å›é¡¾å’Œæ€»ç»“çš„æ—¶é—´ã€‚æ•æ·å¼€å‘æœ‰ä¸€ä¸ªå’’è¯­â€æ£€å¯Ÿå’Œè°ƒæ•´â€ã€‚æ•æ·å›¢é˜Ÿå…·æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç‰¹å¾ï¼šå·¥ä½œæµç¨‹å’Œäº§å“åœ¨ä¸æ–­çš„è¿›æ­¥ã€‚</p>
</blockquote>
<p>ç‹¬ç«‹å¼€å‘è·Ÿ 5-9 äººçš„å›¢é˜Ÿå¼€å‘è¿˜æ˜¯æœ‰å¾ˆå¤šä¸ä¸€æ ·çš„åœ°æ–¹çš„ã€‚è¿™æ®µè¯è®²åˆ°çš„å†…å®¹è·Ÿæˆ‘ä½¿ç”¨çš„æ•æ·å¼€å‘è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«ã€‚ æˆ‘æ›´å¤šçš„æ˜¯å»å®šä¹‰æ•´ä¸ªå·¥ä½œæµç¨‹çš„ä¸€äº›åŸºæœ¬åŸåˆ™.</p>
<p>æ•æ·å¼€å‘æ ¸å¿ƒåŸåˆ™:</p>
<ul>
<li><strong>ä¸»åŠ¨å˜åŒ–</strong>ã€‚ç»å¸¸æŠŠäº§å“ç»™åˆ«äººä½“éªŒï¼Œæ— è®ºæ˜¯æœ€ç»ˆçš„ç”¨æˆ·ï¼Œæµ‹è¯•ç”¨æˆ·ï¼Œç”šè‡³æ˜¯ä¸€äº›æ‡‚è¡Œçš„æœ‹å‹ã€‚è¿™æ ·å¯ä»¥é¿å…æŠŠèµ„æºæŠ•å…¥åˆ°æ²¡æœ‰å¿…è¦çš„åŠŸèƒ½ä¸Šã€‚è®©æµ‹è¯•ç”¨å»å»ä½¿ç”¨ beta ç‰ˆæœ¬çš„äº§å“ï¼ŒåŠæ—¶æ ¹æ®åé¦ˆæ¥è°ƒæ•´æ–¹å‘ï¼Œè¿™æ ·èƒ½èŠ‚çº¦å¾ˆå¤šçš„æ—¶é—´ã€‚</li>
<li><strong>æ•ˆç‡ä¼˜å…ˆï¼Œå¹¶é‡åŒ–å®ƒ</strong>ã€‚çŸ­æœŸå†…æœ€å¤§çš„é‡åŒ–æŒ‡æ ‡å°±æ˜¯äº§å‡ºï¼Œå¹¶ä¸æ˜¯é”€å”®æˆ–è€…å‘ç‰ˆæ•°é‡ã€‚è¦çŸ¥é“æ¯å‘¨å®Œæˆäº†å¤šå°‘æœ‰æ•ˆä»»åŠ¡, å°±éœ€è¦å»é‡åŒ–å®ƒã€‚è¿™æ ·æ‰èƒ½è·Ÿè¸ªè¿›åº¦ï¼Œå¹¶ä¼˜åŒ–å®ƒã€‚</li>
<li><strong>è‡ªæˆ‘æ€»ç»“</strong>ã€‚å®šæœŸå»å›é¡¾æ€»ç»“ã€‚</li>
</ul>
<h2 id="å¦‚ä½•è¿›è¡Œæ•æ·å¼€å‘"><a href="#å¦‚ä½•è¿›è¡Œæ•æ·å¼€å‘" class="headerlink" title="å¦‚ä½•è¿›è¡Œæ•æ·å¼€å‘"></a>å¦‚ä½•è¿›è¡Œæ•æ·å¼€å‘</h2><p>çŸ¥é“äº†æ•æ·å¼€å‘çš„æ ¸å¿ƒåŸåˆ™ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆæ ·å»å®è·µå‘¢ï¼Ÿ</p>
<h3 id="Sprint"><a href="#Sprint" class="headerlink" title="Sprint"></a>Sprint</h3><p>å°±æ˜¯åœ¨å›ºå®šå‘¨æœŸçš„æ—¶é—´é‡Œé¢å®Œæˆç‰¹å®šçš„éœ€æ±‚ï¼Œç›¸å½“äºè¿­ä»£ã€‚åœ¨è¿™ä¸ª sprint ä¸­ä½ åº”è¯¥æŠŠå…¨éƒ¨çš„å°½åŠ›ç”¨åœ¨å®Œæˆè¿™äº›éœ€æ±‚ä¸Šé¢ã€‚</p>
<p>ä¸€ä¸ª sprint é€šå¸¸æœ‰ä¸€åˆ°å››å‘¨ï¼Œè¿™ä¸ªç”±ä½ è‡ªå·±çš„é£æ ¼å’Œäº§å“å†³å®šã€‚æˆ‘è‡ªå·±çš„æ ‡å‡†æ˜¯ä¸¤å‘¨ä¸€ä¸ª sprintã€‚æˆ‘è§‰å¾—è¿™æ ·æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¥å®ŒæˆçœŸæ­£æœ‰æ„ä¹‰çš„ä»»åŠ¡ã€‚ä¸‹é¢æ˜¯æˆ‘çš„ sprintè®¡åˆ’å›¾ï¼š</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-22-022732.jpg" width="500"></p>
<p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ¯ä¸ª sprint ä¸­éƒ½æœ‰å¾ˆå¤šæ—¶é—´ç”¨æ¥åšæ ¸å¿ƒçš„ä»»åŠ¡ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¸œè¥¿:</p>
<ul>
<li>æ¯æ—¥ç«™ä¼š Daily Stand-up Meeting</li>
<li>æ¯å‘¨ç•…æƒ³ Weekly Story Time</li>
<li>å‘å¸ƒ         Sprint Release</li>
<li>æ•æ·è¿­ä»£å›é¡¾ Sprint Retrospective</li>
<li>æ•æ·è¿­ä»£è®¡åˆ’ Sprint Plan</li>
</ul>
<h4 id="æ¯æ—¥ç«™ä¼šï¼ˆ5-minï¼‰"><a href="#æ¯æ—¥ç«™ä¼šï¼ˆ5-minï¼‰" class="headerlink" title="æ¯æ—¥ç«™ä¼šï¼ˆ5 minï¼‰"></a>æ¯æ—¥ç«™ä¼šï¼ˆ5 minï¼‰</h4><p>æ•æ·å¼€å‘æœ‰ä¸€ä¸ªå¾ˆåŸºç¡€çš„éƒ¨åˆ†å°±æ˜¯è‡ªæˆ‘å®¡æŸ¥å’Œè¿­ä»£ï¼Œå°¤å…¶æ˜¯åœ¨ç”Ÿäº§ä¸Šé¢ã€‚å½“æˆ‘ä»¬åŸè®¡åˆ’åœ¨æŸä¸€å¤©å®ŒæˆæŸé¡¹ä»»åŠ¡ï¼Œä½†æ˜¯æœ€åæ²¡æœ‰å®Œæˆï¼Œè¿™æ—¶å€™å°±éœ€è¦æ€»ç»“åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œç„¶ååœ¨å»ä¼˜åŒ–ä½ çš„å·¥ä½œæµã€‚</p>
<p>æ¯æ—¥ç«™ä¼šæ˜¯æ•æ·å¼€å‘çš„ä¸»è¦ç‰¹ç‚¹ã€‚åœ¨ä¼ ç»Ÿçš„æ•æ·å¼€å‘ä¸­ï¼Œæ¯æ—¥ç«™ä¼šè®©æ¯ä¸ªå›¢é˜Ÿçš„æˆå‘˜éƒ½èŠä¸€ä¸‹æ˜¨å¤©çš„è¿›åº¦ï¼Œä»Šå¤©çš„è®¡åˆ’å’Œå­˜åœ¨çš„é£é™©ã€‚</p>
<ul>
<li>ä¸ºäº†ç®€åŒ–ä¼šè®®, é¿å…ä¼šè®®æ—¶é—´å¤ªé•¿æ‰€ä»¥è¦æ±‚å¤§å®¶éƒ½ç«™ç€å¼€è¿™ä¸ªä¼šã€‚</li>
<li>è®©æ‰€æœ‰æˆå‘˜éƒ½èƒ½è·Ÿä¸ŠèŠ‚å¥ï¼ŒåŠæ—¶æš´éœ²å‡ºé£é™©å’ŒæŒ‘æˆ˜ã€‚</li>
</ul>
<p>é‚£ä¸€ä¸ªäººæ€ä¹ˆæå‘¢ï¼Ÿ</p>
<p>æˆ‘æ±²å–äº†æ•æ·å¼€å‘ä¸­çš„ä¼˜ç‚¹ã€‚è‡ªå·±æ€»ç»“äº†ä¸€å¥—é€‚åˆç‹¬ç«‹å¼€å‘çš„æ¯æ—¥ç«™ä¼š: æ‹çŸ­ç‰‡(45 ç§’) ã€‚</p>
<p>ä¸»è¦æ˜¯è¿™äº›å†…å®¹ï¼š</p>
<ul>
<li><p><strong>å›é¡¾</strong>ï¼šé¦–å…ˆçœ‹ä¸€ä¸‹æ˜¨å¤©çš„çŸ­ç‰‡ï¼Œçœ‹çœ‹æ˜¨å¤©å®šä¸‹çš„ä»»åŠ¡æ˜¯ä»€ä¹ˆã€‚</p>
</li>
<li><p><strong>æ€»ç»“</strong>ï¼šæ²¡æœ‰å®Œæˆæ˜¨å¤©çš„ç›®æ ‡ï¼Ÿæƒ³æƒ³ä¸ºä»€ä¹ˆæ²¡æœ‰å®Œæˆï¼Œè¿˜æœ‰ä»€ä¹ˆåœ°æ–¹æ²¡æœ‰åšåˆ°æ›´å¥½ã€‚æ˜¯ä¸­åˆå¼€äº†ä¸€ä¸ªä¼šï¼Œè€½è¯¯äº†å†™ä»£ç çš„æ—¶é—´ã€‚è¿˜æ˜¯å‡†å¤‡ App Store çš„æˆªå›¾èŠ±çš„æ—¶é—´è¶…é¢„ç®—äº†ã€‚</p>
</li>
<li><p><strong>å‡†å¤‡</strong>ï¼šåœ¨ä¸åˆ°ä¸¤åˆ†é’Ÿçš„æ—¶é—´é‡Œï¼Œæ€è€ƒä¸€ä¸‹ä»Šå¤©çš„çŸ­ç‰‡è¯´ä»€ä¹ˆï¼Œå›ç­”ä¸‹é¢çš„é—®é¢˜ï¼šæ˜¨å¤©åšäº†ä»€ä¹ˆï¼Ÿä»Šå¤©å‡†å¤‡åšä»€ä¹ˆï¼Ÿä»€ä¹ˆå½±å“äº†è¿›åº¦ã€‚æ¯”å¦‚è¿™æ ·ã€‚</p>
<blockquote>
<p>æˆ‘æ˜¨å¤©æˆ‘åšäº† A çš„ App Storeæˆªå›¾ã€‚ä»Šå¤©æˆ‘è¦å†™æ›´æ–°æ—¥å¿—ï¼Œç„¶åä¸‹åˆè·Ÿä¸€ä¸ªä¾›åº”å•†è®¨è®ºä¸€ä¸‹åˆä½œã€‚æ€»ç»“ï¼šåœ¨åšæˆªå›¾çš„æ—¶å€™èŠ±äº†å¤ªå¤šçš„æ°´å²¸ï¼Œæ‰€ä»¥æ²¡æœ‰å®Œæˆæœ¬æ¥è®¡åˆ’çš„æ›´æ–°æ—¥å¿—ã€‚ä¸‹æ¬¡å°è¯•ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·ã€‚</p>
</blockquote>
</li>
<li><p><strong>æ‹æ‘„</strong>ï¼šæ‹ä¸‹è¿™ä¸ªçŸ­ç‰‡ï¼Œç„¶åå°±å¥½äº†ã€‚è¿™äº›ç‰‡å­åœ¨æœ€åçš„sprint å›é¡¾ä¸­è¿˜ä¼šç”¨åˆ°ã€‚</p>
</li>
</ul>
<h4 id="æ¯å‘¨ç•…æƒ³-ï¼ˆ30-45-minï¼‰"><a href="#æ¯å‘¨ç•…æƒ³-ï¼ˆ30-45-minï¼‰" class="headerlink" title="æ¯å‘¨ç•…æƒ³ ï¼ˆ30-45 minï¼‰"></a>æ¯å‘¨ç•…æƒ³ ï¼ˆ30-45 minï¼‰</h4><p>åœ¨æ¯ä¸ª sprint ä¸­ï¼Œéƒ½ä¼šèŠ±å¾ˆå¤šçš„æ—¶é—´å»åšç¨‹åºå‘˜ã€‚å¾ˆå°‘èŠ±æ—¶é—´å»è€ƒè™‘å…¬å¸å‘å±•è¿™ç±»ä¸œè¥¿ï¼Œè¦ä¸è¦åšä¸€ä¸ªæ–°çš„ App ã€å¤§æ”¹ç°åœ¨çš„ app ç­‰ç¯ã€‚<strong>Story Time</strong> è¿™æ®µæ—¶é—´å°±æ˜¯æˆ‘ç”¨æ¥åš CEO çš„æ—¶é—´ã€‚æˆ‘å»ºè®®å°½é‡åˆ°å…¶ä»–ç¯å¢ƒå»åšè¿™ä»¶äº‹æƒ…ï¼Œå’–å•¡åº—ä»€ä¹ˆçš„ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-22-033948.jpg" width="500"></p>
<p>åœ¨ Story Time ï¼Œæˆ‘ä¼šå»æ•´ç†ä¸€ä¸‹ä»ç”¨æˆ·é‚£é‡Œæ”¶åˆ°çš„åé¦ˆï¼Œè€ƒè™‘ä»ŠååŠ ä»€ä¹ˆåŠŸèƒ½ï¼Œè€ƒè™‘æ€ä¹ˆè¿è¥ app å’Œå…¬å¸ã€‚ç„¶åæŠŠä¸€äº›å®é™…çš„æƒ³æ³•åŠ åˆ°ä¸€ä¸ªåˆ—è¡¨é‡Œé¢æˆ‘å«å®ƒéœ€æ±‚æ± ã€‚</p>
<p>éœ€æ±‚æ± é‡Œé¢éƒ½æ˜¯ä¸€äº›æ¯”è¾ƒå¤§çš„ä»»åŠ¡ã€‚å®ƒå¸®åŠ©æˆ‘è®¡åˆ’ä¸‹ä¸€ä¸ª sprintã€‚æ‰€ä»¥åœ¨ Store Time ä¸­ä¹Ÿéœ€è¦å»ä¿®æ”¹å’Œæ•´ç†éœ€æ±‚æ± ã€‚æ¯”å¦‚:</p>
<p>åœ¨ç»Ÿè®¡ä¸­çœ‹åˆ°äº†æ›´å¤šå·´è¥¿æ–¹é¢çš„ä¸œè¥¿ï¼Œè¿™å°±æ˜¯è¯´ï¼Œä½ å¯èƒ½éœ€è¦åŠ å…¥è‘¡è„ç‰™è¯­ï¼Œè€Œä¸æ˜¯åŸè®¡åˆ’çš„è¥¿ç­ç‰™è¯­ã€‚æˆ–è€…å¯èƒ½çœ‹åˆ°äº†ä¸€äº›ç”¨æˆ·å¸Œæœ›çš„å°åŠŸèƒ½ã€‚è¿™æ—¶å€™ä¹Ÿéœ€è¦è€ƒè™‘æ˜¯ä¸æ˜¯æŠŠè¿™ä¸ªéœ€æ±‚åŠ å…¥è¿™ä¸ªåˆ—è¡¨ã€‚</p>
<h4 id="å‘å¸ƒ"><a href="#å‘å¸ƒ" class="headerlink" title="å‘å¸ƒ"></a>å‘å¸ƒ</h4><p>æ•æ·å¼€å‘è¿˜æœ‰ä¸ªåŸåˆ™å°±æ˜¯è¦è®©ä½ åšçš„å·¥ä½œèƒ½å¤Ÿäº§å‡ºæˆå“ã€‚è¿™å°±æ˜¯åœ¨ Sprint Release ä¸­éœ€è¦åšçš„äº‹æƒ…ã€‚ä¸ä¸€å®šéœ€è¦æ˜¯ä¸€ä¸ªå®Œæ•´çš„ appï¼Œä½†æ˜¯æŠŠè¿™æ®µæ—¶é—´çš„å·¥ä½œæ‹¿ç»™å…¶ä»–äººè¯•ä¸€ä¸‹ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚è®©æµ‹è¯•ç”¨æˆ·ä½“éªŒï¼Œä»ä»–ä»¬é‚£å„¿å¾—åˆ°ä¸€äº›åé¦ˆã€‚</p>
<p>åœ¨æ•æ·å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå‘å¸ƒçš„èŒƒå›´ä¼šé€æ¸çš„æ‰©å¤§ã€‚æ¯”å¦‚è¯´ï¼Œæœ€å¼€å§‹ä½ å¯èƒ½åªéœ€è¦å‘å¸ƒä¸€ä¸ªåªæœ‰ä¸€ä¸¤ä¸ªæ–°åŠŸèƒ½çš„ beta ç‰ˆã€‚è¿™æ—¶å€™å¯ä»¥ä¼˜å…ˆçš„å»è€ƒè™‘æœ€é‡è¦çš„åŠŸèƒ½ï¼Œè¿™æ ·èƒ½å¤Ÿå°½å¿«çš„æ‹¿åˆ°æµ‹è¯•åé¦ˆã€‚å¦‚æœä½ çš„æµ‹è¯•ç”¨æˆ·æ ¹æœ¬éƒ½æ²¡æœ‰æåˆ°è¿‡æŸä¸ªåŠŸèƒ½ï¼Œè¿™å°±æ˜¯è¯´è¿™æ²¡é‚£ä¹ˆé‡è¦ã€‚è¿™ä¹Ÿèƒ½å¸®ä½ å†³å®šä¸‹ä¸ª sprint ä¸­ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚</p>
<h4 id="Last-Day-of-the-Sprint"><a href="#Last-Day-of-the-Sprint" class="headerlink" title="Last Day of the Sprint"></a>Last Day of the Sprint</h4><p>å·²ç»èŠ±äº†9å¤©æ¥å®Œæˆè¿™ä¸ª sprint çš„ç›®æ ‡ï¼Œç»ˆäºåˆ°äº†æœ€åä¸€å¤©äº†ã€‚è¿™ä¸€å¤©å¯èƒ½æ˜¯æœ€è½»æ¾çš„ä¸€å¤©ï¼Œå› ä¸ºä»Šå¤©å¯èƒ½ä¸éœ€è¦åšå¼€å‘å·¥ä½œã€‚ä»Šå¤©æ˜¯ç”¨æ¥å›é¡¾è¿™ä¸ª sprintï¼Œè®¡åˆ’ä¸‹ä¸€ä¸ª sprint çš„ä¸€å¤©ï¼Œç„¶åè¿˜å¯ä»¥ä¼‘æ¯ä¼‘æ¯ã€‚</p>
<p>è¿™å¯èƒ½ä¼šè®©äººè§‰å¾—å¥‡æ€ªï¼Œåœ¨æˆªæ­¢æ—¥æœŸåšè¿™æ ·çš„äº‹æƒ…ï¼Ÿä¸Šå­¦çš„æ—¶å€™ï¼Œæˆ‘ç»å¸¸ä¼šåœ¨å›å®¶çš„è·¯ä¸Šçœ‹ä¹¦ã€‚ä½†æ˜¯è¿™æ ·æˆ‘ä¼šèµ°åæ–¹å‘ï¼Œç„¶åæ‘”å€’ã€‚æ•æ·å¼€å‘ä¹Ÿä¸€æ ·ï¼Œå¦‚æœä¸ç»å¸¸æŠ¬å¤´çœ‹çœ‹æ–¹å‘ï¼Œå¯èƒ½æ–¹å‘å°±é”™äº†ã€‚</p>
<p>ç¡®ä¿æ–¹å‘æ­£ç¡®ï¼Œè¿™å°±æ˜¯ sprint æœ€åä¸€å¤©åšçš„äº‹æƒ…ã€‚è¿™æ˜¯ä¸€æ•´å¤©ï¼Œæˆ–è€…æ˜¯åœ¨æ˜¯æ—¶é—´ç´§è¿«ï¼ŒåŠå¤©ä¹Ÿå¯ä»¥ã€‚è¿™ä¸€å¤©ï¼ŒæŠ¬å¤´çœ‹çœ‹å‘¨å›´ï¼Œç¡®ä¿åšçš„äº‹æœ€é‡è¦çš„äº‹æƒ…ã€‚å› ä¸ºå³ä¾¿ä½ éå¸¸çš„é«˜äº§å‡ºï¼Œåœ¨ä¸é‡è¦çš„äº‹æƒ…ä¸ŠèŠ±æ—¶é—´ä¹Ÿæ˜¯ä¸å€¼å¾—çš„ã€‚</p>
<p>ç°åœ¨æ¥çœ‹çœ‹è¿™å¤©è¦åšä»€ä¹ˆå§ï¼</p>
<h5 id="Retrospective-å›é¡¾-ï¼ˆå°äº2hï¼‰"><a href="#Retrospective-å›é¡¾-ï¼ˆå°äº2hï¼‰" class="headerlink" title="Retrospective(å›é¡¾) ï¼ˆå°äº2hï¼‰"></a>Retrospective(å›é¡¾) ï¼ˆå°äº2hï¼‰</h5><p>æ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡æ¡£ï¼Œæˆ–è€…æ˜¯åœ¨ç¬”è®°æœ¬ä¸Šç¿»å¼€æ–°çš„ä¸€é¡µï¼Œå†™ä¸‹ä½ å¯¹åˆšåˆšè¿‡å»çš„ä¸¤ä¸ªæ˜ŸæœŸçš„æ€»ç»“ã€‚è¿™æ˜¯ä½ å‘ç°æ˜¯ä»€ä¹ˆé˜»ç¢ä½ çš„æ•ˆç‡çš„å¥½æœºä¼šã€‚</p>
<p>è¿™å†™æ˜¯ä¸€äº›ç®€å•çš„é—®é¢˜ï¼š</p>
<ul>
<li>æˆ‘å®Œæˆäº†ä»€ä¹ˆï¼Ÿ</li>
<li>æˆ‘è¾¾æˆäº†æˆ‘ sprint çš„ç›®æ ‡äº†å—ï¼Ÿ</li>
<li>è¿™ä¸ª sprint æœ€çš„å¥½çš„æ˜¯ä»€ä¹ˆï¼Ÿè¿˜æœ‰ä»€ä¹ˆåœ°æ–¹å¯ä»¥åšåˆ°æ›´å¥½ï¼Ÿ</li>
<li>æœ‰ä»€ä¹ˆå½±å“æ•ˆç‡çš„å› ç´ ï¼Ÿå›é¡¾æ¯å¤©çš„çŸ­ç‰‡æ¥æ‰¾åˆ°è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆã€‚</li>
<li>æœ‰ä»€ä¹ˆæ²¡ä»€ä¹ˆå¿…è¦çš„äº‹æƒ…è®©ä½ ç„¦è™‘äº†ï¼Œæˆ–è€…è®©ä½ è§‰å¾—å¾ˆçˆ½ï¼Ÿ</li>
</ul>
<p>å¦‚æœä½ å‘ç°å‡ºå»èµ°èµ°æ¯”åœ¨æ¡Œå­è¾¹ä¸Šå›é¡¾ï¼Œé‚£å°±å‡ºå»èµ°èµ°å§ï¼ç„¶åå›æ¥è¿…é€Ÿçš„å†™ä¸‹ä½ çš„æ€»ç»“ã€‚æˆ‘å‘ç°è¿™æ ·ç¡®å®æ›´æœ‰æ•ˆæœã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-22-033938.jpg"  width="500"></p>
<h5 id="Sprint-è®¡åˆ’-ï¼ˆå°äº2hï¼‰"><a href="#Sprint-è®¡åˆ’-ï¼ˆå°äº2hï¼‰" class="headerlink" title="Sprint è®¡åˆ’ ï¼ˆå°äº2hï¼‰"></a>Sprint è®¡åˆ’ ï¼ˆå°äº2hï¼‰</h5><p>åœ¨å›é¡¾ä¸¤æ¬¡ Story Time å’Œéœ€æ±‚æ± ä¹‹é—´ï¼Œä½ åº”è¯¥å¥½å¥½æƒ³æƒ³ä¸‹ä¸€ä¸ª sprint è¦åšä»€ä¹ˆã€‚æŠŠéœ€æ±‚æ± æ•´ç†ä¸€ä¸‹ï¼Œç„¶åæŒ‘å‡ ä¸ªæœ€é‡è¦çš„ï¼</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚è¯´ä½ ç°åœ¨æœ‰ä¸ªå¿«å®Œæˆäº†çš„ app ï¼Œä½ è®¡åˆ’ä¸‹ä¸ª sprint åŠ å…¥æœ€åä¸€ä¸ªåŠŸèƒ½ï¼Œç„¶ååšä¸€äº›è‡ªæµ‹å·¥ä½œï¼Œæœ€åæŠŠ Beta ç‰ˆå‘å¸ƒå‡ºå»ã€‚åœ¨ä½ çš„è®¡åˆ’æ–‡æ¡£ä¸­ï¼Œå°±æ˜¯ä¸‹é¢çš„å†…å®¹ï¼š</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-22-045041.jpg" width="500"></p>
<p>åœ¨ä¸¤ä¸ªæ˜ŸæœŸçš„ sprint ä¸­ï¼Œå¯èƒ½è¿˜ä¼šæœ‰æ›´å¤šçš„ä»»åŠ¡éœ€è¦å®Œæˆã€‚è¿™åªæ˜¯ç®€å•çš„ä¸¾ä¸ªä¾‹å­ã€‚</p>
<p>çœ‹æ¯ä¸ªä»»åŠ¡åé¢çš„æ•°å­—ï¼Œè¿™äº›éƒ½æ˜¯ä»»åŠ¡è¯„åˆ†ã€‚æ¯”å¦‚è¯´ï¼Œä¸€ä¸ª 1 åˆ†çš„ä»»åŠ¡ï¼Œéœ€è¦èŠ± 2 åˆ†ä»»åŠ¡ä¸€åŠçš„æ—¶é—´å»å®Œæˆã€‚è¿™ä¸ªæ ‡å‡†éœ€è¦ä½ è‡ªå·±æ¥å®šã€‚å°±æˆ‘æ¥è¯´ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢ç”¨1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œ8è¿™æ ·çš„æ•°å­—ï¼Œè¿™æ ·å¯ä»¥çº æ­£æˆ‘ä»¬ä½ä¼°å¤§ä»»åŠ¡çš„å€¾å‘ã€‚æ²¡æœ‰4ï¼Œæ‰€ä»¥æˆ‘å¿…é¡»å¾—ç”¨5è¿™ä¸ªæ•°å­—ã€‚</p>
<p>å½“ä½ å®Œæˆæ‰€æœ‰ä»»åŠ¡çš„æ—¶å€™ï¼Œå»æƒ³æƒ³æ¯ä¸€ä¸ªä»»åŠ¡ç›¸å¯¹äºå…¶ä»–çš„ä»»åŠ¡éœ€è¦èŠ±è´¹çš„æ—¶é—´ã€‚å†·é™ä¸‹æ¥ï¼Œå»é¢„æµ‹æ¯ä¸€é¡¹ä»»åŠ¡éœ€è¦èŠ±è´¹çš„æ—¶é—´ã€‚</p>
<p>å¦‚æœæŸä¸€é¡¹ä»»åŠ¡å¾ˆå¤æ‚ï¼Œä½†æ˜¯ä½ å·²ç»åšè¿‡å¾ˆå¤šæ¬¡äº†ï¼Œé‚£å°±å¯ä»¥å°‘ä¼°è®¡ä¸€ç‚¹æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥å‡å°‘è¿™ä¸ªåˆ†å€¼ã€‚å¦‚æœæŸä¸ªä»»åŠ¡å¾ˆç®€å•ï¼Œä½†æ˜¯ä½ è¿˜ä¸ç†Ÿæ‚‰ã€‚å°±å¯ä»¥å¤šä¼°è®¡ä¸€ç‚¹æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯åŠ ç‚¹è¿™ä¸ªåˆ†å€¼ã€‚</p>
<p>å½“ä½ å®Œæˆä»»åŠ¡çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠæ‰€æœ‰åˆ†å€¼éƒ½åŠ èµ·æ¥ï¼Œç„¶åè·Ÿä¸Šä¸ª sprint åšä¸€ä¸ªæ¯”è¾ƒã€‚å¦‚æœä½ ç»å¸¸å¾—åˆ° 80-100åˆ†çš„æ€»åˆ†ï¼Œé‚£ä¹ˆä¸‹ä¸ª sprint çš„æ€»åˆ†åº”è¯¥å°±å·®ä¸å¤šæ˜¯80çš„æ ·å­äº†ã€‚</p>
<p>è¿™å¯ä»¥è¯´æ˜¯æ•æ·å¼€å‘ä¸­æœ€æœ‰æ•ˆçš„äº‹æƒ…äº†ï¼Œä¹Ÿæ˜¯æˆ‘ä»»åŠ¡æœ€éš¾åšçš„ä¸€éƒ¨åˆ†äº†ï¼Œæˆ‘ç»å¸¸å‘ç°ï¼Œæˆ‘æ€»æ˜¯å‡å°‘æˆ‘æƒ³åšçš„äº‹æƒ…çš„è¯„åˆ†ï¼Œç»™é‡è¦çš„ä»»åŠ¡æ›´å¤šçš„è¯„åˆ†ã€‚æœ‰äº† sprint è®¡åˆ’ï¼Œå°±æ“¦æ‰ä½ ä¸Šä¸ª sprint çš„ä»»åŠ¡æ¿ï¼Œç„¶åä¸ºä¸‹ä¸ª sprint åšå‡†å¤‡ï¼</p>
<p>ä»€ä¹ˆæ˜¯ä»»åŠ¡æ¿(Task Board)å‘¢ï¼Ÿ</p>
<blockquote>
<p>è¯‘è€…: åœ¨ä¹‹å‰çš„æ•æ·å¼€å‘å®è·µä¸­ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªç™½æ¿ï¼Œæ¸…æ™°çš„å†™ä¸Šè¿™äº›ä¸œè¥¿ã€‚ä¸‹ä¸ªéƒ¨åˆ†ä¼šè®²åˆ°ã€‚</p>
</blockquote>
<h4 id="ä»»åŠ¡æ¿"><a href="#ä»»åŠ¡æ¿" class="headerlink" title="ä»»åŠ¡æ¿"></a>ä»»åŠ¡æ¿</h4><p>ç°åœ¨æˆ‘ä»¬å°±æ¥è¯´è¯´ä»»åŠ¡æ¿ã€‚å³ä½¿æˆ‘åœ¨æˆ‘çš„ç¬”è®°æœ¬æˆ–è€…å…¶ä»–åœ°æ–¹å·²ç»äº†æˆ‘è¿™ä¸ª sprint çš„è®¡åˆ’ï¼Œæˆ‘æ¯å¤©çš„ä»»åŠ¡è¿˜æ˜¯ä¼šåœ¨ä»»åŠ¡æ¿ä¸Šç»„ç»‡ã€‚æˆ‘æŠŠè¿™ä¸ªä»»åŠ¡æ¿æ”¾åœ¨åŠå…¬å®¤çš„å¢™ä¸Šã€‚ä¸Šé¢ä¼šå†™ä¸€äº›ä¸œè¥¿ï¼Œä¸»è¦æ˜¯ï¼š<strong>TODO</strong>ã€<strong>DOING</strong>ã€<strong>DONE</strong>ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-22-051037.jpg" width="500"></p>
<p>æ¯å¤©ä¸‹ç­çš„ä¹‹å‰ï¼Œæˆ‘éƒ½æŠŠç¬¬äºŒå¤©çš„ä»»åŠ¡å†™åœ¨ä¸€ä¸ªä¾¿ç­¾ä¸Šï¼Œç„¶åæŠŠå®ƒä»¬è´´åœ¨TODOè¿™ä¸€å—ã€‚å‡å¦‚æˆ‘ä¸Šä¸ª sprint å¹³å‡æ¯å¤©æ‹¿åˆ°äº†10åˆ†ï¼Œæˆ‘å°±ä¼šç»™ä¸‹ä¸€å¤©è´´ä¸Š10åˆ†çš„ä»»åŠ¡ã€‚</p>
<p>ç¬¬äºŒå¤©æ—©ä¸Šï¼Œæˆ‘å°±ä¼šæŠŠ <strong>TODO</strong> ä¸Šçš„ç¬¬ä¸€ä¸ªä¾¿ç­¾æ‹¿åˆ° <strong>DOING</strong> è¿™è¾¹ã€‚è¿™æ ·åšèƒ½å¤Ÿè®©æˆ‘æ›´å®¹æ˜“é›†ä¸­ç²¾åŠ›ã€‚</p>
<p>ä»»åŠ¡å®Œæˆçš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªä¾¿ç­¾æ‹¿åˆ° <strong>DONE</strong> è¿™è¾¹ã€‚çœ‹åˆ° <strong>DONE</strong> è¶Šæ¥è¶Šå¤šï¼Œæ˜¯ä¸€ä»¶å¾ˆæœ‰æˆå°±æ„Ÿçš„äº‹æƒ…ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-22-051624.jpg" width="500"></p>
<h4 id="Rest-and-Explore"><a href="#Rest-and-Explore" class="headerlink" title="Rest and Explore"></a>Rest and Explore</h4><p>å›åˆ° sprint ä¸­é—´æ¥ã€‚ç°åœ¨ä½ åˆ°äº† sprint çš„æœ€åä¸€ä¸ªä¸‹åˆäº†ã€‚è¿™ä¸ªä¸‹åˆå°±å¥½å¥½çš„æ”¾æ¾ä¸€ä¸‹å§ï¼æˆ‘ç»å¸¸éƒ½æ˜¯ååœ¨æ²™å‘ä¸Šï¼Œçœ‹çœ‹ Raywenderlich.com ä¸Šçš„æ•™ç¨‹ï¼Œæˆ–è€…å­¦ç‚¹æ–°çš„çŸ¥è¯†ã€‚</p>
<p>ä¸è¦æŠŠè¿™ä»¶äº‹æƒ…å½“ä½œä¾‹è¡Œå·¥ä½œé‚£æ ·åšã€‚åªéœ€è¦åšä¸€äº›è·Ÿå·¥ä½œæœ‰å…³ï¼Œç”±èƒ½è®©ä½ æ”¾æ¾çš„å·¥ä½œã€‚å–ä¸€æ¯é¥®æ–™ï¼Œå¬å¬éŸ³ä¹ï¼Œåº†ç¥åº†ç¥è¿™ä¸ª sprint ä½ å®Œæˆçš„å·¥ä½œï¼Œå¤šå¥½ï¼</p>
<h2 id="ä¸€äº›å»ºè®®"><a href="#ä¸€äº›å»ºè®®" class="headerlink" title="ä¸€äº›å»ºè®®"></a>ä¸€äº›å»ºè®®</h2><p>å¯¹ç‹¬ç«‹å¼€å‘è€…æ¥è¯´é€‰æ‹©æ­£ç¡®çš„å·¥ä½œæ–¹å¼æ˜¯å¾ˆä¸ªäººçš„äº‹æƒ…ã€‚è¿™è·Ÿä½ çš„ç²¾åŠ›ç›¸å…³ã€‚åŒæ—¶ä¹Ÿéœ€è¦è¦æ¿€åŠ±ä½ ï¼Œè®©ä½ æˆé•¿ã€‚ä»¥è¿™ä¸ªä¸ºæ ¸å¿ƒåŸåˆ™ï¼Œå°±èƒ½å¤Ÿæ‰¾åˆ°é€‚åˆä½ è‡ªå·±çš„æ•æ·å¼€å‘ä¹‹é“äº†ã€‚</p>
<p>é¢å¤–çš„å»ºè®®ï¼š</p>
<ul>
<li>åœ¨åˆšåˆšå¼€å§‹çš„æ—¶å€™ï¼Œä¸è¦å› ä¸ºå®é™…å®Œæˆçš„ä»»åŠ¡æ¯”è®¡åˆ’å®Œæˆçš„ä»»åŠ¡å·®å¾ˆå¤šè€Œæ„Ÿåˆ°ä¸å¥½ã€‚åœ¨ä¸‹ä¸ª sprint ä¸­è°ƒæ•´å°±å¥½äº†ã€‚ä¸æ–­çš„è°ƒæ•´æ­£æ˜¯æ•æ·å¼€å‘çš„æ„ä¹‰ã€‚</li>
<li>æ¯éš”ä¸€ä¸¤å¤©å°±è°ƒæ•´ä¸€ä¸‹è¿™ä¸ª sprint çš„è®¡åˆ’ã€‚review æ¯ä¸€ä¸ªä»»åŠ¡ï¼Œè°ƒæ•´ä»–çš„åˆ†å€¼ã€‚å¦‚æœåˆ†å€¼å˜å¾—å¾ˆé«˜ï¼Œå°±éœ€è¦æŠŠä¸€äº›ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ç§»é™¤æ‰äº†ã€‚</li>
<li>è®¡åˆ’ç»†èŠ‚æ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ã€‚å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·ä¹Ÿæ˜¯ä¸¤å‘¨ä¸€ä¸ª sprintã€‚ç¬¬äºŒä¸ªæ˜ŸæœŸçš„è®¡åˆ’æ²¡æœ‰é‚£ä¹ˆè¯¦ç»†ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚æ¯å¤©çš„è°ƒæ•´èƒ½å¤Ÿæ…¢æ…¢çš„ä¸°å¯Œå®ƒã€‚</li>
<li>å¯¹å…¬å¸æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªé•¿æœŸè®¡åˆ’æ˜¯å¿…è¦çš„ï¼Œä½†æ˜¯ä¸è¦æ­»å’¬ä½è¿™ä¸ªè®¡åˆ’ä¸æ”¾ã€‚ä¿æŒä¸€ä¸ªæµåŠ¨çš„éœ€æ±‚æ± æ¥é€‚åº”æ”¹å˜ã€‚</li>
<li>å³ä¾¿è¿™æ˜¯æˆ‘åœ¨åš Ten Kettles çš„ app çš„æ—¶å€™æ€»ç»“çš„ä¸œè¥¿ã€‚ä»–ä»¬åœ¨åšå¤–åŒ…çš„æ—¶å€™ä¹Ÿæ˜¯å¾ˆå¥½ç”¨çš„è¿™åªéœ€è¦åšä¸€äº›å¾ˆå°çš„æ”¹åŠ¨ã€‚æ¯”å¦‚è¯´ä»»åŠ¡æ¿ï¼Œå¯èƒ½å°±éœ€è¦åšæˆè™šæ‹Ÿçš„äº†ï¼Œè¿™æ ·æ‰èƒ½è®©ç”²æ–¹çŸ¥é“ä½ ç°åœ¨æ˜¯ä»€ä¹ˆæƒ…å†µã€‚</li>
<li>åˆ«æ ·äº†ä¹°é©¬å…‹ç¬”è¿˜æœ‰æ ‡ç­¾çº¸ã€‚</li>
</ul>
<p>æˆ‘ç¬¬ä¸€æ¬¡æ„è¯†åˆ°ä½œä¸ºç‹¬ç«‹å¼€å‘è€…ï¼Œæˆ‘éœ€è¦æ›´å¥½çš„å·¥ä½œæ–¹å¼çš„æ—¶å€™ï¼Œæˆ‘æƒ³åˆ°äº†ä¸‰ä¸ªéœ€æ±‚ã€‚æ›´é«˜æ•ˆçš„äº§å‡ºï¼Œä» app ä¸­è·å¾—æ›´å¤šçš„æ”¶å…¥ï¼Œæ›´å¤šçš„å¹¸ç¦æ„Ÿã€‚æˆ‘ä¹Ÿå¾ˆé«˜å…´è¿™æ ·çš„æ”¹å˜ç¡®å®å¸¦æ¥äº†è¿™äº›ä¸œè¥¿ã€‚app çš„è¿­ä»£é¢‘ç‡å¤§å¤§çš„ä¸Šå‡ï¼Œæ¯ä¸ªæœˆçš„å¹³å‡æ”¶å…¥å¢é•¿äº† 18%ï¼Œç”¨æˆ·ä¹Ÿæ›´æ»¡æ„(åœ¨ App Storeä¸­å¹³å‡åˆ† 4.75)ï¼Œè€Œä¸”å·¥ä½œå’Œç”Ÿæ´»æ‰¾åˆ°äº†æ›´å¥½çš„å¹³è¡¡ç‚¹ã€‚æœ‰äº†å‘¨æœ«ï¼Œä¸€åˆ‡éƒ½æ›´å¥½äº†ã€‚</p>
<h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>è¿™æ˜¯ä¸€ç¯‡æœ€è¿‘çš„é‡‡è®¿ï¼Œå…³äºæˆ‘æœ€è¿‘åœ¨ Ten Kettles çš„çš„ç»†èŠ‚ã€‚</p>
<p>è®°ä½ä¸‹é¢ä¸‰ä¸ªæ•æ·å¼€å‘çš„åŸºæœ¬åŸåˆ™</p>
<ul>
<li>ä¸»åŠ¨æ”¹å˜</li>
<li>æ•ˆç‡ä¼˜å…ˆ</li>
<li>ä¸æ–­çš„æ€»ç»“</li>
</ul>
<p>çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰å¾ˆå¥½å·¥ä½œæµç¨‹ï¼Œè¿™å‡ ç‚¹èƒ½å¤Ÿæ˜æ˜¾çš„å½±å“ä½ çš„å·¥ä½œã€‚</p>
<p>å¦‚æœä½ æƒ³è¦å­¦ä¹ æ›´å¤šå…³äºæ•æ·å¼€å‘ï¼Œå°¤å…¶æ˜¯åœ¨å›¢é˜Ÿä¸­çš„æ•æ·å¼€å‘çš„è¯ï¼Œè¿™æœ‰ä¸€äº›èµ„æ–™ã€‚</p>
<p>æˆ‘æœ€å¼€å§‹çœ‹çš„ä¸¤æœ¬ä¹¦æ˜¯ï¼š</p>
<ul>
<li><a href="https://www.amazon.com/Scrum-Doing-Twice-Work-Half/dp/038534645X/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1495477992&amp;sr=1-1&amp;keywords=scrum+art+of+doing">Scrum: The Art of Doing Twice the Work in Half the Time (Sutherland, Sutherland)</a></li>
<li><a href="https://www.amazon.com/Scrum-Breathtakingly-Brief-Agile-Introduction/dp/193796504X">Scrum: a Breathtakingly Brief and Agile Introduction (Sims, Johnson)</a></li>
</ul>
<p><strong>è¿™ç¯‡æ–‡ç« ç¿»è¯‘è‡ªRay wenderlich <a href="https://www.raywenderlich.com/162654/scrum-one-bring-scrum-one-person-operation">Scrum Of One: How to Bring Scrum into your One-Person Operation</a></strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ocg4av0wv.bkt.clouddn.com/2017-07-21-114524.jpg&quot; width=&quot;500&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸è®ºæ˜¯åœ¨ä¸€äº›å¤§å‹çš„å¼€å‘å›¢é˜Ÿï¼Œè¿˜æ˜¯ä½œä¸ºç‹¬ç«‹å¼€å‘è€…ã€‚æˆ‘ä»¬ç»å¸¸ä¼šè¢«é¢„ç®—ã€æŠ€æœ¯è¿­ä»£ï¼Œä»¥åŠæ—¶é—´é™åˆ¶ã€‚æ‰¾åˆ°åˆé€‚çš„å·¥ä½œæ–¹å¼å»é€‚åº”è¿™äº›é™åˆ¶, æ˜¯æ‰€æœ‰å›¢é˜Ÿéƒ½éœ€è¦å»è€ƒè™‘çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.raywenderlich.com/u/alex_andrews&quot;&gt;Alex Andrews&lt;/a&gt; åœ¨æˆç«‹ &lt;a href=&quot;http://www.tenkettles.com/&quot;&gt;Ten Kettles&lt;/a&gt; çš„æ—¶å€™èŠ±äº†å¾ˆå¤šäº†ç²¾åŠ›å»è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚ç›´åˆ°æœ‰ä¸€å¤©ä¸Šå¸æŠŠæ•æ·å¼€å‘ç ¸åˆ°äº†ä»–çš„å¤´ä¸Šï¼Œå¾ˆå¿«ä»–å°±æ‰¾åˆ°äº†é€‚åˆä»–çš„æ•æ·å¼€å‘ä¹‹é“ã€‚ä»–è®¤ä¸ºæ•æ·å¼€å‘æå¤§çš„è§£æ”¾äº†ä»–çš„ç”Ÿäº§åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« å°±ä¼šèŠåˆ°ä»–æ˜¯æ€ä¹ˆè¿›è¡Œæ•æ·å¼€å‘çš„ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ•æ·å¼€å‘" scheme="http://www.CepheusSun.com/categories/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="æ•æ·å¼€å‘" scheme="http://www.CepheusSun.com/tags/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨ ReSwift å®ç° Redux æ¶æ„</title>
    <link href="http://www.CepheusSun.com/ReSwiftAndRedux.html"/>
    <id>http://www.CepheusSun.com/ReSwiftAndRedux.html</id>
    <published>2017-07-20T16:00:00.000Z</published>
    <updated>2017-07-21T11:01:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>éšç€ app çš„å‘å±•ï¼Œ MVC æ¸æ¸çš„æ»¡è¶³ä¸äº†ä¸šåŠ¡çš„éœ€æ±‚ã€‚å¤§å®¶éƒ½åœ¨æ¢ç´¢å„ç§å„æ ·çš„æ¶æ„æ¨¡å¼æ¥é€‚åº”è¿™ç§æƒ…å†µï¼Œåƒæ˜¯MVVMã€VIPERã€<a href="https://eng.uber.com/new-rider-app/">Riblets</a> ç­‰ç­‰ã€‚ ä»–ä»¬éƒ½æœ‰å„è‡ªçš„ç‰¹ç‚¹ï¼Œä½†æ˜¯éƒ½æœ‰åŒä¸€ä¸ªæ ¸å¿ƒ: é€šè¿‡å¤šå‘æ•°æ®æµå°†ä»£ç æŒ‰ç…§å•ä¸€èŒè´£åŸåˆ™æ¥åˆ’åˆ†ä»£ç ã€‚åœ¨å¤šå‘æ•°æ®æµä¸­ï¼Œæ•°æ®åœ¨å„ä¸ªæ¨¡å—ä¸­ä¼ é€’ã€‚</p>
<p>å¤šå‘æ•°æ®æµå¹¶ä¸ä¸€å®šæ˜¯ä½ æƒ³è¦çš„ï¼Œåè€Œï¼Œå•å‘æ•°æ®æµæ‰æ˜¯æˆ‘ä»¬æ›´å–œæ¬¢çš„æ•°æ®ä¼ é€’æ–¹å¼ã€‚åœ¨è¿™ä¸ª ReSwift çš„æ•™ç¨‹ä¸­ï¼Œä½ ä¼šå­¦åˆ°å¦‚ä½•ä½¿ç”¨ ReSwift æ¥å®ç°å•å‘æ•°æ®æµï¼Œå¹¶å®Œæˆä¸€ä¸ªçŠ¶æ€é©±åŠ¨çš„æ¸¸æˆâ€”â€”<strong>MemoryTunes</strong></p>
<a id="more"></a>
<h2 id="ä»€ä¹ˆæ˜¯-ReSwift"><a href="#ä»€ä¹ˆæ˜¯-ReSwift" class="headerlink" title="ä»€ä¹ˆæ˜¯ ReSwift"></a>ä»€ä¹ˆæ˜¯ ReSwift</h2><p><a href="https://github.com/ReSwift/ReSwift">ReSwift</a> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ å¾ˆè½»æ¾çš„å»æ„å»ºä¸€ä¸ª Redux æ¶æ„çš„appã€‚å½“ç„¶å®ƒæ˜¯ç”¨Swift å®ç°çš„ã€‚</p>
<p>RxSwift æœ‰ä»¥ä¸‹å››ä¸ªæ¨¡å—</p>
<ul>
<li><strong>Views</strong>ï¼š å“åº” <strong>Store</strong> çš„æ”¹å˜ï¼Œå¹¶ä¸”æŠŠä»–ä»¬å±•ç¤ºåœ¨é¡µé¢ä¸Šã€‚views å‘å‡º <strong>Actions</strong>ã€‚</li>
<li><strong>Actions</strong>:å‘èµ·app ç§çŠ¶æ€çš„æ”¹å˜ã€‚Action æ˜¯æœ‰ <strong>Reducer</strong> æ“ä½œçš„ã€‚</li>
<li><strong>Reducers</strong>: ç›´æ¥æ”¹å˜ç¨‹åºçš„çŠ¶æ€ï¼Œè¿™äº›çŠ¶æ€ç”± <strong>Store</strong> æ¥ä¿å­˜ã€‚</li>
<li><strong>Store</strong>:ä¿å­˜å½“å‰çš„ç¨‹åºçš„çŠ¶æ€ã€‚å…¶ä»–æ¨¡å—ï¼Œæ¯”å¦‚è¯´ <strong>Views</strong> å¯ä»¥è®¢é˜…è¿™ä¸ªçŠ¶æ€ï¼Œå¹¶ä¸”å“åº”çŠ¶æ€çš„æ”¹å˜ã€‚</li>
</ul>
<p>ReSwift è‡³å°‘æœ‰ä»¥ä¸‹è¿™äº›ä¼˜åŠ¿:</p>
<ul>
<li><strong>å¾ˆå¼ºçš„çº¦æŸåŠ›</strong>ï¼šæŠŠä¸€äº›ä»£ç æ”¾åœ¨ä¸åˆé€‚çš„åœ°æ–¹å¾€å¾€å…·æœ‰å¾ˆå¼ºçš„è¯±æƒ‘æ€§ï¼Œè™½ç„¶è¿™æ ·å†™å¾ˆæ–¹ä¾¿ã€‚ReSwift é€šè¿‡å¾ˆå¼ºçš„çº¦æŸåŠ›æ¥é¿å…è¿™ç§æƒ…å†µã€‚</li>
<li><strong>å•å‘æ•°æ®æµ</strong>ï¼šå¤šå‘æ•°æ®æµçš„ä»£ç åœ¨é˜…è¯»å’Œdebugä¸Šéƒ½å¯èƒ½å˜æˆä¸€åœºç¾éš¾ã€‚ä¸€ä¸ªæ”¹å˜å¯èƒ½ä¼šå¸¦æ¥ä¸€ç³»åˆ—çš„è¿é”ååº”ã€‚è€Œå•å‘æ•°æ®æµå°±èƒ½è®©ç¨‹åºçš„è¿è¡Œæ›´åŠ å…·æœ‰å¯é¢„æµ‹æ€§ï¼Œä¹Ÿèƒ½å¤Ÿå‡å°‘é˜…è¯»è¿™äº›ä»£ç çš„ç—›è‹¦ã€‚</li>
<li><strong>å®¹æ˜“æµ‹è¯•</strong>ï¼šå¤§å¤šæ•°çš„ä¸šåŠ¡é€»è¾‘éƒ½åœ¨Reducer ä¸­ï¼Œè¿™äº›éƒ½æ˜¯çº¯çš„åŠŸèƒ½ã€‚</li>
<li><strong>å¤ç”¨æ€§</strong>ï¼šReSwift ä¸­çš„æ¯ä¸ªç»„ä»¶â€”Storeã€Reducerã€Action ï¼Œéƒ½æ˜¯èƒ½åœ¨å„ä¸ªå¹³å°ç‹¬ç«‹è¿è¡Œçš„ï¼Œå¯ä»¥å¾ˆè½»æ¾çš„åœ¨iOSã€macOSã€æˆ–è€…tvOS ä¸­å¤ç”¨è¿™äº›æ¨¡å—ã€‚</li>
</ul>
<h3 id="å¤šå‘æ•°æ®æµ-vs-å•å‘æ•°æ®æµ"><a href="#å¤šå‘æ•°æ®æµ-vs-å•å‘æ•°æ®æµ" class="headerlink" title="å¤šå‘æ•°æ®æµ vs. å•å‘æ•°æ®æµ"></a>å¤šå‘æ•°æ®æµ vs. å•å‘æ•°æ®æµ</h3><p>é€šè¿‡ä»¥ä¸‹çš„å‡ ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æ¥ç†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯æ•°æ®æµã€‚ä¸€ä¸ªåŸºäº VIPER æ¶æ„å®ç°çš„ç¨‹åºå°±å…è®¸æ•°æ®åœ¨å…¶ç»„ä»¶ä¸­å¤šå‘ä¼ é€’ã€‚</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-20-033011.jpg" alt="VIPER ä¸­çš„å¤šå‘æ•°æ®æµ"><br><br>VIPER ä¸­çš„å¤šå‘æ•°æ®æµ</center>

<p>è·Ÿ ReSwift ä¸­çš„æ•°æ®ä¼ é€’æ–¹å‘æ¯”è¾ƒä¸€ä¸‹ï¼š</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-20-033331.jpg" alt=""><br><br>ReSwift ä¸­çš„å•å‘æ•°æ®æµ</center>

<p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ•°æ®æ˜¯å•å‘ä¼ é€’çš„ï¼Œè¿™ä¹ˆåšï¼Œå¯ä»¥è®©ç¨‹åºä¸­çš„æ•°æ®ä¼ é€’æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿèƒ½å¤Ÿå¾ˆè½»æ¾çš„å®šä½åˆ°é—®é¢˜çš„æ‰€åœ¨ã€‚</p>
<h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><p>è¿™æ˜¯ä¸€ä¸ªå·²ç»æŠŠæ•´ä¸ªæ¡†æ¶å·®ä¸å¤šæ­å»ºèµ·æ¥çš„æ¨¡ç‰ˆé¡¹ç›®ï¼ŒåŒ…å«äº†ä¸€äº›éª¨æ¶ä»£ç ï¼Œå’Œåº“ã€‚<a href="https://github.com/CepheusSun/Translate/tree/master/demos/ReSwiftAndRedux">GitHub</a></p>
<p>é¦–å…ˆéœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œé¦–å…ˆå°±æ˜¯è¦è®¾ç½®è¿™ä¸ªappæœ€é‡è¦çš„éƒ¨åˆ†:state</p>
<p>æ‰“å¼€<strong>AppState.swift</strong> æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ª AppState çš„ç»“æ„ä½“:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AppState</span> : <span class="title">StateType</span></span>&#123;</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªç»“æ„ä½“å®šä¹‰äº†æ•´ä¸ªappçš„çŠ¶æ€ã€‚</p>
<p>åœ¨åˆ›å»ºåŒ…å«æ‰€æœ‰çš„ AppState çš„ <strong>Store</strong> ä¹‹å‰ï¼Œè¿˜è¦åˆ›å»ºä¸€ä¸ªä¸» Reducer</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-20-034323.jpg" alt=""><br><br></center>

<p>Reducer æ˜¯å”¯ä¸€å¯ä»¥ç›´æ¥æ”¹å˜ <strong>Store</strong> ä¸­ <strong>AppState</strong> çš„å€¼çš„åœ°æ–¹ã€‚åªæœ‰ Action å¯ä»¥é©±åŠ¨ Reducer æ¥æ”¹å˜å½“å‰ç¨‹åºçš„çŠ¶æ€ã€‚è€Œ Reducer æ”¹å˜å½“å‰ AppState çš„å€¼ï¼Œåˆå–å†³äºä»–æ¥å—åˆ°çš„ Action ç±»å‹ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œåœ¨ç¨‹åºä¸­åªæœ‰ä¸€ä¸ª Storeï¼Œ ä»–ä¹Ÿåªæœ‰ä¸€ä¸ªä¸» Reducer</p>
</blockquote>
<p>æ¥ä¸‹æ¥åœ¨<strong>AppReducer.swift</strong> ä¸­åˆ›å»ºä¸» reducerï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">appReducer</span><span class="params">(action: Action, state: AppState?)</span></span> -&gt; <span class="type">AppState</span> &#123;</div><div class="line">  <span class="keyword">return</span> <span class="type">AppState</span>()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>appReducer</strong> æ˜¯ä¸€ä¸ªæ¥æ”¶ Action å¹¶ä¸”è¿”å›æ”¹å˜ä¹‹åçš„ AppState çš„å‡½æ•°ã€‚å‚æ•° state æ˜¯ç¨‹åºå½“å‰çš„ stateã€‚ è¿™ä¸ªå‡½æ•°å¯ä»¥æ ¹æ®ä»–æ¥æ”¶çš„ Action ç›´æ¥æ”¹å˜è¿™ä¸ª çŠ¶æ€ã€‚ç°åœ¨å°±å¯ä»¥å¾ˆå®¹æ˜“çš„åˆ›å»ºä¸€ä¸ª AppState å€¼äº†ã€‚</p>
<p>ç°åœ¨åº”è¯¥åˆ›å»º Store æ¥ä¿å­˜ state äº†ã€‚</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-20-035231.jpg" alt=""><br><br></center>

<p>Store åŒ…å«äº†æ•´ä¸ªç¨‹åºå½“å‰çš„çŠ¶æ€ï¼šè¿™æ˜¯ AppState çš„ä¸€ä¸ªå®ä¾‹ã€‚æ‰“å¼€<strong>AppDelegate.swift</strong> ,åœ¨ impore UIkit ä¸‹é¢æ·»åŠ å¦‚ä¸‹ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="keyword">var</span> store = <span class="type">Store</span>&lt;<span class="type">AppState</span>&gt;(reducer: appReducer, state: <span class="literal">nil</span>)</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç é€šè¿‡ appReducer åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€çš„å˜é‡storeï¼ŒappReducer æ˜¯è¿™ä¸ª Store çš„ä¸» Reducerï¼Œä»–åŒ…å«äº†æ¥æ”¶åˆ°actionçš„æ—¶å€™ï¼Œstore åº”è¯¥æ€ä¹ˆæ”¹å˜çš„è§„åˆ™ã€‚å› ä¸ºè¿™æ˜¯ä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæ‰€ä»¥åªæ˜¯ä¼ é€’äº†ä¸€ä¸ª nil state è¿›å»ã€‚</p>
<p>ç¼–è¯‘è¿è¡Œï¼Œå½“ç„¶ï¼Œä»€ä¹ˆéƒ½çœ‹ä¸è§ã€‚å› ä¸ºè¿˜æ²¡å†™å•Šï¼</p>
<h2 id="App-Routing"><a href="#App-Routing" class="headerlink" title="App Routing"></a>App Routing</h2><p>ç°åœ¨å¯ä»¥åˆ›å»ºç¬¬ä¸€ä¸ªå®è´¨çš„ stateäº†ï¼Œå¯æ˜¯ä½¿ç”¨ IB çš„å¯¼èˆªï¼Œæˆ–è€…æ˜¯ routingã€‚</p>
<p>App è·¯ç”±åœ¨æ‰€æœ‰çš„æ¶æ„æ¨¡å¼ä¸­éƒ½æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œåœ¨ ReSwift ä¸­ä¹Ÿæ˜¯ã€‚åœ¨ MemoryTunes ä¸­å°†ä½¿ç”¨å¾ˆç®€å•çš„æ–¹æ³•æ¥åšè¿™ä»¶äº‹æƒ…ï¼Œé¦–å…ˆéœ€è¦é€šè¿‡ enum å®šä¹‰æ‰€æœ‰çš„ç»ˆç‚¹ï¼Œç„¶åè®© AppState æŒæœ‰å½“å‰çš„ç»ˆç‚¹ã€‚AppRouter å°±ä¼šå“åº”è¿™ä¸ªå€¼çš„æ”¹å˜ï¼Œè¾¾åˆ°è·¯ç”±çš„ç›®çš„ã€‚</p>
<p>åœ¨ <strong>AppRouter.swift</strong> ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">RoutingDestination</span>: <span class="title">String</span> </span>&#123;</div><div class="line">  <span class="keyword">case</span> menu = <span class="string">"MenuTableViewController"</span></div><div class="line">  <span class="keyword">case</span> categories = <span class="string">"CategoriesTableViewController"</span></div><div class="line">  <span class="keyword">case</span> game = <span class="string">"GameViewController"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæšä¸¾ä»£è¡¨äº†app ä¸­çš„æ‰€æœ‰ ViewControllerã€‚</p>
<p>åˆ°ç°åœ¨ï¼Œç»ˆäºæœ‰èƒ½å¤Ÿæ”¾åœ¨ä½ ç¨‹åºçŠ¶æ€ä¸­çš„æ•°æ®äº†ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œåªæœ‰ä¸€ä¸ª state ç»“æ„ä½“(AppState), ä½ ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ª state é‡Œé¢é€šè¿‡å­çŠ¶æ€çš„æ–¹æ³•ï¼Œå°†çŠ¶æ€è¿›è¡Œåˆ†ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®è·µã€‚</p>
<p>æ‰“å¼€ <strong>RoutingState.swift</strong> æ·»åŠ å¦‚ä¸‹çš„å­çŠ¶æ€ç»“æ„ä½“ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RoutingState</span>: <span class="title">StateType</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> navigationState: <span class="type">RoutingDestination</span></div><div class="line">  </div><div class="line">  <span class="keyword">init</span>(navigationState: <span class="type">RoutingDestination</span> = .menu) &#123;</div><div class="line">    <span class="keyword">self</span>.navigationState = navigationState</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>RoutingState åŒ…å«äº† navigationStateï¼Œ è¿™ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯å½“å‰å±å¹•å±•ç¤ºçš„ç•Œé¢ã€‚</p>
<blockquote>
<p>menu æ˜¯ navigationState çš„é»˜è®¤å€¼ã€‚å¦‚æœæ²¡æœ‰åˆ¶å®šçš„è¯ï¼Œå°†å®ƒè®¾ç½®æˆè¿™ä¸ªappçš„æœ€åˆçŠ¶æ€ã€‚</p>
</blockquote>
<p>åœ¨ <strong>AppState.swift</strong> ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> routingState: <span class="type">RoutingState</span></div></pre></td></tr></table></figure>
<p>ç°åœ¨ AppState å°±æœ‰äº† RoutingState è¿™ä¸ªå­çŠ¶æ€ã€‚ç¼–è¯‘ä¸€ä¸‹ï¼Œä¼šå‘ç°ä¸€ä¸ªé”™è¯¯ã€‚</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-20-091710.jpg" alt=""><br><br></center>

<p><em>appReducer</em> ç¼–è¯‘ä¸è¿‡äº†ï¼å› ä¸ºæˆ‘ä»¬ç»™ <em>AppState</em> æ·»åŠ äº† <em>routingState</em>ï¼Œä½†æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™å¹¶æ²¡æœ‰æŠŠè¿™ä¸ªä¸œè¥¿ä¼ è¿›å»ã€‚ç°åœ¨è¿˜éœ€è¦ä¸€ä¸ª reducer æ¥åˆ›å»º <em>routingState</em></p>
<p>ç°åœ¨æˆ‘ä»¬åªæœ‰ä¸€ä¸ªä¸» <strong>Reducer</strong>ï¼Œ è·Ÿ state ç±»å‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ å­Reducer æ¥å°† Reducer åˆ’åˆ†å¼€æ¥ã€‚</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-014930.jpg" alt=""><br><br></center>

<p>åœ¨ <strong>RoutingReducer.swift</strong> ä¸­æ·»åŠ ä¸‹é¢çš„ <strong>Reducer</strong>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">routingReducer</span><span class="params">(action: Action, state: RoutingState?)</span></span> -&gt; <span class="type">RoutingState</span> &#123;</div><div class="line">  <span class="keyword">let</span> state = state ?? <span class="type">RoutingState</span>()</div><div class="line">  <span class="keyword">return</span> state</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è·Ÿ ä¸» Reducer å·®ä¸å¤šï¼Œ <em>routionReducer</em> æ ¹æ®æ¥æ”¶åˆ°çš„ Action æ”¹å˜çŠ¶æ€ï¼Œç„¶åå°†è¿™ä¸ªçŠ¶æ€è¿”å›ã€‚åˆ°ç°åœ¨ï¼Œè¿˜æ²¡æœ‰åˆ›å»º action æ‰€ä»¥å¦‚æœæ²¡æœ‰æ¥æ”¶åˆ° state çš„è¯ï¼Œå°± new ä¸€ä¸ª <em>RoutingState</em>ï¼Œç„¶åè¿”å›ã€‚</p>
<p>å­ reducer è´Ÿè´£åˆ›é€ ä»–ä»¬å¯¹åº”çš„ å­çŠ¶æ€ã€‚</p>
<p>ç°åœ¨å›åˆ° <strong>AppReducer.swift</strong> å»æ”¹å˜è¿™ä¸ªç¼–è¯‘é”™è¯¯:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">AppState</span>(routingState: routingReducer(action: action, </div><div class="line">										 state: state?.routingState))</div></pre></td></tr></table></figure>
<p>ç»™ AppState çš„åˆå§‹åŒ–æ–¹æ³•ä¸­æ·»åŠ äº†å¯¹åº”çš„å‚æ•°ã€‚å…¶ä¸­çš„ action å’Œ state éƒ½æ˜¯ç”±main reducer ä¼ é€’è¿›å»çš„ã€‚</p>
<h3 id="è®¢é˜…-subscribing"><a href="#è®¢é˜…-subscribing" class="headerlink" title="è®¢é˜…  subscribing"></a>è®¢é˜…  subscribing</h3><p>è¿˜è®°å¾— RoutingState é‡Œé¢é‚£ä¸ªé»˜è®¤çš„ state <code>.menu</code> å—ï¼Ÿä»–å°±æ˜¯ app é»˜è®¤çš„çŠ¶æ€ã€‚åªæ˜¯ä½ è¿˜æ²¡æœ‰è®¢é˜…å®ƒã€‚</p>
<p>ä»»ä½•çš„ç±»éƒ½å¯ä»¥å®šäºè¿™ä¸ª storeï¼Œ ä¸ä»…ä»…æ˜¯ <strong>View</strong>ã€‚å½“ä¸€ä¸ªç±»è®¢é˜…äº†è¿™ä¸ª Store ä¹‹åï¼Œæ¯æ¬¡ state çš„æ”¹å˜ä»–éƒ½ä¼šå¾—åˆ°é€šçŸ¥ã€‚æˆ‘ä»¬åœ¨ <em>AppRouter</em> ä¸­è®¢é˜…è¿™ä¸ª Storeï¼Œ ç„¶åæ”¶åˆ°é€šçŸ¥ä¹‹åï¼Œpush ä¸€ä¸ª Controller</p>
<p>æ‰“å¼€ <strong>AppRouter.swift</strong> ç„¶åé‡æ–°å†™ <em>AppRouter</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">AppRouter</span> </span>&#123;</div><div class="line">  </div><div class="line">  <span class="keyword">let</span> navigationController: <span class="type">UINavigationController</span></div><div class="line">  </div><div class="line">  <span class="keyword">init</span>(window: <span class="type">UIWindow</span>) &#123;</div><div class="line">    navigationController = <span class="type">UINavigationController</span>()</div><div class="line">    window.rootViewController = navigationController</div><div class="line">    </div><div class="line">    <span class="comment">// 1</span></div><div class="line">    store.subscribe(<span class="keyword">self</span>) &#123;</div><div class="line">      $<span class="number">0</span>.select &#123;</div><div class="line">        $<span class="number">0</span>.routingState</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="comment">// 2</span></div><div class="line">  fileprivate <span class="function"><span class="keyword">func</span>  <span class="title">pushViewController</span><span class="params">(identifier: String, animated: Bool)</span></span> &#123;</div><div class="line">    <span class="keyword">let</span> viewController = instantiateViewController(identifier: identifier)</div><div class="line">    navigationController.pushViewController(viewController, animated: animated)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  fileprivate <span class="function"><span class="keyword">func</span> <span class="title">instantiateViewController</span><span class="params">(identifier: String)</span></span> -&gt; <span class="type">UIViewController</span> &#123;</div><div class="line">    <span class="keyword">let</span> storyboard = <span class="type">UIStoryboard</span>(name: <span class="string">"Main"</span>, bundle: <span class="literal">nil</span>)</div><div class="line">    <span class="keyword">return</span> storyboard.instantiateViewController(withIdentifier: identifier)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// MARK: - StoreSubscriber</span></div><div class="line"><span class="comment">// 3</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">AppRouter</span> :<span class="title">StoreSubscriber</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">newState</span><span class="params">(state: RoutingState)</span></span> &#123;</div><div class="line">    <span class="comment">// 4</span></div><div class="line">    <span class="keyword">let</span> shouldsAnimate = navigationController.topViewController != <span class="literal">nil</span></div><div class="line">    pushViewController(identifier: state.navigationState.rawValue, animated: shouldsAnimate)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æ”¹äº† AppRouter è¿™ä¸ªç±»ï¼Œç„¶åæ·»åŠ äº†ä¸€ä¸ª extensionã€‚æˆ‘ä»¬çœ‹çœ‹å…·ä½“æ¯ä¸€æ­¥éƒ½åšäº†ä»€ä¹ˆå§ï¼</p>
<ol>
<li><em>AppState</em> ç°åœ¨è®¢é˜…äº†å…¨å±€çš„ storeï¼Œ åœ¨é—­åŒ…é‡Œé¢ï¼Œ selct è¡¨æ˜æ­£åœ¨è®¢é˜… routingState çš„æ”¹å˜ã€‚</li>
<li><em>pushViewController</em> ç”¨æ¥åˆå§‹åŒ–ï¼Œå¹¶ä¸” push è¿™ä¸ªæ§åˆ¶å™¨ã€‚é€šè¿‡ identifier åŠ è½½çš„ StoryBoard ä¸­çš„æ§åˆ¶å™¨ã€‚</li>
<li>è®© <em>AppRouter</em> å“åº” StoreSubscriberï¼Œ å½“ routingState æ”¹å˜çš„æ—¶å€™ï¼Œå°†æ–°çš„å€¼è¿”å›å›æ¥ã€‚</li>
<li>æ ¹æ§åˆ¶å™¨æ˜¯ä¸éœ€è¦åŠ¨ç”»çš„ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªåœ°æ–¹åˆ¤æ–­ä¸€ä¸‹æ ¹æ§åˆ¶å™¨ã€‚</li>
<li>å½“ state å‘ç”Ÿæ”¹å˜ï¼Œå°±å¯ä»¥å»å‡º state.navigationState, push å‡ºå¯¹åº”çš„ controller</li>
</ol>
<p>AppRouter ç°åœ¨å°±å°±åˆå§‹åŒ– <em>menu</em> ç„¶åå°† <em>MenuTableViewController</em> push å‡ºæ¥</p>
<p>ç¼–è¯‘è¿è¡Œï¼š</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-024808.jpg" width="200"><br><br></center>

<p>ç°åœ¨ app ä¸­å°±æ˜¯ <em>MenuTableViewController</em> äº†, ç°åœ¨å½“ç„¶è¿˜æ˜¯ç©ºçš„ã€‚æ¯•ç«Ÿæˆ‘ä»¬è¿˜æ²¡æœ‰å¼€å§‹å­¦ viewã€‚</p>
<h2 id="View"><a href="#View" class="headerlink" title="View"></a>View</h2><center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-025205.jpg" alt=""><br><br></center>

<p>ä»»ä½•ä¸œè¥¿éƒ½å¯èƒ½æ˜¯ä¸€ä¸ª <em>StoreSubscriber</em>ï¼Œ ä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯ view å±‚åœ¨å“åº”çŠ¶æ€çš„å˜åŒ–ã€‚ç°åœ¨æ˜¯è®© <em>MenuTableViewController</em> æ¥å±•ç¤ºä¸¤ä¸ªä¸åŒçš„ menu äº†ã€‚</p>
<p>å» <strong>MenuState.swift</strong>ï¼Œ åˆ›å»ºå¯¹åº”çš„ Reducer</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MenuState</span>: <span class="title">StateType</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> menuTitles: [<span class="type">String</span>]</div><div class="line">  </div><div class="line">  <span class="keyword">init</span>() &#123;</div><div class="line">    menuTitles = [<span class="string">"NewGame"</span>, <span class="string">"Choose Category"</span>]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>MenuState</strong> æœ‰ä¸€ä¸ª *menuTitlesï¼Œ è¿™ä¸ªå±æ€§å°±æ˜¯ tableView çš„ title</p>
<p>åœ¨ <strong>MenuReducer.swift</strong> ä¸­ï¼Œåˆ›å»ºè¿™ä¸ª state å¯¹åº”çš„ Reducer:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">menuReducer</span><span class="params">(action: Action, state: MenuState?)</span></span> -&gt; <span class="type">MenuState</span> &#123;</div><div class="line">  <span class="keyword">return</span> <span class="type">MenuState</span>()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› ä¸º MenuState æ˜¯é™æ€çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦å»å¤„ç†çŠ¶æ€çš„å˜åŒ–ã€‚æ‰€ä»¥è¿™é‡Œåªéœ€è¦ç®€å•çš„è¿”å›ä¸€ä¸ªæ–°çš„ MenuState</p>
<p>å›åˆ° <strong>AppState.swift</strong> ä¸­, æ·»åŠ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> meunState: <span class="type">MenuState</span></div></pre></td></tr></table></figure>
<p>ç¼–è¯‘åˆå¤±è´¥äº†ï¼Œç„¶åéœ€è¦åˆ° <strong>AppReducer.swift</strong> ä¸­å»ä¿®æ”¹è¿™ä¸ªç¼–è¯‘é”™è¯¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">AppState</span>(routingState: routingReducer(action: action,</div><div class="line">                                  state: state?.routingState),</div><div class="line">      meunState: menuReducer(action: action, state: state?.meunState))</div></pre></td></tr></table></figure>
<p>ç°åœ¨æœ‰äº† MenuState, æ¥ä¸‹æ¥å°±æ˜¯è¦è®¢é˜…å®ƒäº†ã€‚</p>
<p>å…ˆåœ¨æ‰“å¼€ <strong>MenuTableViewController.swift</strong>, ç„¶åå°†ä»£ç æ”¹æˆè¿™æ ·:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuTableViewController</span>: <span class="title">UITableViewController</span> </span>&#123;</div><div class="line">  <span class="comment">// 1</span></div><div class="line">  <span class="keyword">var</span> tableDataSource: <span class="type">TableDataSource</span>&lt;<span class="type">UITableViewCell</span>, <span class="type">String</span>&gt;?</div><div class="line">  </div><div class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillAppear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</div><div class="line">    <span class="keyword">super</span>.viewWillAppear(animated)</div><div class="line">    <span class="comment">// 2</span></div><div class="line">    store.subscribe(<span class="keyword">self</span>) &#123;</div><div class="line">      $<span class="number">0</span>.select &#123;</div><div class="line">        $<span class="number">0</span>.menuState</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillDisappear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</div><div class="line">    <span class="keyword">super</span>.viewWillDisappear(animated)</div><div class="line">    <span class="comment">// 3</span></div><div class="line">    store.unsubscribe(<span class="keyword">self</span>)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// MARK: - StoreSubscriber</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">MenuTableViewController</span>: <span class="title">StoreSubscriber</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">newState</span><span class="params">(state: MenuState)</span></span> &#123;</div><div class="line">    <span class="comment">// 4</span></div><div class="line">    tableDataSource = <span class="type">TableDataSource</span>(cellIdentifier: <span class="string">"TitleCell"</span>, models: state.menuTitles) &#123;</div><div class="line">      $<span class="number">0</span>.textLabel?.text = $<span class="number">1</span></div><div class="line">      $<span class="number">0</span>.textLabel?.textAlignment = .center</div><div class="line">      <span class="keyword">return</span> $<span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    tableView.dataSource = tableDataSource</div><div class="line">    tableView.reloadData()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹è¿™æ®µä»£ç åšäº†ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>TableDataSource åŒ…å«äº†UITableView data source ç›¸å…³çš„ä¸œè¥¿ã€‚</li>
<li>è®¢é˜…äº† menuState</li>
<li>å–æ¶ˆè®¢é˜…</li>
<li>è¿™æ®µä»£ç å°±æ˜¯å®ç° UITableView çš„ä»£ç ï¼Œåœ¨è¿™å„¿å¯ä»¥å¾ˆæ˜ç¡®çš„çœ‹åˆ° state æ˜¯æ€ä¹ˆå˜æˆ view çš„ã€‚</li>
</ol>
<blockquote>
<p>å¯èƒ½å·²ç»å‘ç°äº†ï¼ŒReSwift ä½¿ç”¨äº†å¾ˆå¤šå€¼ç±»å‹å˜é‡ï¼Œè€Œä¸æ˜¯å¯¹è±¡ç±»å‹ã€‚å¹¶ä¸”æ¨èä½¿ç”¨å£°æ˜å¼çš„ UI ä»£ç ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>StoreSubscriber ä¸­å®šä¹‰çš„ newState å›è°ƒäº†çŠ¶æ€çš„æ”¹å˜ã€‚ä½ å¯èƒ½ä¼šé€šè¿‡è¿™æ ·çš„æ–¹æ³•å»æ¥è´§è¿™ä¸ªå€¼</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuTableViewController</span>: <span class="title">UITableViewController</span> </span>&#123;</div><div class="line">&gt;   <span class="keyword">var</span> currentMenuTitlesState: [<span class="type">String</span>]</div><div class="line">&gt;   ...</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p>ä½†æ˜¯å†™å£°æ˜å¼çš„ UI ä»£ç ï¼Œå¯ä»¥å¾ˆæ˜ç¡®çš„çŸ¥é“ state æ˜¯æ€ä¹ˆè½¬æ¢æˆ View çš„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­çš„é—®é¢˜çš„ UITableView å¹¶æ²¡æœ‰è¿™æ ·çš„APIã€‚è¿™å°±æ˜¯æˆ‘å†™ TableDataSource æ¥æ¡¥æ¥çš„åŸå› ã€‚å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯å¯ä»¥å»çœ‹çœ‹è¿™ä¸ª <strong>TableDataSource.swift</strong></p>
</blockquote>
<p>ç¼–è¯‘è¿è¡Œï¼Œå°±èƒ½å¤Ÿçœ‹åˆ°äº†:</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-032618.jpg" width="200"><br><br></center>

<h2 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h2><center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-032930.jpg" alt=""><br><br></center>

<p>åšå¥½äº† View æ¥ä¸‹æ¥å°±æ¥å†™ <strong>Action</strong> äº†ã€‚</p>
<p>Action æ˜¯ Store ä¸­æ•°æ®æ”¹å˜çš„åŸå› ã€‚ä¸€ä¸ª Action å°±æ˜¯ä¸€ä¸ªæœ‰å¾ˆå¤šå˜é‡ç»“æ„ä½“ï¼Œè¿™å†™å˜é‡ä¹Ÿæ˜¯è¿™ä¸ª Action çš„å‚æ•°ã€‚ Reducer å¤„ç†ä¸€ç³»åˆ—çš„ actionï¼Œ ç„¶åæ”¹å˜ app çš„çŠ¶æ€ã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨å…ˆåˆ›å»ºä¸€ä¸ª Actionï¼Œ æ‰“å¼€ <strong>RoutingAction.swift</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RoutingAction</span>: <span class="title">Action</span> </span>&#123;</div><div class="line">  <span class="keyword">let</span> destination: <span class="type">RoutingDestination</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><em>RoutingAction</em> æ”¹å˜å½“å‰çš„ routing ç»ˆç‚¹</p>
<p>ç°åœ¨ï¼Œå½“ menu çš„ cell è¢«ç‚¹å‡»çš„æ—¶å€™ï¼Œæ´¾å‘ä¸€ä¸ª actionã€‚</p>
<p>åœ¨ <strong>MenuTableViewController.swift</strong> ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, didSelectRowAt indexPath: IndexPath)</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> routeDestination: <span class="type">RoutingDestination</span> = .categories</div><div class="line">    <span class="keyword">switch</span> indexPath.row &#123;</div><div class="line">    <span class="keyword">case</span> <span class="number">0</span>: routeDestination = .game</div><div class="line">    <span class="keyword">case</span> <span class="number">1</span>: routeDestination = .categories</div><div class="line">    <span class="keyword">default</span>:<span class="keyword">break</span></div><div class="line">    &#125;</div><div class="line">    store.dispatch(<span class="type">RoutingAction</span>(destination: routeDestination))</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ï¼Œæ ¹æ®é€‰æ‹©çš„ cell è®¾ç½®ä¸åŒçš„ routeDestination ç„¶åç”¨dispatch æ–¹æ³•æ´¾å‘å‡ºå»ã€‚</p>
<p>è¿™ä¸ª action è¢«æ´¾å‘å‡ºå»äº†ï¼Œä½†æ˜¯ï¼Œè¿˜æ²¡æœ‰è¢«ä»»ä½•çš„ reducer ç»™æ”¯æŒã€‚ç°åœ¨å» RoutingReducer.swift ç„¶ååšä¸€ä¸‹å¯¹åº”çš„ä¿®æ”¹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> state = state ?? <span class="type">RoutingState</span>()</div><div class="line"></div><div class="line"><span class="keyword">switch</span> action &#123;</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> routingAction <span class="keyword">as</span> <span class="type">RoutingAction</span>:</div><div class="line">  state.navigationState = routingAction.destination</div><div class="line"><span class="keyword">default</span>: <span class="keyword">break</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> state</div></pre></td></tr></table></figure>
<p>switch è¯­å¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦ä¼ å…¥çš„ action æ˜¯ RoutingActionã€‚å¦‚æœæ˜¯ï¼Œå°±ä¿®æ”¹ state ä¸ºè¿™ä¸ª action çš„ destination</p>
<p>ç¼–è¯‘è¿è¡Œï¼Œç°åœ¨ç‚¹å‡» item ï¼Œ å°±ä¼šå¯¹åº”çš„ push å‡º controllerã€‚</p>
<h2 id="Updating-the-State"><a href="#Updating-the-State" class="headerlink" title="Updating the State"></a>Updating the State</h2><p>è¿™æ ·å»å®ç°å¯¼èˆªå¯èƒ½æ˜¯ç”±ç‘•ç–µçš„ã€‚å½“ä½ ç‚¹å‡» â€œNew Gameâ€ çš„æ—¶å€™ï¼Œ<code>RoutingState</code> çš„ <code>navigationState</code> å°±ä¼šä»<code>menu</code> å˜æˆ <code>game</code>ã€‚ ä½†æ˜¯å½“ä½ ç‚¹å‡» controller çš„è¿”å›æŒ‰é’®çš„æ—¶å€™ï¼ŒnavigationState å´æ²¡æœ‰æ”¹å˜ã€‚</p>
<p>åœ¨ ReSwift ä¸­ï¼Œè®©çŠ¶æ€è·Ÿ UI åŒæ­¥æ˜¯å¾ˆé‡è¦çš„ï¼Œä½†æ˜¯è¿™åˆæ˜¯æœ€å®¹æ˜“æå¿˜çš„ä¸œè¥¿ã€‚ç‰¹åˆ«æ˜¯å‘ä¸Šé¢é‚£æ ·ï¼Œç”± UIKit è‡ªåŠ¨æ§åˆ¶çš„ä¸œè¥¿ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨ MenutableViewController å‡ºç°çš„æ—¶å€™æ›´æ–°ä¸€ä¸‹è¿™ä¸ªçŠ¶æ€ã€‚</p>
<p>åœ¨ <strong>MenuTableViewController.swift</strong> çš„ <code>viewWillAppear</code>: æ–¹æ³•ä¸­ï¼Œæ·»åŠ :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">store.dispatch(<span class="type">RoutingAction</span>(destination: .menu))</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±èƒ½å¤Ÿåœ¨ä¸Šé¢çš„é—®é¢˜å‡ºç°çš„æ—¶å€™è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>è¿è¡Œä¸€ä¸‹å‘¢ï¼Ÿå‘ƒâ€¦ å®Œå…¨ä¹±äº†ã€‚ä¹Ÿå¯èƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªå´©æºƒã€‚</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-live.gif" alt=""><br><br></center>

<p>æ‰“å¼€ <strong>AppRouter.swift</strong>ï¼Œ ä½ ä¼šçœ‹åˆ°æ¯æ¬¡æ¥æ”¶åˆ°ä¸€ä¸ªæ–°çš„ navigationState çš„æ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨ <code>pushViewController</code> æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡å“åº”å°±ä¼š push ä¸€ä¸ª menu å‡ºæ¥ï¼</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¿˜å¿…é¡»åœ¨ push ä¹‹å‰ç¡®å®šè¿™ä¸ª controller æ˜¯ä¸æ˜¯æ­£åœ¨å±å¹•ä¸­ã€‚æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ <code>pushViewController</code>  è¿™ä¸ªæ–¹æ³•:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">fileprivate <span class="function"><span class="keyword">func</span>  <span class="title">pushViewController</span><span class="params">(identifier: String, animated: Bool)</span></span> &#123;</div><div class="line">	<span class="keyword">let</span> viewController = instantiateViewController(identifier: identifier)</div><div class="line">    <span class="keyword">let</span> newViewControllerType = type(of: viewController)</div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> currentVc = navigationController.topViewController &#123;</div><div class="line">      <span class="keyword">let</span> currentViewControllerType = type(of: currentVc)</div><div class="line">      <span class="keyword">if</span> currentViewControllerType == newViewControllerType &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    navigationController.pushViewController(viewController, animated: animated)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„æ–¹æ³•ä¸­ï¼Œé€šè¿‡ <code>type(of:)</code> æ–¹æ³•æ¥é¿å…å½“å‰çš„ topViewController è·Ÿ è¦æ¨å‡ºæ¥çš„ Controller è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœç›¸ç­‰ï¼Œå°±ç›´æ¥ <code>return</code> ã€‚</p>
<p>ç¼–è¯‘è¿è¡Œï¼Œè¿™æ—¶å€™ï¼Œåˆä¸€åˆ‡æ­£å¸¸äº†ã€‚</p>
<p>å½“ UI å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ›´æ–°å½“å‰çš„çŠ¶æ€æ˜¯æ¯”è¾ƒå¤æ‚çš„äº‹æƒ…ã€‚è¿™æ˜¯å†™ ReSwift çš„æ—¶å€™å¿…é¡»è¦è§£å†³çš„ä¸€ä»¶äº‹æƒ…ã€‚è¿˜å¥½ä»–ä¸æ˜¯é‚£ä¹ˆå¸¸è§ã€‚</p>
<h2 id="Category"><a href="#Category" class="headerlink" title="Category"></a>Category</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬ç»§ç»­æ¥å®ç°  <em>CategoriesTableViewController</em> è¿™ä¸€éƒ¨åˆ†è·Ÿä¹‹å‰çš„éƒ¨åˆ†æ¯”èµ·æ¥æ›´å¤æ‚ä¸€äº›ã€‚è¿™ä¸ªç•Œé¢éœ€è¦å…è®¸ç”¨æˆ·æ¥é€‰æ‹©éŸ³ä¹çš„ç±»å‹ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬åœ¨<strong>CategoriesState.swift</strong> ä¸­æ·»åŠ å“åº”çš„çŠ¶æ€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Category</span>: <span class="title">String</span> </span>&#123;</div><div class="line">  <span class="keyword">case</span> pop = <span class="string">"Pop"</span></div><div class="line">  <span class="keyword">case</span> electrinic = <span class="string">"Electronic"</span></div><div class="line">  <span class="keyword">case</span> rock = <span class="string">"Rock"</span></div><div class="line">  <span class="keyword">case</span> metal = <span class="string">"Metal"</span></div><div class="line">  <span class="keyword">case</span> rap = <span class="string">"Rap"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CategoriesState</span>: <span class="title">StateType</span> </span>&#123;</div><div class="line">  <span class="keyword">let</span> categories: [<span class="type">Category</span>]</div><div class="line">  <span class="keyword">var</span> currentCategorySelected: <span class="type">Category</span></div><div class="line">  </div><div class="line">  <span class="keyword">init</span>(currentCategory: <span class="type">Category</span>) &#123;</div><div class="line">    categories = [.pop, .electrinic, .rock, .metal, .rap]</div><div class="line">    currentCategorySelected = currentCategory</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæšä¸¾å®šä¹‰äº†ä¸€äº›éŸ³ä¹çš„ç±»å‹ã€‚CategoriesState åŒ…å«äº†ä¸€ä¸ªæ•°ç»„çš„ç§ç±»ï¼Œä»¥åŠå½“å‰é€‰æ‹©çš„ç§ç±»ã€‚</p>
<p>åœ¨ <strong>ChangeCategoryAction.swift</strong> ä¸­æ·»åŠ è¿™äº›ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ChangeCategoryAction</span>: <span class="title">Action</span> </span>&#123;</div><div class="line">  <span class="keyword">let</span> categoryIndex: <span class="type">Int</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå®šä¹‰äº†å¯¹åº”çš„ actionï¼Œ ä½¿ç”¨ categoryIndex æ¥å¯»æ‰¾å¯¹åº”çš„éŸ³ä¹ç±»å‹ã€‚</p>
<p>ç°åœ¨æ¥å®ç° Reduceräº†ã€‚ è¿™ä¸ª reducer éœ€è¦æ¥å— ChangeCategoryAction ç„¶åå°†æ–°çš„ state ä¿å­˜èµ·æ¥ã€‚æ‰“å¼€ <strong>CategoryReducer.swift</strong>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">CategoriesReducerConstants</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> <span class="keyword">let</span> userDefaultCategoryKey = <span class="string">"currentCategoryKey"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">typealias</span> <span class="type">C</span> = <span class="type">CategoriesReducerConstants</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">categoriesReducer</span><span class="params">(action: Action, state: CategoriesState?)</span></span> -&gt; <span class="type">CategoriesState</span> &#123;</div><div class="line">  <span class="keyword">var</span> currentCategory: <span class="type">Category</span> = .pop</div><div class="line">  <span class="comment">// 1</span></div><div class="line">  <span class="keyword">if</span> <span class="keyword">let</span> loadedCategory = getCurrentCategoryStateFromUserDefaults() &#123;</div><div class="line">    currentCategory = loadedCategory</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> state = state ?? <span class="type">CategoriesState</span>(currentCategory: currentCategory)</div><div class="line">  </div><div class="line">  <span class="keyword">switch</span> action &#123;</div><div class="line">  <span class="keyword">case</span> <span class="keyword">let</span> changeCategoryAction <span class="keyword">as</span> <span class="type">ChangeCategoryAction</span>:</div><div class="line">    <span class="comment">// 2</span></div><div class="line">    <span class="keyword">let</span> newCategory = state.categories[changeCategoryAction.categoryIndex]</div><div class="line">    state.currentCategorySelected = newCategory</div><div class="line">    saveCurrentCategoryStateToUserdefaults(category: newCategory)</div><div class="line">  <span class="keyword">default</span>: <span class="keyword">break</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 3</span></div><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">getCurrentCategoryStateFromUserDefaults</span><span class="params">()</span></span> -&gt; <span class="type">Category</span>?</div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> userDefaults = <span class="type">UserDefaults</span>.standard</div><div class="line">  <span class="keyword">let</span> rawValue = userDefaults.string(forKey: <span class="type">C</span>.userDefaultCategoryKey)</div><div class="line">  <span class="keyword">if</span> <span class="keyword">let</span> rawValue = rawValue &#123;</div><div class="line">    <span class="keyword">return</span> <span class="type">Category</span>(rawValue: rawValue)</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 4</span></div><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">saveCurrentCategoryStateToUserdefaults</span><span class="params">(category: Category)</span></span> &#123;</div><div class="line">  <span class="keyword">let</span> userDefaults = <span class="type">UserDefaults</span>.standard</div><div class="line">  userDefaults.<span class="keyword">set</span>(category.rawValue, forKey: <span class="type">C</span>.userDefaultCategoryKey)</div><div class="line">  userDefaults.synchronize()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è·Ÿå…¶ä»–çš„ Reducer ä¸€æ ·ï¼Œè¿™äº›æ–¹æ³•å®ç°äº†ä¸€ä¸‹æ¯”è¾ƒå¤æ‚çš„çŠ¶æ€çš„æ”¹å˜ï¼Œå¹¶ä¸”å°†é€‰æ‹©ä¹‹åçš„çŠ¶æ€é€šè¿‡ Userdefault æŒä¹…åŒ–ã€‚</p>
<ol>
<li>ä» UserDefault ä¸­è·å– categoryï¼Œ ç„¶åèµ‹å€¼ç»™ CategoriesState</li>
<li>åœ¨æ¥æ”¶åˆ° ChangeCategoryAction çš„æ—¶å€™æ›´æ–°çŠ¶æ€ï¼Œç„¶åä¿å­˜ä¸‹æ¥</li>
<li>ä» Userdefault ä¸­è·å–state</li>
<li>å°† state ä¿å­˜åœ¨ UserDefault ä¸­</li>
</ol>
<p>3ã€4 ä¸­çš„ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯åŠŸèƒ½å¾ˆå•ä¸€çš„æ–¹æ³•ï¼Œè€Œä¸”æ˜¯å…¨å±€çš„ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠä»–ä»¬æ”¾åœ¨ä¸€ä¸ªç±»æˆ–è€…ç»“æ„ä½“ä¸­ã€‚</p>
<p>æ¥ä¸‹æ¥å¾ˆè‡ªç„¶çš„ï¼Œå°±ä¼šéœ€è¦åœ¨ AppState ä¸­æ·»åŠ æ–°çš„çŠ¶æ€ã€‚æ‰“å¼€ <strong>AppState.swift</strong> ç„¶åæ·»åŠ å¯¹åº”çš„çŠ¶æ€:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> categoriesState: <span class="type">CategoriesState</span></div></pre></td></tr></table></figure>
<p>ç„¶åå» <strong>AppReducer.swift</strong> ä¸­å»ä¿®æ”¹å¯¹åº”çš„é”™è¯¯</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">AppState</span>(routingState: routingReducer(action: action,</div><div class="line">                                             state: state?.routingState),</div><div class="line">                meunState: menuReducer(action: action, state: state?.meunState),</div><div class="line">      categoriesState: categoriesReducer(action: action, state: state?.categoriesState))</div></pre></td></tr></table></figure>
<p>ç°åœ¨è¿˜éœ€è¦ View äº†ã€‚ç°åœ¨éœ€è¦åœ¨ CategoriesViewController ä¸­å»å†™è¿™éƒ¨åˆ†çš„ View</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoriesTableViewController</span>: <span class="title">UITableViewController</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> tableDataSource: <span class="type">TableDataSource</span>&lt;<span class="type">UITableViewCell</span>, <span class="type">Category</span>&gt;?</div><div class="line">  </div><div class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillAppear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</div><div class="line">    <span class="keyword">super</span>.viewWillAppear(animated)</div><div class="line">    <span class="comment">//1</span></div><div class="line">    store.subscribe(<span class="keyword">self</span>) &#123;</div><div class="line">      $<span class="number">0</span>.select &#123;</div><div class="line">        $<span class="number">0</span>.categoriesState</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillDisappear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</div><div class="line">    <span class="keyword">super</span>.viewDidDisappear(animated)</div><div class="line">    store.unsubscribe(<span class="keyword">self</span>)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, didSelectRowAt indexPath: IndexPath)</span></span> &#123;</div><div class="line">    <span class="comment">// 2</span></div><div class="line">    store.dispatch(<span class="type">ChangeCategoryAction</span>(categoryIndex: indexPath.row))</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CategoriesTableViewController</span>: <span class="title">StoreSubscriber</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">newState</span><span class="params">(state: CategoriesState)</span></span> &#123;</div><div class="line">    tableDataSource = <span class="type">TableDataSource</span>(cellIdentifier: <span class="string">"CategoryCell"</span>, models: state.categories) &#123;</div><div class="line">      $<span class="number">0</span>.textLabel?.text = $<span class="number">1</span>.rawValue</div><div class="line">      <span class="comment">// 3</span></div><div class="line">      $<span class="number">0</span>.accessoryType = (state.currentCategorySelected == $<span class="number">1</span>) ? .checkmark : .<span class="keyword">none</span></div><div class="line">      <span class="keyword">return</span> $<span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    tableView.dataSource = tableDataSource</div><div class="line">    tableView.reloadData()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™éƒ¨åˆ†çš„ä»£ç è·Ÿ MenuTableViewController å·®ä¸å¤šã€‚æ³¨é‡Šä¸­æ ‡è®°çš„å†…å®¹åˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li>åœ¨ <code>viewWillAppear</code> ä¸­è®¢é˜… categoriesState çš„æ”¹å˜ï¼Œç„¶ååœ¨ <code>viewillDisappear</code> ä¸­å–æ¶ˆè®¢é˜…ã€‚</li>
<li>å°†äº‹ä»¶æ´¾å‘å‡ºå»</li>
<li>æ ‡è®°é€‰æ‹©çš„çŠ¶æ€</li>
</ol>
<p>æ‰€æœ‰çš„ä¸œè¥¿éƒ½å†™å¥½äº†ï¼Œç°åœ¨è¯•ä¸€ä¸‹ï¼</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-065609.jpg" width="200"><br><br></center>

<h2 id="å¼‚æ­¥ä»»åŠ¡"><a href="#å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡"></a>å¼‚æ­¥ä»»åŠ¡</h2><p>æ€ä¹ˆéƒ½è·‘ä¸äº†è¿™ä¸ªè¯é¢˜ï¼Œè¿™åœ¨ ReSwift ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚</p>
<p>åœºæ™¯:ä» iTunesçš„ <a href="https://affiliate.itunes.apple.com/resources/documentation/itunes-store-web-service-search-api/?uo=8&amp;at=11ld4k">API</a> ä¸­å»è·å–ç…§ç‰‡ã€‚é¦–å…ˆéœ€è¦åˆ›å»ºå¯¹åº”çš„ stateï¼Œ reducer ä»¥åŠç›¸å…³çš„ action.</p>
<p>æ‰“å¼€ <strong>GameState.swift</strong> æ·»åŠ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">GameState</span>: <span class="title">StateType</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> memoryCards: [<span class="type">MemoryCard</span>]</div><div class="line">  <span class="comment">// 1</span></div><div class="line">  <span class="keyword">var</span> showLoading: <span class="type">Bool</span></div><div class="line">  <span class="comment">// 2</span></div><div class="line">  <span class="keyword">var</span> gameFinishied: <span class="type">Bool</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å®šä¹‰äº† Game çš„çŠ¶æ€ã€‚</p>
<ol>
<li>loading çš„ èŠèŠ±ï¼Œæ˜¯å¦å­˜åœ¨</li>
<li>æ¸¸æˆæ˜¯å¦ç»“æŸ</li>
</ol>
<p>æ¥ä¸‹æ¥æ˜¯Reducer <strong>GameReducer.swift</strong>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">gameReducer</span><span class="params">(action: Action, state: GameState?)</span></span> -&gt; <span class="type">GameState</span> &#123;</div><div class="line">  <span class="keyword">let</span> state = state ?? <span class="type">GameState</span>(memoryCards: [],</div><div class="line">                                 showLoading: <span class="literal">false</span>,</div><div class="line">                                 gameFinishied: <span class="literal">false</span>)</div><div class="line">  <span class="keyword">return</span> state</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å°±æ˜¯ç®€å•çš„åˆ›å»ºäº†ä¸€ä¸ª <em>GameState</em>, ç¨åä¼šå†å›åˆ°è¿™ä¸ªåœ°æ–¹çš„ã€‚</p>
<p>åœ¨ <strong>AppState.swift</strong> ä¸­ï¼Œæ·»åŠ å¯¹åº”çš„çŠ¶æ€</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> gameState: <span class="type">GameState</span></div></pre></td></tr></table></figure>
<p>ä¿®æ”¹ <strong>AppReducer.swift</strong> ä¸­å‡ºç°çš„ç¼–è¯‘é”™è¯¯</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">AppState</span>(routingState: routingReducer(action: action,</div><div class="line">                                               state: state?.routingState),</div><div class="line">                  meunState: menuReducer(action: action, state: state?.meunState),</div><div class="line">                  categoriesState: categoriesReducer(action: action, state: state?.categoriesState),</div><div class="line">                  gameState: gameReducer(action: action, state: state?.gameState))</div></pre></td></tr></table></figure>
<blockquote>
<p>å‘ç°äº†è§„å¾‹äº†å§ï¼Œåœ¨æ¯æ¬¡å†™å®Œ Action/Reducer/Stateä¹‹ååº”è¯¥åšä»€ä¹ˆéƒ½æ˜¯å¯è§å¹¶ä¸”å¾ˆç®€å•çš„ã€‚è¿™ç§æƒ…å†µï¼Œå¾—ç›ŠäºReSwift çš„å•å‘æ•°æ®ç‰¹æ•ˆå’Œä¸¥æ ¼çš„ä»£ç çº¦æŸã€‚åªæœ‰ Reducer èƒ½å¤Ÿæ”¹å˜ app çš„ Storeï¼Œåªæœ‰ Action èƒ½å¤Ÿè§¦å‘è¿™ç§å“åº”ã€‚è¿™æ ·åšèƒ½å¤Ÿè®©ä½ çŸ¥é“åœ¨ä¸Šé¢åœ°æ–¹æ‰¾ä»£ç ï¼Œåœ¨ä»€ä¹ˆåœ°æ–¹åšæ–°åŠŸèƒ½ã€‚</p>
</blockquote>
<p>ç°åœ¨å¼€å§‹å®šä¹‰ Actionï¼Œ è¿™ä¸ª action ç”¨æ¥æ›´æ–°å¡ç‰‡ã€‚åœ¨ <strong>SetCardsAction.swift</strong>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SetCardsAction</span>: <span class="title">Action</span> </span>&#123;</div><div class="line">  <span class="keyword">let</span> cardImageUrls: [<span class="type">String</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ª action ç”¨æ¥è®¾ç½® GameState ä¸­å›¾ç‰‡çš„URL</p>
<p>ç°åœ¨å¼€å§‹å‡†å¤‡ç¨‹åºä¸­ç¬¬ä¸€ä¸ªå¼‚æ­¥è¡Œä¸ºå§ï¼åœ¨ <strong>FetchTumesAction.swift</strong> ä¸­ï¼Œæ·»åŠ ä¸‹é¢çš„ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">fetchTunes</span><span class="params">(state: AppState, store: Store&lt;AppState&gt;)</span></span> -&gt; <span class="type">FetchTunesAction</span> &#123;</div><div class="line">  iTunesAPI.searchFor(category: state.categoriesState.currentCategorySelected.rawValue) &#123;</div><div class="line">    store.dispatch(<span class="type">SetCardsAction</span>(cardImageUrls: $<span class="number">0</span>))</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="type">FetchTunesAction</span>()</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FetchTunesAction</span>: <span class="title">Action</span></span>&#123;&#125;</div></pre></td></tr></table></figure>
<p><code>fetchTunes</code>  é€šè¿‡ <code>itunesAPI</code> è·å–äº†å›¾ç‰‡ã€‚ç„¶ååœ¨é—­åŒ…ä¸­å°†ç»“æœæ´¾å‘å‡ºæ¥ã€‚ ReSwift ä¸­çš„å¼‚æ­¥ä»»åŠ¡å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
<p><code>fetchTunes</code> è¿”å›ä¸€ä¸ª <code>FetchTunesAction</code>  è¿™ä¸ª action æ˜¯ç”¨æ¥éªŒè¯è¯·æ±‚çš„ã€‚</p>
<p>æ‰“å¼€ <strong>OpenReducer.swift</strong> ç„¶åæ·»åŠ å¯¹è¿™ä¸¤ä¸ª action çš„æ”¯æŒã€‚æŠŠ <code>gameReducer</code> ä¸­çš„ä»£ç æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> state = state ?? <span class="type">GameState</span>(memoryCards: [],</div><div class="line">                                showLoading: <span class="literal">false</span>,</div><div class="line">                                gameFinishied: <span class="literal">false</span>)</div><div class="line"> <span class="keyword">switch</span> action &#123;</div><div class="line"> <span class="comment">// 1</span></div><div class="line"> <span class="keyword">case</span> <span class="number">_</span> <span class="keyword">as</span> <span class="type">FetchTunesAction</span>:</div><div class="line">   state = <span class="type">GameState</span>(memoryCards: [],</div><div class="line">                     showLoading: <span class="literal">true</span>,</div><div class="line">                     gameFinishied: <span class="literal">false</span>)</div><div class="line"> <span class="comment">// 2</span></div><div class="line"> <span class="keyword">case</span> <span class="keyword">let</span> setCardsAction <span class="keyword">as</span> <span class="type">SetCardsAction</span>:</div><div class="line">   state.memoryCards = generateNewCards(with: setCardsAction.cardImageUrls)</div><div class="line">   state.showLoading = <span class="literal">false</span></div><div class="line"> <span class="keyword">default</span>:<span class="keyword">break</span></div><div class="line"> &#125;</div><div class="line"> <span class="keyword">return</span> state</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ï¼Œå°±æ˜¯æ ¹æ®å…·ä½“çš„ action åšä¸åŒçš„äº‹æƒ…ã€‚</p>
<ol>
<li>FetchTunesAction, è®¾ç½® showLoading ä¸º true</li>
<li>SetCardsAction, æ‰“ä¹±å¡ç‰‡ï¼Œç„¶åå°† showLoading è®¾ç½®ä¸º falseã€‚ generateNewCards æ–¹æ³•å¯ä»¥åœ¨ <strong>MemoryGameLogic.swift</strong> ä¸­æ‰¾åˆ°</li>
</ol>
<p>ç°åœ¨å¼€å§‹å†™ <strong>View</strong></p>
<p>åœ¨ <strong>CardCollectionViewCell.swift</strong> ä¸­æ·»åŠ ä¸‹é¢çš„æ–¹æ³•:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">configCell</span><span class="params">(with cardState: MemoryCard)</span></span> &#123;</div><div class="line">  <span class="keyword">let</span> url = <span class="type">URL</span>(string: cardState.imageUrl)</div><div class="line">  <span class="comment">// 1</span></div><div class="line">  cardImageView.kf.setImage(with: url)</div><div class="line">  <span class="comment">// 2</span></div><div class="line">  cardImageView.alpha = cardState.isAlreadyGuessed || cardState.isFlipped ? <span class="number">1</span> : <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>configCell</code> è¿™ä¸ªæ–¹æ³•åšäº†ä¸‹é¢ä¸¤ä»¶äº‹æƒ…:</p>
<ol>
<li>ä½¿ç”¨ Kingfisher æ¥ç¼“å­˜å›¾ç‰‡</li>
<li>åˆ¤æ–­æ˜¯å¦å±•ç¤ºå›¾ç‰‡</li>
</ol>
<p>ä¸‹ä¸€æ­¥ï¼Œå®ç° CollectionViewã€‚åœ¨ gameViewCotroller.swift å€’å…¥ <code>import ReSwift</code> ç„¶ååœ¨ <code>showGameFinishedAlert</code> ä¸Šé¢æ·»åŠ ä¸‹é¢çš„ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> collectionDataSource: <span class="type">CollectionDataSource</span>&lt;<span class="type">CardCollectionViewCell</span>, <span class="type">MemoryCard</span>&gt;?</div><div class="line"> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillAppear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</div><div class="line">   <span class="keyword">super</span>.viewWillAppear(animated)</div><div class="line">   store.subscribe(<span class="keyword">self</span>) &#123;</div><div class="line">     $<span class="number">0</span>.select &#123;</div><div class="line">       $<span class="number">0</span>.gameState</div><div class="line">     &#125;</div><div class="line">   &#125;</div><div class="line"> &#125;</div><div class="line"> </div><div class="line"> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillDisappear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</div><div class="line">   <span class="keyword">super</span>.viewWillDisappear(animated)</div><div class="line">   store.unsubscribe(<span class="keyword">self</span>)</div><div class="line"> &#125;</div><div class="line"> </div><div class="line"> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">   <span class="comment">// 1</span></div><div class="line">   store.dispatch(fetchTunes)</div><div class="line">   collectionView.delegate = <span class="keyword">self</span></div><div class="line">   loadingIndicator.hidesWhenStopped = <span class="literal">true</span></div><div class="line">   </div><div class="line">   <span class="comment">// 2</span></div><div class="line">   collectionDataSource = <span class="type">CollectionDataSource</span>.<span class="keyword">init</span>(cellIdentifier: <span class="string">"CardCell"</span>, models: []) &#123;</div><div class="line">     $<span class="number">0</span>.configCell(with: $<span class="number">1</span>)</div><div class="line">     <span class="keyword">return</span> $<span class="number">0</span></div><div class="line">   &#125;</div><div class="line">   collectionView.dataSource = collectionDataSource</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>ç”±äºæ²¡æœ‰å†™ StoreSubscriber ï¼Œæ‰€ä»¥è¿™é‡Œä¼šæœ‰ä¸€ç‚¹ç‚¹çš„ç¼–è¯‘é”™è¯¯ã€‚æˆ‘ä»¬å…ˆå‡è®¾å·²ç»å†™äº†ã€‚è¿™æ®µä»£ç ï¼Œé¦–å…ˆæ˜¯è®¢é˜…äº†å–æ¶ˆè®¢é˜… gameState ç„¶å:</p>
<ol>
<li>æ´¾å‘ fetchTunes æ¥è·å–å›¾ç‰‡</li>
<li>ä½¿ç”¨ CollectiondataSource  æ¥é…ç½® cell ç›¸å…³ä¿¡æ¯ã€‚</li>
</ol>
<p>ç°åœ¨æˆ‘ä»¬æ¥æ·»åŠ  <code>StoreSubscriber</code> :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">GameViewController</span>: <span class="title">StoreSubscriber</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">newState</span><span class="params">(state: GameState)</span></span> &#123;</div><div class="line">    collectionDataSource?.models = state.memoryCards</div><div class="line">    collectionView.reloadData()</div><div class="line">    <span class="comment">// 1</span></div><div class="line">    state.showLoading ? loadingIndicator.startAnimating() : loadingIndicator.stopAnimating()</div><div class="line">       <span class="comment">// 2</span></div><div class="line">    <span class="keyword">if</span> state.gameFinishied &#123;</div><div class="line">      showGameFinishedAlert()</div><div class="line">      store.dispatch(fetchTunes)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å®ç°äº† state æ”¹å˜çš„æ—¶å€™å¯¹åº”çš„å˜åŒ–ã€‚ä»–ä¼šæ›´æ–° dataSource</p>
<ol>
<li>æ›´æ–° loading indicator çš„çŠ¶æ€ã€‚</li>
<li>å½“æ¸¸æˆç»“æŸæ—¶ï¼Œå¼¹çª—</li>
</ol>
<p>ç°åœ¨ï¼Œè¿è¡Œä¸€ä¸‹å§ï¼</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-085643.jpg" width="200"><br><br></center>

<h2 id="Play"><a href="#Play" class="headerlink" title="Play"></a>Play</h2><p>æ¸¸æˆçš„é€»è¾‘æ˜¯ï¼š è®©ç”¨æˆ·ç¿»è½¬ä¸¤å¼ å¡ç‰‡çš„æ—¶å€™ï¼Œå¦‚æœå®ƒä»¬æ˜¯ä¸€çœ¼çš„ï¼Œå°±è®©ä»–ä»¬ä¿æŒï¼Œå¦‚æœä¸ä¸€æ ·å°±ç¿»å›å»ã€‚ç”¨æˆ·çš„ä»»åŠ¡æ˜¯åœ¨å°½å¯èƒ½å°‘çš„å°è¯•ä¹‹åç¿»è½¬æ‰€æœ‰çš„å¡ç‰‡ã€‚</p>
<p>ç°åœ¨éœ€è¦ä¸€ä¸ªç¿»è½¬çš„äº‹ä»¶ã€‚åœ¨ <strong>OpenCardAction.swift</strong> ä¸­æ·»åŠ ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FlipCardAction</span>: <span class="title">Action</span></span>&#123;</div><div class="line">  <span class="keyword">let</span> cardIndexToFlip: <span class="type">Int</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“å¡ç‰‡ç¿»è½¬çš„æ—¶å€™: FlipCardAction ä½¿ç”¨ cardIndexToFlip æ¥æ›´æ–° gameState ä¸­çš„çŠ¶æ€ã€‚</p>
<p>ä¸‹ä¸€æ­¥ä¿®æ”¹ <code>gamereducer</code>  æ¥æ”¯æŒè¿™ä¸ª actionã€‚æ‰“å¼€ <strong>GameReducer.swift</strong> æ·»åŠ ä¸‹é¢å¯¹åº”çš„case</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">case</span> <span class="keyword">let</span> flipCardAction <span class="keyword">as</span> <span class="type">FlipCardAction</span>:</div><div class="line">   state.memoryCards = flipCard(index: flipCardAction.cardIndexToFlip,</div><div class="line">                                memoryCards: state.memoryCards)</div><div class="line">state.gameFinishied = hasFinishedGame(cards: state.memoryCards)</div></pre></td></tr></table></figure>
<p>å¯¹ FlipCardAction æ¥è¯´ï¼Œ flipCard æ”¹å˜å¡ç‰‡çš„çŠ¶æ€ã€‚hasFinishedGame ä¼šåœ¨æ¸¸æˆç»“æŸçš„æ—¶å€™è°ƒç”¨ã€‚ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥åœ¨ <strong>MemoryGameLogic.swift</strong> ä¸­æ‰¾åˆ°ã€‚</p>
<p>æœ€åä¸€ä¸ªé—®é¢˜æ˜¯åœ¨ç‚¹å‡»çš„æ—¶å€™ï¼ŒæŠŠç¿»è½¬çš„ action æ´¾å‘å‡ºå»ã€‚</p>
<p>åœ¨ <strong>GameViewController.swift</strong> ä¸­ï¼Œæ‰¾åˆ° <code>UICollectionViewDelegate</code>  è¿™ä¸ª extensionã€‚åœ¨ <code>collectionView(_:didSelectItemAt:)</code> ä¸­æ·»åŠ :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">store.dispatch(<span class="type">FlipCardAction</span>(cardIndexToFlip: indexPath.row))</div></pre></td></tr></table></figure>
<p>å½“å¡ç‰‡è¢«é€‰æ‹©çš„æ—¶å€™ï¼Œå…³è”çš„<code>indexPath.row</code> å°±ä¼šè·Ÿç€ <code>FlipcardAction</code> è¢«æ´¾å‘å‡ºå».</p>
<p>å†è¿è¡Œä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°ï¼</p>
<center><br><br><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-21-091810.jpg" width="200"><br><br></center>



<h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>æ¨¡ç‰ˆé¡¹ç›®å·²ç»å®Œæ•´é¡¹ç›®éƒ½åœ¨ <a href="https://github.com/CepheusSun/Translate/tree/master/demos/ReSwiftAndRedux">GitHub</a> </p>
<p>ReSwift ä¸ä»…ä»…æ˜¯æˆ‘ä»¬ä»Šå¤©æåˆ°çš„å†…å®¹ã€‚ä»–è¿˜ä»¥å¾ˆå¤š:</p>
<ul>
<li><strong>Middleware</strong>: ä¸­é—´ä»¶ã€‚swiftç›®å‰è¿˜æ²¡æœ‰å¾ˆå¥½çš„åŠæ³•æ¥åšåˆ‡é¢ã€‚ä½†æ˜¯ ReSwift è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å¯ä»¥ä½¿ç”¨ReSwift çš„ [Middleware] ç‰¹æ€§æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä»–èƒ½å¤Ÿè®©ä½ è½»æ¾çš„åˆ‡é¢(logging, ç»Ÿè®¡ï¼Œ ç¼“å­˜)ã€‚</li>
<li><strong>Routing</strong>ï¼š åœ¨è¿™ä¸ª app ä¸­å·²ç»å®ç°äº†è‡ªå·±çš„ Routingï¼Œ è¿˜æœ‰ä¸ªæ›´é€šç”¨çš„è§£å†³æ–¹æ¡ˆ<a href="https://github.com/ReSwift/ReSwift-Router">ReSwift-Routing</a> å•è¿™åœ¨ç¤¾åŒºè¿˜æ˜¯ä¸€ä¸ªè¿˜æ²¡æœ‰å®Œå…¨è§£å†³çš„é—®é¢˜ã€‚è¯´ä¸å®šè§£å†³å®ƒçš„äººå°±æ˜¯ä½ ï¼</li>
<li><strong>Testing</strong>: ReSwift æˆ–è®¸æ˜¯æœ€æ–¹ä¾¿æµ‹è¯•çš„æ¡†æ¶äº†ã€‚ Reducer åŒ…å«äº†ä½ éœ€è¦æµ‹è¯•çš„æ‰€æœ‰ä»£ç ã€‚ä»–ä»¬éƒ½æ˜¯çº¯çš„åŠŸèƒ½å‡½æ•°ã€‚è¿™ç§å‡½æ•°åœ¨æ¥å—äº†åŒä¸€ä¸ªinput æ€»æ˜¯è¿”å›åŒä¸€ä¸ªå€¼ï¼Œä»–ä»¬ä¸å›ä¾èµ–äºç¨‹åºå½“å‰çš„çŠ¶æ€ã€‚</li>
<li><strong>Debugging</strong>ï¼š ReSwift çš„æ‰€æœ‰çŠ¶æ€éƒ½åœ¨ä¸€ä¸ªç»“æ„ä½“ä¸­å®šä¹‰ï¼Œå¹¶ä¸”æ˜¯å•å‘æ•°æ®æµçš„ï¼Œdebug ä¼šéå¸¸çš„ç®€å•ï¼Œç”šè‡³ä½ è¿˜å¯ä»¥ç”¨ <a href="https://github.com/ReSwift/ReSwift-Recorder">ReSwift-Recorder</a> æ¥è®°å½•ä¸‹å¯¼è‡´ crash çš„çŠ¶æ€</li>
<li><strong>Persistence</strong>: å› ä¸ºæ‰€æœ‰çš„çŠ¶æ€éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæ‹“å±•å’ŒåšæŒéƒ½æ˜¯å¾ˆå®¹æ˜“çš„äº‹æƒ…ã€‚ç¼“å­˜ç¦»çº¿çš„æ•°æ®ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦çš„æ¶æ„é—®é¢˜ï¼Œä½†æ˜¯ ReSwift è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</li>
<li><strong>others</strong>ï¼š Redux æ¶æ„å¹¶ä¸æ˜¯ä¸€ä¸ªåº“ï¼Œå®ƒæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€å¥—ï¼Œè¿˜æœ‰ <a href="https://github.com/BendingSpoons/katana-swift">Katana</a> æˆ–è€… <a href="https://github.com/ReduxKit/ReduxKit">ReduxKit</a> ä¹Ÿå¯ä»¥åšè¿™ä»¶äº‹</li>
</ul>
<p>å¦‚æœä½ æƒ³å­¦ä¹ æ›´å¤šå…³äº ReSwift çš„ä¸œè¥¿ï¼Œå¯ä»¥çœ‹ ReSwift ä½œè€… <a href="https://news.realm.io/news/benji-encz-unidirectional-data-flow-swift/">Benjamin Encz</a> çš„æ¼”è®²è§†é¢‘</p>
<p><a href="http://christiantietze.de/posts/2016/01/reswift-level-indirection/">Christian Tietzeâ€™s blog</a> çš„åšå®¢ä¸Šæœ‰å¾ˆå¤šæœ‰è¶£çš„ä¾‹å­ã€‚</p>
<p><strong>è¿™ç¯‡æ–‡ç« ç¿»è¯‘è‡ªRay wenderlich <a href="https://www.raywenderlich.com/155815/reswift-tutorial-memory-game-app">ReSwift Tutorial: Memory Game App</a>]</strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;éšç€ app çš„å‘å±•ï¼Œ MVC æ¸æ¸çš„æ»¡è¶³ä¸äº†ä¸šåŠ¡çš„éœ€æ±‚ã€‚å¤§å®¶éƒ½åœ¨æ¢ç´¢å„ç§å„æ ·çš„æ¶æ„æ¨¡å¼æ¥é€‚åº”è¿™ç§æƒ…å†µï¼Œåƒæ˜¯MVVMã€VIPERã€&lt;a href=&quot;https://eng.uber.com/new-rider-app/&quot;&gt;Riblets&lt;/a&gt; ç­‰ç­‰ã€‚ ä»–ä»¬éƒ½æœ‰å„è‡ªçš„ç‰¹ç‚¹ï¼Œä½†æ˜¯éƒ½æœ‰åŒä¸€ä¸ªæ ¸å¿ƒ: é€šè¿‡å¤šå‘æ•°æ®æµå°†ä»£ç æŒ‰ç…§å•ä¸€èŒè´£åŸåˆ™æ¥åˆ’åˆ†ä»£ç ã€‚åœ¨å¤šå‘æ•°æ®æµä¸­ï¼Œæ•°æ®åœ¨å„ä¸ªæ¨¡å—ä¸­ä¼ é€’ã€‚&lt;/p&gt;
&lt;p&gt;å¤šå‘æ•°æ®æµå¹¶ä¸ä¸€å®šæ˜¯ä½ æƒ³è¦çš„ï¼Œåè€Œï¼Œå•å‘æ•°æ®æµæ‰æ˜¯æˆ‘ä»¬æ›´å–œæ¬¢çš„æ•°æ®ä¼ é€’æ–¹å¼ã€‚åœ¨è¿™ä¸ª ReSwift çš„æ•™ç¨‹ä¸­ï¼Œä½ ä¼šå­¦åˆ°å¦‚ä½•ä½¿ç”¨ ReSwift æ¥å®ç°å•å‘æ•°æ®æµï¼Œå¹¶å®Œæˆä¸€ä¸ªçŠ¶æ€é©±åŠ¨çš„æ¸¸æˆâ€”â€”&lt;strong&gt;MemoryTunes&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>é¢å‘ Extension å¼€å‘ ğŸŒ Share Extension</title>
    <link href="http://www.CepheusSun.com/ShareExtension.html"/>
    <id>http://www.CepheusSun.com/ShareExtension.html</id>
    <published>2017-07-09T13:43:38.000Z</published>
    <updated>2017-07-09T13:53:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>Share Extension ä½¿ç”¨æˆ·åœ¨ä½¿ç”¨å…¶ä»–çš„app çš„æ—¶å€™, æ›´åŠ æ–¹ä¾¿çš„å°†å…¶å†…å®¹åˆ†äº«å‡ºå»ï¼Œåƒæ˜¯ç¤¾ä¼šåŒ–åˆ†äº«è¿˜æœ‰ä¸Šä¼ æœåŠ¡å™¨ã€‚æ¯”å¦‚è¯´ï¼Œ åœ¨ä¸€ä¸ª app ä¸­æœ‰ä¸ªåˆ†äº«æŒ‰é’®ï¼Œ ç”¨æˆ·å¯ä»¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ª Share Extension æ¥å‘è¡¨è¯„è®ºæˆ–è€…å†…å®¹ã€‚</p>
<a id="more"></a>
<blockquote>
<p><strong>å†™åœ¨å‰é¢çš„è¯</strong></p>
<p>æœ€å¥½çš„ Share Extension èƒ½å¤Ÿè®©ç”¨æˆ·èƒ½å¤Ÿå¾ˆè½»æ¾çš„åˆ†äº«ç½‘é¡µä¸­çš„å†…å®¹ã€‚å¦‚æœä½ éœ€è¦ç”¨ä¸€ä¸ªæ‰©å±•æ¥è®©ç”¨æˆ·ä½¿ç”¨è¿™äº›å†…å®¹åšä¸€äº›å…¶ä»–çš„æ“ä½œ, æˆ–è€…ä¸ºç”¨æˆ·æä¾›ä»–ä»¬æ‰€å…³å¿ƒçš„å†…å®¹çš„æ›´æ–°ï¼Œ Share Extension å¯èƒ½å°±ä¸æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆäº†ã€‚</p>
</blockquote>
<h3 id="å¦‚ä½•ç†è§£-Share-Extension"><a href="#å¦‚ä½•ç†è§£-Share-Extension" class="headerlink" title="å¦‚ä½•ç†è§£ Share Extension"></a>å¦‚ä½•ç†è§£ Share Extension</h3><p> Share Extension æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>è®©ç”¨æˆ·æ›´å®¹æ˜“åˆ†äº«å†…å®¹ã€‚</li>
<li>å¦‚æœå¯ä»¥çš„è¯ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·é¢„è§ˆï¼Œç¼–è¾‘ï¼Œæ ‡æ³¨ï¼Œå¹¶ä¸”è‡ªå®šä¹‰å†…å®¹ã€‚</li>
<li>åœ¨ç”¨æˆ·å‘é€å†…å®¹çš„æ—¶å€™ï¼Œèƒ½å¤Ÿç¡®ä¿å†…å®¹æ˜¯åˆæ³•çš„ã€‚</li>
</ul>
<p>ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡ç³»ç»Ÿæä¾›çš„ UI æ¥è·å¾—ä»–èƒ½å¤Ÿä½¿ç”¨çš„ Share Extensionã€‚åœ¨ iOS ä¸­ï¼Œ ç”¨æˆ·ç‚¹å‡»åˆ†äº«æŒ‰é’®ï¼Œç„¶åä»ç³»ç»Ÿå¼¹å‡ºæ¥çš„åˆ†äº«åŒºåŸŸä¸­é€‰æ‹©ä¸€ä¸ª Share Extensionã€‚</p>
<p>å½“ç”¨æˆ·é€‰æ‹©äº†ä½ çš„ Share Extension ä¹‹åï¼Œä½ éœ€è¦å±•ç¤ºä¸€ä¸ªåŒ…å«äº†å†…å®¹çš„è§†å›¾ï¼Œç„¶åå‘è¡¨å‡ºå»ã€‚ä½ å¯ä»¥å°†ä½ çš„è§†å›¾æœºé‡ç³»ç»Ÿæä¾›çš„ vcï¼Œ æˆ–è€…è‡ªå®šä¹‰ä¸€ä¸ªã€‚ç³»ç»Ÿæä¾›çš„é‚£ä¸ªæä¾›äº†ä¸€äº›å¾ˆå¸¸è§çš„æ“ä½œï¼Œæ¯”å¦‚è¯´ï¼Œé¢„è§ˆï¼Œåˆæ³•æ€§åˆ¤æ–­ï¼ŒåŒæ­¥å†…å®¹ï¼Œä»¥åŠè§†å›¾çš„åŠ¨ç”»ï¼Œè¿˜æœ‰è®¾ç½®å‘å¸ƒã€‚</p>
<h3 id="åˆ›å»º-Share-Extension"><a href="#åˆ›å»º-Share-Extension" class="headerlink" title="åˆ›å»º Share Extension"></a>åˆ›å»º Share Extension</h3><p>åˆ›å»ºçš„è¿‡ç¨‹ç±»ä¼¼äºä¹‹å‰å†™çš„ <a href="http://cepheussun.com/TodayExtension.html">é¢å‘ Extension å¼€å‘ ğŸŒ Today Extension</a></p>
<p>å”¯ä¸€ä¸åŒçš„æ˜¯ Today Extension æœ‰å”¯ä¸€çš„ä¸€ä¸ª å®¿ä¸» app è€Œ Share Extension åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œ å¯èƒ½æœ‰å¾ˆå¤šçš„å®¿ä¸» app æ‰€ä»¥åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªå®¿ä¸» appã€‚ ä¸€èˆ¬éƒ½æ˜¯é€‰æ‹©çš„ Safari ç„¶åï¼Œéšä¾¿æ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼Œä¸‹é¢çš„åˆ†äº«æŒ‰é’®å°±å¯ç”¨äº†ï¼Œç‚¹å‡»ä¹‹åï¼Œåœ¨åˆ†äº«åˆ—è¡¨é‡Œé¢å°±èƒ½å¤Ÿçœ‹åˆ°ä½ çš„ app å’¯ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™çœ‹åˆ°çš„ Share Extension çš„åç§°æ˜¯ä½  Share Extension çš„åç§°ï¼Œè¿™ä¸ªæ˜¯å¯ä»¥æ›´app åç§°ä¸ä¸€æ ·çš„ã€‚åªè¦æ”¹ Share Extension çš„ info.plist ä¸­çš„ Bundle display name ä¸ºä½ æƒ³è¦çš„åç§°å°±å¯ä»¥äº†ã€‚</p>
</blockquote>
<h3 id="è¿™ç¯‡æ–‡ç« è¦åšä»€ä¹ˆï¼Ÿ"><a href="#è¿™ç¯‡æ–‡ç« è¦åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="è¿™ç¯‡æ–‡ç« è¦åšä»€ä¹ˆï¼Ÿ"></a>è¿™ç¯‡æ–‡ç« è¦åšä»€ä¹ˆï¼Ÿ</h3><p>å†™åˆ°è¿™é‡Œ, åŸºæœ¬ä¸Šå·²ç»å®Œæˆäº†å‡†å¤‡å·¥ä½œäº†ã€‚å¯èƒ½è¿˜æœ‰ åˆ›å»º app groups ä¹‹ç±»çš„å·¥ä½œï¼Œè¿™å—å°†åœ¨ä¸‹é¢çš„å†…å®¹ä¸­ä»‹ç»ã€‚èŠ±äº†å‡ å¤©æ—¶é—´æ–­æ–­ç»­ç»­çš„ç ”ç©¶ <code>Share Extension</code>ï¼Œå¯¹æ¯”äº†ç³»ç»Ÿä¸­æœ¬æ¥å°±å­˜åœ¨çš„facebook twitter ä»¥åŠå›½å†…çš„å¾®åšä»€ä¹ˆçš„ã€‚æˆ‘å°†åœ¨æœ¬æ–‡ä¸­æ¨¡ä»¿ç€åšä¸€ä¸ªç±»ä¼¼çš„æ•ˆæœå‡ºæ¥ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-07-live.gif" alt=""></p>
<p>è¿™æ˜¯æœ€ç»ˆæ•ˆæœçš„ gif å›¾ã€‚è¿™åªæ˜¯ç¬¬ä¸€æ­¥ã€‚å¥½äº†ï¼Œæˆ‘ä»¬å¼€å§‹å§ã€‚</p>
<h4 id="åŸºæœ¬è®¾ç½®"><a href="#åŸºæœ¬è®¾ç½®" class="headerlink" title="åŸºæœ¬è®¾ç½®"></a>åŸºæœ¬è®¾ç½®</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">       <span class="keyword">super</span>.viewDidLoad()</div><div class="line">       placeholder = <span class="string">"åˆ†äº«åˆ°å¾®åš"</span>  <span class="comment">// å ä½æ–‡å­—</span></div><div class="line">       charactersRemaining = <span class="number">140</span>  <span class="comment">// å·¦ä¸‹è§’çš„æ–‡å­— å±•ç¤ºæ•°å­—ï¼Œå¯ä»¥ç”¨æ¥å€’æ•°ï¼Œè¿˜èƒ½è¾“å…¥å‡ ä¸ªå­—, å°äºç­‰äº0çš„æ—¶å€™å˜æˆçº¢è‰²</span></div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>å¦‚æ³¨é‡Šæ‰€è§ï¼Œè¿™é‡Œè®¾ç½®äº†placeholder å·²ç»å³ä¸‹è§’çš„æ•°å­—ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è¿‡æ»¤åˆ†äº«çš„å†…å®¹</span></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">isContentValid</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    charactersRemaining = <span class="number">140</span> - contentText.characters.<span class="built_in">count</span> <span class="keyword">as</span> <span class="type">NSNumber</span></div><div class="line">    <span class="keyword">return</span> contentText.characters.<span class="built_in">count</span> &gt; <span class="number">2</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ç”¨æ¥éªŒè¯ç”¨æˆ·è¾“å…¥çš„å†…å®¹æ˜¯å¦åˆæ³•ã€‚è¿™é‡Œæˆ‘åªæ˜¯ç®€å•çš„è®¾ç½®äº†å†…å®¹çš„é•¿åº¦ä¸èƒ½è¶…è¿‡140ï¼Œå¹¶ä¸”ä¸èƒ½å°äº2.</p>
<p>ç³»ç»Ÿåœ¨<code>SLComposeServiceViewController</code>ä¸­æä¾›äº†<code>open func didSelectPost()</code>ã€<code>open func didSelectCancel()</code> ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯ä¸Šé¢ä¸¤ä¸ªæŒ‰é’®çš„äº‹ä»¶ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé‡å†™ cancel çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨ super</p>
</blockquote>
<p>æ¥ä¸‹æ¥æ˜¯è®¾ç½®ä½ç½®ï¼Œåˆ†ç»„è¿™äº›å†…å®¹ã€‚è¿™å†™ä¹Ÿæ˜¯åœ¨ç³»ç»Ÿçš„api ä¸­èƒ½æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">configurationItems</span><span class="params">()</span></span> -&gt; [<span class="type">Any</span>]! &#123;</div><div class="line">       <span class="comment">// å®šä½</span></div><div class="line">       <span class="keyword">let</span> item1 = <span class="type">SLComposeSheetConfigurationItem</span>()</div><div class="line">       item1?.title = <span class="string">"ä½ç½®"</span></div><div class="line">       item1?.value = <span class="string">"æ— "</span></div><div class="line">       item1?.valuePending = <span class="literal">false</span></div><div class="line">       item1?.tapHandler = &#123;</div><div class="line">           item1?.valuePending = <span class="literal">true</span></div><div class="line">           <span class="comment">// åœ¨è¿™é‡Œåšå®šä½çš„æ“ä½œ</span></div><div class="line">           <span class="comment">// æ¨¡æ‹ŸèŠ±äº†3sæ—¶é—´</span></div><div class="line">           delay(<span class="number">3</span>, task: &#123;</div><div class="line">               item1?.value = <span class="string">""</span></div><div class="line">               item1?.valuePending = <span class="literal">false</span></div><div class="line">               item1?.value = <span class="string">"å››å·çœ æˆéƒ½å¸‚"</span></div><div class="line">           &#125;)</div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="comment">// è·³è½¬</span></div><div class="line">       <span class="keyword">let</span> item2 = <span class="type">SLComposeSheetConfigurationItem</span>()</div><div class="line">       item2?.title = <span class="string">"å¯è§ç»„"</span></div><div class="line">       item2?.value = <span class="string">""</span></div><div class="line">       </div><div class="line">       item2?.tapHandler = &#123;</div><div class="line">           <span class="keyword">let</span> list = <span class="type">ListController</span>()</div><div class="line">           list.callbackClosure = &#123;</div><div class="line">               item2?.value = $<span class="number">0</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">self</span>.pushConfigurationViewController(list)</div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="comment">// æµ‹è¯•é¢„è§ˆ</span></div><div class="line">       <span class="comment">/*</div><div class="line">       let item3 = SLComposeSheetConfigurationItem()</div><div class="line">       item3?.title = "é¢„è§ˆ"</div><div class="line">       item3?.tapHandler = &#123;</div><div class="line">           let pre = self.loadPreviewView()// è¿™ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯ç”¨æ¥è·å–å³è¾¹çš„å›¾ç‰‡çš„</div><div class="line">           pre?.frame = self.view.bounds</div><div class="line">           self.view.addSubview(pre!)</div><div class="line">       &#125;</div><div class="line">       */</span></div><div class="line">       <span class="keyword">return</span> [item1!, item2!]</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•è¿”å›äº†ä¸€ä¸ªæ•°ç»„ï¼Œå°±æ˜¯å¯¹åº”çš„æŒ‰é’®ç­‰å†…å®¹ã€‚æ¯ä¸ªæŒ‰é’®å…¶å®ä¹Ÿå¾ˆç®€å•ã€‚åªæœ‰ <code>title</code>ï¼Œ<code>value</code>ï¼Œ <code>tapHandler</code>ï¼Œ <code>valuePending</code> å››ä¸ªå±æ€§ã€‚</p>
<ul>
<li>title: å·¦è¾¹çš„æ–‡å­—</li>
<li>value: å³è¾¹çš„æ–‡å­—</li>
<li>tapHandlerï¼š å¤„ç†è¿™ä¸ª item äº‹ä»¶çš„ closure</li>
<li>valuePendingï¼š å·¦è¾¹è½¬èŠèŠ±çš„indicatorï¼Œæ˜¯ä¸€ä¸ª bool ç±»å‹çš„å±æ€§ã€‚</li>
</ul>
<p>åœ¨ä¸Šé¢çš„ä»£ç é‡Œï¼Œæˆ‘ç”¨ <code>self.pushConfigurationViewController(list)</code> è¿™è¡Œä»£ç push åˆ°äº†å¦å¤–çš„ç•Œé¢ï¼Œç”¨æ¥è®©ç”¨æˆ·é€‰æ‹©ä»–ä»¬è¦æŠŠæ¶ˆæ¯åˆ†äº«åˆ°çš„å…·ä½“åˆ†ç»„ã€‚è¿™ä¸ªæ“ä½œæ˜¯åœ¨ Facebook çš„ share extension ä¸­çœ‹è§çš„ã€‚åœ¨å®é™…ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·åšå…¶ä»–å¾ˆå¤šçš„äº‹æƒ…ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¨å‡ºæ¥çš„ Controller éœ€è¦è®¾ç½®èƒŒæ™¯ä¸ºclearï¼Œcell ä¹Ÿè¦è®¾ç½®èƒŒæ™¯ä¸º clear è¿™æ˜¯ä¸ºäº†ä¿è¯ç•Œé¢è·Ÿç³»ç»Ÿç»Ÿä¸€ï¼ˆæ¨¡ç³Šæ•ˆæœï¼‰ã€‚</p>
</blockquote>
<p>ç„¶åå°±æ˜¯è¦æŠŠç”¨æˆ·é€‰æ‹©çš„å†…å®¹åˆ†äº«å‡ºå»äº†ã€‚</p>
<h4 id="é€šè¿‡-Share-Extension-åˆ†äº«å†…å®¹"><a href="#é€šè¿‡-Share-Extension-åˆ†äº«å†…å®¹" class="headerlink" title="é€šè¿‡ Share Extension åˆ†äº«å†…å®¹"></a>é€šè¿‡ Share Extension åˆ†äº«å†…å®¹</h4><p>è¦å°†å†…å®¹åˆ†äº«å‡ºå»ï¼Œéœ€è¦è§£å†³å‡ ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li>ç”¨æˆ·ä¿¡æ¯</li>
<li>è·å–åˆ†äº«çš„å†…å®¹</li>
</ul>
<p>å› ä¸º App Extension å’Œä¸» App æ˜¯ä¸¤ä¸ªä¸åŒçš„ Targetï¼Œ è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨è¿™ä¸ªè·å–åˆ°ä¸» app ä¸­ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ã€‚è‡³å°‘éœ€è¦çŸ¥é“æˆ‘ä»¬è¦æŠŠå†…å®¹åˆ†äº«åˆ°å“ªä¸ªç”¨æˆ·çš„æ•°æ®æµä¸­å§ã€‚</p>
<p>è¿™ä¸ªå…¶å®ä¹Ÿæ˜¯å¾ˆç®€å•çš„äº‹æƒ…ã€‚åœ¨ Today ä¸­æˆ‘ä»¬å·²ç»çŸ¥é“äº† App Groups è¿™ä¸ªä¸œè¥¿ã€‚ä¹ŸçŸ¥é“äº†å¦‚ä½•å…±äº«éƒ¨åˆ†ä»£ç ã€‚</p>
<p>æ‰€ä»¥åœ¨ Share Extension ä¸­</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">fetchUserInfomation</span><span class="params">()</span></span> -&gt; <span class="type">String</span>? &#123;</div><div class="line">    <span class="keyword">let</span> userdefault = <span class="type">UserDefaults</span>.<span class="keyword">init</span>(suiteName: <span class="string">"group.sunny.com"</span>)</div><div class="line">    <span class="keyword">let</span> info = userdefault?.value(forKey: <span class="string">"userInformation"</span>) <span class="keyword">as</span>? [<span class="type">String</span>: <span class="type">String</span>]</div><div class="line">    <span class="keyword">return</span> info?[<span class="string">"token"</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ä¸»app ä¸­</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> userdefault = <span class="type">UserDefaults</span>(suiteName: <span class="string">"group.sunny.com"</span>)</div><div class="line">userdefault?.<span class="keyword">set</span>([<span class="string">"token"</span>: <span class="string">"this the user token"</span>], forKey: <span class="string">"userInformation"</span>)</div><div class="line">userdefault?.synchronize()</div></pre></td></tr></table></figure>
<p>å°±å®ç°äº†æ•°æ®ä¹‹é—´çš„äº¤æ¢ã€‚åˆ°è¿™å„¿ï¼Œå¯èƒ½ä¼šæƒ³åˆ°å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚å¦‚æœæ²¡æœ‰ç™»å½•çš„è¯éœ€è¦è·³è½¬åˆ°ä¸» app ä¸­è¿›è¡Œç™»å½•æ“ä½œã€‚è¿™é‡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜é€šè¿‡ openurl å°±å¯ä»¥ã€‚</p>
<ol>
<li>è®¾ç½®ä¸»app çš„url type</li>
<li>è·³è½¬</li>
</ol>
<p>æ‰€ä»¥æˆ‘åœ¨ <code>viewDidload</code> æ–¹æ³•ä¸­æ·»åŠ äº†ä»¥ä¸‹ä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> fetchUserInfomation() == <span class="literal">nil</span> &#123;</div><div class="line">            </div><div class="line">	<span class="keyword">let</span> alert = <span class="type">UIAlertController</span>(title: <span class="string">"è¿˜æ²¡æœ‰ç™»å½•"</span>, message: <span class="literal">nil</span>, preferredStyle: .alert)</div><div class="line">	alert.addAction(<span class="type">UIAlertAction</span>(title: <span class="string">"å–æ¶ˆ"</span>, style: .cancel) &#123;<span class="number">_</span> <span class="keyword">in</span></div><div class="line">		<span class="keyword">self</span>.cancel()</div><div class="line">	&#125;)</div><div class="line">	alert.addAction(<span class="type">UIAlertAction</span>(title: <span class="string">"å»ç™»å½•"</span>, style: .<span class="keyword">default</span>) &#123;<span class="number">_</span> <span class="keyword">in</span></div><div class="line">	<span class="keyword">self</span>.extensionContext?.open(<span class="type">NSURL</span>(string: <span class="string">"sunny://action=login"</span>)! <span class="keyword">as</span> <span class="type">URL</span>, completionHandler: &#123; (success) <span class="keyword">in</span></div><div class="line">		<span class="keyword">self</span>.cancel()</div><div class="line">		<span class="built_in">print</span>(success)</div><div class="line">	&#125;)</div><div class="line">&#125;)</div><div class="line">	present(alert, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆ¤æ–­ç™»å½•çŠ¶æ€ï¼Œç„¶åå¼¹çª—ã€‚å–æ¶ˆæˆ–è€…å»ç™»å½•ã€‚å¦‚æœé€‰æ‹©å»ç™»å½•çš„è¯ï¼Œå°±é€šè¿‡ openUrl å»æ‰“å¼€ä¸» appã€‚</p>
<p>å¾ˆå®Œç¾å§ï¼<strong>but it doesnâ€™t work!!!</strong>ï¼Œ æˆ‘åœ¨ stackoverflow ä¸Šæ‰¾åˆ°äº†äº›èµ„æ–™ã€‚</p>
<ul>
<li><a href="https://stackoverflow.com/questions/24895093/openurl-doesnt-work-in-share-extension">openURL doesnâ€™t work in Share extension</a></li>
<li><a href="https://stackoverflow.com/questions/24297273/openurl-not-work-in-action-extension">openURL not work in Action Extension</a></li>
</ul>
<blockquote>
<p>è‹¹æœçˆ¸çˆ¸åªå…è®¸ Today Extension é€šè¿‡ extensionContext çš„ openUrl æ‰“å¼€ä¸»app</p>
</blockquote>
<p>ä½†æ˜¯è¿™ä¸ªéœ€æ±‚æ€»æ˜¯éœ€è¦å®ç°çš„ã€‚å…¶å®è¿˜æ˜¯æœ‰è§£å†³æ–¹æ³•ã€‚</p>
<h5 id="æ–¹æ³•ä¸€-åœ¨-Extension-ä¸­å®ç°ç™»å½•æ“ä½œ"><a href="#æ–¹æ³•ä¸€-åœ¨-Extension-ä¸­å®ç°ç™»å½•æ“ä½œ" class="headerlink" title="æ–¹æ³•ä¸€:  åœ¨ Extension ä¸­å®ç°ç™»å½•æ“ä½œ"></a>æ–¹æ³•ä¸€:  åœ¨ Extension ä¸­å®ç°ç™»å½•æ“ä½œ</h5><p>è¿™ä¸ªç¡®å®æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚ä¹Ÿæ˜¯å¼¹å‡ºä¸€ä¸ª alertï¼Œç„¶åè¾“å…¥ç”¨æˆ·åï¼Œå¯†ç ï¼Œç™»å½•ã€‚å®Œæˆæ‰€æœ‰æ“ä½œã€‚æˆ–è€…æ˜¯å…¶ä»–ä»€ä¹ˆæ–¹æ¡ˆï¼Œéƒ½å¯ä»¥ã€‚è¿™ä¸ªå°±ä¸å†è¯¦ç»†æè¿°äº†ã€‚Share Extension æ¥å®ç°ç™»å½•è¡Œä¸ºï¼Œç„¶å ä¸» app ä¹Ÿèƒ½å¤Ÿå…±äº«ç­‰äº†çŠ¶æ€ã€‚è¿™ä»¿ä½›ä¹Ÿæ˜¯è§£å†³äº†è¿™ç§é—®é¢˜ã€‚</p>
<p>å½“ç„¶ï¼Œå¼ºè¿«ç—‡ç¬”è€…ï¼Œè¿˜æ˜¯æƒ³é€šè¿‡æ‰“å¼€ä¸» app çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h5 id="æ–¹æ³•äºŒ-å¦ç±»çš„-openUrl"><a href="#æ–¹æ³•äºŒ-å¦ç±»çš„-openUrl" class="headerlink" title="æ–¹æ³•äºŒ: å¦ç±»çš„ openUrl"></a>æ–¹æ³•äºŒ: å¦ç±»çš„ openUrl</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// For skip compile error.</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">openURL</span><span class="params">(<span class="number">_</span> url: URL)</span></span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">openContainerApp</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> responder: <span class="type">UIResponder</span>? = <span class="keyword">self</span> <span class="keyword">as</span> <span class="type">UIResponder</span></div><div class="line">    <span class="keyword">let</span> selector = #selector(openURL(<span class="number">_</span>:))</div><div class="line">    <span class="keyword">while</span> responder != <span class="literal">nil</span> &#123;</div><div class="line">        <span class="keyword">if</span> responder!.responds(to: selector) &amp;&amp; responder != <span class="keyword">self</span> &#123;</div><div class="line">            responder!.perform(selector, with: <span class="type">URL</span>(string: <span class="string">"sunny://action=login"</span>)!)</div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        responder = responder?.next</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œä¸Šé¢çš„ä¸¤ä¸ªé“¾æ¥è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ–¹æ³•ï¼Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚</p>
<p>è§£å†³äº†æœ€å¼€å§‹çš„ç”¨æˆ·ä¿¡æ¯çš„é—®é¢˜ã€‚æ¥ä¸‹æ¥å°±æ˜¯è¦è·å–åˆ†äº«çš„å†…å®¹è¿™ä¸ªé—®é¢˜äº†ã€‚åœ¨ShareExtension ä¸­ï¼Œç›¸ä¿¡å·²ç»çœ‹è§äº†ã€‚éœ€è¦ä¸¤ä¸ªä¸œè¥¿ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç”¨æˆ·å…³äºè¿™ä¸ªå†…å®¹çš„è¯„è®ºï¼Œä»¥åŠè¿™ä¸ªå†…å®¹æœ¬èº«ï¼ˆurlã€ç…§ç‰‡ç­‰ï¼‰ã€‚å…³äºç”¨æˆ·å¯¹å†…å®¹çš„è¯„è®ºè¿™ç‚¹å…¶å®å¾ˆç®€å•ã€‚</p>
<h5 id="ç”¨æˆ·è¯„è®º"><a href="#ç”¨æˆ·è¯„è®º" class="headerlink" title="ç”¨æˆ·è¯„è®º"></a>ç”¨æˆ·è¯„è®º</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Convenience. This returns the current text from the textView.</span></div><div class="line">open <span class="keyword">var</span> contentText: <span class="type">String</span>! &#123; <span class="keyword">get</span> &#125;</div></pre></td></tr></table></figure>
<p>ç³»ç»Ÿæä¾›çš„è¿™ä¸ª api å°±èƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h5 id="é™„ä»¶å†…å®¹"><a href="#é™„ä»¶å†…å®¹" class="headerlink" title="é™„ä»¶å†…å®¹"></a>é™„ä»¶å†…å®¹</h5><p>æš‚ä¸”å«åšé™„ä»¶å†…å®¹å§ï¼æˆ‘ä¹Ÿä¸çŸ¥é“åº”è¯¥æ€ä¹ˆå«ã€‚è¿™ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬è¿˜æ˜¯çœ‹çœ‹ <code>extensionContext</code> è¿™ä¸ªä¸œè¥¿å§ï¼</p>
<p><code>NSExtensionContext</code> è¿™ä¸ªç±»ä¸€å…±æš´éœ²äº†å››ä¸ªapiå‡ºæ¥ã€‚æˆ‘ä»¬çœ‹ç¬¬ä¸€ä¸ª</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// The list of input NSExtensionItems associated with the context. If the context has no input items, this array will be empty.</span></div><div class="line">open <span class="keyword">var</span> inputItems: [<span class="type">Any</span>] &#123; <span class="keyword">get</span> &#125;</div></pre></td></tr></table></figure>
<p>çœ‹æ ·å­å°±æ˜¯è¿™ä¸ªäº†ã€‚</p>
<blockquote>
<p>çœ‹æ³¨é‡Šå†…å®¹ï¼Œçªç„¶æ„Ÿè§‰ï¼Œapple çš„api ä¹Ÿæœ‰è®¾è®¡çš„ä¸æ˜¯å¾ˆå¥½çš„åœ°æ–¹ï¼Œæ—¢ç„¶æ³¨é‡Šéƒ½æ˜ç¡®è¯´äº† NSExtensionItems æ•°ç»„åº”è¯¥ä¸æ˜¯ Any çš„å§ğŸ˜‚</p>
</blockquote>
<p>æ—¢ç„¶è¿™æ ·, æˆ‘ä»¬å†çœ‹çœ‹ <code>NSExtensionItem</code> è¿™ä¸ªç±»å§ï¼</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// (optional) title for the item</span></div><div class="line"><span class="meta">@NSCopying</span> open <span class="keyword">var</span> attributedTitle: <span class="type">NSAttributedString</span>?</div><div class="line"><span class="comment">// (optional) content text</span></div><div class="line"><span class="meta">@NSCopying</span> open <span class="keyword">var</span> attributedContentText: <span class="type">NSAttributedString</span>?</div><div class="line"><span class="comment">// (optional) Contains images, videos, URLs, etc. This is not meant to be an array of alternate data formats/types, but instead a collection to include in a social media post for example. These items are always typed NSItemProvider.</span></div><div class="line">open <span class="keyword">var</span> attachments: [<span class="type">Any</span>]?</div><div class="line"><span class="comment">// (optional) dictionary of key-value data. The key/value pairs accepted by the service are expected to be specified in the extension's Info.plist. The values of NSExtensionItem's properties will be reflected into the dictionary.</span></div><div class="line">open <span class="keyword">var</span> userInfo: [<span class="type">AnyHashable</span> : <span class="type">Any</span>]?</div></pre></td></tr></table></figure>
<p>æ³¨é‡Šå¤ªå¤æ‚äº†ï¼Œæ•´ç†æˆä¸€ä¸ªè¡¨æ ¼å°±æ˜¯è¿™æ ·çš„:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Properties</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">attributedTitle</td>
<td style="text-align:center">æ ‡é¢˜ optional</td>
</tr>
<tr>
<td style="text-align:center">attributedContentText</td>
<td style="text-align:center">å†…å®¹ optional</td>
</tr>
<tr>
<td style="text-align:center">attachments</td>
<td style="text-align:center">æ‰€æœ‰çš„é™„ä»¶<code>NSItemProvider</code>ç»„æˆä¸€ä¸ªæ•°ç»„ optional</td>
</tr>
<tr>
<td style="text-align:center">userInfo</td>
<td style="text-align:center">ä¸€ä¸ªkeyï¼valueç»“æ„çš„æ•°æ®ã€‚NSExtensionItemä¸­çš„å±æ€§éƒ½ä¼šåœ¨è¿™ä¸ªå±æ€§ä¸­ä¸€ä¸€æ˜ å°„ã€‚æ³¨é‡Šä¸­è®²åˆ°çš„åœ¨ info.plist ä¸­è¦è®¾ç½®çš„éƒ¨åˆ†ä¼šåœ¨åé¢æåˆ°</td>
</tr>
</tbody>
</table>
<p> ä¸‹é¢çš„è¡¨æ ¼å°±æ˜¯ <code>userInfo</code> ä¸­çš„ key :</p>
<table>
<thead>
<tr>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">NSExtensionItemAttributedTitleKey</td>
<td style="text-align:center">æ ‡é¢˜ çš„é”®å</td>
</tr>
<tr>
<td style="text-align:center">NSExtensionItemAttributedContentTextKey</td>
<td style="text-align:center">å†…å®¹ çš„é”®å</td>
</tr>
<tr>
<td style="text-align:center">NSExtensionItemAttachmentsKey</td>
<td style="text-align:center">é™„ä»¶ çš„é”®å</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢åˆæåˆ°äº† <code>NSItemProvider</code> è¿™ä¸ªä¸œè¥¿ã€‚è¿™ç›¸å¿…é¡»å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„é™„ä»¶äº†å§ï¼</p>
<table>
<thead>
<tr>
<th>Api</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>initWithItem:typeIdentifierï¼š</td>
<td>åˆå§‹åŒ–æ–¹æ³•ï¼Œitemä¸ºé™„ä»¶çš„æ•°æ®ï¼ŒtypeIdentifieræ˜¯é™„ä»¶å¯¹åº”çš„ç±»å‹æ ‡è¯†,å¯¹åº”UTIçš„æè¿°ã€‚</td>
</tr>
<tr>
<td>initWithContentsOfURL:</td>
<td>æ ¹æ®åˆ¶å®šçš„æ–‡ä»¶è·¯å¾„æ¥åˆå§‹åŒ–ã€‚</td>
</tr>
<tr>
<td>registerItemForTypeIdentifier:loadHandler:</td>
<td>ä¸ºä¸€ç§èµ„æºç±»å‹è‡ªå®šä¹‰åŠ è½½è¿‡ç¨‹ã€‚è¿™ä¸ªæ–¹æ³•ä¸»è¦é’ˆå¯¹è‡ªå®šä¹‰èµ„æºä½¿ç”¨ï¼Œä¾‹å¦‚è‡ªå·±å®šä¹‰çš„ç±»æˆ–è€…æ–‡ä»¶æ ¼å¼ç­‰ã€‚å½“è°ƒç”¨loadItemForTypeIdentifier:options:completionHandler:æ–¹æ³•æ—¶å°±ä¼šè§¦å‘å®šä¹‰çš„åŠ è½½è¿‡ç¨‹ã€‚</td>
</tr>
<tr>
<td>hasItemConformingToTypeIdentifier:</td>
<td>ç”¨äºåˆ¤æ–­æ˜¯å¦æœ‰typeIdentifier(UTI)æ‰€æŒ‡å®šçš„èµ„æºå­˜åœ¨ã€‚å­˜åœ¨åˆ™è¿”å›YESï¼Œå¦åˆ™è¿”å›NOã€‚è¯¥æ–¹æ³•ç»“åˆloadItemForTypeIdentifier:options:completionHandler:ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td>loadItemForTypeIdentifier:options:completionHandler:</td>
<td>åŠ è½½typeIdentifieræŒ‡å®šçš„èµ„æºã€‚åŠ è½½æ˜¯ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹ï¼ŒåŠ è½½å®Œæˆåä¼šè§¦å‘completionHandlerã€‚</td>
</tr>
<tr>
<td>loadPreviewImageWithOptions:completionHandler:</td>
<td>åŠ è½½èµ„æºçš„é¢„è§ˆå›¾ç‰‡ã€‚</td>
</tr>
</tbody>
</table>
<p>è¿™æ—¶å€™çœ‹çœ‹æ•´ä½“çš„ç»“æ„ï¼š(<a href="http://www.jianshu.com/p/863ce6729455">è¿™ä¸ªå›¾æ˜¯åœ¨çœ‹åˆ°çš„</a>)</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-09-5D4D49E7-5087-4D01-B78A-D3BCF979E979.png" alt=""></p>
<p>åˆ°è¿™é‡Œï¼Œåº”è¯¥å·²ç»çŸ¥é“äº†åº”è¯¥æ€ä¹ˆåšäº†å§ï¼</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç‚¹å‡»å‘è¡¨çš„äº‹ä»¶</span></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didSelectPost</span><span class="params">()</span></span> &#123;</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.extensionContext?.inputItems.forEach(&#123; (item) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> ext = item <span class="keyword">as</span>! <span class="type">NSExtensionItem</span></div><div class="line">        ext.attachments?.forEach(&#123;</div><div class="line">            <span class="keyword">let</span> atta = $<span class="number">0</span> <span class="keyword">as</span>! <span class="type">NSItemProvider</span></div><div class="line">            <span class="built_in">print</span>(atta)</div><div class="line">            <span class="comment">// åˆ†äº«çš„æ˜¯ç½‘é¡µ</span></div><div class="line">            <span class="keyword">if</span> atta.hasItemConformingToTypeIdentifier(<span class="string">"public.url"</span>) &#123;</div><div class="line">                atta.loadItem(forTypeIdentifier: <span class="string">"public.url"</span>) &#123; (item, error) <span class="keyword">in</span></div><div class="line">                    <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">                    <span class="built_in">print</span>(item!)</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// åˆ†äº«çš„æ˜¯å›¾ç‰‡</span></div><div class="line">            <span class="keyword">if</span> atta.hasItemConformingToTypeIdentifier(<span class="string">"public.jpeg"</span>) &#123;</div><div class="line">                atta.loadItem(forTypeIdentifier: <span class="string">"public.jpeg"</span>) &#123; (item, error) <span class="keyword">in</span></div><div class="line">                    <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">                    <span class="built_in">print</span>(item!)</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        <span class="keyword">self</span>.extensionContext!.completeRequest(returningItems: [], completionHandler: <span class="literal">nil</span>)</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»£ç ä¸­åˆ†åˆ«æ˜¯åˆ†äº«ç½‘é¡µå’Œå›¾ç‰‡ä¸¤ä¸ªä¸œè¥¿ã€‚è¿™ä¸€æ­¥è§£å†³äº†æ‰¾åˆ°åˆ†äº«çš„å†…å®¹çš„ä»£ç ã€‚</p>
<p><strong>å…·ä½“åˆ†äº«çš„è¡Œä¸ºå¯ä»¥æœ‰ä¸¤ä¸ªåŠæ³•æ¥è§£å†³</strong></p>
<ul>
<li>å°†éœ€è¦åˆ†äº«çš„å†…å®¹åŠŸè¿‡ apps group ä¿å­˜ï¼Œç„¶ååœ¨æ‰“å¼€ä¸» app çš„æ—¶å€™ï¼Œåœ¨ä¸» app ä¸­å–å‡ºç„¶åå‘é€ç»™severã€‚</li>
<li>ç›´æ¥åœ¨ Share Extension ä¸­åˆ†äº«ã€‚</li>
</ul>
<p>è¿™ä¸ªè¿‡ç¨‹å°±ä¸å†å™è¿°äº†ã€‚</p>
<h4 id="info-plist"><a href="#info-plist" class="headerlink" title="info.plist"></a>info.plist</h4><p>æ—¢ç„¶è¯´åˆ°äº† info.plist ä¸­çš„è®¾ç½®ï¼Œå°±å†çœ‹çœ‹è¿™éƒ¨åˆ†æ˜¯è¯´çš„ä»€ä¹ˆå§ï¼éƒ½æ˜¯ä¸€äº›å¾ˆå›ºå®šçš„å†…å®¹ï¼Œæˆ‘éšä¾¿æŒ‘ä¸¤ä¸ªè¯´è¯´å§ï¼</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>NSExtensionActivationSupportsAttachmentsWithMaxCount</td>
<td>é™„ä»¶æœ€å¤§ä¸ªæ•°</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsAttachmentsWithMinCount</td>
<td>é™„ä»¶æœ€å°ä¸ªæ•°</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsFileWithMaxCount</td>
<td>é™„ä»¶ç§ç±»é™åˆ¶</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsMovieWithMaxCount</td>
<td>è§†é¢‘ä¸ªæ•°é™åˆ¶</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsImageWithMaxCount</td>
<td>å›¾ç‰‡ä¸ªæ•°é™åˆ¶</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsText</td>
<td>æ˜¯å¦æ”¯æŒæ–‡æœ¬ç±»å‹</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsWebURLWithMaxCount</td>
<td>web é“¾æ¥æœ€å¤šé™åˆ¶</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsWebPageWithMaxCount</td>
<td>web é¡µé¢æœ€å¤šé™åˆ¶</td>
</tr>
</tbody>
</table>
<p>å¦‚æœè¦è®¾ç½®ä½ çš„ extension åªæ”¯æŒå›¾ç‰‡ï¼Œurl ä»€ä¹ˆçš„ã€‚åªéœ€è¦æŠŠä¸ªæ•°é™åˆ¶å†™æˆ 0ï¼</p>
<p>ä½†æ˜¯è®¾ç½®çš„æ—¶å€™éœ€è¦æ³¨æ„æ˜¯å°†NSExtensionActivationRule æ”¹æˆ Dictionary ç±»å‹å¹¶æ·»åŠ ï¼š</p>
<ul>
<li>NSExtensionActivationSupportsAttachmentsWithMaxCount</li>
<li>NSExtensionActivationSupportsAttachmentsWithMinCount</li>
<li>NSExtensionActivationSupportsImageWithMaxCount</li>
<li>NSExtensionActivationSupportsMovieWithMaxCount</li>
<li>NSExtensionActivationSupportsWebPageWithMaxCount</li>
<li>NSExtensionActivationSupportsWebURLWithMaxCount</li>
</ul>
<p>è¿™å°±åŸºæœ¬ä¸Šå®Œæˆäº†ï¼Œæˆ‘ä»¬è¦åœ¨ ç³»ç»Ÿæˆ–è€… å¤–éƒ¨ app ä¸­å°†å†…å®¹åˆ†äº«åˆ°æˆ‘ä»¬è‡ªå·±çš„ app ä¸­ã€‚è¿™å¥½åƒè¿˜æ˜¯æœ‰å¾ˆå¤§çš„é™åˆ¶ã€‚æ¯•ç«Ÿå¦‚æœæˆ‘ä»¬çš„äº§å“ä¸æ˜¯åƒå¾®åšqqè¿™æ ·çš„ç¤¾äº¤app çš„è¯ï¼Œè¿™ä¸ªä¸œè¥¿å°±æ²¡ä»€ä¹ˆä½œç”¨äº†ã€‚</p>
<p><strong>å¦å¤–æ³¨æ„è¿™ä¸ªè­¦å‘Š</strong></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-09-133823.jpg" alt=""></p>
<h3 id="åœ¨è‡ªå·±çš„app-ä¸­è°ƒèµ·-Share-Extension"><a href="#åœ¨è‡ªå·±çš„app-ä¸­è°ƒèµ·-Share-Extension" class="headerlink" title="åœ¨è‡ªå·±çš„app ä¸­è°ƒèµ· Share Extension"></a>åœ¨è‡ªå·±çš„app ä¸­è°ƒèµ· Share Extension</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> activity = <span class="type">UIActivityViewController</span>(activityItems: [<span class="string">"ç™¾åº¦"</span>, <span class="type">URL</span>(string: <span class="string">"http://www.baidu.com"</span>)!], applicationActivities: <span class="literal">nil</span>)</div><div class="line"><span class="comment">// ä¸åˆ†äº«åˆ° airDrop å’Œ ç²˜è´´æ¿</span></div><div class="line">activity.excludedActivityTypes = [.airDrop, .copyToPasteboard]</div><div class="line">present(activity, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div></pre></td></tr></table></figure>
<p>å½“ç„¶è¿˜æœ‰ <code>UIActivityViewControllerCompletionHandler</code> è¿™ä¸ªä¸œè¥¿ï¼Œæ¥å›è°ƒåˆ†äº«çš„ç»“æœã€‚</p>
<p><strong>å¦å¤–ä¸€ç§æ–¹æ³•</strong>å¯ä»¥ç›´æ¥è°ƒèµ·æŸä¸ªç³»ç»Ÿçš„åˆ†äº«ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ”¯æŒ å¾®åš</span></div><div class="line">     </div><div class="line">     <span class="keyword">if</span> !<span class="type">SLComposeViewController</span>.isAvailable(forServiceType: <span class="type">SLServiceTypeSinaWeibo</span>) &#123;</div><div class="line">         <span class="comment">// åº”è¯¥æ˜¯æ²¡æœ‰ç™»å½•çš„åŸå› , æ‰€ä»¥ä¸€ç›´ä¸ä¼šè¿”å›</span></div><div class="line">         <span class="built_in">print</span>(<span class="string">"ä¸å¯ç”¨"</span>)</div><div class="line">         <span class="keyword">return</span></div><div class="line">     &#125;</div><div class="line">     </div><div class="line">     <span class="keyword">let</span> composeVC = <span class="type">SLComposeViewController</span>(forServiceType: <span class="type">SLServiceTypeSinaWeibo</span>)</div><div class="line">     <span class="comment">//        // æ·»åŠ è¦åˆ†äº«çš„å›¾ç‰‡</span></div><div class="line">     <span class="comment">//        composeVC?.add(UIImage(named: "Nameless"))</span></div><div class="line">     <span class="comment">//        // æ·»åŠ è¦åˆ†äº«çš„æ–‡å­—</span></div><div class="line">     <span class="comment">//        composeVC?.setInitialText("åˆ†äº«åˆ°XXX")</span></div><div class="line">     <span class="comment">//        // æ·»åŠ è¦åˆ†äº«çš„url</span></div><div class="line">     <span class="comment">//        composeVC?.add(URL(string: "http://www.baidu.com"))</span></div><div class="line">     <span class="comment">//        // å¼¹å‡ºåˆ†äº«æ§åˆ¶å™¨</span></div><div class="line">     <span class="keyword">self</span>.present(composeVC!, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">     <span class="comment">//        // ç›‘å¬ç”¨æˆ·ç‚¹å‡»äº‹ä»¶</span></div><div class="line">     composeVC?.completionHandler = &#123;</div><div class="line">         <span class="keyword">if</span> $<span class="number">0</span> == .done &#123;</div><div class="line">             <span class="type">NSLog</span>(<span class="string">"ç‚¹å‡»äº†å‘é€"</span>);</div><div class="line">         &#125; <span class="keyword">else</span> <span class="keyword">if</span> $<span class="number">0</span> == .cancelled &#123;</div><div class="line">             <span class="type">NSLog</span>(<span class="string">"ç‚¹å‡»äº†å–æ¶ˆ"</span>);</div><div class="line">         &#125;</div><div class="line">     &#125;</div></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå°±æ˜¯ï¼Œè¿™æ ·çš„åˆ†äº«åªèƒ½å¯¹ç³»ç»Ÿçš„åˆ†äº«ï¼Œå¾®ä¿¡ä»€ä¹ˆçš„å°±ä¸èƒ½è¿™ä¹ˆåšäº†ã€‚</p>
<h3 id="æœ€åçš„è¯"><a href="#æœ€åçš„è¯" class="headerlink" title="æœ€åçš„è¯"></a>æœ€åçš„è¯</h3><p>Share Extension å†™åˆ°è¿™é‡Œå°±å·®ä¸å¤šäº†ã€‚åˆæ­¥çš„å…¥é—¨æ­¥éª¤ä¹Ÿå·²ç»å®Œæˆäº†ã€‚æœ€åï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œå¾®ä¿¡çš„ Share Extension åšçš„äº‹æƒ…ï¼Œæ„Ÿè§‰ç”¨ä»–è¿˜èƒ½åšå¾ˆå¤šçš„äº‹æƒ…ã€‚è¿™ä¸ªä¹Ÿéœ€è¦åœ¨å¼€å‘ä¸­æ ¹æ®å®é™…éœ€æ±‚å»æ‹“å±•äº†ï¼Œå¦å¤–è¿˜æœ‰è‡ªå®šä¹‰ UI ç­‰ï¼Œä¹Ÿæ˜¯å¾ˆç®€å•çš„äº‹æƒ…ã€‚åªæ˜¯ç”¨è‡ªå·± UIViewController å°±å¥½äº†ã€‚è¿™ä¸ªå°±ä¸å†è¯¦ç»†çš„è¯´äº†ã€‚åˆ°æ­¤ï¼Œæˆ‘èƒ½æƒ³åˆ°çš„åŠŸèƒ½ï¼Œå°±åŸºæœ¬ä¸Šå®Œæˆäº†ã€‚å¦‚æœæœ‰æ›´å¤šéœ€æ±‚ä¹Ÿå¯ä»¥è·Ÿæˆ‘è®¨è®ºã€‚</p>
<p><a href="https://github.com/CepheusSun/ShareExtension"><strong>demoåœ°å€</strong></a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Share Extension ä½¿ç”¨æˆ·åœ¨ä½¿ç”¨å…¶ä»–çš„app çš„æ—¶å€™, æ›´åŠ æ–¹ä¾¿çš„å°†å…¶å†…å®¹åˆ†äº«å‡ºå»ï¼Œåƒæ˜¯ç¤¾ä¼šåŒ–åˆ†äº«è¿˜æœ‰ä¸Šä¼ æœåŠ¡å™¨ã€‚æ¯”å¦‚è¯´ï¼Œ åœ¨ä¸€ä¸ª app ä¸­æœ‰ä¸ªåˆ†äº«æŒ‰é’®ï¼Œ ç”¨æˆ·å¯ä»¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ª Share Extension æ¥å‘è¡¨è¯„è®ºæˆ–è€…å†…å®¹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="App Extension" scheme="http://www.CepheusSun.com/categories/App-Extension/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="App Extension" scheme="http://www.CepheusSun.com/tags/App-Extension/"/>
    
  </entry>
  
  <entry>
    <title>é¢å‘ Extension å¼€å‘ ğŸŒ Today Extension</title>
    <link href="http://www.CepheusSun.com/TodayExtension.html"/>
    <id>http://www.CepheusSun.com/TodayExtension.html</id>
    <published>2017-06-30T10:41:38.000Z</published>
    <updated>2017-07-09T13:42:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>app extension è®©æˆ‘ä»¬åœ¨ç”¨æˆ·æ­£åœ¨ä½¿ç”¨å…¶ä»– app çš„æ—¶å€™, æ‹“å±•æˆ‘ä»¬ app çš„åŠŸèƒ½ã€‚</p>
<p>Today Extension ä¹Ÿå«åš widgetã€‚ å®ƒèƒ½å¤Ÿè®©ä¸€äº›é‡è¦çš„æ¶ˆæ¯æ›´å¿«é€Ÿçš„åˆ°è¾¾ä½ çš„ç”¨æˆ·ã€‚æ¯”å¦‚è¯´, ç”¨æˆ·å¯ä»¥é€šè¿‡å®ƒæŸ¥çœ‹å¤©æ°”ï¼Œæˆ–è€…è‚¡ç¥¨ä»·æ ¼, æŸ¥çœ‹æ—¥ç¨‹è¡¨ç­‰ç­‰ã€‚è‹¹æœåœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¯´åˆ°ï¼Œ ä¸€ä¸ª widget åº”è¯¥æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ã€‚</p>
<ul>
<li>ç¡®ä¿å†…å®¹æ˜¯æœ€æ–°çš„</li>
<li>å“åº”çš„ç”¨æˆ·äº‹ä»¶</li>
<li>æ€§èƒ½å¥½(åœ¨iOSä¸Šå ç”¨å¤§é‡å†…å­˜ï¼Œç³»ç»Ÿå¯èƒ½ä¼škillæ‰è¿™ä¸ªwidget)</li>
</ul>
<a id="more"></a>
<h3 id="åˆ›å»º-Today-Extension"><a href="#åˆ›å»º-Today-Extension" class="headerlink" title="åˆ›å»º Today Extension"></a>åˆ›å»º Today Extension</h3><p>Xcode -&gt; File -&gt; New -&gt; Target -&gt; TodayExtension</p>
<p>è·Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ä¸€æ ·, è®¾ç½®åˆ›å»ºå¥½ä¹‹å, é¡¹ç›®ä¸­ä¼šå¤šä¸€ä¸ª Target, ä¿®æ”¹Scheme ä¸ºä½ åˆšåˆšåˆ›å»ºçš„ Extension å†è¿è¡Œ, å°±èƒ½åœ¨ é€šçŸ¥ä¸­å¿ƒçš„ Today é‡Œé¢çœ‹åˆ°ä½ åˆšåˆšåˆ›å»ºçš„ widget äº†, ä¸Šé¢å†™ç€â€œHello worldâ€</p>
<p>å¦å¤– Xcode ç»™ä½ åˆ›å»ºäº†é»˜è®¤çš„æ¨¡ç‰ˆæ–‡ä»¶ã€‚</p>
<ul>
<li>TodayViewController.swift(å¦‚æœæ˜¯ OC å¯¹åº”ä¼šæ˜¯ <code>.h</code> å’Œ <code>.m</code> æ–‡ä»¶)</li>
<li>MainInterface.storyboard</li>
<li>Info.plist</li>
</ul>
<p><strong>æ³¨æ„:</strong> é»˜è®¤æ˜¯ä½¿ç”¨è¿™ä¸ª storyboard ä½œä¸ºè¿™ä¸ª widget çš„å…¥å£ã€‚å¦‚æœä¸éœ€è¦ä½¿ç”¨storyboard å¯ä»¥åˆ é™¤æ‰è¿™ä¸ªstoryboardå¹¶ä¸”å°†Info.plist ä¸­çš„</p>
<ul>
<li><code>NSExtensionMainStoryboard</code> æ”¹æˆ <code>NSExtensionPrincipalClass</code></li>
<li><code>MainInterface</code> æ”¹æˆ <code>TodayViewController</code></li>
</ul>
<h3 id="è®¾ç½®ç•Œé¢"><a href="#è®¾ç½®ç•Œé¢" class="headerlink" title="è®¾ç½®ç•Œé¢"></a>è®¾ç½®ç•Œé¢</h3><p>å®Œæˆäº†ä¸Šé¢çš„æ­¥éª¤ä¹‹å, ä¸è®ºä½ æ˜¯é€‰æ‹©ç”¨ stroyboard ä½œä¸ºä½  widget çš„å…¥å£, è¿˜æ˜¯é€‰æ‹©ç”¨ä»£ç æ¥åšè¿™ä»¶äº‹æƒ…ã€‚éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<blockquote>
<p>ç”±äºä¸çŸ¥é“ä»€ä¹ˆåŸå› , æˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°çš„æ–‡ç« éƒ½æ˜¯ä½¿ç”¨ä»£ç æ¥åšçš„è¿™ä»¶äº‹æƒ…ã€‚æ‰€ä»¥åœ¨è¿™ç¯‡æ–‡ç« ä»¥åŠåé¢çš„ç¤ºä¾‹ä»£ç ä¸­éƒ½å°†ä½¿ç”¨ Xcode é»˜è®¤çš„ storyboard æ¥åšè¿™ä¸ª widget çš„å¸ƒå±€ã€‚</p>
</blockquote>
<h3 id="æˆ‘å°†è§£å†³çš„é—®é¢˜"><a href="#æˆ‘å°†è§£å†³çš„é—®é¢˜" class="headerlink" title="æˆ‘å°†è§£å†³çš„é—®é¢˜"></a>æˆ‘å°†è§£å†³çš„é—®é¢˜</h3><ul>
<li>åœ¨ widget ä¸­æ‰“å¼€ä¸» app å¹¶ä¼ é€’å‚æ•°</li>
<li>widget å’Œ ä¸» app å…±äº«æ•°æ®</li>
<li>widget å’Œ ä¸» app å…±ç”¨èµ„æº</li>
<li>widget çš„æ‰“å¼€å’ŒæŠ˜å </li>
</ul>
<h3 id="æˆ‘é‡åˆ°çš„å‘"><a href="#æˆ‘é‡åˆ°çš„å‘" class="headerlink" title="æˆ‘é‡åˆ°çš„å‘"></a>æˆ‘é‡åˆ°çš„å‘</h3><p>ä¹Ÿæ²¡ä»€ä¹ˆå‘, æ¯•ç«Ÿ Today Extension å¹¶ä¸æ˜¯ä»€ä¹ˆå¾ˆéš¾çš„ä¸œè¥¿ã€‚</p>
<ul>
<li>æµ‹è¯•çš„æ—¶å€™, ç”±äº widget å’Œ ä¸»app æ˜¯ä¸¤ä¸ªä¸åŒçš„ target, æ‰€ä»¥åœ¨ä¼ é€’å‚æ•°çš„æ—¶å€™, åœ¨ appdelegate ä¸­æ‰“å°å¯¹åº”çš„å€¼æ²¡æœ‰æ•ˆæœã€‚æœ€å¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ˜¯å› ä¸ºè®¾ç½®çš„ scheme æ˜¯ widget æ‰€ä»¥åœ¨ ä¸» app ä¸­çš„ä¿®æ”¹æ˜¯æ— æ•ˆçš„ã€‚ä½†æ˜¯å®é™…æ˜¯å¹¶ä¸æ˜¯è¿™æ ·ã€‚å°†å‚æ•°ä»¥ alert çš„å½¢å¼è¡¨ç°å‡ºæ¥, è¿™æ—¶å€™èƒ½å¤Ÿå‘ç°, å…¶å®ä¸» app æ˜¯è·‘èµ·æ¥äº†çš„ã€‚</li>
</ul>
<h3 id="å…ˆè¯´è¯´æˆ‘åšçš„å‡†å¤‡å·¥ä½œå§"><a href="#å…ˆè¯´è¯´æˆ‘åšçš„å‡†å¤‡å·¥ä½œå§" class="headerlink" title="å…ˆè¯´è¯´æˆ‘åšçš„å‡†å¤‡å·¥ä½œå§"></a>å…ˆè¯´è¯´æˆ‘åšçš„å‡†å¤‡å·¥ä½œå§</h3><p>ä¸ºäº†ä¸æ‰¯é‚£ä¹ˆå¤šæ²¡ç”¨çš„ä¸œè¥¿ã€‚å…ˆè¯´è¯´æˆ‘åšäº†é‚£äº›è·Ÿä»Šå¤©ä¸»é¢˜æ²¡ä»€ä¹ˆå…³ç³»çš„äº‹æƒ…ã€‚</p>
<h4 id="å†™ä¸»app"><a href="#å†™ä¸»app" class="headerlink" title="å†™ä¸»app"></a>å†™ä¸»app</h4><p>åœ¨ä¸» app ä¸­æˆ‘å†™äº†ä¸€ä¸ª UITableView, å¹¶ä½¿ç”¨ Userdefault å°†æˆ‘è¦æŒä¹…åŒ–çš„æ•°æ®ä¿å­˜ä¸‹æ¥ã€‚ç„¶åå¯¹åº”ç»™ Todo list åšäº†ï¼Œæ·»åŠ ï¼Œå’Œåˆ é™¤çš„åŠŸèƒ½ã€‚</p>
<h4 id="widget"><a href="#widget" class="headerlink" title="widget"></a>widget</h4><p>åœ¨ widget ä¸­æˆ‘ä¹Ÿä¸‹äº†åŒæ ·çš„ä¸€ä¸ª UITableView åªæœ‰æŸ¥çœ‹çš„åŠŸèƒ½ã€‚</p>
<h4 id="è¦åšçš„äº‹æƒ…"><a href="#è¦åšçš„äº‹æƒ…" class="headerlink" title="è¦åšçš„äº‹æƒ…"></a>è¦åšçš„äº‹æƒ…</h4><h5 id="widget-å’Œ-ä¸»-app-å…±ç”¨èµ„æº"><a href="#widget-å’Œ-ä¸»-app-å…±ç”¨èµ„æº" class="headerlink" title="widget å’Œ ä¸» app å…±ç”¨èµ„æº"></a>widget å’Œ ä¸» app å…±ç”¨èµ„æº</h5><p>widget å’Œ ä¸»app å…±äº«ä»£ç å’Œèµ„æºã€‚ä½œä¸ºä¸€ä¸ªå·¥ç¨‹å¸ˆ, æˆ‘ä»¬åœ¨ä»»ä½•äº‹æƒ…çš„æ—¶å€™éƒ½è¦æƒ³åˆ°é«˜ç±»èšä½è€¦åˆç€å¥ä¸å˜çš„çœŸç†ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯è¦å°½å¯èƒ½çš„è®© widget å’Œ ä¸» app å…±äº«ä»£ç ã€‚</p>
<p>ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ¡ˆ:</p>
<ul>
<li>framework</li>
<li>ç›´æ¥å…±äº«</li>
</ul>
<p>framework çš„è¯ï¼Œå°±æ‹¿ cocoapods æ¥è¯´å§ï¼Œ ç”±äº widget æ˜¯ä¸€ä¸ªæ–°çš„target, æ‰€ä»¥åªéœ€è¦åœ¨ podfile ä¸­å¯¹åº”æ·»åŠ ä»£ç å°±èƒ½å¤Ÿåœ¨ widget ä¸­ä½¿ç”¨ã€‚</p>
<p>å¦å¤–ä¸€ä¸ªæ˜¯ ç›´æ¥å…±äº«, è¿™ä¸ªå°±å¾ˆç®€å•äº†ã€‚æˆ‘åœ¨ç¤ºä¾‹ä¸­è®©ä¸»app å’Œ widget å…±äº«äº†ä¸€å¼ å›¾ç‰‡ï¼Œä¸€ä¸ª TodoCell ç±»(åŒ…æ‹¬xib æ–‡ä»¶)ã€‚æˆ‘åšçš„å”¯ä¸€çš„ä¸€ä»¶äº‹æƒ…å°±æ˜¯åœ¨ Xcode ä¸­é€‰ä¸­è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶ååœ¨ Xcodeå³è¾¹çš„ TargetMenberShip ä¸­å‹¾é€‰å¯¹åº”çš„ target.</p>
<h5 id="widget-å’Œ-ä¸»-app-å…±äº«æ•°æ®"><a href="#widget-å’Œ-ä¸»-app-å…±äº«æ•°æ®" class="headerlink" title="widget å’Œ ä¸» app å…±äº«æ•°æ®"></a>widget å’Œ ä¸» app å…±äº«æ•°æ®</h5><p>ä¸¥æ ¼æ¥è¯´ widget å’Œ app æ˜¯ä¸åŒçš„ä¸¤ä¸ª app äº†, ä»–ä»¬ä¹‹é—´è¦å…±äº«æ•°æ®çš„è¯åªèƒ½ä½¿ç”¨ <strong>App Groups</strong> äº†ã€‚</p>
<p>é¦–å…ˆåœ¨ä¸» app</p>
<p>target -&gt; capabilities -&gt; app groups</p>
<p>æ‰“å¼€ app groups åŠŸèƒ½, ç‚¹å‡» <code>+</code> , è®¾ç½® id ã€‚å¦‚æœé‡å¤äº†å°±æ”¹ä¸€ä¸ªã€‚</p>
<p>widget app</p>
<p>target -&gt; capabilities -&gt; app groups</p>
<p>è¿™æ—¶å€™çš„ group åˆ—è¡¨å°±èƒ½å¤Ÿçœ‹åˆ°å¯¹åº”çš„ group äº†ã€‚å‹¾é€‰å³å¯ã€‚</p>
<p>è¿™æ—¶å€™å·²ç»å®Œæˆäº†widget å’Œ ä¸»appå…±äº«æ•°æ®çš„å‰ææ¡ä»¶ã€‚</p>
<p>æ¥ä¸‹æ¥è¿˜éœ€è¦åšçš„äº‹æƒ…, å°±æ˜¯å°†æˆ‘ä»¬å‡†å¤‡å·¥ä½œé‡Œé¢Userdefaultç›¸å…³ä»£ç è¿›è¡Œè°ƒæ•´ã€‚</p>
<p>å°† <code>UserDefaults.standard</code> æ”¹æˆ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UserDefaults(suiteName: &quot;your group id&quot;)</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥åœ¨ widget ä¸­ ä½¿ç”¨</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> userdefault = <span class="type">UserDefaults</span>(suiteName: <span class="string">"group.com.sunny.group"</span>)</div></pre></td></tr></table></figure>
<p>è·å¾—åœ¨ä¸» app ä¸­æŒä¹…åŒ–çš„æ•°æ®äº†ã€‚å…³äº app groups å…¶ä»–çš„ç”¨æ³•ï¼Œå¯ä»¥ç»§ç»­æ·±å…¥ç ”ç©¶ã€‚</p>
<h5 id="widget-çš„æŠ˜å å’Œå±•å¼€"><a href="#widget-çš„æŠ˜å å’Œå±•å¼€" class="headerlink" title="widget çš„æŠ˜å å’Œå±•å¼€"></a>widget çš„æŠ˜å å’Œå±•å¼€</h5><p>è‹¹æœçš„å®˜æ–¹æ–‡æ¡£é‡Œé¢æ˜ç¡®çš„è¯´äº†ï¼Œwidget çš„ç•Œé¢æ˜¯ä¸èƒ½æ»‘åŠ¨çš„ã€‚æ¯•ç«Ÿ widget å’Œé€šçŸ¥ä¸­å¿ƒçš„æ»‘åŠ¨ä¸èƒ½å†²çªå•Šã€‚</p>
<p>æ‰€ä»¥æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°† widget æŠ˜å èµ·æ¥ï¼Œæ¯•ç«Ÿå¤ªé•¿çš„ widget å®åœ¨æ˜¯ä»¤äººè®¨åŒå•Šã€‚</p>
<p>ä¸»è¦è¿˜æ˜¯è¯´è¯´iOS10 ä¸Šæ€ä¹ˆåšçš„å§ï¼Œæ¯•ç«Ÿæ²¡æœ‰iOS10 ä»¥ä¸‹çš„è®¾å¤‡ã€‚</p>
<p>åœ¨ TodayViewController çš„ didLoad ä¸­æ·»åŠ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">        <span class="comment">// iOS10 æ·»åŠ æŠ˜å æŒ‰é’®</span></div><div class="line">        <span class="keyword">if</span> #available(iOSApplicationExtension <span class="number">10.0</span>, *) &#123;</div><div class="line">            extensionContext?.widgetLargestAvailableDisplayMode = .expanded</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"><span class="comment">// iOS8 ã€iOS9 ä¸Šéœ€è¦è‡ªå·±æ·»åŠ æŠ˜å æŒ‰é’®</span></div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>ç„¶åå®ç° <code>NCWidgetProviding</code> åè®®ä¸­çš„æ–¹æ³•</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">widgetActiveDisplayModeDidChange</span><span class="params">(<span class="number">_</span> activeDisplayMode: NCWidgetDisplayMode, withMaximumSize maxSize: CGSize)</span></span> &#123;</div><div class="line"><span class="comment">// ç”±äº iOS8 ã€iOS9 ä¸Šæ²¡æœ‰è¿™ä¸ªä»£ç†ã€‚éœ€è¦å¯¹è‡ªå·±æ·»åŠ çš„æŒ‰é’®è®¾ç½® target-action ç„¶åè¿›è¡Œä¿®æ”¹</span></div><div class="line">        <span class="keyword">switch</span> activeDisplayMode &#123;</div><div class="line">        <span class="keyword">case</span> .compact:</div><div class="line">            preferredContentSize = maxSize</div><div class="line">        <span class="keyword">case</span> .expanded:</div><div class="line">            preferredContentSize = <span class="type">CGSize</span>(width: <span class="number">0.0</span>, height: <span class="number">60</span> * <span class="type">CGFloat</span>(dataSource.<span class="built_in">count</span>))</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>åœ¨ iOS8 å’Œ iOS9 ä¸­, ç”±äºç³»ç»Ÿæ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚æˆ‘ä»¬åªèƒ½è‡ªå·±å†™ä¸€ä¸ªæŒ‰é’®ç„¶åå†æ¥åšè¿™äº›äº‹æƒ…äº†ã€‚</p>
<h5 id="widget-æ‰“å¼€-ä¸»app"><a href="#widget-æ‰“å¼€-ä¸»app" class="headerlink" title="widget æ‰“å¼€ ä¸»app"></a>widget æ‰“å¼€ ä¸»app</h5><p>widget æ‰“å¼€ä¸» app è¿˜æ˜¯è€æ€è·¯ï¼Œopenurl å°±å¯ä»¥äº†ï¼Œç„¶ååœ¨url ä¸­æ·»åŠ å¯¹åº”éœ€è¦çš„å‚æ•°ã€‚</p>
<p><strong>å‡†å¤‡å·¥ä½œ</strong> </p>
<p>ä¸»app -&gt; target -&gt; info -&gt; UrlTypes </p>
<p>æ·»åŠ ä¸€ä¸ª URlType ç„¶åè®¾ç½® URL Scheme ä¸ºä½ è‡ªå®šä¹‰çš„å­—ç¬¦ä¸²ã€‚ æ¯”å¦‚ â€œsunnyâ€ã€‚</p>
<p>åœ¨ widget ä¸­éœ€è¦è·³è½¬çš„åœ°æ–¹å†™è¿™æ ·çš„ä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">self</span>.extensionContext?.open(<span class="type">NSURL</span>(string: <span class="string">"sunny://action=<span class="subst">\(dataSource[indexPath.row])</span>"</span>)</div></pre></td></tr></table></figure>
<p>å‚æ•°ä¼ é€’ä¹Ÿå°±æ˜¯æŒ‰ç…§ä¸Šæ–‡, åœ¨urlä¸­æ‹¼æ¥äº†ã€‚ä¸Šæ–‡æœ‰æåˆ°, widget å’Œ app å¯ä»¥å…±äº«æ•°æ®ã€‚è¿™ä¹Ÿå¯èƒ½æ˜¯ä¸€ç§ä¼ é€’å‚æ•°çš„æ–¹å¼ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™æ‰“å¼€ä¸»è¦ app å°±æ˜¯ç›´æ¥è¿›å…¥ä¸»è¦ç•Œé¢äº†ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åšä¸€äº›å…¶ä»–çš„äº‹æƒ…åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>æƒ³æƒ³ä»¥å‰åšå¾®ä¿¡æˆ–è€…æ”¯ä»˜å®æ”¯ä»˜çš„æ—¶å€™ï¼Œ éƒ½è¦åœ¨ appdelegate ä¸­å†™ä¸€äº›ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:])</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">let</span> <span class="keyword">prefix</span> = <span class="string">"sunny://"</span><span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯å¯é çš„åœ°æ–¹ä¼ é€’è¿‡æ¥çš„</span></div><div class="line">    <span class="keyword">if</span> url.absoluteString.hasPrefix(<span class="keyword">prefix</span>) &#123;</div><div class="line">    <span class="comment">// å‚æ•°è¿‡æ¥äº†ï¼ åšå¯¹åº”çš„äº‹æƒ…</span></div><div class="line">        <span class="keyword">let</span> a = <span class="type">UIAlertController</span>(title: url.absoluteString, message: <span class="literal">nil</span>, preferredStyle: .alert)</div><div class="line">        a.addAction(<span class="type">UIAlertAction</span>(title: <span class="string">"å–æ¶ˆ"</span>, style: .cancel, handler: <span class="literal">nil</span>))</div><div class="line">        <span class="keyword">self</span>.window?.rootViewController?.present(a, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="others"><a href="#others" class="headerlink" title="others"></a>others</h4><h5 id="é«˜åº¦"><a href="#é«˜åº¦" class="headerlink" title="é«˜åº¦"></a>é«˜åº¦</h5><p>widgetçš„é»˜è®¤é«˜åº¦æ˜¯æœ‰é™åˆ¶çš„ã€‚</p>
<p>compact ä¸‹:</p>
<ul>
<li>max = 110</li>
<li>mim = 110</li>
</ul>
<p>expanded ä¸‹:</p>
<ul>
<li>min = 110</li>
<li>max = æ ¹æ®ä¸åŒçš„æœºå‹äºŒä¸åŒã€‚</li>
</ul>
<p>æ— è®ºæ€ä¹ˆè®¾ç½®, éƒ½ä¸å›è¶…å‡ºè¿™ä¸ªèŒƒå›´</p>
<h5 id="widgetPerformUpdate"><a href="#widgetPerformUpdate" class="headerlink" title="widgetPerformUpdate"></a>widgetPerformUpdate</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">func widgetPerformUpdate(completionHandler: (@escaping (NCUpdateResult) -&gt; Void)) &#123;</div><div class="line">    // Perform any setup necessary in order to update the view.</div><div class="line">    </div><div class="line">    // If an error is encountered, use NCUpdateResult.Failed</div><div class="line">    // If there&apos;s no update required, use NCUpdateResult.NoData</div><div class="line">    // If there&apos;s an update, use NCUpdateResult.NewData</div><div class="line">    </div><div class="line">    completionHandler(NCUpdateResult.newData)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•ç”¨æ¥é€‰æ‹© widget å†å‡ºç°çš„æ—¶å€™ä¼šä¸ä¼šé‡æ–°åˆ·æ–°ã€‚</p>
<h5 id="é€šçŸ¥"><a href="#é€šçŸ¥" class="headerlink" title="é€šçŸ¥"></a>é€šçŸ¥</h5><p><del>åœ¨ <code>NSExtensionContext</code> ä¸­çœ‹åˆ°çš„å‡ ä¸ªé€šçŸ¥è²Œä¼¼ä¸æ˜¯ç»™ TodayExtension ç”¨çš„ã€‚</del></p>
<p><code>NSExtensionContext</code> ä¸­èƒ½çœ‹åˆ°å‡ ä¸ªé€šçŸ¥ä»–ä»¬éƒ½æ˜¯ç›‘å¬ host app çš„çŠ¶æ€çš„ã€‚æ‰€ä»¥å¯¹äºwidget æ¥è¯´ï¼Œ host app å°±æ˜¯ Today è¿™ä¸ªä¸œè¥¿å•¦ã€‚</p>
<h4 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h4><p>æŠ›ç –å¼•ç‰ï¼Œæœ¬æ–‡ç”¨Today Extensionåšäº†ä¸€ä¸ªå¾ˆç®€å•çš„åŠŸèƒ½ã€‚ å½“ç„¶, æˆ‘ä»¬èƒ½ç”¨ä»–åšçš„äº‹æƒ…å¯ä¸æ­¢è¿™äº›ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬å‘åŠ¨æˆ‘ä»¬çš„èªæ˜æ‰æ™ºäº†ã€‚</p>
<p><a href="https://github.com/CepheusSun/TodayExtension">ç¤ºä¾‹ä»£ç ä¸‹è½½é“¾æ¥</a>ç”±äºä½¿ç”¨swiftå†™çš„, ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› , ä½ å‘ç°ç¼–è¯‘ä¸è¿‡äº†ã€‚å¯ä»¥è”ç³»æˆ‘, æˆ‘å°†åšé€‚é…ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;app extension è®©æˆ‘ä»¬åœ¨ç”¨æˆ·æ­£åœ¨ä½¿ç”¨å…¶ä»– app çš„æ—¶å€™, æ‹“å±•æˆ‘ä»¬ app çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;Today Extension ä¹Ÿå«åš widgetã€‚ å®ƒèƒ½å¤Ÿè®©ä¸€äº›é‡è¦çš„æ¶ˆæ¯æ›´å¿«é€Ÿçš„åˆ°è¾¾ä½ çš„ç”¨æˆ·ã€‚æ¯”å¦‚è¯´, ç”¨æˆ·å¯ä»¥é€šè¿‡å®ƒæŸ¥çœ‹å¤©æ°”ï¼Œæˆ–è€…è‚¡ç¥¨ä»·æ ¼, æŸ¥çœ‹æ—¥ç¨‹è¡¨ç­‰ç­‰ã€‚è‹¹æœåœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¯´åˆ°ï¼Œ ä¸€ä¸ª widget åº”è¯¥æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¡®ä¿å†…å®¹æ˜¯æœ€æ–°çš„&lt;/li&gt;
&lt;li&gt;å“åº”çš„ç”¨æˆ·äº‹ä»¶&lt;/li&gt;
&lt;li&gt;æ€§èƒ½å¥½(åœ¨iOSä¸Šå ç”¨å¤§é‡å†…å­˜ï¼Œç³»ç»Ÿå¯èƒ½ä¼škillæ‰è¿™ä¸ªwidget)&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="App Extension" scheme="http://www.CepheusSun.com/categories/App-Extension/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="App Extension" scheme="http://www.CepheusSun.com/tags/App-Extension/"/>
    
  </entry>
  
  <entry>
    <title>Handing non-optional optionals in Swift</title>
    <link href="http://www.CepheusSun.com/Handing%20non-optional%20optionals%20in%20Swift.html"/>
    <id>http://www.CepheusSun.com/Handing non-optional optionals in Swift.html</id>
    <published>2017-06-09T02:05:23.000Z</published>
    <updated>2017-06-09T02:22:15.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>optional</strong>, å¯ä»¥è¯´æ˜¯ Swift ä¸­æœ€ä¸ºé‡è¦çš„ç‰¹æ€§, ä¹Ÿæ˜¯å®ƒè·Ÿ <code>Objective-C</code> ä¸åŒçš„å…³é”®ç‰¹å¾ã€‚åœ¨ç¼–ç çš„æ—¶å€™å¼ºåˆ¶å¤„ç†é‚£äº›å¯èƒ½ä¸ºç©ºçš„å€¼, å¯ä»¥è®©ç¨‹åºæ›´å…·æœ‰å¯é¢„æµ‹æ€§, å‡å°‘é”™è¯¯å‘ç”Ÿçš„æœºä¼šã€‚</p>
<p>ç„¶è€Œåœ¨å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€äº›å˜é‡, æ˜æ˜æ˜¯ <code>optional</code> çš„, ä½†åœ¨é€»è¾‘åˆä¸€å®šæ˜¯éç©ºçš„ã€‚æ¯”å¦‚è¯´ <code>controller</code> ä¸­çš„ <code>view</code></p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ViewModel</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TableViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> tableView: <span class="type">UITableView</span>?</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        tableView = <span class="type">UITableView</span>.<span class="keyword">init</span>(frame: view.bounds)</div><div class="line">        view.addSubview(tableView!)</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">viewModelDidUpdate</span><span class="params">(<span class="number">_</span> viewModel: ViewModel)</span></span> &#123;</div><div class="line">        tableView?.reloadData()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µåœ¨ <code>Swift</code> ç¨‹åºå‘˜ä¹‹é—´çš„äº‰è®®, å°±ä½¿ç”¨ <code>tab</code> è¿˜æ˜¯ <code>space</code>æ¥ç¼©è¿›ä¸€æ ·ã€‚</p>
<blockquote>
<p>æ—¢ç„¶æ˜¯å¯é€‰ç±»å‹, æˆ‘ä»¬å°±åº”è¯¥æ­£ç¡®çš„ä½¿ç”¨å®ƒã€‚ ä½¿ç”¨<code>if let</code> æˆ–è€… <code>guard</code></p>
</blockquote>
<p>ä¹Ÿæœ‰äººæŒæœ‰ç›¸åçš„æ€åº¦: </p>
<blockquote>
<p>æ—¢ç„¶éƒ½çŸ¥é“è¿™ä¸ªå˜é‡éç©º, é‚£å°±å¼ºåˆ¶è§£åŒ…ã€‚å°±ç®—å´©æºƒä¹Ÿä¸èƒ½è®©ç¨‹åºè¿›å…¥ä¸å¯æ§çš„çŠ¶æ€ã€‚</p>
</blockquote>
<p>ä¸Šé¢çš„è®¨è®ºåŸºæœ¬ä¸Šéƒ½æ˜¯å›´ç»•ç€<strong>æ˜¯å¦æœ‰å¿…è¦è¿›è¡Œé˜²å¾¡æ€§ç¼–ç¨‹</strong>å±•å¼€çš„ã€‚åº”è¯¥è®©ç¨‹åºä»æœªå®šä¹‰çš„çŠ¶æ€ä¸­æ¢å¤, è¿˜æ˜¯åº”è¯¥è®©ç¨‹åºç›´æ¥å´©æºƒã€‚</p>
<p>å¦‚æœéè¦å›ç­”è¿™ä¸ªé—®é¢˜, æˆ‘å¯èƒ½ä¼šé€‰æ‹©åè€…ã€‚æœªå®šä¹‰çš„çŠ¶æ€ä¼šå¯¼è‡´å¾ˆéš¾è¿½è¸ªçš„ bug, å¯èƒ½ä¼šæ‰§è¡Œä¸å¿…è¦çš„ä»£ç ã€‚è€Œä¸”é˜²å¾¡æ€§çš„ä»£ç å¾€å¾€ä¹Ÿå¾ˆéš¾ç»´æŠ¤ã€‚</p>
<p>ä½†æ˜¯æˆ‘è§‰å¾—, ç ”ç©¶ä¸€äº›é¿å…å‡ºç°è¿™ç§æƒ…å†µçš„æŠ€å·§æ›´å®åœ¨ä¸€äº›ã€‚</p>
<h3 id="Is-it-really-optional"><a href="#Is-it-really-optional" class="headerlink" title="Is it really optional?"></a>Is it really optional?</h3><p>å˜é‡å’Œå±æ€§æ˜¯ä¸æ˜¯å¯é€‰å–å†³äºä½ ä»£ç çš„é€»è¾‘ã€‚å¦‚æœåœ¨è®¾è®¡ç¨‹åºçš„æ—¶å€™, æ ¹æœ¬å°±æ²¡æœ‰æƒ³è¿‡è¿™ä¸ªå˜é‡ä¼šæ˜¯ <code>nil</code>ã€‚æˆ–è€…è¯´åœ¨è®¾è®¡ä¹‹åˆ, è¿™ä¸ªå˜é‡å°±ä¸ä¼šå‡ºç°ä¸ºç©ºçš„æƒ…å†µã€‚è¿™ä¸ªå˜é‡å°±ä¸åº”è¯¥æ˜¯ <code>optional</code> </p>
<p>å³ä½¿åœ¨å’Œä¸€äº›ç³»ç»Ÿ API äº¤äº’çš„æ—¶å€™, å¯é€‰ç±»å‹åŸºæœ¬ä¸Šéƒ½æ˜¯æ— æ³•é¿å…çš„ã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›åŠæ³•è®©æˆ‘ä»¬å°½å¯èƒ½çš„é¿å…ä½¿ç”¨ <code>optional</code> ç±»å‹ã€‚</p>
<h3 id="Being-lazy-is-better-than-being-non-optionally-optional"><a href="#Being-lazy-is-better-than-being-non-optionally-optional" class="headerlink" title="Being lazy is better than being non-optionally optional"></a>Being lazy is better than being non-optionally optional</h3><p>å¯¹äºä¸€ä¸ªå¯¹è±¡æ¥è¯´, å¦‚æœå®ƒçš„å±æ€§ä¼šåœ¨è¿™ä¸ªå¯¹è±¡åˆå§‹åŒ–ä¹‹åèµ‹å€¼ã€‚æ¯”å¦‚è¯´ <code>UIController</code> ä¸Šé¢çš„ <code>View</code> åº”è¯¥åœ¨ <code>viewDidLoad()</code> ä¸­åˆå§‹åŒ–ã€‚å°±å¯ä»¥ä½¿ç”¨ <code>lazy</code> å±æ€§ã€‚ä¸€ä¸ªæ‡’åŠ è½½å±æ€§æ˜¯ä¸å¯ç©ºçš„, å³ä½¿ä»–åœ¨è¿™ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•ä¸­æ²¡æœ‰è¢«èµ‹å€¼ã€‚å› ä¸ºåœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™, å®ƒå°±ä¼šè¢«åˆå§‹åŒ–å‡ºæ¥ã€‚</p>
<p>æˆ‘ä»¬æ¥æ›´æ–°ä¸€ä¸‹åˆšæ‰çš„ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ViewModel</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TableViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> tableView = <span class="type">UITableView</span>()</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        tableView = <span class="type">UITableView</span>.<span class="keyword">init</span>(frame: view.bounds)</div><div class="line">        view.addSubview(tableView)</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">viewModelDidUpdate</span><span class="params">(<span class="number">_</span> viewModel: ViewModel)</span></span> &#123;</div><div class="line">        tableView.reloadData()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ²¡æœ‰å¯ç©ºç±»å‹äº†ã€‚ğŸ‰</p>
<h3 id="Proper-dependency-management-is-better-than-non-optional-optionals"><a href="#Proper-dependency-management-is-better-than-non-optional-optionals" class="headerlink" title="Proper dependency management is better than non-optional optionals"></a>Proper dependency management is better than non-optional optionals</h3><p>ä¸ºäº†æ‰“ç ´å¾ªç¯ä¾èµ–æˆ‘ä»¬ä¹Ÿç»å¸¸ä¼šä½¿ç”¨å¯é€‰ç±»å‹ã€‚æ¯”å¦‚ï¼šåœ¨Aã€Bä¸¤ä¸ªç±»äº’ç›¸ä¾èµ–çš„æ—¶å€™: </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(text: <span class="type">String</span>) &#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">weak</span> <span class="keyword">var</span> commentManager: <span class="type">CommentManager</span>?</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">userDidpostComment</span><span class="params">(<span class="number">_</span> comment: Comment)</span></span> &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">logOutCurrentUser</span><span class="params">()</span></span> &#123;</div><div class="line">        commentManager?.clearCache()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">weak</span> <span class="keyword">var</span> userManager: <span class="type">UserManager</span>?</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">composer</span><span class="params">(<span class="number">_</span> composer: Comment)</span></span> &#123;</div><div class="line">        userManager?.userDidpostComment(composer)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">clearCache</span><span class="params">()</span></span> &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>çœ‹ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥å‘ç°ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„å¾ªç¯å¼•ç”¨ <code>UserManager</code> - <code>CommentManager</code> ä»»ä½•ä¸€ä¸ªéƒ½æ²¡æœ‰æŒæœ‰å¦å¤–ä¸€ä¸ª, ä½†æ˜¯å®ƒä»¬ä¹Ÿä¾èµ–å¦å¤–ä¸€ä¸ªæ¥å®Œæˆè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚ğŸ˜…</p>
<p>è§£å†³è¿™æ ·çš„é—®é¢˜, æˆ‘ä»¬å¯ä»¥è®© <code>CommentComposer</code> æ¥åšä¸ºä¸­é—´äººã€‚ ä»–æ¥é€šçŸ¥ <code>UserManger</code> è¿˜æœ‰ <code>CommentManager</code> ä¸€æ¡è¯„è®ºæ¶ˆæ¯äº§ç”Ÿäº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentComposer</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> commentManager: <span class="type">CommentManager</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> userManager: <span class="type">UserManager</span></div><div class="line">    <span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> textView = <span class="type">UITextView</span>()</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(commentManager: <span class="type">CommentManager</span>,</div><div class="line">         userManager: <span class="type">UserManager</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.commentManager = commentManager</div><div class="line">        <span class="keyword">self</span>.userManager = userManager</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">postComment</span><span class="params">()</span></span>  &#123;</div><div class="line">        <span class="keyword">let</span> comment = <span class="type">Comment</span>(text: textView.text)</div><div class="line">        commentManager.composer(comment)</div><div class="line">        userManager.userDidpostComment(comment)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è¯ <code>UserManager</code> å°±å¯ä»¥å¼ºå¼•ç”¨ <code>CommentManager</code> äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> commentManager: <span class="type">CommentManager</span></div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(commentManager: <span class="type">CommentManager</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.commentManager = commentManager</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">userDidpostComment</span><span class="params">(<span class="number">_</span> comment: Comment)</span></span> &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">logOutCurrentUser</span><span class="params">()</span></span> &#123;</div><div class="line">        commentManager.clearCache()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>optional</code> ä¹Ÿæ¶ˆå¤±äº†ğŸ‰</p>
<h3 id="Crashing-gracefully"><a href="#Crashing-gracefully" class="headerlink" title="Crashing gracefully"></a>Crashing gracefully</h3><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸¤ä¸ªé€šè¿‡è°ƒæ•´æˆ‘ä»¬çš„ä»£ç , æ¥æ§åˆ¶ä»£ç ä¸­çš„ä¸ç¡®å®šæ€§ã€‚ä½†æ˜¯åœ¨æœ‰äº›æƒ…å†µä¸‹è¿™ä¹ˆåšæ˜¯ä¸å¯èƒ½çš„ã€‚æˆ‘ä»¬æ¥å‡è®¾ä¸€ä¸‹, ä½ æ­£åœ¨åŠ è½½ä¸€ä¸ªåŒ…å«äº†ä½ ç¨‹åºçš„é…ç½®ä¿¡æ¯çš„ JSON æ–‡ä»¶ã€‚è¿™å°±å¤©ç„¶çš„å­˜åœ¨ä¸€äº›å¯èƒ½ä¼šå‡ºé”™çš„æƒ…å†µã€‚æ­¤æ—¶éœ€è¦åšçš„å°±æ˜¯å°½å¯èƒ½çš„é”™è¯¯å¤„ç†ã€‚</p>
<p>æ‹¿åˆ°äº†é”™è¯¯çš„é…ç½®æ–‡ä»¶, å¦‚æœç»§ç»­å¾€ä¸‹æ‰§è¡Œçš„è¯, ç¨‹åºè¿›å…¥æˆ‘ä»¬æ²¡æœ‰å®šä¹‰çš„çŠ¶æ€ä¸­ã€‚è¿™ç§æƒ…å†µä¸‹, æœ€å¥½çš„åŠæ³•æ˜¯è®©ç¨‹åºå´©æºƒ, ç„¶å QA ä¸­, é€šè¿‡æ—¥å¿—, å°†è¿™ä¸ªé—®é¢˜è§£å†³æ‰ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ¥è®©ç¨‹åºå´©æºƒå‘¢ã€‚æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ä½¿ç”¨ <code>!</code> æ“ä½œç¬¦ã€‚å½“è¿™ä¸ªå˜é‡ä¸ºç©ºçš„æ—¶å€™å¼ºåˆ¶è§£åŒ…, å°±ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> configuration = loadConfiguration()!</div></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™ç§æ–¹æ³•å¾ˆç®€å•, ä½†æ˜¯å®ƒä¹Ÿæœ‰å¾ˆå¤§çš„ç¼ºç‚¹ã€‚å¦‚æœè¿™ä¸ªä»£ç  crashã€‚ æˆ‘ä»¬å¾—åˆ°çš„æ—¥å¿—æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fatal error: unexpectedly found nil while unwrapping an Optional value</div></pre></td></tr></table></figure>
<p>æ²¡æœ‰é”™è¯¯åŸå› , ä¹Ÿæ²¡æœ‰é”™è¯¯å‘ç”Ÿçš„åœ°ç‚¹ã€‚è¿™æ ·çš„é”™è¯¯ä¿¡æ¯åŸºæœ¬ä¸Šæ²¡æœ‰ä»€ä¹ˆèƒ½å¤Ÿè®©æˆ‘ä»¬è¿…é€Ÿçš„è§£å†³è¿™ä¸ª bug çš„ä¿¡æ¯ã€‚</p>
<p>æ›´å¥½çš„æ–¹æ³•æ˜¯åœ¨ <code>guard</code> è¡¨è¾¾å¼ä¸­ä½¿ç”¨ <code>preconditionFailure()</code> å‡½æ•°è®©ç¨‹åºå‘ç”Ÿå´©æºƒ, æŠ›å‡ºè‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> configuration = loadConfiguration() <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">preconditionFailure</span>(<span class="string">"Configuration couldn't be loaded + verifu that Config.JSON is valid"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è¯, åœ¨ç¨‹åºå´©æºƒçš„æ—¶å€™æˆ‘ä»¬å°±èƒ½å¾—åˆ°æœ‰ç”¨çš„ä¿¡æ¯äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fatal error: <span class="type">Configuration</span> couldnâ€™t be loaded. <span class="type">Verify</span> that <span class="type">Config</span>.<span class="type">JSON</span> <span class="keyword">is</span> valid.: file /<span class="type">Users</span>/<span class="type">John</span>/<span class="type">AmazingApp</span>/<span class="type">Sources</span>/<span class="type">AppDelegate</span>.swift, line <span class="number">17</span></div></pre></td></tr></table></figure>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>å¤„ç†ä¸å¯ç©ºçš„å¯é€‰ç±»å‹æœ‰ä¸€ä¸‹å‡ ä¸ªæ–¹æ³•:</p>
<ol>
<li>ç”¨æ‡’åŠ è½½å±æ€§, æ›¿ä»£ä¸å¯ç©ºçš„å¯é€‰ç±»å‹ã€‚</li>
<li>é€‚å½“çš„ä¾èµ–ç®¡ç†, æ›¿ä»£ä¸å¯ç©ºçš„å¯é€‰ç±»å‹ã€‚</li>
<li>åœ¨é‡åˆ°è¿™ç§æƒ…å†µçš„æ—¶å€™, è®©ç¨‹åºå´©æºƒ, å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ol>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://medium.com/@johnsundell/handling-non-optional-optionals-in-swift-e5706390f56f">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;optional&lt;/strong&gt;, å¯ä»¥è¯´æ˜¯ Swift ä¸­æœ€ä¸ºé‡è¦çš„ç‰¹æ€§, ä¹Ÿæ˜¯å®ƒè·Ÿ &lt;code&gt;Objective-C&lt;/code&gt; ä¸åŒçš„å…³é”®ç‰¹å¾ã€‚åœ¨ç¼–ç çš„æ—¶å€™å¼ºåˆ¶å¤„ç†é‚£äº›å¯èƒ½ä¸ºç©ºçš„å€¼, å¯ä»¥è®©ç¨‹åºæ›´å…·æœ‰å¯é¢„æµ‹æ€§, å‡å°‘é”™è¯¯å‘ç”Ÿçš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œåœ¨å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€äº›å˜é‡, æ˜æ˜æ˜¯ &lt;code&gt;optional&lt;/code&gt; çš„, ä½†åœ¨é€»è¾‘åˆä¸€å®šæ˜¯éç©ºçš„ã€‚æ¯”å¦‚è¯´ &lt;code&gt;controller&lt;/code&gt; ä¸­çš„ &lt;code&gt;view&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Swifty Tips âš¡ï¸</title>
    <link href="http://www.CepheusSun.com/Swifty%20Tips.html"/>
    <id>http://www.CepheusSun.com/Swifty Tips.html</id>
    <published>2017-05-29T16:05:23.000Z</published>
    <updated>2017-05-29T17:23:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>Swift å¼€å‘ä¸­çš„ä¸€äº›å°çš„æŠ€å·§</p>
<p>åˆšå¼€å§‹çš„æ—¶å€™, ç‰¹åˆ«å¥½å¥‡å¤§å‚æ˜¯æ€ä¹ˆæçš„, ä»–ä»¬çš„é¡¹ç›®é•¿ä»€ä¹ˆæ ·å­, ä»–ä»¬ç”¨å“ªäº›åº“â€¦æƒ³åœ¨å·¨äººçš„è‚©è†€ä¸Šå¼€å‘, å…å¾—æµªè´¹æ—¶é—´åœ¨é‚£äº›å·²ç»æœ‰å¾ˆå¥½è§£å†³æ–¹æ¡ˆçš„äº‹æƒ…ä¸Šã€‚</p>
<p>å››å¹´å‰ï¼Œæˆ‘å’Œå›¢é˜Ÿä¸­å¾ˆå¤šå¾ˆå‰å®³çš„äººè®¨è®ºè¿‡ä¸€äº›ç¼–ç¨‹å®è·µã€‚ä»Šå¤©å°±åˆ†äº«ä¸€äº›ä¸œè¥¿å§ã€‚</p>
<p>æ¬¢è¿æŒ‡æ­£ï¼ğŸš€</p>
<a id="more"></a>
<h2 id="æ»¥ç”¨å¼•ç”¨ç±»å‹"><a href="#æ»¥ç”¨å¼•ç”¨ç±»å‹" class="headerlink" title="æ»¥ç”¨å¼•ç”¨ç±»å‹"></a>æ»¥ç”¨å¼•ç”¨ç±»å‹</h2><p>åªæœ‰â€œåŠ¨æ€â€å¯¹è±¡æ‰ä½¿ç”¨å¼•ç”¨ç±»å‹ã€‚è¿™é‡Œçš„â€œåŠ¨æ€â€å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿçœ‹ä¸‹é¢çš„ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Car</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> model: <span class="type">String</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> cars: [<span class="type">Car</span>]</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fetchCars</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">registerCar</span><span class="params">(<span class="number">_</span> car: Car)</span></span> &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ğŸš— åœ¨è¿™é‡Œåªæ˜¯ä¸€ä¸ªå€¼ã€‚ä»–ä»£è¡¨çš„å°±æ˜¯ä¸€äº›æ•°æ®ã€‚å°±åƒ <code>1</code>ã€<code>2</code>ã€<code>3</code>ã€‚ è¿™ç§æ•°æ®æ˜¯â€œé™æ€â€çš„æ•°æ®(æ­»çš„)ã€‚ å®ƒä¸ä¼šå¤„ç†ä»»ä½•ä¸œè¥¿, æ‰€ä»¥å®ƒä¹Ÿæ²¡æœ‰å¿…è¦æ˜¯â€œåŠ¨æ€â€çš„, ä¹Ÿå°±æ˜¯è¯´, æ²¡å¿…è¦æŠŠå®ƒå®šä¹‰æˆå¼•ç”¨ç±»å‹ã€‚</p>
<p><strong>å¦ä¸€æ–¹é¢:</strong></p>
<p><code>CarManager</code> å°±éœ€è¦æ˜¯ä¸€ä¸ªâ€œåŠ¨æ€â€çš„å¯¹è±¡ã€‚å› ä¸ºè¿™ä¸ªå¯¹è±¡ä¼šå‘èµ·ç½‘ç»œè¯·æ±‚, ç„¶åå°†è¯·æ±‚ç»“æœä¿å­˜èµ·æ¥ã€‚åœ¨å€¼ç±»å‹å¯¹è±¡ä¸­æ˜¯ä¸èƒ½æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„, å› ä¸ºä»–ä»¬æ˜¯â€œé™æ€â€çš„æ•°æ®ã€‚æˆ‘ä»¬éœ€è¦çš„ <code>CarManager</code> å¯¹è±¡åœ¨ä¸€å®šçš„èŒƒå›´å†…æ˜¯åº”è¯¥æ˜¯åŠ¨æ€çš„, ä»–ä¼šè¯·æ±‚æ•°æ®, ä¹Ÿä¼šæ³¨å†Œæ–°çš„ <code>Car</code>ã€‚</p>
<p>è¿™ä¸ªä¸»é¢˜å®Œå…¨å¯ä»¥å†™ä¸€ç¯‡æ–‡ç« æ¥æ·±å…¥ã€‚æ¨èçœ‹çœ‹ <a href="https://news.realm.io/news/andy-matuschak-controlling-complexity/">Andy Matuschak çš„æ–‡ç« </a>, å’Œ <a href="https://developer.apple.com/videos/play/wwdc2015/414/">WWDC</a></p>
<h2 id="éšå¼è§£åŒ…å¯é€‰ç±»å‹"><a href="#éšå¼è§£åŒ…å¯é€‰ç±»å‹" class="headerlink" title="éšå¼è§£åŒ…å¯é€‰ç±»å‹(!)"></a>éšå¼è§£åŒ…å¯é€‰ç±»å‹(<code>!</code>)</h2><p>é»˜è®¤ä¸è¦éšå¼è§£åŒ…å¯é€‰ç±»å‹ã€‚ åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ä½ éƒ½å¯èƒ½ä¼šå¿˜æ‰è¿™ä»¶äº‹æƒ…ã€‚ä½†æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹åº”è¯¥è¿™æ ·åšæ¥å‡å°‘ç¼–è¯‘å™¨çš„å‹åŠ›ã€‚è€Œä¸”æˆ‘ä»¬ä¹Ÿéœ€è¦å»ç†è§£è¿™ä»¶äº‹æƒ…èƒŒåçš„é€»è¾‘ã€‚</p>
<p>åŸºæœ¬ä¸Š, å¦‚æœè¿™ä¸ªå±æ€§åœ¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­å¿…é¡»ä¸º <code>nil</code> ä½†æ˜¯ä¹‹åå°±ä¼šè¢«èµ‹å€¼,  å°±å¯ä»¥å®šä¹‰è¿™ä¸ªå±æ€§ä¸º optionalã€‚å› ä¸ºä½ è‚¯å®šä¸ä¼šåœ¨èµ‹å€¼ä¹‹å‰è®¿é—®è¿™ä¸ªå±æ€§, å¦‚æœç¼–è¯‘å™¨ä¸€ç›´è­¦å‘Šè¿™ä¸ªå€¼å¯èƒ½ä¸º <code>nil</code> çœŸçš„æŒºè®¨åŒçš„ã€‚</p>
<p>çœ‹çœ‹xibä¸­æ‹–å‡ºæ¥çš„å±æ€§:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeView</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">let</span> nameLabel: <span class="type">UILabel</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœè¿™æ ·å®šä¹‰çš„è¯, ç¼–è¯‘å™¨å°±ä¼šè®©ä½ åœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­ç»™<code>nameLabel</code>èµ‹å€¼ã€‚å› ä¸ºè¿™è¡Œä»£ç å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ª <code>View</code> æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½æœ‰ <code>nameLabel</code>ã€‚ ä½†æ˜¯, æœ‰ç—…å•Šï¼è‚¯å®šä¸èƒ½è¿™ä¹ˆå¹²å•Šã€‚å› ä¸ºå…¶å®åœ¨ <code>initWithCoder</code> ä¸­å·²ç»å¸®æˆ‘ä»¬å®ç°äº† <code>xib</code> ä¸­çš„ <code>label</code> å’Œè¿™ä¸ªå±æ€§ä¹‹é—´çš„å…³è”ã€‚æ˜ç™½äº†å—ï¼Ÿ è¿™ä¸ªå€¼æ°¸è¿œéƒ½ä¸å¯èƒ½ä¸ºç©º, å°±æ²¡æœ‰å¿…è¦åˆ¤æ–­è¿™ä¸ªä¸œè¥¿æ˜¯ä¸æ˜¯å­˜åœ¨äº†ã€‚æ‰€ä»¥ä¹Ÿä¸éœ€è¦å»èµ‹å€¼äº†å•Šã€‚</p>
<blockquote>
<p>ä½ :è¿™ç©æ„å„¿è‚¯å®šä¸å¯èƒ½æ˜¯ç©º, åˆ«çå‡ æŠŠæŠ¥é”™äº†<br>ç¼–è¯‘å™¨: å¥½çš„!</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeView</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">var</span> nameLabel: <span class="type">UILabel</span>!</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Q:</strong> åœ¨dequeueä¸€ä¸ªtableviewCell çš„æ—¶å€™èƒ½ä¸èƒ½(<code>!</code>)?<br><strong>A:</strong> è¿˜æ˜¯ä¸è¦å§ï¼è‡³å°‘ç»™ä¸€ä¸ª Crash å•Š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> cell = tableView.dequeueCell(...) <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">fatalError</span>(<span class="string">"Cannot dequeue cell with identifier <span class="subst">\(cellID)</span>"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ»¥ç”¨-AppDelegate"><a href="#æ»¥ç”¨-AppDelegate" class="headerlink" title="æ»¥ç”¨ AppDelegate"></a>æ»¥ç”¨ AppDelegate</h2><p><code>AppDelegate</code> ä¸æ˜¯æ‹¿æ¥ç»™ä½ åšä¿å­˜å…¨å±€å˜é‡çš„å®¹å™¨çš„(å…¨å±€å±æ€§ã€å·¥å…·æ–¹æ³•ã€ç®¡ç†ç±»ç­‰ç­‰ã€‚)ä»–åªæ˜¯ä¸€ä¸ªç”¨æ¥å®ç°ä¸€äº›åè®®çš„ç±»è€Œå·²ã€‚æ”¾è¿‡å®ƒå§ï¼</p>
<p>åœ¨ <code>applicationDidFinishLaunching</code> æ–¹æ³•é‡Œè‚¯å®šéƒ½ä¼šåšä¸€äº›å¾ˆé‡è¦çš„äº‹æƒ…, ä½†æ˜¯å½“é¡¹ç›®ä¸æ–­å˜å¤§çš„æ—¶å€™è¿™ç§æƒ…å†µå¾ˆå®¹æ˜“å˜çš„å¾ˆææ€–ã€‚åˆ›å»ºæ–°çš„ç±»(æ–‡ä»¶)æ¥åšè¿™äº›äº‹æƒ…å§ï¼</p>
<p><strong>ğŸ‘ Donâ€™t:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> persistentStoreCoordinator: <span class="type">NSPersistentStoreCoordinator</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">rgb</span><span class="params">(r: CGFloat, g: CGFloat, b: CGFloat)</span></span> -&gt; <span class="type">UIColor</span> &#123; ... &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">appDidFinishLaunching</span>... </span>&#123;</div><div class="line">    <span class="type">Firebase</span>.setup(<span class="string">"3KDSF-234JDF-234D"</span>)</div><div class="line">    <span class="type">Firebase</span>.logLevel = .verbose</div><div class="line">    <span class="type">AnotherSDK</span>.start()</div><div class="line">    <span class="type">AnotherSDK</span>.enableSomething()</div><div class="line">    <span class="type">AnotherSDK</span>.disableSomething()</div><div class="line">    <span class="type">AnotherSDK</span>.anotherConfiguration()</div><div class="line">    persistentStoreCoordinator = ...</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ğŸ‘ Do:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">appDidFinishLaunching</span>... </span>&#123;</div><div class="line">    <span class="type">DependencyManager</span>.configure()</div><div class="line">    <span class="type">CoreDataStack</span>.setup()</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" class="headerlink" title="é»˜è®¤å‚æ•°"></a>é»˜è®¤å‚æ•°</h2><p>ç»™ä¸€ä¸ªæ–¹æ³•çš„æŸäº›å‚æ•°è®¾ç½®é»˜è®¤å€¼æ˜¯éå¸¸æ–¹ä¾¿çš„äº‹æƒ…ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªç‰¹æ€§çš„è¯, å¯èƒ½å°±éœ€è¦ç»™åŒä¸€ä¸ªåŠŸèƒ½å†™å¥½å‡ ä¸ªæ–¹æ³•äº†ã€‚åƒä¸‹é¢ä¸€æ ·:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(<span class="number">_</span> string: String, options: String?)</span></span> &#123; ... &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(<span class="number">_</span> string: String)</span></span> &#123;</div><div class="line">  <span class="built_in">print</span>(string, options: <span class="literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰é»˜è®¤å‚æ•°å€¼, å°±å¯ä»¥æ˜¯è¿™æ ·çš„:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(<span class="number">_</span> string: String, options: String? = <span class="literal">nil</span>)</span></span> &#123;...&#125;</div></pre></td></tr></table></figure>
<p>å¾ˆç®€å•å¯¹å§ï¼ ç»™è‡ªå®šä¹‰ UI ç»„ä»¶è®¾ç½®é»˜è®¤é¢œè‰²ã€æä¾›é»˜è®¤çš„å‚æ•°ã€ç»™ç½‘ç»œè¯·æ±‚æ·»åŠ é»˜è®¤çš„è¶…æ—¶æ—¶é—´ç­‰ç­‰ã€‚ä½†æ˜¯, ä½¿ç”¨è¿™ä¸ªè¯­æ³•ç³–åœ¨é‡åˆ°ä¾èµ–æ³¨å…¥çš„æ—¶å€™å°±è¦å°å¿ƒäº†ã€‚</p>
<p>çœ‹ä¸‹é¢çš„ä¾‹å­:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TicketsViewModel</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> service: <span class="type">TicketService</span></div><div class="line">    <span class="keyword">let</span> database: <span class="type">TicketDatabase</span></div><div class="line">    <span class="keyword">init</span>(service: <span class="type">TicketService</span>,</div><div class="line">       database: <span class="type">TicketDatabase</span>) &#123; ... &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ App target:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> model = <span class="type">TicketsViewModel</span>(</div><div class="line">  service: <span class="type">LiveTicketService</span>()</div><div class="line">  database: <span class="type">LiveTicketDatabase</span>()</div><div class="line">)</div></pre></td></tr></table></figure>
<p>åœ¨ Test target:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> model = <span class="type">TicketsViewModel</span>(</div><div class="line">    service: <span class="type">MockTicketService</span>()</div><div class="line">    database: <span class="type">MockTicketDatabase</span>()</div><div class="line">)</div></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œä½¿ç”¨åè®®çš„åŸå› å°±æ˜¯æŠŠè¿™äº›åŠŸèƒ½ä»å…·ä½“çš„ç±»ä¸­æŠ½è±¡å‡ºæ¥ã€‚è¿™å°±ä½¿å¾—ä½ å¯ä»¥å‘è¿™ä¸ª <code>viewModel</code> ä¸­æ³¨å…¥ä»»ä½•ä½ æƒ³è¦çš„å…·ä½“å®ç°ã€‚ å¦‚æœè¿™é‡Œä½ æŠŠ <code>LiveTicketService</code> ä½œä¸ºé»˜è®¤çš„å‚æ•°, è¿™å°±ä½¿å¾—<code>TicketsViewModel</code> ä¾èµ–äº† <code>LiveTicketService</code>è¿™ä¹ˆä¸€ä¸ªå…·ä½“çš„ç±»å‹ã€‚è¿™è·Ÿæœ€åˆæƒ³è¦è¾¾åˆ°çš„ç›®çš„æœ‰äº†ä¸€äº›å†²çªã€‚</p>
<p><strong>ç°åœ¨æ²¡é‚£ä¹ˆæ–¹ä¾¿äº†å§ï¼Ÿ</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹åœ¨ä½  App è¿˜æœ‰ Test ä¸¤ä¸ª target ä¸­ã€‚ <code>TicketsViewModel</code> ä¼šè¢«åŒæ—¶æ·»åŠ åˆ°ä¸¤ä¸ª target ä¸­, ç„¶åæŠŠ <code>LiveTicketService</code> å’Œ <code>MockTicketService</code> åˆ†åˆ«æ·»åŠ ã€‚å¦‚æœ <code>TicketsViewModel</code>æ·»åŠ äº†å¯¹ <code>LiveTicketService</code> çš„ä¾èµ–ã€‚ Test target è‚¯å®šå°±ç¼–è¯‘ä¸è¿‡äº†ã€‚</p>
<h2 id="å¯å˜å‚æ•°å‡½æ•°"><a href="#å¯å˜å‚æ•°å‡½æ•°" class="headerlink" title="å¯å˜å‚æ•°å‡½æ•°"></a>å¯å˜å‚æ•°å‡½æ•°</h2><p>è¿™â€¦ å°±æ˜¯å¾ˆçˆ½å•Šï¼</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(<span class="number">_</span> numbers: Int...)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">return</span> numbers.<span class="built_in">reduce</span>(<span class="number">0</span>, +)</div><div class="line">&#125;</div><div class="line">sum(<span class="number">1</span>,<span class="number">2</span>)      <span class="comment">// 3</span></div><div class="line">sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)    <span class="comment">// 6</span></div><div class="line">sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)  <span class="comment">// 10</span></div></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨ç±»å‹åµŒå¥—"><a href="#ä½¿ç”¨ç±»å‹åµŒå¥—" class="headerlink" title="ä½¿ç”¨ç±»å‹åµŒå¥—"></a>ä½¿ç”¨ç±»å‹åµŒå¥—</h2><p>Swift æ”¯æŒå†…éƒ¨ç±»ã€‚æ‰€ä»¥æœ‰ç”¨å°±å¯ä»¥è¿™ä¹ˆåšï¼š</p>
<p><strong>ğŸ‘ Donâ€™t:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">PhotoCollectionViewCellStyle</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="keyword">default</span></div><div class="line">    <span class="keyword">case</span> photoOnly</div><div class="line">    <span class="keyword">case</span> photoAndDescription</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæšä¸¾å¯èƒ½åœ¨ <code>PhotoCollectionViewCell</code> ä¹‹å¤–å°±ä¸ä¼šå†ä½¿ç”¨åˆ°äº†ã€‚æ²¡ç†ç”±æŠŠè¿™ä¸ªæšä¸¾å£°æ˜æˆå…¨å±€çš„ã€‚</p>
<p><strong>ğŸ‘ Do:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PhotoCollectionViewCell</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Style</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> <span class="keyword">default</span></div><div class="line">        <span class="keyword">case</span> photoOnly</div><div class="line">        <span class="keyword">case</span> photoAndDescription</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">let</span> style: <span class="type">Style</span> = .<span class="keyword">default</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™å¾ˆå®¹æ˜“ç†è§£, æ¯•ç«Ÿ <code>Style</code> æœ¬æ¥å°±æ˜¯ç”¨æ¥æ ‡è®° <code>PhotoCollectionViewCell</code> çš„ã€‚è€Œä¸”è¿˜å°‘äº†23ä¸ªå­—ç¬¦å‘¢ã€‚</p>
<h2 id="ä½¿ç”¨-final-å…³é”®å­—-ğŸ"><a href="#ä½¿ç”¨-final-å…³é”®å­—-ğŸ" class="headerlink" title="ä½¿ç”¨ final å…³é”®å­— ğŸ"></a>ä½¿ç”¨ final å…³é”®å­— ğŸ</h2><p>å¦‚æœä½ ä¸éœ€è¦æ‹“å±•æŸäº›ç±», ä¹Ÿä¸å¸Œæœ›è¿™äº›ç±»è¢«æ‹“å±•, ä½¿ç”¨ <code>final</code> ä¿®é¥°å®ƒã€‚ä¸ç”¨æ‹…å¿ƒçŠ¯é”™, æ¯”å¦‚ <code>PhotoCollectionViewCell</code> è¿™ä¸ªç±», ä½ è¿˜æœ‰å¯èƒ½ç»§æ‰¿å®ƒå—ï¼Ÿ</p>
<p>è€Œä¸”:<strong>è¿™ä¹ˆåšå¯ä»¥èŠ‚çº¦ç¼–è¯‘æ—¶é—´ã€‚</strong></p>
<h2 id="ç»™å¸¸é‡å‘½åç©ºé—´"><a href="#ç»™å¸¸é‡å‘½åç©ºé—´" class="headerlink" title="ç»™å¸¸é‡å‘½åç©ºé—´"></a>ç»™å¸¸é‡å‘½åç©ºé—´</h2><p>åœ¨ OC ä¸­æ˜¯é€šè¿‡åœ¨å…¨å±€çš„å¸¸é‡å‰é¢åŠ  <code>PFX</code> æˆ–è€… <code>k</code> æ¥ç»™è¿™äº›å¸¸é‡å‘½åç©ºé—´çš„ã€‚ä½†æ˜¯ Swift å¯ä¸è¿™æ ·ã€‚</p>
<p><strong>ğŸ‘ Donâ€™t:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> ket kAnimationDuration: <span class="type">TimeInterval</span> = <span class="number">0.3</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">let</span> kLowAlpha = <span class="number">0.2</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">let</span> kAPIKey = <span class="string">"13511-5234-5234-59234"</span></div></pre></td></tr></table></figure>
<p><strong>ğŸ‘ Do:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Constant</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">UI</span> </span>&#123;</div><div class="line">        <span class="keyword">static</span> <span class="keyword">let</span> animationDuration: <span class="type">TimeInterval</span> = <span class="number">0.3</span></div><div class="line">        <span class="keyword">static</span> <span class="keyword">let</span> lowAlpha: <span class="type">CGFloat</span> = <span class="number">0.2</span>  </div><div class="line">    &#125;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Analytics</span> </span>&#123;</div><div class="line">        <span class="keyword">static</span> <span class="keyword">let</span> apiKey = <span class="string">"13511-5234-5234-59234"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä¸ªäººçš„åå¥½æ˜¯ä½¿ç”¨ <code>C</code> æ¥ä»£æ›¿ <code>Constant</code>, ä»–å·²ç»å¤Ÿæ¸…æ™°äº†ã€‚è¿™ä¸ªå¯ä»¥çœ‹ä½ è‡ªå·±å–œæ¬¢äº†ã€‚</p>
<p><strong>Before:</strong> <code>kAnimationDuration</code> æˆ–è€… <code>kAnalyticsAPIKey</code><br><strong>After:</strong> <code>C.UI.animationDuration</code> æˆ–è€… <code>C.Analytics.apiKey</code></p>
<h2 id="çš„ä½¿ç”¨"><a href="#çš„ä½¿ç”¨" class="headerlink" title="_ çš„ä½¿ç”¨"></a><code>_</code> çš„ä½¿ç”¨</h2><p><code>_</code> æ˜¯å¯¹æ²¡æœ‰ä½¿ç”¨åˆ°çš„å˜é‡çš„å ä½ç¬¦ã€‚ä»–å°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨â€è¿™ä¸ªå€¼æ˜¯ä»€ä¹ˆä¸é‡è¦â€ã€‚ ä¸ç„¶ç¼–è¯‘å™¨ä¼šæœ‰è­¦å‘Šâš ï¸ã€‚</p>
<p><strong>ğŸ‘ Donâ€™t</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="number">_</span> = name &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Name is not nil."</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>optional</code>å°±åƒä¸€ä¸ªç›’å­ã€‚å¯ä»¥ç›´æ¥çœ‹ä»–æ˜¯ä¸æ˜¯ç©ºçš„, æ²¡å¿…è¦æ¯æ¬¡éƒ½æŠŠé‡Œé¢çš„ä¸œè¥¿æ‹¿å‡ºæ¥ã€‚</p>
<p><strong>ğŸ‘ Do:</strong></p>
<ul>
<li>åˆ¤ç©º</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> name != <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Name is not nil."</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è¿”å›å€¼æ²¡ç”¨</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">_</span> = manager.removeCar(car) <span class="comment">// æˆåŠŸè¿”å›true</span></div></pre></td></tr></table></figure>
<ul>
<li>ConpletionHandler</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">service.fetchItems &#123;data, error , <span class="number">_</span> <span class="keyword">in</span></div><div class="line">    <span class="comment">// ç¬¬ä¸‰ä¸ªå‚æ•°æˆ‘ä¸åœ¨ä¹ä»–æ˜¯ä»€ä¹ˆ</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•å‘½å"><a href="#æ–¹æ³•å‘½å" class="headerlink" title="æ–¹æ³•å‘½å"></a>æ–¹æ³•å‘½å</h2><p>è¿™ç‚¹é€‚ç”¨äºæ‰€æœ‰éœ€è¦äººç±»å»é˜…è¯»çš„è¯­è¨€ã€‚ä»£ç æ€»æ˜¯ä¸é‚£ä¹ˆå®¹æ˜“ç†è§£çš„, ä¸è¦æµªè´¹åˆ«äººçš„ç²¾åŠ›ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">driver.driving()</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>æ˜¯æŠŠ <code>driver</code> æ ‡è®°æˆ <code>driving</code> çŠ¶æ€ï¼Ÿ</li>
<li>è¿˜æ˜¯æ£€æŸ¥ <code>driver</code> æ˜¯ä¸æ˜¯ <code>driving</code> çŠ¶æ€, å¹¶ä¸”è¿”å›ä¸€ä¸ª <code>bool</code> å€¼ï¼Ÿ</li>
</ul>
<p><strong>å¦‚æœè¦ç‚¹è¿›å»çœ‹æ‰çŸ¥é“è¿™æ–¹æ³•æ˜¯å¹²ä»€ä¹ˆçš„, è¿™ä¸ªå‘½åå°±æ˜¯å¤±è´¥äº†ã€‚</strong>å¤šäººååŒå¼€å‘æˆ–è€…å¤„ç†é—ç•™é¡¹ç›®çš„æ—¶å€™, ä½ è¯»åˆ«äººä»£ç çš„æ—¶é—´æ¯”ä½ å†™ä»£ç çš„æ—¶é—´éƒ½è¦é•¿ã€‚æ‰€ä»¥åœ¨å‘½åçš„æ—¶å€™æƒ³ç€åˆ«è®©çœ‹ä½ ä»£ç çš„äººç—›è‹¦ã€‚</p>
<h2 id="å…³äº-print"><a href="#å…³äº-print" class="headerlink" title="å…³äº print"></a>å…³äº print</h2><p>å¾ˆä¸¥è‚ƒçš„è¯´, ä¸è¦å¾—åˆ°ä¸€ä¸ª <code>error</code> æˆ–è€… <code>response</code> å°±åœ¨æ§åˆ¶å°æ‰“å°å‡ºæ¥ã€‚ä½ è¿™ä¹ˆåšè¿˜ä¸å¦‚ä¸æ‰“å°å‘¢ï¼æå¾—æ§åˆ¶å°ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿çœ‹èµ·æ¥çœŸçš„å¾ˆçˆ½å—ï¼Ÿ</p>
<p><strong>Do:</strong></p>
<ul>
<li>åœ¨ <code>framework</code> ä¸­ä½¿ç”¨ <code>error</code> çº§çš„ <code>log level</code>ã€‚</li>
<li>ä½¿ç”¨ä¸€äº›èƒ½å¤Ÿè®©ä½ æœ‰ä¸åŒè¾“å‡ºçº§åˆ«çš„ log åº“ã€‚<em>XGGLogger</em>ã€<em>SwiftyBeaver</em></li>
<li>ä¸è¦ç”¨ log æ¥ debug äº†ã€‚Xcode æœ‰å¾ˆå¤šæœ‰ç”¨çš„å·¥å…·<a href="https://www.objc.io/issues/19-debugging/debugging-case-study/">Debugging: A Case Study</a></li>
</ul>
<h2 id="æ²¡ç”¨çš„ä»£ç "><a href="#æ²¡ç”¨çš„ä»£ç " class="headerlink" title="æ²¡ç”¨çš„ä»£ç "></a>æ²¡ç”¨çš„ä»£ç </h2><p>ç»å¸¸åœ¨ä¸€äº›è€é¡¹ç›®é‡Œé¢è§åˆ°è¢«æ³¨é‡Šæ‰çš„ä»£ç , ä½†æ˜¯å‡ºæ¥æ²¡æœ‰é€šè¿‡æŠŠè¿™äº›ä»£ç æ‰“å¼€æ¥è§£å†³è¿‡é—®é¢˜ã€‚æ‰€ä»¥, æ—¢ç„¶è¿™äº›ä»£ç éƒ½æ²¡æœ‰ä»€ä¹ˆç”¨äº†, å°±åˆ äº†å®ƒ! è¿˜èƒ½å¢åŠ ä»£ç çš„å¯è¯»æ€§, çœ‹èµ·æ¥æ•´æ´çš„ä»£ç æ€»è¦è®©äººèˆ’æœä¸€äº›ã€‚</p>
<p><strong>æœ€åæ¨èä¸€ä¸ªå¥½æ–‡<a href="https://medium.com/@gokselkoksal/swifty-tips-%EF%B8%8F-8564553ba3ec">Using SwiftLint and Danger for Swift Best Practices</a></strong></p>
<p><strong><a href="https://medium.com/@gokselkoksal/swifty-tips-%EF%B8%8F-8564553ba3ec">åŸæ–‡åœ°å€</a></strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Swift å¼€å‘ä¸­çš„ä¸€äº›å°çš„æŠ€å·§&lt;/p&gt;
&lt;p&gt;åˆšå¼€å§‹çš„æ—¶å€™, ç‰¹åˆ«å¥½å¥‡å¤§å‚æ˜¯æ€ä¹ˆæçš„, ä»–ä»¬çš„é¡¹ç›®é•¿ä»€ä¹ˆæ ·å­, ä»–ä»¬ç”¨å“ªäº›åº“â€¦æƒ³åœ¨å·¨äººçš„è‚©è†€ä¸Šå¼€å‘, å…å¾—æµªè´¹æ—¶é—´åœ¨é‚£äº›å·²ç»æœ‰å¾ˆå¥½è§£å†³æ–¹æ¡ˆçš„äº‹æƒ…ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å››å¹´å‰ï¼Œæˆ‘å’Œå›¢é˜Ÿä¸­å¾ˆå¤šå¾ˆå‰å®³çš„äººè®¨è®ºè¿‡ä¸€äº›ç¼–ç¨‹å®è·µã€‚ä»Šå¤©å°±åˆ†äº«ä¸€äº›ä¸œè¥¿å§ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¢è¿æŒ‡æ­£ï¼ğŸš€&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Swift Syntax Cheat Codes</title>
    <link href="http://www.CepheusSun.com/Swift%20Syntax%20Cheat%20Codes.html"/>
    <id>http://www.CepheusSun.com/Swift Syntax Cheat Codes.html</id>
    <published>2017-05-23T16:05:23.000Z</published>
    <updated>2017-05-24T03:24:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä¸€äº›å¾ˆå¸¸è§çš„è¯­æ³•ã€‚</p>
<h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">() -&gt; <span class="type">Void</span></div></pre></td></tr></table></figure>
<p>ä¹Ÿå«åš <code>åŒ¿åå‡½æ•°</code>ã€‚é—­åŒ…æ˜¯è‡ªåŒ…å«çš„å‡½æ•°ä»£ç å—ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­è¢«ä¼ é€’å’Œä½¿ç”¨ã€‚åœ¨ <code>C</code> å’Œ <code>OC</code> ä¸­æœ‰ <code>block</code> ä¸ä¹‹å¯¹åº”ã€‚</p>
<p>å¦‚æœä½ ä¹‹å‰å°±æœ‰ iOS å¼€å‘ç»éªŒ, ä½ è‚¯å®šçœ‹åˆ°è¿‡ UIView åŠ¨ç”»çš„ API</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">animate</span>(<span class="title">withDuration</span> <span class="title">duration</span>: <span class="title">NSTimeInterval</span>,</div><div class="line"> <span class="title">animations</span>: @<span class="title">escaping</span>() -&gt; <span class="title">Void</span>)</span></div></pre></td></tr></table></figure>
<p><code>animations</code>å°±æ˜¯åŠ¨ç”»çš„å‚æ•°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span>.animate(withDuration: <span class="number">10.0</span>, animations: &#123;</div><div class="line">    button.alpha = <span class="number">0</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><code>animationWithDuration</code> æ–¹æ³•å°±ä¼šä½¿ç”¨è¿™ä¸ªé—­åŒ…åšä¸€ä»¶äº‹æƒ…:è®©buttonæ…¢æ…¢çš„æ¶ˆå¤±ã€‚</p>
<h3 id="å°¾éšé—­åŒ…"><a href="#å°¾éšé—­åŒ…" class="headerlink" title="å°¾éšé—­åŒ…"></a>å°¾éšé—­åŒ…</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span>.animate(withDuration: <span class="number">10.0</span>) &#123; </div><div class="line">    button.alpha = <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯ Swift çš„ç‰¹æ€§ä¹‹ä¸€, è¿™æ ·å¯ä»¥èŠ‚çœä¸€äº›æ²¡ä»€ä¹ˆå¿…è¦å­˜åœ¨çš„ä»£ç ã€‚çœ‹è¿™æ®µçš„ä»£ç , è·Ÿä¸Šé¢çš„ä»£ç è°ƒç”¨çš„æ˜¯åŒä¸€ä¸ª API, åªæ˜¯è¿™æ®µä»£ç ä½¿ç”¨äº†æ›´ç®€æ´çš„è¯­æ³•ã€‚</p>
<p>å› ä¸º <code>animate</code> è¿™ä¸ªæ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…â€”<strong>å°¾éšé—­åŒ…</strong>ã€‚å°¾éšé—­åŒ…å…è®¸æˆ‘ä»¬åœ¨ç¼–ç çš„æ—¶å€™çœç•¥æ‰æœ€åçš„å‚æ•°å, å¹¶è®©ä»–ä»å‚æ•°åˆ—è¡¨é‚£ä¸ªæ‹¬å·é‡Œé¢ç§»å‡ºæ¥ã€‚è¿™æ ·ä¼šè®©ä»£ç æ›´ä¼˜é›…ç®€æ´ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">say</span><span class="params">(<span class="number">_</span> message: String, completion: @escaping <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(message)</div><div class="line">    completion()</div><div class="line">&#125;</div><div class="line"><span class="comment">// æ²¡æœ‰ä½¿ç”¨å°¾éšé—­åŒ…</span></div><div class="line">say(<span class="string">"Hello"</span>, completion: &#123;</div><div class="line">    <span class="comment">// prints: "Hello" </span></div><div class="line">    <span class="comment">// Do some other stuff</span></div><div class="line">&#125;)</div><div class="line"><span class="comment">// ä½¿ç”¨äº†å°¾éšé—­åŒ…</span></div><div class="line">say(<span class="string">"Hello"</span>) &#123;</div><div class="line">    <span class="comment">// prints: "Hello"</span></div><div class="line">    <span class="comment">// Do some other stuff</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typealias</span></div></pre></td></tr></table></figure>
<p>ç±»å‹åˆ«åæ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å°å·¥å…·, èƒ½å°½å¯èƒ½å°‘çš„å‡å°‘é‡å¤ä»£ç ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">dance</span><span class="params">(<span class="keyword">do</span>:<span class="params">(Int, String, Double)</span></span></span> -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)) &#123;&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç çš„åŠŸèƒ½å…¶å®å¾ˆç®€å•, ä½†æ˜¯å¦‚æœåœ¨å…¶ä»–æ–¹æ³•ä¸­ä¹Ÿéœ€è¦ä¼ é€’è¿™ä¸ªé—­åŒ…çš„è¯, æˆ‘ä»¬å°±åº”è¯¥è®°ä½è¿™ä¸ªé—­åŒ…, å¹¶ä¸”ä¿è¯åœ¨ä»»ä½•æˆ‘ä»¬ä½¿ç”¨å®ƒçš„åœ°æ–¹éƒ½æ˜¯ä¸€è‡´çš„, ä¸ç„¶ç¼–è¯‘å™¨å¯èƒ½å°±ä¸é«˜å…´äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">dance</span><span class="params">(<span class="keyword">do</span>: <span class="params">(Int, String, Double)</span></span></span> -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)) &#123; &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sing</span><span class="params">(<span class="keyword">do</span>: <span class="params">(Int, String, Double)</span></span></span> -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)) &#123; &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">act</span><span class="params">(<span class="keyword">do</span>: <span class="params">(Int, String, Double)</span></span></span> -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)) &#123; &#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æœæŸä¸ªæ—¶åˆ»æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªé—­åŒ…ã€‚è¿™å°±å°´å°¬äº†, ä¸Šé¢ä¸‰ä¸ªæ–¹æ³•éƒ½éœ€è¦å»ä¿®æ”¹ã€‚ è¿™å°±æ˜¯ä½¿ç”¨<strong>ç±»å‹åˆ«å</strong>çš„åœºæ™¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typealias</span> <span class="type">TripleThreat</span> = (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>) -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">dance</span><span class="params">(dance: TripleThreat)</span></span> &#123; &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">act</span><span class="params">(act: TripleThreat)</span></span> &#123; &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sing</span><span class="params">(sing: TripleThreat)</span></span> &#123; &#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å†™çš„è¯, åªè¦æˆ‘ä»¬éœ€è¦ä¿®æ”¹è¿™ä¸ªé—­åŒ…çš„æ—¶å€™, å°±åªéœ€è¦ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹äº†ã€‚</p>
<p><strong>å–œé—»ä¹è§çš„ç±»å‹åˆ«å</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">typealias Void = ()</div><div class="line">typealias NSTimeInterval = Double</div></pre></td></tr></table></figure>
<h3 id="å‚æ•°åç¼©å†™"><a href="#å‚æ•°åç¼©å†™" class="headerlink" title="å‚æ•°åç¼©å†™"></a>å‚æ•°åç¼©å†™</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$<span class="number">0</span>,$<span class="number">1</span>,$<span class="number">2</span></div></pre></td></tr></table></figure>
<p>ä¸€ä¸ªé—­åŒ…å†…æœ‰å‚æ•°çš„æƒ…å†µä¸‹, ä½ å¯ä»¥åœ¨é—­åŒ…å®šä¹‰ä¸­çœç•¥å‚æ•°åˆ—è¡¨ï¼Œå¹¶ä¸”å¯¹åº”å‚æ•°åç§°ç¼©å†™çš„ç±»å‹ä¼š é€šè¿‡å‡½æ•°ç±»å‹è¿›è¡Œæ¨æ–­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">say</span><span class="params">(<span class="number">_</span> message: String, completion: <span class="params">(<span class="number">_</span> goodbye: String)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(message)</div><div class="line">    completion(<span class="string">"Goodbye"</span>)</div><div class="line">&#125;</div><div class="line">...</div><div class="line">say(<span class="string">"Hi"</span>) &#123; (goodbye: <span class="type">String</span>) -&gt; <span class="type">Void</span> <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(goodbye)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints: "Hi"</span></div><div class="line"><span class="comment">// prints: "Goodbye"</span></div></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿™ä¸ªå°¾éšé—­åŒ…æœ‰ä¸€ä¸ª <code>String</code> ç±»å‹çš„ <code>goodbye</code> å‚æ•°ã€‚Xcode ä¼šè‡ªåŠ¨æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªå…ƒç»„é‡Œé¢ã€‚ç”¨ <code>in</code> æ¥è¡¨ç¤ºå‚æ•°ã€è¿”å›å€¼çš„ç»“æŸã€‚å¹¶å¦èµ·ä¸€è¡Œæ¥å®ç°æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ã€‚å½“è¿™ä¸ªé—­åŒ…å¾ˆå°çš„æ—¶å€™ï¼Œè¿™æ ·å†™å°±æ˜¾å¾—ä»£ç éå¸¸çš„å†—é•¿äº†ã€‚æˆ‘ä»¬æ¥æ”¹é€ ä¸€ä¸‹æ®µä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(goodbye: <span class="type">String</span>) -&gt; <span class="type">Void</span> <span class="keyword">in</span></div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å®Œå…¨æ²¡æœ‰å¿…è¦å†™å‡ºæ¥ã€‚ä½¿ç”¨å‚æ•°åç¼©å†™å°±å¥½äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">say(<span class="string">"Hi"</span>) &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line"><span class="comment">// prints: "Hi"</span></div><div class="line"><span class="comment">// prints: "Goodbye"</span></div></pre></td></tr></table></figure>
<p>ä½ çœ‹, è¿™æ ·å†™å®Œå…¨çœç•¥æ‰äº†é—­åŒ…çš„å‚æ•°è¿˜æœ‰è¿”å›å€¼å£°æ˜çš„ä»£ç ã€‚å› ä¸ºåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨å‚æ•°åã€‚æ¯ä¸ªå‚æ•°éƒ½æŒ‰ç…§å£°æ˜çš„é¡ºåºå‘½åå¥½äº†ã€‚è¿™ä¹ˆç®€å•, ç›´æ¥æ”¾åœ¨ä¸€è¡Œä»£ç é‡Œå°±å¯ä»¥äº†ã€‚</p>
<p>å¦‚æœæœ‰ä¸æ­¢ä¸€ä¸ªå‚æ•°çš„æ—¶å€™åº”è¯¥æ€ä¹ˆå¼„å‘¢ï¼Ÿæˆ‘ä¹Ÿä¸æƒ³è§£é‡Šäº†, ç›´æ¥çœ‹ä¸‹é¢çš„ä»£ç : </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(goodbye: <span class="type">String</span>, name: <span class="type">String</span>, age: <span class="type">Int</span>) -&gt; <span class="type">Void</span> <span class="keyword">in</span></div><div class="line"><span class="comment">// $0: goodbye</span></div><div class="line"><span class="comment">// $1: name</span></div><div class="line"><span class="comment">// $2: age</span></div></pre></td></tr></table></figure>
<h3 id="è¿”å›-Self"><a href="#è¿”å›-Self" class="headerlink" title="è¿”å› Self"></a>è¿”å› Self</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-&gt; <span class="type">Self</span></div></pre></td></tr></table></figure>
<p>Swift2.0 å¸¦æ¥çš„ä¸€å¤§å †æ“ä½œç¬¦(map, flatmap), è¿™äº›æ“ä½œç¬¦æ›´ç»™åŠ›çš„æ˜¯è®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ <code>.</code> è¯­æ³•é“¾å¼çš„è°ƒç”¨ä¸€ç³»åˆ—æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span> , <span class="number">2</span>, <span class="number">3</span>, <span class="literal">nil</span>, <span class="number">5</span>]</div><div class="line">    .flatMap &#123;$<span class="number">0</span>&#125;    <span class="comment">// ç§»é™¤ç©º</span></div><div class="line">    .<span class="built_in">filter</span> &#123;$<span class="number">0</span> &lt; <span class="number">3</span>&#125; <span class="comment">// è¿‡æ»¤å¤§äº2çš„å€¼</span></div><div class="line">    .<span class="built_in">map</span> &#123;$<span class="number">0</span> * <span class="number">100</span>&#125;  <span class="comment">// æ¯ä¸ªå€¼æ”¾å¤§100å€</span></div><div class="line"><span class="comment">// [100, 200]</span></div></pre></td></tr></table></figure>
<p>è¿™æ ·å¤ªä¼˜é›…äº†, æ—¢å¯è¯»åˆæ˜“äºç†è§£ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬ä¸º<code>String</code>å»ºä¸€ä¸ªæ‰©å±•, åœ¨å­—ç¬¦ä¸²çš„æœ¬èº«ä¸Šæ‰§è¡Œä¸€äº›æ“ä½œ, è€Œä¸ä½¿å‡½æ•°è¿”å› <code>Void</code> è€Œæ˜¯ä»–è‡ªå·±.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// extension UIView</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">with</span><span class="params">(backgroundColor: UIColor)</span></span> -&gt; <span class="type">Self</span> &#123;</div><div class="line">    backgroundColor = color</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">with</span><span class="params">(cornerRadius: CGFloat)</span></span> -&gt; <span class="type">Self</span> &#123;</div><div class="line">    layer.cornerRadius = <span class="number">3</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> view = <span class="type">UIView</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">10</span>, height: <span class="number">10</span>))</div><div class="line">          .with(backgroundColor: .black)</div><div class="line">          .with(cornerRadius: <span class="number">3</span>)</div></pre></td></tr></table></figure>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://medium.com/swift-programming/swift-syntax-cheat-codes-9ce4ab4bc82e">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä¸€äº›å¾ˆå¸¸è§çš„è¯­æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é—­åŒ…&quot;&gt;&lt;a href=&quot;#é—­åŒ…&quot; class=&quot;headerlink&quot; title=&quot;é—­åŒ…&quot;&gt;&lt;/a&gt;é—­åŒ…&lt;/h3&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;() -&amp;gt; &lt;span class=&quot;type&quot;&gt;Void&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¹Ÿå«åš &lt;code&gt;åŒ¿åå‡½æ•°&lt;/code&gt;ã€‚é—­åŒ…æ˜¯è‡ªåŒ…å«çš„å‡½æ•°ä»£ç å—ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­è¢«ä¼ é€’å’Œä½¿ç”¨ã€‚åœ¨ &lt;code&gt;C&lt;/code&gt; å’Œ &lt;code&gt;OC&lt;/code&gt; ä¸­æœ‰ &lt;code&gt;block&lt;/code&gt; ä¸ä¹‹å¯¹åº”ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¹‹å‰å°±æœ‰ iOS å¼€å‘ç»éªŒ, ä½ è‚¯å®šçœ‹åˆ°è¿‡ UIView åŠ¨ç”»çš„ API&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Picking the right way of failing in Swift</title>
    <link href="http://www.CepheusSun.com/Picking%20the%20right%20way%20of%20failing%20in%20Swift.html"/>
    <id>http://www.CepheusSun.com/Picking the right way of failing in Swift.html</id>
    <published>2017-05-20T04:37:45.000Z</published>
    <updated>2017-05-20T04:37:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>Swift çš„ä¸€å¤§ç‰¹è‰²å°±æ˜¯ç¼–è¯‘å®‰å…¨ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“çš„ç¼–å†™å‡ºå¯é¢„æµ‹æ€§çš„ä»£ç , å¹¶ä¸”èƒ½å‹¾å‡å°‘è¿è¡Œæ—¶é”™è¯¯çš„å‘ç”Ÿã€‚ä½†æ˜¯, åœ¨å®é™…çš„æƒ…å†µä¸­, é”™è¯¯å‘ç”Ÿçš„åŸå› æ˜¯åƒå¥‡ç™¾æ€ªçš„ã€‚</p>
<p>æˆ‘ä»¬ä»Šå¤©æ¥çœ‹ä¸€ä¸‹å¦‚æœæ­£ç¡®çš„å»å¤„ç†å„ç±»é”™è¯¯, ä»¥åŠæˆ‘ä»¬æœ‰ä»€ä¹ˆå·¥å…·æ¥åšè¿™ä»¶äº‹æƒ…ã€‚ä¸Šä¸€ç¯‡æ–‡ç« ç ”ç©¶äº†å¦‚ä½•å¤„ç† <code>non-optional</code>ã€‚ åœ¨é‚£ç¯‡æ–‡ç« ä¸­æˆ‘ä½¿ç”¨ <code>guard</code> + <code>preconditionFailure()</code> ä»£æ›¿äº†å¼ºåˆ¶è§£åŒ…ã€‚</p>
<p>ä¹‹åå¾ˆå¤šäººéƒ½åœ¨é—® <code>preconditionFailure()</code> å’Œ <code>assert()</code> æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ã€‚æˆ‘ä»¬å†ä»”ç»†çš„çœ‹çœ‹è¿™äº›è¯­è¨€ç‰¹æ€§ã€‚æœ€é‡è¦çš„æ˜¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨å“ªä¸€ç§ï¼Ÿ</p>
<a id="more"></a>
<h3 id="Letâ€™s-start-with-a-list"><a href="#Letâ€™s-start-with-a-list" class="headerlink" title="Letâ€™s start with a list"></a>Letâ€™s start with a list</h3><p>æˆ‘å…ˆæŠŠæˆ‘çŸ¥é“çš„æ‰€æœ‰å¼‚å¸¸å¤„ç†æ–¹æ³•åˆ—ä¸¾å‡ºæ¥ã€‚</p>
<ul>
<li><strong>è¿”å› <code>nil</code> æˆ–è€…æ˜¯ä¸€ä¸ª error æšä¸¾å€¼</strong>, æœ€ç®€å•çš„å¼‚å¸¸å¤„ç†æœºåˆ¶å°±æ˜¯ç›´æ¥åœ¨å‘ç”Ÿé”™è¯¯çš„æ–¹æ³•ä¸­è¿”å› <code>nil</code> æˆ–è€…æ˜¯ <code>.error</code>(ä½¿ç”¨äº†ä¸€ä¸ªæšä¸¾æ¥åšä¸ºè¿”å›å€¼ç±»å‹çš„æ—¶å€™)ã€‚è¿™ä¸­åšæ³•åœ¨å¾ˆå¤šçš„åœºæ™¯ä¸­éƒ½æ˜¯æœ‰æ•ˆçš„, ä½†æ˜¯å¦‚æœä»»ä½•æƒ…å†µä¸‹éƒ½è¿™ä¹ˆå¹²çš„è¯ã€‚å¯èƒ½ä¼šå¯¼è‡´ä½ ä»£ç ä¸­çš„ API ç¼–çš„éå¸¸ç¹çã€‚ä¹Ÿä¼šå¸¦æ¥ä¸€äº›é€»è¾‘çš„é”™è¯¯ã€‚</li>
<li><strong>æŠ›å‡ºé”™è¯¯ä¿¡æ¯</strong>, è¿™è¦æ±‚åœ¨å¤„ç†æ½œåœ¨çš„é”™è¯¯æ˜¯ä½¿ç”¨<code>do</code>ã€<code>try</code>ã€<code>catch</code> è¯­å¥ã€‚å¦å¤–å¦‚æœä½¿ç”¨ <code>tryï¼Ÿ</code>é”™è¯¯ä¼šè¢«å¿½ç•¥æ‰ã€‚</li>
<li><strong>ä½¿ç”¨æ–­è¨€ <code>assert()</code> å’Œ <code>assertionFailure()</code></strong>, æ¥ç¡®å®šè¿™ä¸ªè¡¨è¾¾å¼æ˜¯ä¸æ˜¯æˆç«‹ã€‚é»˜è®¤æƒ…å†µä¸‹, åœ¨ Debug ç¯å¢ƒä¸‹ä¼šå¯¼è‡´å¼‚å¸¸çš„æŠ›å‡ºã€‚åœ¨ release ä¸‹ä¸€åœºä¼šè¢«å¿½ç•¥ã€‚æ‰€ä»¥æ— æ³•ä¿è¯è¿™ä¸ªæ–­è¨€åœ¨å‡ºå‘çš„æ—¶å€™, ç¨‹åºä¼šç«‹é©¬åœæ­¢ã€‚æ‰€ä»¥è¿™ç§æ¨¡å¼ä¹Ÿå¯ä»¥è¢«ç†è§£è¿è¡Œæ—¶è­¦å‘Šã€‚</li>
<li><strong>ä½¿ç”¨ <code>precondition()</code> å’Œ <code>preconditionFailure()</code></strong>æ¥ä»£æ›¿æ–­è¨€ã€‚è·Ÿæ–­ä¹‰æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å®ƒä»¬åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šå‘ç”Ÿ, å¯ä»¥ç¡®ä¿åœ¨å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ç¨‹åºä¼šç«‹é©¬åœæ­¢ã€‚</li>
<li><strong>è°ƒç”¨ <code>fataError()</code></strong>, è¿™ä¸ªå‡½æ•°åœ¨ Xcode è‡ªåŠ¨ç”Ÿæˆçš„ <code>init(coder:)</code> ä¸­å¤§æ¦‚éƒ½çœ‹åˆ°è¿‡ã€‚åªè¦è¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨å°±ä¼šç«‹é©¬æ€æ‰å½“å‰è¿›ç¨‹ã€‚</li>
<li><strong>è°ƒç”¨ <code>exit()</code></strong>, ä½¿ç”¨è¿™ä¸ªä»£ç ç›´æ¥ç»“æŸè¿›ç¨‹ã€‚è¿™åœ¨å‘½ä»¤è¡Œè¿˜æœ‰è„šæœ¬ä¸­æ˜¯éå¸¸æœ‰æ•ˆçš„æ–¹æ³•ã€‚</li>
</ul>
<h3 id="æ˜¯å¦å¯æ¢å¤"><a href="#æ˜¯å¦å¯æ¢å¤" class="headerlink" title="æ˜¯å¦å¯æ¢å¤"></a>æ˜¯å¦å¯æ¢å¤</h3><p>è¿™ä¸ªå¼‚å¸¸å‘ç”Ÿä¹‹åç¨‹åºè¿˜èƒ½å¦ä»å¼‚å¸¸ä¸­æ¢å¤æ˜¯é€‰æ‹©å¼‚å¸¸å¤„ç†æ–¹å¼çš„é‡è¦å› ç´ ã€‚</p>
<p>æ¯”å¦‚è¯´ã€‚æˆ‘ä»¬å‘æœåŠ¡å™¨å‘å¼ºè¯·æ±‚, ç„¶åå¾—åˆ°äº†é”™è¯¯çš„è¯·æ±‚ç»“æœã€‚è¿™ç§æƒ…å†µæ— è®ºæˆ‘ä»¬æ˜¯å¤šä¹ˆç‰›é€¼çš„ç¨‹åºå‘˜, æˆ‘ä»¬ä½¿ç”¨äº†å¤šä¹ˆå¼ºå¤§çš„æœåŠ¡å™¨åŸºæœ¬ä¸Šè‚¯å®šéƒ½ä¼šå‘ç”Ÿã€‚æŠŠè¿™ç§å¼‚å¸¸çœ‹ä½œæ˜¯è‡´å‘½å¼‚å¸¸æˆ–è€…æ˜¯ä¸å¯æ¢å¤çš„å¼‚å¸¸å¯èƒ½å°±ä¸å¯¹äº†ã€‚è¿™ç§åœºæ™¯ä¸­, æˆ‘ä»¬å¸Œæœ›çš„å¯èƒ½å°±æ˜¯ç»™ç”¨æˆ·å±•ç¤ºä¸€äº›é”™è¯¯ä¿¡æ¯å°±å¯ä»¥äº†ã€‚</p>
<p>æ—¢ç„¶è¿™æ ·, åœ¨è¿™ç§åœºæ™¯ä¸­, é€‰æ‹©ä»€ä¹ˆæ ·çš„æ–¹æ³•æ¥å¤„ç†å¼‚å¸¸å‘¢ï¼Ÿå¦‚æœä½ ä»”ç»†çœ‹äº†ä¸Šé¢çš„åˆ—è¡¨, æˆ‘ä»¬å…¶å®å¯ä»¥æŠŠè¿™äº›æŒ‰ç…§æ˜¯å¦å¯æ¢å¤å½’ä½ä¸¤ç±»:</p>
<p><strong>å¯æ¢å¤çš„</strong></p>
<ul>
<li>è¿”å› <code>nil</code> æˆ–è€…ä¸€ä¸ª <code>error</code> æšä¸¾å€¼ã€‚</li>
<li>æŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚</li>
</ul>
<p><strong>ä¸å¯æ¢å¤çš„</strong></p>
<ul>
<li>assert()</li>
<li>precondition()</li>
<li>fatalError()</li>
<li>exit()</li>
</ul>
<p>æ—¢ç„¶æˆ‘ä»¬å¤„ç†çš„æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ä»»åŠ¡, è¿”å› <code>nil</code> æˆ–è€… <code>error</code> æšä¸¾å€¼å°±æ˜¯æœ€å¥½çš„é€‰æ‹©äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataLoader</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Result</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> success(<span class="type">Data</span>)</div><div class="line">        <span class="keyword">case</span> failure(<span class="type">Error</span>?)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadData</span><span class="params">(from url: URL, completionHandler: @escaping <span class="params">(Result)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">        <span class="keyword">let</span> task = <span class="type">URLSession</span>.shared.dataTask(with: url) &#123;</div><div class="line">            data, response, error <span class="keyword">in</span></div><div class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> data = data <span class="keyword">else</span> &#123;</div><div class="line">                completionHandler(.failure(error))</div><div class="line">                <span class="keyword">return</span></div><div class="line">            &#125;</div><div class="line">            completionHandler(.success(data))</div><div class="line">        &#125;</div><div class="line">        task.resume()</div><div class="line">    &#125;   </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä»»åŠ¡æ˜¯åŒæ­¥çš„, æŠ›å‡ºé”™è¯¯åº”è¯¥æ˜¯æœ€å¥½çš„æ–¹æ³•äº†ã€‚æ¯•ç«Ÿ API ä¹Ÿæ˜¯è¿™æ ·è®¾è®¡çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StringFormatter</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Error</span>: <span class="title">Swift</span>.<span class="title">Error</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> emptyString</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">format</span><span class="params">(<span class="number">_</span> string:String)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">guard</span> !string.isEmpty <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">Error</span>.emptyString</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> string.replacingOccurrences(of: <span class="string">"\n"</span>, with: <span class="string">" "</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨æœ‰äº›æƒ…å†µä¸‹, é”™è¯¯æ˜¯ä¸å¯æ¢å¤çš„ã€‚æ¯”å¦‚è¯´, æˆ‘ä»¬éœ€è¦åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™åŠ è½½é…ç½®æ–‡ä»¶ã€‚å¦‚æœè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸¢å¤±äº†, è¿™ä¼šæŠŠç¨‹åºå¸¦å…¥æœªå®šä¹‰çš„çŠ¶æ€ä¸­ã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ crash å¯èƒ½å°±è¦æ¯”è®©ç¨‹åºå°±è¿è¡Œå¥½å¾—å¤šäº†ã€‚è¿™ç§æƒ…å†µä¸‹, ä½¿ç”¨æ›´å¼ºçš„å¹¶ä¸”ä¸å¯æ¢å¤çš„æ–¹æ³•æ¥è®©ç¨‹åºå´©æºƒä¼šæ˜¯æ›´åˆé€‚çš„ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, ä½¿ç”¨ <code>preconditionFailure()</code> æ¥åœæ­¢è¿è¡Œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> config = <span class="type">FileLoader</span>().loadFile(name: <span class="string">"Config.json"</span>) <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">preconditionFailure</span>(<span class="string">"Failed to load config file"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç¨‹åºé”™è¯¯å’Œè¿è¡Œé”™è¯¯"><a href="#ç¨‹åºé”™è¯¯å’Œè¿è¡Œé”™è¯¯" class="headerlink" title="ç¨‹åºé”™è¯¯å’Œè¿è¡Œé”™è¯¯"></a>ç¨‹åºé”™è¯¯å’Œè¿è¡Œé”™è¯¯</h3><p>å¦å¤–ä¸€ä¸ªé‡è¦çš„æ ‡å‡†æ˜¯:å¼‚å¸¸çš„å‘ç”ŸåŸå› æ˜¯é€»è¾‘è¿˜æ˜¯é…ç½®, æˆ–è€…è¯´è¿™ä¸ªé”™è¯¯æ˜¯ä¸æ˜¯ç¨‹åºæµç¨‹ä¸­åˆæ³•çš„éƒ¨åˆ†ã€‚åŸºæœ¬ä¸Šåˆ¤æ–­çš„æ ‡å‡†å°±æ˜¯è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯å› ä¸ºç¨‹åºå‘˜è¿˜æ˜¯å¤–éƒ¨å› ç´ ã€‚</p>
<p>ä¸ºäº†å‡å°‘éº»çƒ¦, å¯èƒ½ä½ æ›´æ„¿æ„ä½¿ç”¨ä¸å¯æ¢å¤çš„æ–¹æ³•æ¥å¤„ç†å„ç±»é”™è¯¯ã€‚è¿™æ ·ä½ å°±ä¸ç”¨å†™å„ç§ä»£ç æ¥å¤„ç†å„ç§ç‰¹æ®Šæƒ…å†µäº†, å¹¶ä¸”å¦‚æœæµ‹è¯•åšå¾—å¥½çš„è¯, è¿™äº›é”™è¯¯å°±èƒ½å¤Ÿæ—©çš„è¢«æ•è·åˆ°äº†ã€‚</p>
<p>æ¯”å¦‚ã€‚ æˆ‘ä»¬åœ¨åšä¸€ä¸ªç•Œé¢, éœ€è¦ä¸€ä¸ª <code>viewModel</code> åœ¨ä½¿ç”¨ä¹‹å‰è·Ÿä»–åšå¥½ç»‘å®šã€‚è¿™ä¸ª <code>viewModel</code> åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­æ˜¯ä¸€ä¸ª <code>optional</code> ç±»å‹, ä½†æ˜¯æˆ‘ä»¬åˆä¸å¸Œæœ›æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½è¦å¼ºåˆ¶è§£åŒ…ã€‚æˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›åœ¨è¿™ä¸ª <code>viewmodel</code> è«åå…¶å¦™æ¶ˆå¤±çš„æ—¶å€™ç¨‹åºåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å´©æºƒã€‚ä½¿ç”¨æ–­è¨€åœ¨ <code>debug</code> ä¸‹è·å¾—é”™è¯¯ä¿¡æ¯å°±è¶³å¤Ÿäº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailView</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ViewModel</span> </span>&#123;</div><div class="line">        <span class="keyword">var</span> title: <span class="type">String</span></div><div class="line">        <span class="keyword">var</span> subtitle: <span class="type">String</span></div><div class="line">        <span class="keyword">var</span> action: <span class="type">String</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> viewModel: <span class="type">ViewModel</span>?</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> titleLabel = <span class="type">UILabel</span>()</div><div class="line">    <span class="keyword">let</span> subtitleLabel = <span class="type">UILabel</span>()</div><div class="line">    <span class="keyword">let</span> actionButton = <span class="type">UIButton</span>()</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didMoveToSuperview</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.didMoveToSuperview()</div><div class="line">        </div><div class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> viewModel = viewModel <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">assertionFailure</span>(<span class="string">"No view model assigned to DetailView."</span>)</div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        titleLabel.text = viewModel.title</div><div class="line">        subtitleLabel.text = viewModel.subtitle</div><div class="line">        actionButton.setTitle(viewModel.action, <span class="keyword">for</span>: .normal)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯: æˆ‘ä»¬å¿…é¡»åœ¨ä¸Šé¢çš„ <code>guard</code> è¡¨è¾¾å¼ä¸­ <code>return</code>, ä¸ç„¶åœ¨ <code>release</code> æ¡ä»¶ä¸‹ <code>assertFailure()</code> ä¹Ÿæ²¡ä»€ä¹ˆä½œç”¨ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« æœ‰åŠ©äºè®©ä½ ç†è§£åˆ°å„ç§å¼‚å¸¸å¤„ç†æ–¹æ³•çš„åŒºåˆ«ã€‚æˆ‘çš„å»ºè®®æ˜¯ä¸è¦åªæ˜¯ä¸“æ³¨äºæŠ€æœ¯, è€Œæ˜¯è¦åœ¨ä¸åŒçš„åœºæ™¯ä¸­å°è¯•ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹, æˆ‘æ›´å»ºè®®å¤§å®¶å°½é‡åœ¨ç¨‹åºå‡ºé”™çš„æ—¶å€™æ¢å¤è¿‡æ¥, é™¤éå¼‚å¸¸æ˜¯è‡´å‘½çš„, éƒ½ä¸è¦å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>å¦å¤– <code>print(error)</code> å¹¶ä¸æ˜¯ä¸€ä¸ªå¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚</p>
<p>Thanks for reading! ğŸš€</p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://medium.com/@johnsundell/picking-the-right-way-of-failing-in-swift-e89125a6b5b5">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Swift çš„ä¸€å¤§ç‰¹è‰²å°±æ˜¯ç¼–è¯‘å®‰å…¨ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“çš„ç¼–å†™å‡ºå¯é¢„æµ‹æ€§çš„ä»£ç , å¹¶ä¸”èƒ½å‹¾å‡å°‘è¿è¡Œæ—¶é”™è¯¯çš„å‘ç”Ÿã€‚ä½†æ˜¯, åœ¨å®é™…çš„æƒ…å†µä¸­, é”™è¯¯å‘ç”Ÿçš„åŸå› æ˜¯åƒå¥‡ç™¾æ€ªçš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»Šå¤©æ¥çœ‹ä¸€ä¸‹å¦‚æœæ­£ç¡®çš„å»å¤„ç†å„ç±»é”™è¯¯, ä»¥åŠæˆ‘ä»¬æœ‰ä»€ä¹ˆå·¥å…·æ¥åšè¿™ä»¶äº‹æƒ…ã€‚ä¸Šä¸€ç¯‡æ–‡ç« ç ”ç©¶äº†å¦‚ä½•å¤„ç† &lt;code&gt;non-optional&lt;/code&gt;ã€‚ åœ¨é‚£ç¯‡æ–‡ç« ä¸­æˆ‘ä½¿ç”¨ &lt;code&gt;guard&lt;/code&gt; + &lt;code&gt;preconditionFailure()&lt;/code&gt; ä»£æ›¿äº†å¼ºåˆ¶è§£åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹åå¾ˆå¤šäººéƒ½åœ¨é—® &lt;code&gt;preconditionFailure()&lt;/code&gt; å’Œ &lt;code&gt;assert()&lt;/code&gt; æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ã€‚æˆ‘ä»¬å†ä»”ç»†çš„çœ‹çœ‹è¿™äº›è¯­è¨€ç‰¹æ€§ã€‚æœ€é‡è¦çš„æ˜¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨å“ªä¸€ç§ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Using lazy properties in Swift</title>
    <link href="http://www.CepheusSun.com/Using%20lazy%20properties%20in%20Swift.html"/>
    <id>http://www.CepheusSun.com/Using lazy properties in Swift.html</id>
    <published>2017-05-20T04:36:45.000Z</published>
    <updated>2017-05-20T04:37:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ‡’åŠ è½½å±äºè®©ä½ å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆå§‹åŒ–, è€Œä¸æ˜¯åœ¨åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™å°±å¿…é¡»è¦ã€‚æ‡’åŠ è½½å¯ä»¥ç”¨æ¥é¿å… optional çš„ä½¿ç”¨, å½“æŸä¸ªå±æ€§çš„åˆå§‹åŒ–è€—è´¹å¾ˆå¤šèµ„æºçš„æ—¶å€™ä¼šæå‡æ€§èƒ½ã€‚å½“ç„¶ä½¿ç”¨æ‡’åŠ è½½ä¹Ÿèƒ½è®©å¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•çœ‹èµ·æ¥å¾ˆæ¸…çˆ½, å› ä¸ºæŸäº›è®¾ç½®ä¼šåœ¨è¿™ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­è¢«æ¨è¿Ÿã€‚</p>
<p>è¿™å‘¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ Swift ä¸­æ‡’åŠ è½½çš„å®šä¹‰, ä»¥åŠä½¿ç”¨ã€‚</p>
<a id="more"></a>
<h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>å®šä¹‰ä¸€ä¸ªæ‡’åŠ è½½å±æ€§æœ€ç®€å•çš„åŠæ³•å°±æ˜¯åœ¨ <code>var</code> å‰åŠ ä¸€ä¸ª <code>lazy</code> å…³é”®å­—, å¹¶ä¸”è¿˜è¦ç»™ å‡ºé»˜è®¤çš„å€¼ã€‚è¿™ä¸ªé»˜è®¤å€¼ä¼šåœ¨è¿™ä¸ªå±æ€§è¢«ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™è¢«æŒ‡å®š, ä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•ä¸­è¿™ä¸ªå°±ä¸éœ€è¦å†å»åˆå§‹åŒ–è¿™ä¸ªå±æ€§äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileLoader</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> cahce = <span class="type">Cache</span>&lt;<span class="type">File</span>&gt;()</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadFile</span><span class="params">(name name: String)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">File</span> &#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> cachedFile = cahce[name] &#123;</div><div class="line">            <span class="keyword">return</span> cachedFile</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> file = <span class="keyword">try</span> loadFileFromDisk(fileName: name)</div><div class="line">        cahce[name] = file</div><div class="line">        <span class="keyword">return</span> file</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨å·¥å‚æ–¹æ³•"><a href="#ä½¿ç”¨å·¥å‚æ–¹æ³•" class="headerlink" title="ä½¿ç”¨å·¥å‚æ–¹æ³•"></a>ä½¿ç”¨å·¥å‚æ–¹æ³•</h3><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨è¿™ä¸ªå±æ€§åœ¨æ‡’åŠ è½½çš„æ—¶å€™è®¾ç½®ä¸€äº›ä¸œè¥¿, åªæ˜¯ç®€å•çš„ä½¿ç”¨å®ƒçš„åˆå§‹åŒ–æ–¹æ³•å¯èƒ½å°±æ²¡æœ‰é‚£ä¹ˆæ–¹ä¾¿äº†ã€‚è¿™ç§æƒ…å†µä¸‹, æ›´æ–¹ä¾¿çš„æ–¹æ³•æ˜¯æŠŠè¿™ä¸ªå±æ€§çš„åˆå§‹åŒ–ä»£ç†ç»™ä¸€ä¸ªå·¥å‚æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Scene</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> eventManager: <span class="type">EventManager</span> = <span class="keyword">self</span>.makeEventManager()</div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeEventManager</span><span class="params">()</span></span> -&gt; <span class="type">EventManager</span>&#123;</div><div class="line">        <span class="keyword">let</span> manager = <span class="type">EventManager</span>()</div><div class="line">        <span class="keyword">return</span> manager</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ ä¸å¸Œæœ›ä½ çš„ç±»é‡Œé¢å…¨æ˜¯å„ç§ <code>make..()</code> è¿™ç±»å·¥å‚æ–¹æ³•, ä½ å¯ä»¥æŠŠè¿™äº›æ–¹æ³•æ”¾åœ¨ä¸€ä¸ªä¸“é—¨çš„ <code>extension</code> ä¸­</p>
<h3 id="ä½¿ç”¨è‡ªæ‰§è¡Œé—­åŒ…"><a href="#ä½¿ç”¨è‡ªæ‰§è¡Œé—­åŒ…" class="headerlink" title="ä½¿ç”¨è‡ªæ‰§è¡Œé—­åŒ…"></a>ä½¿ç”¨è‡ªæ‰§è¡Œé—­åŒ…</h3><p>é™¤äº†ä½¿ç”¨å·¥å‚æ–¹æ³•æ¥è¿”å›è¿™ä¸ªå±æ€§å€¼ä»¥å¤–, ä½ ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨è¿™ä¸ªå±æ€§å£°æ˜çš„åœ°æ–¹é€šè¿‡ä¸€ä¸ªè‡ªæ‰§è¡Œçš„é—­åŒ…æ¥å‡ºåˆå§‹åŒ–è¿™ä¸ªå±æ€§ã€‚æˆ‘ä»¬çœ‹çœ‹ä¸Šé¢è¿™ä¸ªæƒ…å†µ, æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå§ï¼</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> eventManager: <span class="type">EventManager</span> = &#123;</div><div class="line">   <span class="keyword">let</span> manager = <span class="type">EventManager</span>()</div><div class="line">    <span class="keyword">return</span> manager</div><div class="line">&#125;()</div></pre></td></tr></table></figure>
<p>è¿™è¦åšæœ‰ä¸€ä¸ªå¥½å¤„: è®©è¿™ä¸ªå±æ€§çš„åœ¨åŒä¸€ä¸ªåœ°æ–¹å£°æ˜å’Œè®¾ç½®ã€‚å½“ç„¶é˜…è¯»è¿™äº›ä»£ç å¯èƒ½ä¼šæ¯”è¾ƒä¸çˆ½ã€‚ç‰¹åˆ«æ˜¯åœ¨è¿™ä¸ªå±æ€§çš„è®¾ç½®éœ€è¦å¾ˆé•¿çš„ä»£ç çš„æ—¶å€™ã€‚æˆ‘è‡ªå·±çš„è§„åˆ™æ˜¯å½“è¿™ä¸ªå±æ€§çš„åˆå§‹åŒ–æ–¹æ³•åªæœ‰ä¸¤ä¸‰è¡Œä»£ç çš„æ—¶å€™ã€‚å°±æ˜¯ä½¿ç”¨è¿™æ ·çš„æ–¹æ³•æ¥åˆå§‹åŒ–æ‡’åŠ è½½å±æ€§ã€‚</p>
<h3 id="ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•"><a href="#ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•" class="headerlink" title="ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•"></a>ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•</h3><p>å¯¹äºé‚£äº›è®¾ç½®èµ·æ¥æ›´å¤æ‚å±æ€§, æŠŠè¿™äº›ä»£ç æ”¾åˆ°å…¶ä»–çš„ç±»ä¸­, ä¼šæ˜¯æ›´å¥½çš„åŠæ³•ã€‚è¿™ä¹ˆåš, å¯ä»¥è®©è¿™ä¸ªç±»æ›´åŠ ä¸“æ³¨äºå®ƒè‡ªå·±çš„èŒè´£, è®©è¿™ä¸ªç±»ä¸è‡³äºé‚£ä¹ˆå¤æ‚ã€‚å½“ç„¶è¿™ä¹Ÿå¯ä»¥åœ¨ä¸ä½¿ç”¨å­ç±»çš„æ¡ä»¶ä¸‹, åœ¨å¤šä¸ªç±»ä¸­å…±äº«ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> actionButton: <span class="type">UIButton</span> = <span class="type">ViewFactory</span>.makeActionButton()</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, <code>ViewFactory</code> è¿™ä¸ªç±»åŒ…å«äº†è¿™ä¸ª <code>controller</code> ä¸­æ‰€æœ‰æ§ä»¶çš„åˆå§‹åŒ–æ–¹æ³•ã€‚ä¸ç”¨å¼•å…¥æ›´å¤šçš„ç±», ä¹Ÿä¸ç”¨è®©ç»§æ‰¿æ ‘å˜å¤æ‚ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨å¦å¤–ä¸€ä¸ª <code>controller</code> ä¸­ä½¿ç”¨è¿™ä¸ªæŒ‰é’®, ä¹Ÿåªéœ€è¦è°ƒç”¨åŒä¸€ä¸ª API å°±å¥½äº† <code>ViewFactory.makeActionButton()</code></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¯èƒ½æœ‰äººä¼šé—®, æœ‰æ²¡æœ‰ä»€ä¹ˆå¤§ä¸€ç»Ÿçš„æ–¹æ³•æ¥ä½¿ç”¨æ‡’åŠ è½½å‘¢ï¼Ÿ ä¸ªäººè®¤ä¸ºæ²¡æœ‰. å†™ä»£ç å°±æ˜¯è¿™æ ·, é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ³•æ¥å¤„ç†ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚æ‰æ˜¯æœ€æ­£ç¡®çš„åšæ³•ã€‚è€Œä¸”æˆ‘è‡ªå·±ä¹Ÿåœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨ä¸Šé¢æ‰€æœ‰çš„æ–¹æ³•ã€‚</p>
<p>Twitter åˆä¸€ä¸ªé—®é¢˜: ä½¿ç”¨ä¸åŒçš„æ–¹æ³•, å¯¹ç¼–è¯‘æ—¶é—´æœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿæˆ‘åšäº†ä¸€äº›åŸºæœ¬çš„æµ‹è¯•, å¹¶æ²¡æœ‰å‘ç°è¿™å…¶ä¸­æœ‰ä»€ä¹ˆå·®åˆ«ã€‚å½“ç„¶è¿™ä¹Ÿè·Ÿè¿™ä¸ªæ‡’åŠ è½½å±æ€§æœ‰å…³ã€‚</p>
<p>Thanks for reading! ğŸš€</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‡’åŠ è½½å±äºè®©ä½ å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆå§‹åŒ–, è€Œä¸æ˜¯åœ¨åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™å°±å¿…é¡»è¦ã€‚æ‡’åŠ è½½å¯ä»¥ç”¨æ¥é¿å… optional çš„ä½¿ç”¨, å½“æŸä¸ªå±æ€§çš„åˆå§‹åŒ–è€—è´¹å¾ˆå¤šèµ„æºçš„æ—¶å€™ä¼šæå‡æ€§èƒ½ã€‚å½“ç„¶ä½¿ç”¨æ‡’åŠ è½½ä¹Ÿèƒ½è®©å¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•çœ‹èµ·æ¥å¾ˆæ¸…çˆ½, å› ä¸ºæŸäº›è®¾ç½®ä¼šåœ¨è¿™ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­è¢«æ¨è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;è¿™å‘¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ Swift ä¸­æ‡’åŠ è½½çš„å®šä¹‰, ä»¥åŠä½¿ç”¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Protocol Oriented Programming View in Swift 3</title>
    <link href="http://www.CepheusSun.com/Protocol%20Oriented%20Programming%20View%20in%20Swift%203.html"/>
    <id>http://www.CepheusSun.com/Protocol Oriented Programming View in Swift 3.html</id>
    <published>2017-05-14T09:28:23.000Z</published>
    <updated>2017-05-14T09:28:46.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å­¦ä¹ å¦‚ä½•åœ¨ä¸åˆ›å»ºä¸€å¤§å †ç±»çš„å‰æä¸‹åšæŒ‰é’®ã€labelã€å›¾ç‰‡çš„åŠ¨ç”»ã€‚</p>
</blockquote>
<p>æŒæ¡äº†è¶³å¤Ÿçš„çŸ¥è¯†è€Œä¸å»ä½¿ç”¨å®ƒ, å°±åƒä½ é•¿äº†æ»¡å£çš„ç‰™é½¿, ä½†æ˜¯æˆå¤©éƒ½å–ç‰›å¥¶ä¸€æ ·ã€‚ æŒæ¡äº†è¶³å¤Ÿçš„ç†è®ºçŸ¥è¯†, åœ¨é¡¹ç›®ä¸­æ€ä¹ˆä½¿ç”¨ POP å‘¢ï¼ŸğŸ¤”</p>
<a id="more"></a>
<h3 id="What-I-think-you-will-learn"><a href="#What-I-think-you-will-learn" class="headerlink" title="What I think you will learn"></a>What I think you will learn</h3><p>ä½¿ç”¨åè®®è®© UI ç»„ä»¶åšåŠ¨ç”»ã€‚ä¹Ÿä¼šç”¨ä¼ ç»Ÿçš„æ–¹æ³•æ¥æ›´ POP æ¯”è¾ƒã€‚ğŸ˜</p>
<h4 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h4><p>è¿™ä¸ª demo å« â€œWelcome to My House Partyâ€ã€‚ æˆ‘å†™è¿™ä¸ªapp æ¥éªŒè¯ä½ æ˜¯å¦è¢«é‚€è¯·ã€‚ä½ å¾—è¾“å…¥ä½ çš„é‚€è¯·ç ã€‚<strong>è¿™ä¸ª app æ²¡æœ‰é€»è¾‘ç›¸å…³çš„ä¸œè¥¿ï¼ŒæŒ‰ä¸‹è¿™ä¸ªæŒ‰é’®ä¹‹å, ä¸Šé¢çš„æ§ä»¶éƒ½ä¼šåŠ¨èµ·æ¥</strong> ç•Œé¢ä¸Šæœ‰4ä¸ªç»„ä»¶ä¼šåŠ¨ã€‚ <code>passcodeTextField</code>ã€<code>loginButton</code>ã€<code>errorMessageLabel</code>ã€<code>profileImageView</code>.</p>
<p>ä¸€å…±æœ‰ä¸¤ç§åŠ¨ç”»ç±»å‹ </p>
<ol>
<li>Buzzing </li>
<li>Popping</li>
</ol>
<center><br><img src="https://cdn-images-1.medium.com/max/1600/1*uN6sB588ehZIivOmmAsLPg.gif" alt=""><br></center>

<p>ä¸è¦æ‹…å¿ƒè·Ÿä¸ä¸Šï¼Œåªéœ€è¦è·Ÿç€èŠ‚å¥å¾€ä¸‹èµ°å°±è¡Œäº†ã€‚å¦‚æœä½ æ²¡ä¿¡å¿ƒäº†ï¼Œæ»‘åˆ°æœ€åé¢ï¼ŒæŠŠ Demo ä¸‹ä¸‹æ¥, ç›´æ¥çœ‹ä»£ç å°±è¡Œäº†ã€‚</p>
<h4 id="Things-Back-Then"><a href="#Things-Back-Then" class="headerlink" title="Things Back Then"></a>Things Back Then</h4><p>è¦çœŸæ­£æŒæ¡åœ¨å®é™…æƒ…å†µä¸­ POP çš„é­”åŠ›ï¼Œæˆ‘ä»¬å…ˆæ¯”è¾ƒä¸€ä¸‹ä¼ ç»Ÿçš„å†™æ³•ã€‚ä½ å¯èƒ½ä¼šåˆ›é€ ä¸¤ä¸ªå­ç±»ç„¶åç»™å¥¹æ·»åŠ ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableButton</span>: <span class="title">UIButton</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123;<span class="comment">// Animation Logic&#125;</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableLabel</span>: <span class="title">UILabel</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123;<span class="comment">// Animation Logic&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åè®©ä»–åŠ¨èµ·æ¥ï¼Œå½“ä½ ç‚¹å‡»è¿™ä¸ªæŒ‰é’®</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> errorMessageLabel: <span class="type">BuzzableLabel</span>!</div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">BuzzableButton</span>!</div><div class="line"></div><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">didtapLoginButton</span><span class="params">(<span class="number">_</span> sender: UIButton)</span></span> &#123;</div><div class="line">    errorMessageLabel.buzz()</div><div class="line">    loginButton.buzz()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ çœ‹åˆ°æˆ‘ä»¬é‡å¤äº†å‡ æ¬¡ç›¸åŒçš„äº‹æƒ…äº†å—ï¼Ÿ åŠ¨ç”»çš„é€»è¾‘è‡³å°‘éƒ½éœ€è¦5è¡Œä»£ç ã€‚æ—¢ç„¶ç”¨ extension æ˜¯æ›´å¥½çš„åŠæ³•ã€‚ UILabel å’Œ UIButton éƒ½ç»§æ‰¿äº† UIViewã€‚ æˆ‘ä»¬å¯ä»¥è¿™æ ·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123; <span class="comment">// Animation Logic &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨ <code>BuzzableButton</code> è¿˜æœ‰ <code>BuzzableLabel</code> éƒ½æœ‰ <code>buzz</code> è¿™ä¸ªæ–¹æ³•äº†ã€‚ ç°åœ¨æˆ‘ä»¬å°±æ²¡æœ‰é‡å¤äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableButton</span>: <span class="title">UIButton</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableLabel</span>: <span class="title">UILabel</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> errorMessageLabel: <span class="type">BuzzableLabel</span>!</div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">BuzzableButton</span>!</div><div class="line"></div><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">didTapLoginButton</span><span class="params">(<span class="number">_</span> sender: UIButton)</span></span> &#123;</div><div class="line"> errorMessageLabel.buzz()</div><div class="line"> loginButton.buzz() </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Okay-then-why-POP-ğŸ¤”"><a href="#Okay-then-why-POP-ğŸ¤”" class="headerlink" title="Okay, then why POP? ğŸ¤”"></a>Okay, then why POP? ğŸ¤”</h4><p>ä½ åº”è¯¥ä¹Ÿçœ‹è§äº†é‚£ä¸ªå†™ç€ â€œPlease enter valid code ğŸ˜‚â€ çš„<code>errorMessageLabel</code> è¿˜æœ‰å¦å¤–ä¸€ä¸ªåŠ¨ç”»ã€‚å¥¹å…ˆæ˜¯å‡ºç°ç„¶ååœ¨æ¶ˆå¤±ã€‚æ‰€ä»¥, ä¹‹å‰çš„æ–¹æ³•æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p>
<p>æœ‰ä¸¤ä¸ªæ–¹æ³•æ¥åšè¿™ä»¶äº‹æƒ…ã€‚é¦–å…ˆä½ éœ€è¦å†ç»™ <code>UIView</code> æ·»åŠ ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// Extend UIView</div><div class="line">extension UIView &#123;</div><div class="line">    func buzz() &#123; // Animation Logic&#125;</div><div class="line">    func pop() &#123; // UILable Animation Logic &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç»™ UIView æ·»åŠ äº†è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åœ¨å…¶ä»–çš„ç»„ä»¶ä¸Šä¹Ÿæœ‰äº†ã€‚åŒ…æ‹¬ä»–çš„å­ç±» <code>UILabel</code>ã€‚ æˆ‘ä»¬ç»§æ‰¿äº†æ²¡æœ‰å¿…è¦çš„æ–¹æ³•ã€‚è¿™äº›ç»„ä»¶ä¹Ÿè«åå…¶å¦™çš„å˜çš„å¾ˆè‡ƒè‚¿äº†ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ç»™ <code>UILabel</code> æ·»åŠ ä¸€ä¸ªå­ç±»ï¼Œ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Subclass UILabel</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableLabel</span>: <span class="title">UILabel</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> &#123; <span class="comment">// UILabel Animation Logic &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¹Ÿèƒ½å®ç°ã€‚ä½†æ˜¯å¯èƒ½æˆ‘ä»¬è¿˜éœ€è¦æŠŠè¿™ä¸ªç±»çš„åå­—æ”¹ä¸€ä¸‹ï¼Œç„¶å®ƒæ›´ç›´è§‚ä¸€ç‚¹.æ¢æˆ <code>BuzzablePoppableLabel</code> å§ï¼</p>
<p>å¦‚æœä½ æƒ³ç»™è¿™ä¸ª Label æ·»åŠ æ›´å¤šçš„æ–¹æ³•ã€‚ä¸ºäº†è®©è¿™ä¸ª Label æ›´ç›´è§‚çš„è¡¨è¾¾å®ƒçš„ä½œç”¨ï¼Œå¯èƒ½åå­—åˆå¾—æ”¹äº† <code>BuzzablePoppableFlashableDopeFancyLovelyLabel</code> è¿™æ˜¾ç„¶éå¸¸çš„ä¸å¯æŒç»­ã€‚</p>
<h3 id="Protocol-Oriented-Programming"><a href="#Protocol-Oriented-Programming" class="headerlink" title="Protocol Oriented Programming"></a>Protocol Oriented Programming</h3><p>ç”¨å­ç±»æ¥å®ç°å°±æ˜¯è¿™æ ·çš„ã€‚é€‰æ‹©æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªåè®®å§ï¼ Buzzing</p>
<p>å› ä¸ºåŠ¨ç”»çš„ä»£ç éƒ½æ¯”è¾ƒé•¿ï¼Œæˆ‘æ²¡æœ‰åœ¨è¿™é‡Œå†™å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Buzzable</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIview</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123; <span class="comment">// Animation Logic&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªè¦éµå®ˆäº†è¿™ä¸ªåè®®çš„ UI ç»„ä»¶å°±éƒ½æœ‰ Buzz è¿™ä¸ªæ–¹æ³•äº†ã€‚ä¸ extension ä¸åŒçš„æ˜¯ï¼Œåªæœ‰éµå®ˆçš„è¿™ä¸ªåè®®æ‰ä¼šæœ‰è¿™ä¸ªæ–¹æ³•ã€‚å¹¶ä¸”æˆ‘æ˜¯ç”¨äº† <code>where Self: UIView</code> æ¥å£°æ˜è¿™ä¸ªåè®®åªèƒ½è¢« UIView åŠå…¶å­ç±»éµå®ˆã€‚</p>
<p>æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å°±å…ˆç»™ <code>loginButton</code>, <code>passcodeTextField</code>, <code>errorMessageLabel</code>ã€<code>profileImageView</code> åŠ ä¸Šè¿™ä¸ªåè®®å§ã€‚<br>å¯¹äº†ï¼Œè¿˜æœ‰ pop</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Poppable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Poppable</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> &#123; <span class="comment">// Pop Animation Logic &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¥½äº†ç°åœ¨å¯ä»¥å¼€å§‹å†™äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableTextField</span>: <span class="title">UITextField</span>, <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableButton</span>: <span class="title">UIButton</span>, <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableImageView</span>: <span class="title">UIImageView</span>, <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzablePoppableLabel</span>: <span class="title">UILabel</span>, <span class="title">Buzzable</span>, <span class="title">Poppable</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> passcodTextField: <span class="type">BuzzableTextField</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">BuzzableButton</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> errorMessageLabel: <span class="type">BuzzablePoppableLabel</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> profileImageView: <span class="type">BuzzableImageView</span>!</div><div class="line">  </div><div class="line">  <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">didTabLoginButton</span><span class="params">(<span class="number">_</span> sender: UIButton)</span></span> &#123;</div><div class="line">    passcodTextField.buzz()</div><div class="line">    loginButton.buzz()</div><div class="line">    errorMessageLabel.buzz()</div><div class="line">    errorMessageLabel.pop()</div><div class="line">    profileImageView.buzz()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€æ–¹ä¾¿çš„äº‹æƒ…æ˜¯æˆ‘ä»¬éƒ½ä¸éœ€è¦ä½¿ç”¨å­ç±»å°±å¯èƒ½ç»™ä»»ä½•çš„ UI ç»„ä»¶æ·»åŠ  pop è¿™ä¸ªæ–¹æ³•äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class MyImageView: UIImageVIew, Buzzable, Poppable</div></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œç±»çš„åç§°å°±å¯ä»¥å˜çš„æ›´åŠ çš„çµæ´»äº†ã€‚å› ä¸ºä½ å·²ç»çŸ¥é“äº†è¿™äº›åè®®çš„æ–¹æ³•ï¼Œå¹¶ä¸”è¿™äº›åè®®ä¹Ÿæè¿°äº†è¿™äº›ç±»ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨ <code>MyBuzzablePoppableProfileImage</code> äº†ã€‚</p>
<ul>
<li>æ²¡æœ‰å­ç±»</li>
<li>ç±»åæ›´çµæ´»</li>
<li>æ›´ Swifty</li>
</ul>
<p><a href="https://github.com/CepheusSun/Translate/tree/master/demos/Protocol%20Oriented%20Programming%20View%20in%20Swift%203">SourceCode</a></p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://blog.bobthedeveloper.io/protocol-oriented-programming-view-in-swift-3-8bcb3305c427">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å­¦ä¹ å¦‚ä½•åœ¨ä¸åˆ›å»ºä¸€å¤§å †ç±»çš„å‰æä¸‹åšæŒ‰é’®ã€labelã€å›¾ç‰‡çš„åŠ¨ç”»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŒæ¡äº†è¶³å¤Ÿçš„çŸ¥è¯†è€Œä¸å»ä½¿ç”¨å®ƒ, å°±åƒä½ é•¿äº†æ»¡å£çš„ç‰™é½¿, ä½†æ˜¯æˆå¤©éƒ½å–ç‰›å¥¶ä¸€æ ·ã€‚ æŒæ¡äº†è¶³å¤Ÿçš„ç†è®ºçŸ¥è¯†, åœ¨é¡¹ç›®ä¸­æ€ä¹ˆä½¿ç”¨ POP å‘¢ï¼ŸğŸ¤”&lt;/p&gt;
    
    </summary>
    
      <category term="POP" scheme="http://www.CepheusSun.com/categories/POP/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="POP" scheme="http://www.CepheusSun.com/tags/POP/"/>
    
  </entry>
  
</feed>
