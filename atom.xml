<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CepheusSunçš„åšå®¢</title>
  <subtitle>CepheusSunçš„åšå®¢</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://CepheusSun.github.io/"/>
  <updated>2017-05-14T09:28:46.000Z</updated>
  <id>https://CepheusSun.github.io/</id>
  
  <author>
    <name>CepheusSun</name>
    <email>cd_sunyang@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Protocol Oriented Programming View in Swift 3</title>
    <link href="https://CepheusSun.github.io/2017/05/14/Protocol%20Oriented%20Programming%20View%20in%20Swift%203/"/>
    <id>https://CepheusSun.github.io/2017/05/14/Protocol Oriented Programming View in Swift 3/</id>
    <published>2017-05-14T09:28:23.000Z</published>
    <updated>2017-05-14T09:28:46.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å­¦ä¹ å¦‚ä½•åœ¨ä¸åˆ›å»ºä¸€å¤§å †ç±»çš„å‰æä¸‹åšæŒ‰é’®ã€labelã€å›¾ç‰‡çš„åŠ¨ç”»ã€‚</p>
</blockquote>
<p>æŒæ¡äº†è¶³å¤Ÿçš„çŸ¥è¯†è€Œä¸å»ä½¿ç”¨å®ƒ, å°±åƒä½ é•¿äº†æ»¡å£çš„ç‰™é½¿, ä½†æ˜¯æˆå¤©éƒ½å–ç‰›å¥¶ä¸€æ ·ã€‚ æŒæ¡äº†è¶³å¤Ÿçš„ç†è®ºçŸ¥è¯†, åœ¨é¡¹ç›®ä¸­æ€ä¹ˆä½¿ç”¨ POP å‘¢ï¼ŸğŸ¤”</p>
<a id="more"></a>
<h3 id="What-I-think-you-will-learn"><a href="#What-I-think-you-will-learn" class="headerlink" title="What I think you will learn"></a>What I think you will learn</h3><p>ä½¿ç”¨åè®®è®© UI ç»„ä»¶åšåŠ¨ç”»ã€‚ä¹Ÿä¼šç”¨ä¼ ç»Ÿçš„æ–¹æ³•æ¥æ›´ POP æ¯”è¾ƒã€‚ğŸ˜</p>
<h4 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h4><p>è¿™ä¸ª demo å« â€œWelcome to My House Partyâ€ã€‚ æˆ‘å†™è¿™ä¸ªapp æ¥éªŒè¯ä½ æ˜¯å¦è¢«é‚€è¯·ã€‚ä½ å¾—è¾“å…¥ä½ çš„é‚€è¯·ç ã€‚<strong>è¿™ä¸ª app æ²¡æœ‰é€»è¾‘ç›¸å…³çš„ä¸œè¥¿ï¼ŒæŒ‰ä¸‹è¿™ä¸ªæŒ‰é’®ä¹‹å, ä¸Šé¢çš„æ§ä»¶éƒ½ä¼šåŠ¨èµ·æ¥</strong> ç•Œé¢ä¸Šæœ‰4ä¸ªç»„ä»¶ä¼šåŠ¨ã€‚ <code>passcodeTextField</code>ã€<code>loginButton</code>ã€<code>errorMessageLabel</code>ã€<code>profileImageView</code>.</p>
<p>ä¸€å…±æœ‰ä¸¤ç§åŠ¨ç”»ç±»å‹ </p>
<ol>
<li>Buzzing </li>
<li>Popping</li>
</ol>
<center><br><img src="https://cdn-images-1.medium.com/max/1600/1*uN6sB588ehZIivOmmAsLPg.gif" alt=""><br></center>

<p>ä¸è¦æ‹…å¿ƒè·Ÿä¸ä¸Šï¼Œåªéœ€è¦è·Ÿç€èŠ‚å¥å¾€ä¸‹èµ°å°±è¡Œäº†ã€‚å¦‚æœä½ æ²¡ä¿¡å¿ƒäº†ï¼Œæ»‘åˆ°æœ€åé¢ï¼ŒæŠŠ Demo ä¸‹ä¸‹æ¥, ç›´æ¥çœ‹ä»£ç å°±è¡Œäº†ã€‚</p>
<h4 id="Things-Back-Then"><a href="#Things-Back-Then" class="headerlink" title="Things Back Then"></a>Things Back Then</h4><p>è¦çœŸæ­£æŒæ¡åœ¨å®é™…æƒ…å†µä¸­ POP çš„é­”åŠ›ï¼Œæˆ‘ä»¬å…ˆæ¯”è¾ƒä¸€ä¸‹ä¼ ç»Ÿçš„å†™æ³•ã€‚ä½ å¯èƒ½ä¼šåˆ›é€ ä¸¤ä¸ªå­ç±»ç„¶åç»™å¥¹æ·»åŠ ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableButton</span>: <span class="title">UIButton</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123;<span class="comment">// Animation Logic&#125;</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableLabel</span>: <span class="title">UILabel</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123;<span class="comment">// Animation Logic&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åè®©ä»–åŠ¨èµ·æ¥ï¼Œå½“ä½ ç‚¹å‡»è¿™ä¸ªæŒ‰é’®</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> errorMessageLabel: <span class="type">BuzzableLabel</span>!</div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">BuzzableButton</span>!</div><div class="line"></div><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">didtapLoginButton</span><span class="params">(<span class="number">_</span> sender: UIButton)</span></span> &#123;</div><div class="line">    errorMessageLabel.buzz()</div><div class="line">    loginButton.buzz()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ çœ‹åˆ°æˆ‘ä»¬é‡å¤äº†å‡ æ¬¡ç›¸åŒçš„äº‹æƒ…äº†å—ï¼Ÿ åŠ¨ç”»çš„é€»è¾‘è‡³å°‘éƒ½éœ€è¦5è¡Œä»£ç ã€‚æ—¢ç„¶ç”¨ extension æ˜¯æ›´å¥½çš„åŠæ³•ã€‚ UILabel å’Œ UIButton éƒ½ç»§æ‰¿äº† UIViewã€‚ æˆ‘ä»¬å¯ä»¥è¿™æ ·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123; <span class="comment">// Animation Logic &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨ <code>BuzzableButton</code> è¿˜æœ‰ <code>BuzzableLabel</code> éƒ½æœ‰ <code>buzz</code> è¿™ä¸ªæ–¹æ³•äº†ã€‚ ç°åœ¨æˆ‘ä»¬å°±æ²¡æœ‰é‡å¤äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableButton</span>: <span class="title">UIButton</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableLabel</span>: <span class="title">UILabel</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> errorMessageLabel: <span class="type">BuzzableLabel</span>!</div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">BuzzableButton</span>!</div><div class="line"></div><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">didTapLoginButton</span><span class="params">(<span class="number">_</span> sender: UIButton)</span></span> &#123;</div><div class="line"> errorMessageLabel.buzz()</div><div class="line"> loginButton.buzz() </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Okay-then-why-POP-ğŸ¤”"><a href="#Okay-then-why-POP-ğŸ¤”" class="headerlink" title="Okay, then why POP? ğŸ¤”"></a>Okay, then why POP? ğŸ¤”</h4><p>ä½ åº”è¯¥ä¹Ÿçœ‹è§äº†é‚£ä¸ªå†™ç€ â€œPlease enter valid code ğŸ˜‚â€ çš„<code>errorMessageLabel</code> è¿˜æœ‰å¦å¤–ä¸€ä¸ªåŠ¨ç”»ã€‚å¥¹å…ˆæ˜¯å‡ºç°ç„¶ååœ¨æ¶ˆå¤±ã€‚æ‰€ä»¥, ä¹‹å‰çš„æ–¹æ³•æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p>
<p>æœ‰ä¸¤ä¸ªæ–¹æ³•æ¥åšè¿™ä»¶äº‹æƒ…ã€‚é¦–å…ˆä½ éœ€è¦å†ç»™ <code>UIView</code> æ·»åŠ ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// Extend UIView</div><div class="line">extension UIView &#123;</div><div class="line">    func buzz() &#123; // Animation Logic&#125;</div><div class="line">    func pop() &#123; // UILable Animation Logic &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç»™ UIView æ·»åŠ äº†è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åœ¨å…¶ä»–çš„ç»„ä»¶ä¸Šä¹Ÿæœ‰äº†ã€‚åŒ…æ‹¬ä»–çš„å­ç±» <code>UILabel</code>ã€‚ æˆ‘ä»¬ç»§æ‰¿äº†æ²¡æœ‰å¿…è¦çš„æ–¹æ³•ã€‚è¿™äº›ç»„ä»¶ä¹Ÿè«åå…¶å¦™çš„å˜çš„å¾ˆè‡ƒè‚¿äº†ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ç»™ <code>UILabel</code> æ·»åŠ ä¸€ä¸ªå­ç±»ï¼Œ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Subclass UILabel</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableLabel</span>: <span class="title">UILabel</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> &#123; <span class="comment">// UILabel Animation Logic &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¹Ÿèƒ½å®ç°ã€‚ä½†æ˜¯å¯èƒ½æˆ‘ä»¬è¿˜éœ€è¦æŠŠè¿™ä¸ªç±»çš„åå­—æ”¹ä¸€ä¸‹ï¼Œç„¶å®ƒæ›´ç›´è§‚ä¸€ç‚¹.æ¢æˆ <code>BuzzablePoppableLabel</code> å§ï¼</p>
<p>å¦‚æœä½ æƒ³ç»™è¿™ä¸ª Label æ·»åŠ æ›´å¤šçš„æ–¹æ³•ã€‚ä¸ºäº†è®©è¿™ä¸ª Label æ›´ç›´è§‚çš„è¡¨è¾¾å®ƒçš„ä½œç”¨ï¼Œå¯èƒ½åå­—åˆå¾—æ”¹äº† <code>BuzzablePoppableFlashableDopeFancyLovelyLabel</code> è¿™æ˜¾ç„¶éå¸¸çš„ä¸å¯æŒç»­ã€‚</p>
<h3 id="Protocol-Oriented-Programming"><a href="#Protocol-Oriented-Programming" class="headerlink" title="Protocol Oriented Programming"></a>Protocol Oriented Programming</h3><p>ç”¨å­ç±»æ¥å®ç°å°±æ˜¯è¿™æ ·çš„ã€‚é€‰æ‹©æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªåè®®å§ï¼ Buzzing</p>
<p>å› ä¸ºåŠ¨ç”»çš„ä»£ç éƒ½æ¯”è¾ƒé•¿ï¼Œæˆ‘æ²¡æœ‰åœ¨è¿™é‡Œå†™å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Buzzable</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIview</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123; <span class="comment">// Animation Logic&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªè¦éµå®ˆäº†è¿™ä¸ªåè®®çš„ UI ç»„ä»¶å°±éƒ½æœ‰ Buzz è¿™ä¸ªæ–¹æ³•äº†ã€‚ä¸ extension ä¸åŒçš„æ˜¯ï¼Œåªæœ‰éµå®ˆçš„è¿™ä¸ªåè®®æ‰ä¼šæœ‰è¿™ä¸ªæ–¹æ³•ã€‚å¹¶ä¸”æˆ‘æ˜¯ç”¨äº† <code>where Self: UIView</code> æ¥å£°æ˜è¿™ä¸ªåè®®åªèƒ½è¢« UIView åŠå…¶å­ç±»éµå®ˆã€‚</p>
<p>æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å°±å…ˆç»™ <code>loginButton</code>, <code>passcodeTextField</code>, <code>errorMessageLabel</code>ã€<code>profileImageView</code> åŠ ä¸Šè¿™ä¸ªåè®®å§ã€‚<br>å¯¹äº†ï¼Œè¿˜æœ‰ pop</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Poppable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Poppable</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> &#123; <span class="comment">// Pop Animation Logic &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¥½äº†ç°åœ¨å¯ä»¥å¼€å§‹å†™äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableTextField</span>: <span class="title">UITextField</span>, <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableButton</span>: <span class="title">UIButton</span>, <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableImageView</span>: <span class="title">UIImageView</span>, <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzablePoppableLabel</span>: <span class="title">UILabel</span>, <span class="title">Buzzable</span>, <span class="title">Poppable</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> passcodTextField: <span class="type">BuzzableTextField</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">BuzzableButton</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> errorMessageLabel: <span class="type">BuzzablePoppableLabel</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> profileImageView: <span class="type">BuzzableImageView</span>!</div><div class="line">  </div><div class="line">  <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">didTabLoginButton</span><span class="params">(<span class="number">_</span> sender: UIButton)</span></span> &#123;</div><div class="line">    passcodTextField.buzz()</div><div class="line">    loginButton.buzz()</div><div class="line">    errorMessageLabel.buzz()</div><div class="line">    errorMessageLabel.pop()</div><div class="line">    profileImageView.buzz()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€æ–¹ä¾¿çš„äº‹æƒ…æ˜¯æˆ‘ä»¬éƒ½ä¸éœ€è¦ä½¿ç”¨å­ç±»å°±å¯èƒ½ç»™ä»»ä½•çš„ UI ç»„ä»¶æ·»åŠ  pop è¿™ä¸ªæ–¹æ³•äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class MyImageView: UIImageVIew, Buzzable, Poppable</div></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œç±»çš„åç§°å°±å¯ä»¥å˜çš„æ›´åŠ çš„çµæ´»äº†ã€‚å› ä¸ºä½ å·²ç»çŸ¥é“äº†è¿™äº›åè®®çš„æ–¹æ³•ï¼Œå¹¶ä¸”è¿™äº›åè®®ä¹Ÿæè¿°äº†è¿™äº›ç±»ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨ <code>MyBuzzablePoppableProfileImage</code> äº†ã€‚</p>
<ul>
<li>æ²¡æœ‰å­ç±»</li>
<li>ç±»åæ›´çµæ´»</li>
<li>æ›´ Swifty</li>
</ul>
<p><a href="https://github.com/CepheusSun/Translate/tree/master/demos/Protocol%20Oriented%20Programming%20View%20in%20Swift%203">SourceCode</a></p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://blog.bobthedeveloper.io/protocol-oriented-programming-view-in-swift-3-8bcb3305c427">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å­¦ä¹ å¦‚ä½•åœ¨ä¸åˆ›å»ºä¸€å¤§å †ç±»çš„å‰æä¸‹åšæŒ‰é’®ã€labelã€å›¾ç‰‡çš„åŠ¨ç”»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŒæ¡äº†è¶³å¤Ÿçš„çŸ¥è¯†è€Œä¸å»ä½¿ç”¨å®ƒ, å°±åƒä½ é•¿äº†æ»¡å£çš„ç‰™é½¿, ä½†æ˜¯æˆå¤©éƒ½å–ç‰›å¥¶ä¸€æ ·ã€‚ æŒæ¡äº†è¶³å¤Ÿçš„ç†è®ºçŸ¥è¯†, åœ¨é¡¹ç›®ä¸­æ€ä¹ˆä½¿ç”¨ POP å‘¢ï¼ŸğŸ¤”&lt;/p&gt;
    
    </summary>
    
      <category term="POP" scheme="https://CepheusSun.github.io/categories/POP/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusSun.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusSun.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="POP" scheme="https://CepheusSun.github.io/tags/POP/"/>
    
  </entry>
  
  <entry>
    <title>Introduction to Protocol Oriented Programming in Swift</title>
    <link href="https://CepheusSun.github.io/2017/05/14/Introduction%20to%20Protocol%20Oriented%20Programming%20in%20Swift/"/>
    <id>https://CepheusSun.github.io/2017/05/14/Introduction to Protocol Oriented Programming in Swift/</id>
    <published>2017-05-13T16:05:23.000Z</published>
    <updated>2017-05-13T16:07:48.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>OOP is okay, but couldâ€™ve been better</p>
</blockquote>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>å³ä½¿ä½ è¿˜ä¸çŸ¥é“ Class å’Œ Struct åŸºæœ¬çš„åŒºåˆ«, ä½ ä¹Ÿå¯ä»¥çœ‹è¿™ä¸ªæ–‡ç« ã€‚éƒ½çŸ¥é“ Struct ä¸èƒ½ç»§æ‰¿, ä½†æ˜¯, ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å¦‚æœä½ è¿˜ä¸çŸ¥é“ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆ, èŠ±ä¸¤åˆ†é’Ÿæ—¶é—´è¯»ä¸€ä¸‹ä¸‹é¢è¿™æ®µä»£ç ã€‚è¿™äº›ä»£ç æ˜¯å†™åœ¨ playground ä¸Šçš„</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HumanClass</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> classHuman = <span class="type">HumanClass</span>(name: <span class="string">"Bob"</span>)</div><div class="line"><span class="comment">// "Bob"</span></div><div class="line">classHuman.name</div><div class="line"><span class="comment">// Created a "copied" object</span></div><div class="line"><span class="keyword">var</span> newClassHuman = classHuman</div><div class="line">newClassHuman.name = <span class="string">"Bobby"</span></div><div class="line">classHuman.name <span class="comment">//"Bobby"</span></div></pre></td></tr></table></figure>
<p>ç­‰æˆ‘ä»¬æ”¹å˜ <code>newClassHuman</code> çš„ <code>name</code> å±æ€§ä¸º <code>â€œBobbyâ€</code> ä¹‹å, <code>classHuman</code> çš„ <code>name</code> å±æ€§ä¹Ÿå˜æˆ <code>â€œBobbyâ€</code> äº†ã€‚</p>
<p>æˆ‘ä»¬å†çœ‹çœ‹ Struct </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">HumanStruct</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> humanStruct = <span class="type">HumanStruct</span>(name: <span class="string">"Bob"</span>)</div><div class="line"><span class="keyword">var</span> newHumanStruct = humanStruct</div><div class="line">newHumanStruct.name = <span class="string">"Bobby"</span></div><div class="line">humanStruct.name  <span class="comment">// "Bobby"</span></div></pre></td></tr></table></figure>
<p>çœ‹å‡ºæ¥åŒºåˆ«äº†å—ï¼Ÿ æ”¹å˜å¤åˆ¶å‡ºæ¥çš„ <code>newHumanStruct</code> çš„ <code>name</code> å±æ€§æ¯”å‘¢æ²¡æœ‰æ”¹å˜åŸå§‹çš„ <code>humanStruct</code> çš„ <code>name</code> å±æ€§ã€‚</p>
<p>å¯¹äº Class æ¥è¯´, è¿™æ ·çš„å¤åˆ¶å‡ºæ¥çš„å¯¹è±¡, å’ŒåŸæ¥çš„å¯¹è±¡éƒ½æŒ‡å‘çš„æ˜¯å†…å­˜ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚å¯¹ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜, éƒ½ä¼šæ”¹å˜å…¶ä»–çš„å¯¹è±¡(å¼•ç”¨ç±»å‹)ã€‚ å¯¹äº Struct æ¥è¯´, åœ¨ä¼ é€’å’Œèµ‹å€¼çš„æ—¶å€™ä¼šåˆ›é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡(å€¼ç±»å‹)</p>
<p><a href="https://www.youtube.com/watch?v=MNnfUwzJ4ig">è¿™é‡Œæœ‰ä¸€ä¸ªä»‹ç»è¿™ä¸ªæ¦‚å¿µçš„è§†é¢‘</a></p>
<h3 id="Bye-OOP"><a href="#Bye-OOP" class="headerlink" title="Bye OOP"></a>Bye OOP</h3><p>ä½ å¯èƒ½ä¼šæ¯”è¾ƒå¥½å¥‡ä¸ºä»€ä¹ˆæˆ‘è®²äº†åŠå¤©è·Ÿé¢å‘åè®®ç¼–ç¨‹æ²¡å…³ç³»çš„ä¸œè¥¿ã€‚åœ¨æˆ‘å¼€å§‹å°† POP å¯¹æ¯” OOP çš„ä¼˜åŠ¿ä¹‹å‰ï¼Œ ä½ å¾—ç†è§£å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹çš„åŒºåˆ«ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€äº›æ¯‹åº¸ç½®ç–‘çš„ OOP çš„ä¼˜åŠ¿, ä¹Ÿæ˜¯åŠ£åŠ¿ã€‚</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå­ç±», è¿™ä¸ªå­ç±»ä¼šç»§æ‰¿ä¸€äº›å¹¶ä¸éœ€è¦çš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™ä¼šè®©è¿™ä¸ªå­ç±»å˜çš„è‡ƒè‚¿ã€‚</li>
<li>å½“ä½ æœ‰å¾ˆå¤šçš„ç»§æ‰¿å…³ç³»çš„æ—¶å€™, æ‰¾åˆ°å„ä¸ªç±»ä¹‹é—´çš„å…³ç³», å°±å˜çš„æ¯”è¾ƒå›°éš¾äº†ã€‚</li>
<li>å½“å¯¹è±¡æŒ‡å‘çš„å†…å­˜ä¸­çš„åŒä¸€å—åœ°å€çš„æ—¶å€™, å¦‚æœå¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†ä¿®æ”¹, æ‰€æœ‰çš„éƒ½ä¼šå˜ã€‚</li>
</ol>
<p>é¡ºä¾¿çœ‹ä¸€ä¸‹ UIKit ä¸­çš„ OOP å§</p>
<center><br><img src="https://cdn-images-1.medium.com/max/1600/1*hjEXB3PGUOSbxet0qUJRNA.png" alt=""><br>2015 WWDC_Hideous Structure<br></center>

<p>å¦‚æœä½ æ˜¯åˆšè¿›è‹¹æœçš„å·¥ç¨‹å¸ˆ, ä½ èƒ½å¤Ÿæå®šè¿™äº›ä¸œè¥¿å—ï¼Ÿæˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™æ€»è§‰çš„ä¼šæ¯”è¾ƒæ··ä¹±ã€‚</p>
<p>æœ‰äººè¯´ OOP æ˜¯ä¸€ä¸ªè®©ä½ çš„ä»£ç å˜çš„æƒ³æ„å¤§åˆ©é¢é‚£æ ·ä¹±çš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚å¦‚æœä½ æƒ³è¦æ›´å¤šåæ§½ OOP çš„å†…å®¹. <a href="https://content.pivotal.io/blog/all-evidence-points-to-oop-being-bullshit">è¿™å„¿</a><a href="https://krakendev.io/blog/subclassing-can-suck-and-heres-why">è¿™å„¿</a><a href="http://www.smashcompany.com/technology/object-oriented-programming-is-an-expensive-disaster-which-must-end">è¿™å„¿</a><a href="https://www.leaseweb.com/labs/2015/08/object-oriented-programming-is-exceptionally-bad/">è¿˜æœ‰è¿™å„¿</a></p>
<h3 id="Welcome-POP"><a href="#Welcome-POP" class="headerlink" title="Welcome POP"></a>Welcome POP</h3><p>ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†, POP çš„åŸºç¡€ä¸æ˜¯ç±», è€Œæ˜¯å€¼ç±»å‹å˜é‡ã€‚æ²¡æœ‰å¼•ç”¨ï¼Œä¸åƒåˆšåˆšçœ‹åˆ°çš„é‡‘å­—å¡”ç»“æ„ã€‚ POP å–œæ¬¢æ‰å¹³çš„, æ²¡é‚£ä¹ˆå¤šåµŒå¥—å…³ç³»çš„ä»£ç ã€‚</p>
<p>åªæ˜¯å“ä½ ä¸€ä¸‹å•¦, ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è‹¹æœçˆ¸çˆ¸çš„å®˜æ–¹å®šä¹‰ã€‚</p>
<blockquote>
<p>â€œA protocol defines a blueprint of methods, propertiesâ€¦ The protocol can then be adopted by a class, structure, or enumerationâ€â€Šâ€”â€ŠApple</p>
<p>åè®®å®šä¹‰äº†æ–¹æ³•å±æ€§çš„è“å›¾, åè®®å¯ä»¥è¢«ç±»ã€ç»“æ„ä½“ã€è¿˜æœ‰æšä¸¾å®ç°ã€‚</p>
</blockquote>
<h3 id="Getting-Real-with-POP"><a href="#Getting-Real-with-POP" class="headerlink" title="Getting Real with POP"></a>Getting Real with POP</h3><p>é¦–å…ˆæˆ‘ä»¬è®¾è®¡ä¸€ä¸‹ human è¿™ä¸ªä¸œè¥¿ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123;<span class="keyword">get</span> <span class="keyword">set</span>&#125;</div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> &#123;<span class="keyword">get</span> <span class="keyword">set</span>&#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªåè®®ä¸­, æˆ‘æ²¡æœ‰ç”³æ˜ <code>drinking</code>. å®ƒåªæ˜¯å£°æ˜ä¸€äº›ä¸€å®šå­˜åœ¨çš„ä¸œè¥¿ã€‚ç°åœ¨å…ˆä¸è¦çº ç»“ <code>{get set}</code>. å®ƒåªæ˜¯è¡¨æ˜ä½ å¯ä»¥ç»™è¿™ä¸ªå±æ€§èµ‹å€¼ä¹Ÿå¯ä»¥å–å€¼ã€‚å…ˆä¸è¦æ‹…å¿ƒ, é™¤éä½ è¦ä½¿ç”¨è®¡ç®—å±æ€§ã€‚</p>
<p>æˆ‘ä»¬åœ¨å®šä¹‰ä¸€ä¸ªéŸ©å›½äºº ğŸ‡°ğŸ‡· ç»“æ„ä½“, æ¥å®ç°è¿™ä¸ªåè®®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Korean</span>: <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Bob Lee"</span></div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> = <span class="string">"Asian"</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªè¦è¿™ä¸ªç»“æ„ä½“éµå®ˆäº†è¿™ä¸ªåè®®ï¼Œå®ƒå°±å¿…é¡»è¦å®ç°è¿™ä¸ªåè®®ä¸­çš„å¤šæœ‰æ–¹æ³•å’Œå±æ€§ã€‚å¦‚æœæ²¡æœ‰çš„è¯ Xcode å°±ä¼šæŠ¥é”™ğŸ˜¡</p>
<p>åªè¦æ˜¯éµå®ˆäº†è¿™ä¸ªè“å›¾ã€‚ä½ å°±å¯ä»¥åšå…¶ä»–ä»»ä½•äº‹æƒ…äº†, ç›–ä¸€åº§é•¿åŸä¹Ÿæ²¡å…³ç³»ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ¥å®ç°ä¸€ä¸ªç¾å›½äºº ğŸ‡ºğŸ‡¸</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Korean</span>: <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Joe Smith"</span></div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> = <span class="string">"White"</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¾ˆé…·å§ï¼ ä¸éœ€è¦ç”¨é‚£äº› <code>init</code> <code>override</code> å…³é”®å­—ã€‚ å¼€å§‹æ„Ÿå…´è¶£äº†å—ï¼Ÿ</p>
<p><a href="https://www.youtube.com/watch?v=lyzcERHGH_8&amp;t=2s&amp;list=PL8btZwalbjYm5xDXDURW9u86vCtRKaHML&amp;index=1">Intro to Protocol Lesson</a></p>
<h3 id="Protocol-Inheritance"><a href="#Protocol-Inheritance" class="headerlink" title="Protocol Inheritance"></a>Protocol Inheritance</h3><p>å¦‚æœä½ æƒ³è¦ä¸€ä¸ª <code>superman</code> çš„åè®®ã€‚è¿™ä¸ªåè®®ä¹Ÿéœ€è¦éµå®ˆ <code>Human</code> è¿™ä¸ªåè®®å‘¢ï¼Ÿ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SuperHuman</span>: <span class="title">Human</span> </span>&#123;</div><div class="line"> <span class="keyword">var</span> canFly: <span class="type">Bool</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125; </div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">punch</span><span class="params">()</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨å¦‚æœä½ æœ‰ä¸€ä¸ªéµå®ˆäº† <code>SuperMan</code> è¿™ä¸ªåè®®çš„ç±»æˆ–è€…ç»“æ„ä½“çš„è¯ï¼Œè¿™ä¸ªç±»ä¹Ÿå¿…é¡»å®ç° <code>Human</code> è¿™ä¸ªåè®®ä¸­çš„æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SuperSaiyan</span>: <span class="title">SuperMan</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Goku"</span></div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> = <span class="string">"Asian"</span></div><div class="line">    <span class="keyword">var</span> canFly: <span class="type">Bool</span> = <span class="literal">true</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>) &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">punch</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"Puuooookkk"</span>) &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥éµå®ˆå¤šä¸ªåè®®ã€‚å°±å¯ä»¥å®ç°å¤šç»§æ‰¿äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Example</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Example</span>: <span class="title">ProtocolOne</span>, <span class="title">ProtocolTwo</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<h3 id="Protocol-Extension"><a href="#Protocol-Extension" class="headerlink" title="Protocol Extension"></a>Protocol Extension</h3><p>ä¸‹é¢æ‰æ˜¯åè®®æœ€å¼ºå¤§çš„ç‰¹æ€§äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Super Animal speaks English</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SuperAnimal</span> </span>&#123;</div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">speakEnglish</span><span class="params">()</span></span> </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»™è¿™ä¸ªåè®®åŠ ä¸€ä¸ª <code>Extension</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">SuperAnimal</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">speakEnglish</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"I speak English, pretty cool, huh?"</span>)&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨å†åˆ›å»ºä¸€ä¸ªéµå®ˆè¿™ä¸ªåè®®çš„ç±»</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Donkey</span>: <span class="title">SuperAnimal</span> </span>&#123;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> ramon = <span class="type">Donkey</span>()</div><div class="line">ramon.speakEnglish()</div><div class="line"><span class="comment">//  "I speak English, pretty cool, huh?"</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä½ ä½¿ç”¨äº† <code>Extension</code> å°±å¯ä»¥ç»™è¿™ä¸ªåè®®æ·»åŠ é»˜è®¤çš„å®ç°å’Œå±æ€§å€¼äº†ã€‚è¿™æ ·ä¸çˆ½å—ï¼Ÿ</p>
<h3 id="Protocol-as-Type-Last"><a href="#Protocol-as-Type-Last" class="headerlink" title="Protocol as Type(Last)"></a>Protocol as Type(Last)</h3><p>å¦‚æœæˆ‘è·Ÿä½ è¯´æˆ‘èƒ½åœ¨ä¸€ä¸ªæ•°ç»„ä¸­åŒæ—¶æ”¾ä¸€ä¸ªå¯¹è±¡å’Œä¸€ä¸ªç»“æ„ä½“å‘¢ï¼ŸğŸ˜®</p>
<p>æˆ‘è¦ç”¨è¢‹é¼ æ‰“æ¶æ±‚å¶æ¥å†™ä¸€ä¸ª demo äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Fightable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">legKick</span><span class="params">()</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">StructKangaroo</span>: <span class="title">Fightable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">legKick</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Puuook"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassKangroo</span>: <span class="title">Fightable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">legKick</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Pakkkk"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶ååˆå§‹åŒ–ä¿©è¢‹é¼ å‡ºæ¥</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> structKangroo = <span class="type">StructKangaroo</span>()</div><div class="line"><span class="keyword">let</span> classKangroo = <span class="type">ClassKangroo</span>()</div></pre></td></tr></table></figure>
<p>ç°åœ¨å°±å¯ä»¥æŠŠä»–ä»¬æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> kangaroos: [<span class="type">Fightable</span>] = [structKang, classKang]</div></pre></td></tr></table></figure>
<p>éš¾ä»¥ç½®ä¿¡å§ï¼ å†çœ‹çœ‹</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> kang <span class="keyword">in</span> kangaroos &#123; </div><div class="line"> kang.legKick() </div><div class="line">&#125;</div><div class="line"><span class="comment">// "Puuook"</span></div><div class="line"><span class="comment">// "Pakkkk"</span></div></pre></td></tr></table></figure>
<p>è¿™å¾ˆçˆ½å§ï¼ æƒ³è±¡åœ¨ OOP ä¸­æˆ‘ä»¬æ€ä¹ˆå®ç°è¿™ä¸ªä¸œè¥¿å‘¢ï¼Ÿ</p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://blog.bobthedeveloper.io/protocol-oriented-programming-view-in-swift-3-8bcb3305c427">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;OOP is okay, but couldâ€™ve been better&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction&quot;&gt;&lt;/a&gt;Introduction&lt;/h3&gt;&lt;p&gt;å³ä½¿ä½ è¿˜ä¸çŸ¥é“ Class å’Œ Struct åŸºæœ¬çš„åŒºåˆ«, ä½ ä¹Ÿå¯ä»¥çœ‹è¿™ä¸ªæ–‡ç« ã€‚éƒ½çŸ¥é“ Struct ä¸èƒ½ç»§æ‰¿, ä½†æ˜¯, ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è¿˜ä¸çŸ¥é“ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆ, èŠ±ä¸¤åˆ†é’Ÿæ—¶é—´è¯»ä¸€ä¸‹ä¸‹é¢è¿™æ®µä»£ç ã€‚è¿™äº›ä»£ç æ˜¯å†™åœ¨ playground ä¸Šçš„&lt;/p&gt;
    
    </summary>
    
      <category term="POP" scheme="https://CepheusSun.github.io/categories/POP/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusSun.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusSun.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="POP" scheme="https://CepheusSun.github.io/tags/POP/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift MVVM API Manual ğŸ“ƒ</title>
    <link href="https://CepheusSun.github.io/2017/05/07/RxSwift%20MVVM%20API%20Manual/"/>
    <id>https://CepheusSun.github.io/2017/05/07/RxSwift MVVM API Manual/</id>
    <published>2017-05-07T11:02:57.000Z</published>
    <updated>2017-05-10T01:06:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç°åœ¨æˆ‘ä»¬æŒæ¡äº†æ‰€æœ‰çš„å·¥å…·, ä¹Ÿæ˜ç¡®äº†ä»–å­˜åœ¨çš„é£é™©ä»¥åŠè§„é¿çš„æ–¹æ³•ã€‚ç°åœ¨æ˜¯æ—¶å€™æƒ³æƒ³åº”è¯¥æ€ä¹ˆæ ·æœ€å¤§å¯èƒ½çš„è¿ç”¨å®ƒäº†ã€‚ä»¥ MVVM ä¸ºä¾‹ã€‚</p>
<p>åˆå¾ˆå¤šæ–¹æ³•æ¥å†™ RxSwift çš„ APIã€‚ æˆ‘æ€•çš„åšæ³•æ˜¯: åˆ©ç”¨ RxSwift å¾ˆé…·çš„è§‚å¯Ÿè€…æ¨¡å¼å’Œå¾ˆæ–¹ä¾¿çš„æ“ä½œç¬¦, ç®¡ç†å¼‚æ­¥çš„ä»»åŠ¡ã€‚å¯èƒ½ä¸æ˜¯ 100% çº¯æ­£çš„ RxSwiftã€‚ åœ¨å°†æˆ‘åšè¿‡å¾ˆå¤šçš„å°è¯•è¯•å›¾å°†ä¸¤ç§ç¼–ç¨‹æ€ç»´ç»Ÿä¸€èµ·æ¥,ä½†æ˜¯æˆ‘éƒ½å¤±è´¥äº†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›æˆ‘ä½¿ç”¨ RxSwift çš„æ–¹æ³•ã€‚</p>
<h3 id="Be-Consistent"><a href="#Be-Consistent" class="headerlink" title="Be Consistent"></a>Be Consistent</h3><p>è¿™æ˜¯åœ¨æ¥å£è®¾è®¡ä¸­æœ€é‡è¦çš„äº‹æƒ…, å¦‚æœä½ åšå‡ºäº†é€‰æ‹©ã€‚å°±åšæŒä¸‹å»ã€‚</p>
<p>æ—¢ç„¶å¦‚æ­¤, ç°åœ¨å°±å¼€å§‹å§ï¼<strong>input vs output</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FilterViewModel</span> </span>&#123;</div><div class="line">    <span class="comment">//Input</span></div><div class="line">    <span class="keyword">let</span> filterButtonEvents: <span class="type">BehaviorSubject</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">    <span class="keyword">let</span> filterSelectionEvent: <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">    </div><div class="line">    <span class="comment">//OutPut</span></div><div class="line">    <span class="keyword">let</span> currentFilter: <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">    <span class="keyword">let</span> shouldShowFilter: <span class="type">Observable</span>&lt;<span class="type">Bool</span>&gt;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ‰å¥½å‡ ä¸ªå¯ä»¥ç”¨æ¥å£°æ˜ inout å’Œ output çš„ç»„åˆã€‚è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªã€‚</p>
<h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><p>é€šè¿‡å°† <code>input</code> å£°æ˜æˆ <code>subject</code> ç±»å‹ã€‚æˆ‘å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ <code>RxSwift</code> ä¸­çš„å„ç§æ“ä½œç¬¦ã€‚æˆ‘ç”¨çš„æœ€å¤šçš„åº”è¯¥æ˜¯ <strong>throttle</strong>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">filterButtonEvents</div><div class="line">    .throttle(<span class="number">0.5</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (counter) <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>?.makeRequest()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>å½“ç„¶ç”¨ observable åš input ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<h4 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h4><p>è®°ä½ <code>output</code> åº”è¯¥æ˜¯ <code>Observable</code>, ç”šè‡³æ˜¯ <code>Subject</code>ã€‚ å¦‚æœä¸è¿™æ ·çš„è¯ï¼Œä¸€äº›å¤–éƒ¨çš„ç±»å¯èƒ½ä¼šé”™è¯¯çš„æŠŠè¿™ä»–å½“åšæ˜¯ <code>input</code> è¿™æ ·å°±æ‰“ç ´äº†å°è£…äº†ã€‚å½“æˆ‘æƒ³è¦å‘å‡ºä¸€ä¸ªå˜é‡çš„æ—¶å€™, å°±æ˜¯å¼ºåˆ¶çš„é‡Šæ”¾ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(observable <span class="keyword">as</span>! <span class="type">PublishSubject</span>)</div><div class="line">    .onNext(<span class="string">"Ugly..."</span>)</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ çŸ¥é“æœ‰æ›´å¥½çš„æ–¹æ³•, ä¸€å®šè¦å‘Šè¯‰æˆ‘ã€‚æˆ‘æ„Ÿè§‰è¿™ä¹ˆå¹²æ˜¯åœ¨æ˜¯ä¸ä¼˜é›…ğŸ˜±ã€‚</p>
<h3 id="Safety"><a href="#Safety" class="headerlink" title="Safety"></a>Safety</h3><p>å¦‚æœåœ¨ä¸€ä¸ªç®€å•çš„ Demo ä¸­, ä½ å¯èƒ½è®°å¾—åšæ‰€æœ‰çš„ç»†èŠ‚ã€‚ä½†åœ¨ä¸€ä¸ªå¤æ‚çš„ app ä¸­, ä½ å‡ ä¹ä¸å¯èƒ½è®°å¾—ä½æ‰€æœ‰çš„å®ç°ç»†èŠ‚ã€‚è¿™é‡Œé¢å¯èƒ½æœ‰å¥½å‡ ç™¾ä¸ªè®¢é˜…è€…ã€‚ <code>Observable</code> åˆæ˜¯ä¸€ä¸ªéå¸¸å¹¿æ³›çš„ç±»å‹ã€‚éƒ½è¿˜æ²¡æœ‰è¯´è¿™ä¸ªä¿¡å·æ˜¯çƒ­ä¿¡å·è¿˜æ˜¯å†·ä¿¡å·, ä»–æ˜¯åœ¨ä¸»çº¿ç¨‹è¿˜æ˜¯åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œã€‚è¿™ä¹Ÿæ˜¯ <code>Driver</code> è¢«è®¾è®¡å‡ºæ¥çš„åŸå› , ä¸ºäº†è®© API æ›´åŠ æ˜ç¡®ã€‚æˆ‘ä»¬é¼“åŠ±è‡ªå·±å»åˆ›å»ºä¸€äº›å•å…ƒã€‚</p>
<a id="more"></a>
<p><strong>Driver</strong> æ˜¯ä¸€ä¸ªçƒ­ä¿¡å·, è€Œä¸”æ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹å½“ä¸­çš„ã€‚å¥½æƒ³å¿½ç•¥æ‰äº†å†·ä¿¡å·ï¼Ÿæ²¡å…³ç³», åˆ›é€ ä¸€ä¸ªå°±æ˜¯äº†ã€‚æˆ‘ç§°ä»–ä½œ <strong>Template</strong> å› ä¸ºå†·ä¿¡å·å°±æ˜¯æ˜¯ä¸€ä¸ªæ¨¡ç‰ˆ, åœ¨è¿™ä¸ªæ¨¡ç‰ˆä¸­ä½ å¯ä»¥ç”¨ <code>subscribe</code> æ¥è¿è¡Œä»–ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Template</span>&lt;<span class="title">Element</span>&gt; </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">Element</span>&gt;</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(<span class="number">_</span> subscribe: @escaping (<span class="type">AnyObserver</span>&lt;<span class="type">Element</span>&gt;) -&gt; <span class="type">Disposable</span>) &#123;</div><div class="line">        observable = <span class="type">Observable</span>.create(subscribe)</div><div class="line">            .subscribeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ · <code>Template</code> å°±èƒ½ç¡®ä¿æ˜¯ä¸€ä¸ªåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„å†·ä¿¡å·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">class MyViewModel &#123;</div><div class="line"> //Cold â„ï¸</div><div class="line"> let createRequest : Template&lt;Int&gt;</div><div class="line"> //Hot ğŸŒ¶</div><div class="line"> let shouldShowElement : Driver&lt;Bool&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·çœ‹, ç¨‹åºä¸­æš´éœ²çš„æ¥å£å°±å¾ˆæ˜ç¡®äº†ã€‚</p>
<h3 id="MVVM-State-Machine"><a href="#MVVM-State-Machine" class="headerlink" title="MVVM State Machine"></a>MVVM State Machine</h3><p>æ¶‰åŠåˆ°çŠ¶æ€çš„ç®¡ç†çš„æ—¶å€™, <code>ViewController</code> ç»å¸¸ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚å¦‚æœåœ¨ <code>viewModel</code> ä¸­ä½¿ç”¨çŠ¶æ€æœº, æ¥å‘Šè¯‰ <code>ViewController</code> åœ¨ä»€ä¹ˆæ—¶å€™åº”è¯¥æ€ä¹ˆåšã€‚<a href="http://curtclifton.net/generic-state-machine-in-swift">è¿™é‡Œæœ‰ä¸€ç¯‡ä¸é”™çš„æ–‡ç« </a></p>
<ul>
<li>æŠŠè¿™äº›çŠ¶æ€æ”¾åœ¨ä¸€ä¸ªæšä¸¾é‡Œé¢, è€Œä¸æ˜¯åˆ†æ•£åœ¨å„ä¸ªåœ°æ–¹ã€‚è¿™æ ·åšå¯ä»¥æå¤§çš„å‡å°‘ä½ çš„ <code>Observable</code>ã€‚</li>
<li>è¿™ä¹Ÿä¼šå¼ºè¿«ä½ å§æ›´å¤šçš„é€»è¾‘ç§»åˆ° <code>ViewModel</code> é‡Œé¢ã€‚</li>
<li>è®©ä½ çš„ä»£ç æ›´åŠ çš„å…·æœ‰å£°æ˜æ€§ã€‚<br>ğŸ‘‹</li>
</ul>
<p><a href="http://swiftpearls.com/mvvm-state-manage.html">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç°åœ¨æˆ‘ä»¬æŒæ¡äº†æ‰€æœ‰çš„å·¥å…·, ä¹Ÿæ˜ç¡®äº†ä»–å­˜åœ¨çš„é£é™©ä»¥åŠè§„é¿çš„æ–¹æ³•ã€‚ç°åœ¨æ˜¯æ—¶å€™æƒ³æƒ³åº”è¯¥æ€ä¹ˆæ ·æœ€å¤§å¯èƒ½çš„è¿ç”¨å®ƒäº†ã€‚ä»¥ MVVM ä¸ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;åˆå¾ˆå¤šæ–¹æ³•æ¥å†™ RxSwift çš„ APIã€‚ æˆ‘æ€•çš„åšæ³•æ˜¯: åˆ©ç”¨ RxSwift å¾ˆé…·çš„è§‚å¯Ÿè€…æ¨¡å¼å’Œå¾ˆæ–¹ä¾¿çš„æ“ä½œç¬¦, ç®¡ç†å¼‚æ­¥çš„ä»»åŠ¡ã€‚å¯èƒ½ä¸æ˜¯ 100% çº¯æ­£çš„ RxSwiftã€‚ åœ¨å°†æˆ‘åšè¿‡å¾ˆå¤šçš„å°è¯•è¯•å›¾å°†ä¸¤ç§ç¼–ç¨‹æ€ç»´ç»Ÿä¸€èµ·æ¥,ä½†æ˜¯æˆ‘éƒ½å¤±è´¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€äº›æˆ‘ä½¿ç”¨ RxSwift çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Be-Consistent&quot;&gt;&lt;a href=&quot;#Be-Consistent&quot; class=&quot;headerlink&quot; title=&quot;Be Consistent&quot;&gt;&lt;/a&gt;Be Consistent&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯åœ¨æ¥å£è®¾è®¡ä¸­æœ€é‡è¦çš„äº‹æƒ…, å¦‚æœä½ åšå‡ºäº†é€‰æ‹©ã€‚å°±åšæŒä¸‹å»ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶å¦‚æ­¤, ç°åœ¨å°±å¼€å§‹å§ï¼&lt;strong&gt;input vs output&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;FilterViewModel&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//Input&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; filterButtonEvents: &lt;span class=&quot;type&quot;&gt;BehaviorSubject&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; filterSelectionEvent: &lt;span class=&quot;type&quot;&gt;PublishSubject&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//OutPut&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; currentFilter: &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; shouldShowFilter: &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æœ‰å¥½å‡ ä¸ªå¯ä»¥ç”¨æ¥å£°æ˜ inout å’Œ output çš„ç»„åˆã€‚è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;h4 id=&quot;Input&quot;&gt;&lt;a href=&quot;#Input&quot; class=&quot;headerlink&quot; title=&quot;Input&quot;&gt;&lt;/a&gt;Input&lt;/h4&gt;&lt;p&gt;é€šè¿‡å°† &lt;code&gt;input&lt;/code&gt; å£°æ˜æˆ &lt;code&gt;subject&lt;/code&gt; ç±»å‹ã€‚æˆ‘å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ &lt;code&gt;RxSwift&lt;/code&gt; ä¸­çš„å„ç§æ“ä½œç¬¦ã€‚æˆ‘ç”¨çš„æœ€å¤šçš„åº”è¯¥æ˜¯ &lt;strong&gt;throttle&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;filterButtonEvents&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .throttle(&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;, scheduler: &lt;span class=&quot;type&quot;&gt;MainScheduler&lt;/span&gt;.instance)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; [&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;] (counter) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;?.makeRequest()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å½“ç„¶ç”¨ observable åš input ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;Output&quot;&gt;&lt;a href=&quot;#Output&quot; class=&quot;headerlink&quot; title=&quot;Output&quot;&gt;&lt;/a&gt;Output&lt;/h4&gt;&lt;p&gt;è®°ä½ &lt;code&gt;output&lt;/code&gt; åº”è¯¥æ˜¯ &lt;code&gt;Observable&lt;/code&gt;, ç”šè‡³æ˜¯ &lt;code&gt;Subject&lt;/code&gt;ã€‚ å¦‚æœä¸è¿™æ ·çš„è¯ï¼Œä¸€äº›å¤–éƒ¨çš„ç±»å¯èƒ½ä¼šé”™è¯¯çš„æŠŠè¿™ä»–å½“åšæ˜¯ &lt;code&gt;input&lt;/code&gt; è¿™æ ·å°±æ‰“ç ´äº†å°è£…äº†ã€‚å½“æˆ‘æƒ³è¦å‘å‡ºä¸€ä¸ªå˜é‡çš„æ—¶å€™, å°±æ˜¯å¼ºåˆ¶çš„é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;(observable &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;! &lt;span class=&quot;type&quot;&gt;PublishSubject&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .onNext(&lt;span class=&quot;string&quot;&gt;&quot;Ugly...&quot;&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœä½ çŸ¥é“æœ‰æ›´å¥½çš„æ–¹æ³•, ä¸€å®šè¦å‘Šè¯‰æˆ‘ã€‚æˆ‘æ„Ÿè§‰è¿™ä¹ˆå¹²æ˜¯åœ¨æ˜¯ä¸ä¼˜é›…ğŸ˜±ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Safety&quot;&gt;&lt;a href=&quot;#Safety&quot; class=&quot;headerlink&quot; title=&quot;Safety&quot;&gt;&lt;/a&gt;Safety&lt;/h3&gt;&lt;p&gt;å¦‚æœåœ¨ä¸€ä¸ªç®€å•çš„ Demo ä¸­, ä½ å¯èƒ½è®°å¾—åšæ‰€æœ‰çš„ç»†èŠ‚ã€‚ä½†åœ¨ä¸€ä¸ªå¤æ‚çš„ app ä¸­, ä½ å‡ ä¹ä¸å¯èƒ½è®°å¾—ä½æ‰€æœ‰çš„å®ç°ç»†èŠ‚ã€‚è¿™é‡Œé¢å¯èƒ½æœ‰å¥½å‡ ç™¾ä¸ªè®¢é˜…è€…ã€‚ &lt;code&gt;Observable&lt;/code&gt; åˆæ˜¯ä¸€ä¸ªéå¸¸å¹¿æ³›çš„ç±»å‹ã€‚éƒ½è¿˜æ²¡æœ‰è¯´è¿™ä¸ªä¿¡å·æ˜¯çƒ­ä¿¡å·è¿˜æ˜¯å†·ä¿¡å·, ä»–æ˜¯åœ¨ä¸»çº¿ç¨‹è¿˜æ˜¯åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œã€‚è¿™ä¹Ÿæ˜¯ &lt;code&gt;Driver&lt;/code&gt; è¢«è®¾è®¡å‡ºæ¥çš„åŸå› , ä¸ºäº†è®© API æ›´åŠ æ˜ç¡®ã€‚æˆ‘ä»¬é¼“åŠ±è‡ªå·±å»åˆ›å»ºä¸€äº›å•å…ƒã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusSun.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusSun.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift Safety Manual ğŸ“š</title>
    <link href="https://CepheusSun.github.io/2017/05/07/RxSwift%20Safety%20Manual/"/>
    <id>https://CepheusSun.github.io/2017/05/07/RxSwift Safety Manual/</id>
    <published>2017-05-07T09:19:57.000Z</published>
    <updated>2017-05-07T09:19:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>RxSwift æä¾›äº†å¤§é‡éå¸¸å¥½ç”¨çš„å·¥å…·, è®©å†™ä»£ç æ›´çˆ½, ä½†æ˜¯ä»–ä¹Ÿå¯èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¤´ç–¼çš„åœ°æ–¹, ä¹Ÿå¯èƒ½æ˜¯bugğŸ˜±ã€‚ ç”¨äº†ä¸‰ä¸ªæœˆä¹‹åæˆ‘è§‰å¾—æˆ‘åº”è¯¥ä¹Ÿå¯ä»¥ç»™å‡ºä¸€äº›å»ºè®®æ¥é¿å…ä¸€äº›é—®é¢˜ã€‚</p>
<h3 id="Side-Effects"><a href="#Side-Effects" class="headerlink" title="Side Effects"></a>Side Effects</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­å‰¯ä½œç”¨è¿™ä¸ªè¯å¯èƒ½æ²¡é‚£ä¹ˆå®¹æ˜“ç†è§£, å› ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸å®½æ³›çš„å†…å®¹ã€‚åœ¨ <a href="http://softwareengineering.stackexchange.com/questions/40297/what-is-a-side-effect">Stackoverflow</a> æœ‰ä¸€äº›æ¯”è¾ƒå¥½çš„è®¨è®ºã€‚</p>
<p>ç®€å•ç‚¹è¯´, ä¸€ä¸ªå‡½æ•°/é—­åŒ…/â€¦å¦‚æœä»–ä»¬æ”¹å˜äº† app çš„çŠ¶æ€, éƒ½æœ‰å¯èƒ½å¸¦æ¥ä¸€äº›å‰¯ä½œç”¨ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="comment">// è¿™æ ·å†™æ²¡æœ‰å‰¯ä½œç”¨</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> observableWithSideEffect = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="comment">// è¿™é‡Œå°±ä¼šæœ‰å‰¯ä½œç”¨: è¿™ä¸ª closure æ”¹å˜äº† counter çš„å€¼</span></div><div class="line">    counter = counter + <span class="number">1</span></div><div class="line">    observer.onNext(counter)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆåœ¨ RxSwift ä¸­è¿™ä¸ªå¾ˆé‡è¦å‘¢? å› ä¸ºå¯¹äºå†·ä¿¡å·â„ï¸æ¥è¯´ã€‚<strong>æ¯æ¬¡è¢«è®¢é˜…ä»–éƒ½ä¼šæ‰§è¡Œä¸€ä¸‹é‡Œé¢çš„ä»»åŠ¡</strong></p>
<p>æˆ‘ä»¬ä¸¤æ¬¡è®¢é˜…è¿™ä¸ª <code>observableWithSideEffect</code>: </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯èƒ½å¸Œæœ›ä»–è¾“å‡ºçš„æ˜¯ä¸¤ä¸ª2.ä½†æ˜¯äº‹å®ä¸Šå®ƒä¼šè¾“å‡º2ï¼Œ3. å› ä¸ºæ¯æ¬¡è®¢é˜…éƒ½ä¼šåˆ†åˆ«æ‰§è¡Œ, æ‰€ä»¥åœ¨é—­åŒ…é‡Œé¢çš„ä»£ç ä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ã€‚<strong>æ‰€ä»¥ counter + 1 ä¼šæ‰§è¡Œä¸¤æ¬¡</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´, å¦‚æœä½ åœ¨è¿™é‡Œé¢æˆ¿é‡Œä¸¤ä¸ªç½‘ç»œè¯·æ±‚ã€‚<strong>å®ƒä¼šå‘å‡ºä¸¤æ¬¡è¯·æ±‚</strong></p>
<p>æˆ‘ä»¬æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ æŠŠè¿™ä¸ªå†·ä¿¡å·è½¬æ¢æˆçƒ­ä¿¡å·ğŸ’¡ã€‚ ä½¿ç”¨ <strong>publish</strong> connect è¿˜æœ‰ refCount å°±å¯ä»¥äº†,è¿™æ˜¯<a href="http://www.tailec.com/blog/understanding-publish-connect-refcount-share">å®Œæ•´ç»†èŠ‚</a>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> counter = <span class="number">1</span></div><div class="line"><span class="keyword">let</span> observableWithSideEffect = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    counter = counter + <span class="number">1</span></div><div class="line">    observer.onNext(counter)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;.publish()</div><div class="line"><span class="comment">// publish returns an observable with a shared subscription(hot).</span></div><div class="line"><span class="comment">// It's not active yet</span></div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .connect()</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™ä¼šè¾“å‡º 2ï¼Œ2</p>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹è¿™å°±å¤Ÿäº†ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæ›´é«˜çº§çš„ <em>shareReplay</em> æ“ä½œç¬¦ã€‚ä»–ä½¿ç”¨äº† <code>refCont</code> æ“ä½œç¬¦åˆ <code>replay</code>. <code>refCount</code> ä¹Ÿæ˜¯ä¸€ç§ <code>connect</code> ä½†æ˜¯å®ƒæ˜¯è‡ªåŠ¨ç®¡ç†çš„ã€‚ä»–ä¼šåœ¨ç¬¬ä¸€æ¬¡è®¢é˜…å¼€å§‹çš„æ—¶å€™å¼€å§‹ã€‚ replay ä¼šæŠŠä¸€äº›å…ƒç´ å‘é€ç»™é‚£äº› â€œè¿Ÿåˆ°äº†â€ çš„è®¢é˜…è€…/</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> counter = <span class="number">1</span></div><div class="line"><span class="keyword">let</span> observableWithSideEffect = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    counter = counter + <span class="number">1</span></div><div class="line">    observer.onNext(counter)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;.shareReplay(<span class="number">1</span>)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Main-Queue"><a href="#Main-Queue" class="headerlink" title="Main Queue"></a>Main Queue</h3><p>å½“è®¢é˜…è¡Œä¸ºæ˜¯å‘ç”Ÿåœ¨ viewcontroller ä¸Š, ç„¶åä½ ä¸çŸ¥é“è®¢é˜…è¡Œä¸ºæ˜¯åœ¨é‚£ä¸ªçº¿ç¨‹ä¸­è¿›è¡Œçš„ã€‚åœ¨åˆ·æ–° UI çš„æ—¶å€™ç¡®å®šè¿™æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œçš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observableWithSideEffect</div><div class="line">    .observeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="comment">// update UI</span></div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Error-Events"><a href="#Error-Events" class="headerlink" title="Error Events"></a>Error Events</h3><p>å¦‚æœä½ æŠŠå¥½å‡ ä¸ª <code>Observerable</code> åˆå¹¶åœ¨äº†ä¸€èµ·ã€‚å¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªå‘ç”Ÿäº†é”™è¯¯ã€‚æ‰€æœ‰çš„ <code>Observerable</code> éƒ½ä¼šç»“æŸã€‚å¦‚æœæœ€å¼€å§‹æ˜¯UIçš„è¯, ä»–å°±ä¼šåœæ­¢å“åº”ã€‚ä½ åº”è¯¥å¥½å¥½çš„è®¾è®¡ä½ çš„ä»£ç , è€ƒè™‘å¥½å¦‚æœå‘ç”Ÿäº† <code>complete</code> æˆ–è€… <code>error</code> ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">viewModel.importantText</div><div class="line">    .bindTo(myImportantLabel.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>å¦‚æœ viewModel.importantText å› ä¸ºä»€ä¹ˆåŸå› å‘é€å‡ºæ¥ä¸€ä¸ªerroräº‹ä»¶ã€‚è¿™ä¸ª <code>bingding</code> è®¢é˜…ä¹Ÿä¼šç»“æŸã€‚</p>
<p>å¦‚æœä½ æƒ³é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿä½ å¯ä»¥ä½¿ç”¨ <strong>catchErrorJustReturn</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.importantText</div><div class="line">    .catchErrorJustReturn(<span class="string">"default text"</span>)</div><div class="line">    .bind(to: lable.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Driver"><a href="#Driver" class="headerlink" title="Driver"></a>Driver</h3><p><strong>Driver</strong> æ˜¯ä¸€ä¸ªèƒ½å¤Ÿ <code>observeOn</code>ã€<code>catchErrorJustReturn</code>ã€<code>shareReplay</code> <strong>Observable</strong>.å¦‚æœä½ æƒ³åœ¨viewModelä¸­æš´éœ²ä¸€ä¸ªå®‰å…¨çš„APIã€‚ä½¿ç”¨ <strong>Driver</strong> æ˜¯æ›´å¥½çš„åšæ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.importantText</div><div class="line">    .asDriver(onErrorJustReturn: <span class="string">"default text"</span>)</div><div class="line">    .drive(lable.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Reference-Cycles"><a href="#Reference-Cycles" class="headerlink" title="Reference Cycles"></a>Reference Cycles</h3><p>é˜²æ­¢å†…å­˜æ³„æ¼éœ€è¦åœ¨è¯å¾ˆå¤šå¿ƒæ€åœ¨é¿å…å¼•ç”¨å¾ªç¯ä¸Šï¼Œå½“æˆ‘ä»¬ä½¿ç”¨åœ¨è®¢é˜…é—­åŒ…ä¸­ä½¿ç”¨å¤–éƒ¨å˜é‡çš„æ—¶å€™ã€‚è¿™ä¸ªå˜é‡ä¼šè¢«æ•è·ä¸ºä¸€ä¸ªå¼ºå¼•ç”¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.priceString</div><div class="line">    .subscribe(onNext: &#123;(text) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.priceLabel.text = text</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ª vc å¼ºå¼•ç”¨äº† viewModelã€‚ç°åœ¨è¿™ä¸ª viewmodel åˆå› ä¸ºåœ¨è¿™ä¸ªé—­åŒ…ä¸­å¼ºå¼•ç”¨äº†è¿™ä¸ª vcã€‚è¿™å°±å¸¦æ¥äº†å¾ªç¯å¼•ç”¨ã€‚ <a href="https://krakendev.io/blog/weak-and-unowned-references-in-swift">â€œWEAK, STRONG, UNOWNED, OH MY!â€ - A GUIDE TO REFERENCES IN SWIFT</a></p>
<p>ä¸‹é¢æ˜¯è§£å†³åŠæ³•</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.priceString</div><div class="line">    .subscribe(onNext: &#123;[<span class="keyword">unowned</span> <span class="keyword">self</span>] (text) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.priceLabel.text = text</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <strong>[unowned self]</strong> è¯­å¥ä¹‹åå°±ä¸ç”¨å»è€ƒè™‘è¿™ä¸ªé—®é¢˜äº†ğŸ¤—ã€‚</p>
<p>self å¹¶ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªä½ éœ€è¦æ‹…å¿ƒçš„ä¸œè¥¿ã€‚ä½ å¯èƒ½éœ€è¦è€ƒè™‘æ‰€æœ‰ä½ åœ¨åœ¨é—­åŒ…ä¸­æ•è·çš„å˜é‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// out side the view controller</span></div><div class="line">        viewModel.priceString</div><div class="line">            .subscribe(onNext: &#123;[<span class="keyword">weak</span> viewController] (text) <span class="keyword">in</span></div><div class="line">                viewController?.priceLabel.text = text</div><div class="line">            &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™å¯èƒ½ä¼šæ¯”è¾ƒå¤æ‚ã€‚è¿™ä¹Ÿæ˜¯æˆ‘<strong>å¼ºçƒˆå»ºè®®ä½ å°½é‡è®©ä½ çš„é—­åŒ…å¾ˆçŸ­</strong>çš„åŸå› ã€‚å¦‚æœä¸€ä¸ªé—­åŒ…è¶…è¿‡äº†3ã€4è¡Œä»£ç çš„è¯ã€‚å¯ä»¥è€ƒè™‘æŠŠè¿™éƒ¨åˆ†é€»è¾‘æ”¾åœ¨ä¸€ä¸ªæ–°çš„æ–¹æ³•é‡Œé¢å»ã€‚è¿™æ ·çš„è¯ï¼Œè¿™äº›ä¾èµ–å…³ç³»å°±ä¼šå˜çš„å¾ˆæ˜ç¡®äº†ã€‚ä½ æ‰èƒ½å¤Ÿå¾ˆå¥½çš„å»è€ƒè™‘å¼ºå¼±åº”ç”¨çš„é—®é¢˜ã€‚</p>
<h3 id="Managing-your-subscriptions"><a href="#Managing-your-subscriptions" class="headerlink" title="Managing your subscriptions"></a>Managing your subscriptions</h3><p>è®°ä½è¦æŠŠä½ ä¸éœ€è¦è®¢é˜…çš„è®¢é˜…æ¸…æ¥šæ‰ã€‚æˆ‘æ›¾ç»é‡åˆ°è¿‡ä¸€æ¬¡, ç”±äºæˆ‘æ²¡æœ‰åŠæ—¶çš„æ¸…é™¤æ‰æˆ‘çš„è®¢é˜…, å½“ <code>cell</code> è¢«é‡ç”¨çš„æ—¶å€™, å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è®¢é˜…, å¯¼è‡´äº†éå¸¸å£®è§‚çš„ <strong>bug</strong>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reuseBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="comment">// Called each time a cell is reused</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">configCell</span><span class="params">()</span></span> &#123;</div><div class="line">    viewModel</div><div class="line">        .subscribe(onNext: &#123; [<span class="keyword">unowned</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">            <span class="keyword">self</span>.sendOpenNewDetailsScreen()</div><div class="line">        &#125;)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Creating a new bag for each cell</span></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">prepareForReuse</span><span class="params">()</span></span> &#123;</div><div class="line">    reuseBag = <span class="type">DisposeBag</span>()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>RxSwift æ˜¯éå¸¸å¤æ‚çš„ä¸œè¥¿ã€‚ä½†æ˜¯å¦‚æœä½ è®¾å®šå¥½äº†è‡ªå·±çš„ä¸€å¥—è§„åˆ™, ç„¶ååœ¨ç¼–ç çš„æ—¶å€™åšæŒè¿™ä¸ªè§„åˆ™ã€‚è¿™ä¹Ÿæ²¡ä»€ä¹ˆå¥½éš¾å—çš„ğŸ˜‡ã€‚ åœ¨ä½¿ç”¨ RxSwift åšçš„æ—¶å€™åœ¨æ¯ä¸€å±‚ä¸­è€ƒè™‘æ¸…æ¥šä½ éœ€è¦æŠŠå“ªäº› API æš´éœ²å‡ºæ¥ã€‚è¿™ä¹Ÿèƒ½å¸®åŠ©ä½ å¾ˆå¿«çš„å‘ç° bugã€‚</p>
<p><a href="http://swiftpearls.com/RxSwift-Safety-Manual.html">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;RxSwift æä¾›äº†å¤§é‡éå¸¸å¥½ç”¨çš„å·¥å…·, è®©å†™ä»£ç æ›´çˆ½, ä½†æ˜¯ä»–ä¹Ÿå¯èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¤´ç–¼çš„åœ°æ–¹, ä¹Ÿå¯èƒ½æ˜¯bugğŸ˜±ã€‚ ç”¨äº†ä¸‰ä¸ªæœˆä¹‹åæˆ‘è§‰å¾—æˆ‘åº”è¯¥ä¹Ÿå¯ä»¥ç»™å‡ºä¸€äº›å»ºè®®æ¥é¿å…ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Side-Effects&quot;&gt;&lt;a href=&quot;#Side-Effects&quot; class=&quot;headerlink&quot; title=&quot;Side Effects&quot;&gt;&lt;/a&gt;Side Effects&lt;/h3&gt;&lt;p&gt;åœ¨è®¡ç®—æœºç§‘å­¦ä¸­å‰¯ä½œç”¨è¿™ä¸ªè¯å¯èƒ½æ²¡é‚£ä¹ˆå®¹æ˜“ç†è§£, å› ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸å®½æ³›çš„å†…å®¹ã€‚åœ¨ &lt;a href=&quot;http://softwareengineering.stackexchange.com/questions/40297/what-is-a-side-effect&quot;&gt;Stackoverflow&lt;/a&gt; æœ‰ä¸€äº›æ¯”è¾ƒå¥½çš„è®¨è®ºã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•ç‚¹è¯´, ä¸€ä¸ªå‡½æ•°/é—­åŒ…/â€¦å¦‚æœä»–ä»¬æ”¹å˜äº† app çš„çŠ¶æ€, éƒ½æœ‰å¯èƒ½å¸¦æ¥ä¸€äº›å‰¯ä½œç”¨ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// è¿™æ ·å†™æ²¡æœ‰å‰¯ä½œç”¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observableWithSideEffect = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// è¿™é‡Œå°±ä¼šæœ‰å‰¯ä½œç”¨: è¿™ä¸ª closure æ”¹å˜äº† counter çš„å€¼&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    counter = counter + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆåœ¨ RxSwift ä¸­è¿™ä¸ªå¾ˆé‡è¦å‘¢? å› ä¸ºå¯¹äºå†·ä¿¡å·â„ï¸æ¥è¯´ã€‚&lt;strong&gt;æ¯æ¬¡è¢«è®¢é˜…ä»–éƒ½ä¼šæ‰§è¡Œä¸€ä¸‹é‡Œé¢çš„ä»»åŠ¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸¤æ¬¡è®¢é˜…è¿™ä¸ª &lt;code&gt;observableWithSideEffect&lt;/code&gt;: &lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;observableWithSideEffect&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; (counter) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observableWithSideEffect&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; (counter) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬å¯èƒ½å¸Œæœ›ä»–è¾“å‡ºçš„æ˜¯ä¸¤ä¸ª2.ä½†æ˜¯äº‹å®ä¸Šå®ƒä¼šè¾“å‡º2ï¼Œ3. å› ä¸ºæ¯æ¬¡è®¢é˜…éƒ½ä¼šåˆ†åˆ«æ‰§è¡Œ, æ‰€ä»¥åœ¨é—­åŒ…é‡Œé¢çš„ä»£ç ä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ã€‚&lt;strong&gt;æ‰€ä»¥ counter + 1 ä¼šæ‰§è¡Œä¸¤æ¬¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´, å¦‚æœä½ åœ¨è¿™é‡Œé¢æˆ¿é‡Œä¸¤ä¸ªç½‘ç»œè¯·æ±‚ã€‚&lt;strong&gt;å®ƒä¼šå‘å‡ºä¸¤æ¬¡è¯·æ±‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ æŠŠè¿™ä¸ªå†·ä¿¡å·è½¬æ¢æˆçƒ­ä¿¡å·ğŸ’¡ã€‚ ä½¿ç”¨ &lt;strong&gt;publish&lt;/strong&gt; connect è¿˜æœ‰ refCount å°±å¯ä»¥äº†,è¿™æ˜¯&lt;a href=&quot;http://www.tailec.com/blog/understanding-publish-connect-refcount-share&quot;&gt;å®Œæ•´ç»†èŠ‚&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; counter = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observableWithSideEffect = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    counter = counter + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;.publish()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// publish returns an observable with a shared subscription(hot).&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// It&#39;s not active yet&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observableWithSideEffect&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; (counter) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observableWithSideEffect&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .connect()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ä¼šè¾“å‡º 2ï¼Œ2&lt;/p&gt;
&lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹è¿™å°±å¤Ÿäº†ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæ›´é«˜çº§çš„ &lt;em&gt;shareReplay&lt;/em&gt; æ“ä½œç¬¦ã€‚ä»–ä½¿ç”¨äº† &lt;code&gt;refCont&lt;/code&gt; æ“ä½œç¬¦åˆ &lt;code&gt;replay&lt;/code&gt;. &lt;code&gt;refCount&lt;/code&gt; ä¹Ÿæ˜¯ä¸€ç§ &lt;code&gt;connect&lt;/code&gt; ä½†æ˜¯å®ƒæ˜¯è‡ªåŠ¨ç®¡ç†çš„ã€‚ä»–ä¼šåœ¨ç¬¬ä¸€æ¬¡è®¢é˜…å¼€å§‹çš„æ—¶å€™å¼€å§‹ã€‚ replay ä¼šæŠŠä¸€äº›å…ƒç´ å‘é€ç»™é‚£äº› â€œè¿Ÿåˆ°äº†â€ çš„è®¢é˜…è€…/&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusSun.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusSun.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift For Dummies ğŸ£ Part3</title>
    <link href="https://CepheusSun.github.io/2017/05/07/RxSwift%20For%20Dummies%20Part3/"/>
    <id>https://CepheusSun.github.io/2017/05/07/RxSwift For Dummies Part3/</id>
    <published>2017-05-07T07:27:57.000Z</published>
    <updated>2017-05-07T09:20:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¥½äº†, æ¥ä¸‹æ¥æ˜¯ç¬¬ä¸‰ä¸ªéƒ¨åˆ†ã€‚<strong>Subjects</strong></p>
<p>å­¦äº†ä¹‹å‰å†…å®¹. æˆ‘ä»¬å¯èƒ½å·²ç»å‘ç°äº†ã€‚ä¹‹å‰å­¦ä¹ çš„å†…å®¹éƒ½æ˜¯ <code>Observables</code> è¾“å‡ºäº‹ä»¶çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥è®¢é˜…ä»–, å°±èƒ½çŸ¥é“ä»–è¾“å‡ºçš„äº‹ä»¶äº†ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜ä¸èƒ½æ”¹å˜ä»–ã€‚</p>
<p><strong>Subject</strong> ä¹Ÿæ˜¯ä¸€ä¸ª <code>Observable</code> ä½†æ˜¯ä»–æ˜¯èƒ½å¤ŸåŒæ—¶è¾“å…¥å’Œè¾“å‡ºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´, æˆ‘ä»¬å¯ä»¥åŠ¨æ€(å¼ºåˆ¶)çš„åœ¨ä¸€ä¸ªåºåˆ—ä¸­å‘å‡ºä¿¡å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="comment">// å¯ä»¥ç›´æ¥è½¬æ¢ï¼Œå› ä¸ºä»–ä¹Ÿæ˜¯ä¸€ä¸ª `Observable`</span></div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line"><span class="comment">// åªè¦ä½ æƒ³å‘å‡ºä¸€ä¸ªæ–°çš„äº‹ä»¶, å°±å¯ä»¥ç”¨ onNext æ–¹æ³• </span></div><div class="line">subject.onNext(<span class="string">"Hey!"</span>)</div><div class="line">subject.onNext(<span class="string">"I'm back!"</span>)</div></pre></td></tr></table></figure>
<p><strong>onNext</strong> æ˜¯ä¸€ä¸ªè¾“å‡ºäº‹ä»¶çš„æ–¹æ³•ã€‚æœ€åæ§åˆ¶å°ä¼šè¾“å‡º</p>
<blockquote>
<p>â€œHey!â€<br>â€œIâ€™m back!â€</p>
</blockquote>
<p><code>Subject</code> åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢? ä¸ºäº†å¾ˆè½»æ¾çš„å°† Rxswift ä¸­å£°æ˜å¼çš„ä¸–ç•Œå’Œæˆ‘ä»¬å¹³å¸¸çš„ä¸–ç•Œè¿æ¥èµ·æ¥ã€‚è®©æˆ‘ä»¬åœ¨éœ€è¦å†™å®ç°å¼çš„ä»£ç çš„æ—¶å€™æ›´ Rx </p>
<p>åœ¨ä¸€ä¸ªçº¯æ­£çš„ Rx çš„ä¸–ç•Œé‡Œã€‚å½“ä½ éœ€è¦æœ‰ä¸€ä¸ªæ›´å®Œç¾çš„æµçš„æ—¶å€™, ä¸ç”¨å»ç®¡è¿™ä¸ª <code>Observable</code> æ˜¯æ€ä¹ˆå®ç°çš„ã€‚è¿™ä¸ªä¸œè¥¿æˆ‘ä¼šå¦å¤–çš„è§£é‡Šã€‚åæ­£, å¦‚æœä½ éœ€è¦ï¼Œ å¤§èƒ†çš„ç”¨å§ã€‚</p>
<p>ä¸Šé¢å¼å…³äº Subject æœ€åŸºæœ¬çš„å†…å®¹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆæ›´å¥½çš„ä½¿ç”¨ <strong>Subject</strong></p>
<h3 id="HotğŸ”¥-vs-Coldâ„ï¸"><a href="#HotğŸ”¥-vs-Coldâ„ï¸" class="headerlink" title="HotğŸ”¥ vs Coldâ„ï¸"></a>HotğŸ”¥ vs Coldâ„ï¸</h3><p>åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­å°±å·²ç»æåˆ°è¿‡äº†çƒ­ä¿¡å·ğŸ”¥å’Œå†·ä¿¡å·â„ï¸ã€‚ä»Šå¤©æˆ‘ä»¬åœ¨æ·±å…¥çš„äº†è§£ä¸€ç‚¹å§ï¼Œå› ä¸º <strong>Subject</strong> å®é™…ä¸Šæ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°çœŸæ­£çš„çƒ­ä¿¡å·ã€‚</p>
<p>æˆ‘ä»¬ä¸€å®šç¡®å®šäº†ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ <strong>create</strong> åˆ›å»ºä¸€ä¸ª <strong>Observable</strong> çš„æ—¶å€™, ç”±äºæ²¡æœ‰äººè®¢é˜…ä»–ï¼Œæ‰€ä»¥å¥¹æ˜¯ä¸ä¼šå‘é€æ¶ˆæ¯çš„ã€‚åªæœ‰è¢« <strong>subscribe</strong>(è®¢é˜…)ä¹‹åæ‰ä¼šå¼€å§‹å‘é€æ¶ˆæ¯å‡ºæ¥ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å«å®ƒä¸ºå†·ä¿¡å·â„ï¸çš„åŸå› ã€‚å¦‚æœå¾ˆä¸å¹¸ä½ å¿˜äº†è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚ä½ å¯ä»¥å›åˆ°ç¬¬ä¸€ç¯‡æ–‡ç« å»çœ‹çœ‹ã€‚çƒ­ä¿¡å·ğŸ”¥ å°±æ˜¯é‚£ç§å³ä½¿æ²¡æœ‰è¢«è®¢é˜…ä¹Ÿä¼šå‘å‡ºæ¶ˆæ¯çš„ä¿¡å·, è¿™ä¹Ÿæ˜¯ <code>subject</code> åšçš„äº‹æƒ…ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line"><span class="comment">// è¿™ä¸ªä¿¡å·è¿˜æ²¡æœ‰è¢«è®¢é˜…, æ‰€ä»¥è¿™ä¸ªå€¼ä¸å›è¢«æ¥å—åˆ°</span></div><div class="line">subject.onNext(<span class="string">"Am I too early for the party?"</span>)</div><div class="line"></div><div class="line">observable</div><div class="line">    .subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(text)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"><span class="comment">// è¿™ä¸ªå€¼å‘å‡ºæ¥çš„æ—¶å€™å·²ç»æœ‰ä¸€ä¸ªè®¢é˜…è€…äº†, æ‰€ä»¥è¿™ä¸ªå€¼ä¼šæ‰“å°å‡ºæ¥</span></div><div class="line">subject.onNext(<span class="string">"ğŸ‰ğŸ‰ğŸ‰"</span>)</div></pre></td></tr></table></figure>
<p>å¾ˆç®€å•ç›´æ¥å§ã€‚å¦‚æœåœ¨ç¬¬ä¸€ç¯‡ä¸­ä½ ç†è§£äº†å†·ä¿¡å·çš„è¯, ç†è§£çƒ­ä¿¡å·ä¹Ÿæ˜¯å¾ˆè‡ªç„¶çš„äº‹æƒ…ã€‚</p>
<h3 id="Subject-Types"><a href="#Subject-Types" class="headerlink" title="Subject Types"></a>Subject Types</h3><p>å¸¸ç”¨çš„ <code>Subject</code> æœ‰ä¸‰ç§ã€‚ ä»–ä»¬å…¶å®éƒ½å·®ä¸å¤š, å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯: åœ¨è®¢é˜…ä¹‹å‰, å®ƒä¼šå¹²ä»€ä¹ˆã€‚</p>
<a id="more"></a>
<h4 id="Publish-Subject"><a href="#Publish-Subject" class="headerlink" title="Publish Subject"></a>Publish Subject</h4><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å·²ç»è¯´åˆ°äº†ã€‚ <strong>PublishSubject</strong> ä¼šå¿½ç•¥æ‰åœ¨è®¢é˜…ä¹‹å‰å‘å‡ºæ¥çš„ä¿¡å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line">subject.onNext(<span class="string">"Ignored..."</span>)</div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div></pre></td></tr></table></figure>
<p>å½“ä½ åªå…³æ³¨ä½ è®¢é˜…ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆçš„æ—¶å€™, å°±å¯ä»¥ä½¿ç”¨ <code>PublishSubject</code></p>
<h4 id="Replay-Subjects"><a href="#Replay-Subjects" class="headerlink" title="Replay Subjects"></a>Replay Subjects</h4><p><strong>ReplaySubject</strong> ä¼šå°†æœ€å n ä¸ªå€¼å‘å‡ºæ¥, å³ä½¿æ˜¯è®¢é˜…å‘ç”Ÿä¹‹å‰çš„å€¼ã€‚ è¿™ä¸ª n ä¸ªå€¼è¢«è¢«æ”¾åœ¨ä¸€ä¸ªç¯ä»åŒºé‡Œé¢ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¼šç¼“æœ‰ 3 ä¸ªå€¼è¢«ä¿ç•™ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">ReplaySubject</span>&lt;<span class="type">String</span>&gt;.create(bufferSize: <span class="number">3</span>)</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line"></div><div class="line">subject.onNext(<span class="string">"Not printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div><div class="line"></div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">subject .onNext(<span class="string">"Printed!"</span>)</div></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬éœ€è¦çŸ¥é“è®¢é˜…ä¹‹å‰å‘ç”Ÿäº†ä»€ä¹ˆçš„æ—¶å€™, æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ <code>ReplaySubject</code> äº†ã€‚</p>
<h4 id="Behavior-Subject"><a href="#Behavior-Subject" class="headerlink" title="Behavior Subject"></a>Behavior Subject</h4><p><strong>BehaviorSubject</strong> åªä¼šé‡å¤æœ€åä¸€ä¸ªå€¼ã€‚ æ›´å…¶ä»–çš„ Subject çš„åŒï¼Œ ä»–åœ¨åˆ›å»ºçš„æ—¶å€™å°±éœ€è¦ç»™å®šä¸€ä¸ªåˆå§‹å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">BehaviorSubject</span>&lt;<span class="type">String</span>&gt;(value: <span class="string">"Initial value"</span>)</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line"></div><div class="line">subject.onNext(<span class="string">"Not printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Not printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div><div class="line"></div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div></pre></td></tr></table></figure>
<p>å½“ä½ åªéœ€è¦çŸ¥é“æœ€åä¸€ä¸ªå€¼çš„æ—¶å€™ã€‚å°±éœ€è¦ä½¿ç”¨ <code>BehaviorSubject</code></p>
<h3 id="Binding"><a href="#Binding" class="headerlink" title="Binding"></a>Binding</h3><p>ä½ å¯ä»¥æŠŠä¸€ä¸ª <code>Observable</code> å’Œ <code>Subject</code> ç»‘å®šåˆ°ä¸€èµ·ã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥è®©è¿™ä¸ª <code>Observable</code> å°†å®ƒçš„åºåˆ—é‡Œçš„æ‰€æœ‰å€¼éƒ½å‘é€ç»™è¿™ä¸ª <code>Subject</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.just(<span class="string">"I'm being passed around ğŸ˜²"</span>)</div><div class="line">subject.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observable.subscribe &#123; (event) <span class="keyword">in</span></div><div class="line">    subject.on(event)</div><div class="line">&#125;.addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>æœ‰ä¸€ä¸ªè¯­æ³•ç³–æ¥ç®€åŒ–è¿™äº›ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.just(<span class="string">"I'm being passed around ğŸ˜²"</span>)</div><div class="line">subject.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observable.bind(to: subject).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<blockquote>
<p>Iâ€™m being passed around ğŸ˜²</p>
</blockquote>
<p><strong>Warning</strong></p>
<p>Binding ä¸ä»…ä»…ä¼šä¼ é€’å€¼, ä»–ä¹Ÿä¼šæŠŠå®Œæˆå’Œé”™è¯¯éƒ½ä¼ é€’è¿‡æ¥ã€‚è¿™ç§æƒ…å†µä¸‹è¿™ä¸ª <code>Subject</code> å°±ä¼šè¢«é‡Šæ”¾ã€‚</p>
<h3 id="Quick-Example"><a href="#Quick-Example" class="headerlink" title="Quick Example"></a>Quick Example</h3><p>è¿˜æ˜¯æŠŠç¬¬ä¸€ç¯‡æ–‡ç« ä¸­çš„ Demo ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> RxCocoa</div><div class="line"><span class="keyword">import</span> RxSwift</div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">GoogleModel</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> googleString = <span class="type">BehaviorSubject</span>&lt;<span class="type">String</span>&gt;(value: <span class="string">""</span>)</div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fetchNetString</span><span class="params">()</span></span>  &#123;</div><div class="line">        <span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">            <span class="keyword">let</span> session = <span class="type">URLSession</span>.shared</div><div class="line">            <span class="keyword">let</span> task = session.dataTask(with: <span class="type">URL</span>(string: <span class="string">"https://www.google.com"</span>)!, completionHandler: &#123; (data, response, error) <span class="keyword">in</span></div><div class="line">                </div><div class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> err = error &#123;</div><div class="line">                        observer.onError(err)</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="keyword">let</span> googleString = <span class="type">NSString</span>(data: data!, encoding: <span class="number">1</span>) <span class="keyword">as</span> <span class="type">String</span>?</div><div class="line">                        </div><div class="line">                        observer.onNext(googleString!)</div><div class="line">                        observer.onCompleted()</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;)</div><div class="line">            task.resume()</div><div class="line">            <span class="keyword">return</span> <span class="type">Disposables</span>.create&#123;</div><div class="line">                task.cancel()</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// Bind the observable to the subject</span></div><div class="line">        observable.bind(to: googleString).addDisposableTo(disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;        </div><div class="line"><span class="comment">// Bind the observable to the subject</span></div><div class="line">observable.bind(to: googleString).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè§†å›¾æ¨¡å‹å°† <code>googleString</code> è¿™ä¸ª <code>subject</code> æš´éœ²å‡ºæ¥ã€‚è®© <code>ViewController</code> èƒ½å¤Ÿè®¢é˜…ã€‚æˆ‘ä»¬å°†è¿™ä¸ª <code>observable</code> ç»‘å®šåˆ°è¿™ä¸ª <code>subject</code> ä¸Š, è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ç½‘ç»œè¯·æ±‚æœ‰ç»“æœçš„æ—¶å€™, ç«‹é©¬å°†è¯·æ±‚ç»“æœä¼ é€’åˆ°è¿™ç»™ <code>subject</code>ã€‚</p>
<h3 id="Bonus-Variable"><a href="#Bonus-Variable" class="headerlink" title="Bonus: Variable"></a>Bonus: Variable</h3><p>è·ç¦»å®Œå®Œå…¨å…¨çš„ Rx è¿˜å·®æœ€åä¸€ç‚¹äº†ã€‚å¼ºè¡Œçš„è·å–ä¹‹å‰å‘é€å‡ºæ¥çš„å€¼ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼šæœ‰ <strong>Variable</strong> è¿™ä¸ªä¸œè¥¿äº†ã€‚Variable æ˜¯å¯¹ BehaviorSubject çš„ç®€å•åŒ…è£…ã€‚<a href="https://github.com/ReactiveX/RxSwift/blob/master/RxSwift/Subjects/Variable.swift">å¯ä»¥çœ‹ä¸€ä¸‹</a> å®ƒçš„å®ç°æ˜¯éå¸¸ç®€å•çš„ã€‚ä½†å®ƒå´éå¸¸çš„æ–¹ä¾¿ã€‚</p>
<p>è¿˜æ˜¯ç”¨ä¸€ä¸ªå°ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜å§ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬éœ€è¦åœ¨ä»»ä½•æ—¶é—´éƒ½å¯ä»¥å¾—åˆ° â€œgoogleStringâ€ â€œå½“å‰â€ çš„å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> googleString = <span class="type">Variable</span>(<span class="string">"currentString"</span>)</div><div class="line"><span class="comment">// get</span></div><div class="line"><span class="built_in">print</span>(googleString.value)</div><div class="line"><span class="comment">// set</span></div><div class="line">googleString.value = <span class="string">"newString"</span></div><div class="line"><span class="comment">// è®¢é˜…</span></div><div class="line">googleString.asObservable().subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ä½ ä¸€å®šä¼šçˆ±ä¸Šä»–çš„ã€‚è¿™åŸºæœ¬ä¸Šå°±æ˜¯ <strong>RxSwift</strong> çš„ç®€å•æ¨¡å¼äº†ã€‚</p>
<p>çœ‹èµ·æ¥å¾ˆç®€å•å§ï¼Œä½†æ˜¯åˆ«å¿˜äº†ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šçš„å‘çš„ã€‚è¿˜æ˜¯å°å¿ƒä¸ºä¸Šã€‚ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä¼šè®²è®²: æ€ä¹ˆå†™ Rxswift æœ€ä¿é™©ã€‚</p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p>ä½ çŸ¥é“äº†å¤ªå¤šäº†ã€‚å‰©ä¸‹çš„å°±æ˜¯ <code>Subjects</code> äº†</p>
<p><a href="http://swiftpearls.com/RxSwift-for-dummies-3-Subjects.html">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¥½äº†, æ¥ä¸‹æ¥æ˜¯ç¬¬ä¸‰ä¸ªéƒ¨åˆ†ã€‚&lt;strong&gt;Subjects&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å­¦äº†ä¹‹å‰å†…å®¹. æˆ‘ä»¬å¯èƒ½å·²ç»å‘ç°äº†ã€‚ä¹‹å‰å­¦ä¹ çš„å†…å®¹éƒ½æ˜¯ &lt;code&gt;Observables&lt;/code&gt; è¾“å‡ºäº‹ä»¶çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥è®¢é˜…ä»–, å°±èƒ½çŸ¥é“ä»–è¾“å‡ºçš„äº‹ä»¶äº†ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜ä¸èƒ½æ”¹å˜ä»–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Subject&lt;/strong&gt; ä¹Ÿæ˜¯ä¸€ä¸ª &lt;code&gt;Observable&lt;/code&gt; ä½†æ˜¯ä»–æ˜¯èƒ½å¤ŸåŒæ—¶è¾“å…¥å’Œè¾“å‡ºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´, æˆ‘ä»¬å¯ä»¥åŠ¨æ€(å¼ºåˆ¶)çš„åœ¨ä¸€ä¸ªåºåˆ—ä¸­å‘å‡ºä¿¡å·ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; subject = &lt;span class=&quot;type&quot;&gt;PublishSubject&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å¯ä»¥ç›´æ¥è½¬æ¢ï¼Œå› ä¸ºä»–ä¹Ÿæ˜¯ä¸€ä¸ª `Observable`&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable: &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt; = subject&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observable.subscribe(onNext: &amp;#123; (text) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(text)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åªè¦ä½ æƒ³å‘å‡ºä¸€ä¸ªæ–°çš„äº‹ä»¶, å°±å¯ä»¥ç”¨ onNext æ–¹æ³• &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;subject.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hey!&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;subject.onNext(&lt;span class=&quot;string&quot;&gt;&quot;I&#39;m back!&quot;&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;onNext&lt;/strong&gt; æ˜¯ä¸€ä¸ªè¾“å‡ºäº‹ä»¶çš„æ–¹æ³•ã€‚æœ€åæ§åˆ¶å°ä¼šè¾“å‡º&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œHey!â€&lt;br&gt;â€œIâ€™m back!â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;Subject&lt;/code&gt; åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢? ä¸ºäº†å¾ˆè½»æ¾çš„å°† Rxswift ä¸­å£°æ˜å¼çš„ä¸–ç•Œå’Œæˆ‘ä»¬å¹³å¸¸çš„ä¸–ç•Œè¿æ¥èµ·æ¥ã€‚è®©æˆ‘ä»¬åœ¨éœ€è¦å†™å®ç°å¼çš„ä»£ç çš„æ—¶å€™æ›´ Rx &lt;/p&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªçº¯æ­£çš„ Rx çš„ä¸–ç•Œé‡Œã€‚å½“ä½ éœ€è¦æœ‰ä¸€ä¸ªæ›´å®Œç¾çš„æµçš„æ—¶å€™, ä¸ç”¨å»ç®¡è¿™ä¸ª &lt;code&gt;Observable&lt;/code&gt; æ˜¯æ€ä¹ˆå®ç°çš„ã€‚è¿™ä¸ªä¸œè¥¿æˆ‘ä¼šå¦å¤–çš„è§£é‡Šã€‚åæ­£, å¦‚æœä½ éœ€è¦ï¼Œ å¤§èƒ†çš„ç”¨å§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢å¼å…³äº Subject æœ€åŸºæœ¬çš„å†…å®¹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆæ›´å¥½çš„ä½¿ç”¨ &lt;strong&gt;Subject&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;HotğŸ”¥-vs-Coldâ„ï¸&quot;&gt;&lt;a href=&quot;#HotğŸ”¥-vs-Coldâ„ï¸&quot; class=&quot;headerlink&quot; title=&quot;HotğŸ”¥ vs Coldâ„ï¸&quot;&gt;&lt;/a&gt;HotğŸ”¥ vs Coldâ„ï¸&lt;/h3&gt;&lt;p&gt;åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­å°±å·²ç»æåˆ°è¿‡äº†çƒ­ä¿¡å·ğŸ”¥å’Œå†·ä¿¡å·â„ï¸ã€‚ä»Šå¤©æˆ‘ä»¬åœ¨æ·±å…¥çš„äº†è§£ä¸€ç‚¹å§ï¼Œå› ä¸º &lt;strong&gt;Subject&lt;/strong&gt; å®é™…ä¸Šæ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°çœŸæ­£çš„çƒ­ä¿¡å·ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸€å®šç¡®å®šäº†ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ &lt;strong&gt;create&lt;/strong&gt; åˆ›å»ºä¸€ä¸ª &lt;strong&gt;Observable&lt;/strong&gt; çš„æ—¶å€™, ç”±äºæ²¡æœ‰äººè®¢é˜…ä»–ï¼Œæ‰€ä»¥å¥¹æ˜¯ä¸ä¼šå‘é€æ¶ˆæ¯çš„ã€‚åªæœ‰è¢« &lt;strong&gt;subscribe&lt;/strong&gt;(è®¢é˜…)ä¹‹åæ‰ä¼šå¼€å§‹å‘é€æ¶ˆæ¯å‡ºæ¥ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å«å®ƒä¸ºå†·ä¿¡å·â„ï¸çš„åŸå› ã€‚å¦‚æœå¾ˆä¸å¹¸ä½ å¿˜äº†è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚ä½ å¯ä»¥å›åˆ°ç¬¬ä¸€ç¯‡æ–‡ç« å»çœ‹çœ‹ã€‚çƒ­ä¿¡å·ğŸ”¥ å°±æ˜¯é‚£ç§å³ä½¿æ²¡æœ‰è¢«è®¢é˜…ä¹Ÿä¼šå‘å‡ºæ¶ˆæ¯çš„ä¿¡å·, è¿™ä¹Ÿæ˜¯ &lt;code&gt;subject&lt;/code&gt; åšçš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; subject = &lt;span class=&quot;type&quot;&gt;PublishSubject&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable: &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt; = subject&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// è¿™ä¸ªä¿¡å·è¿˜æ²¡æœ‰è¢«è®¢é˜…, æ‰€ä»¥è¿™ä¸ªå€¼ä¸å›è¢«æ¥å—åˆ°&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;subject.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Am I too early for the party?&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observable&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; (text) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(text)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// è¿™ä¸ªå€¼å‘å‡ºæ¥çš„æ—¶å€™å·²ç»æœ‰ä¸€ä¸ªè®¢é˜…è€…äº†, æ‰€ä»¥è¿™ä¸ªå€¼ä¼šæ‰“å°å‡ºæ¥&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;subject.onNext(&lt;span class=&quot;string&quot;&gt;&quot;ğŸ‰ğŸ‰ğŸ‰&quot;&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¾ˆç®€å•ç›´æ¥å§ã€‚å¦‚æœåœ¨ç¬¬ä¸€ç¯‡ä¸­ä½ ç†è§£äº†å†·ä¿¡å·çš„è¯, ç†è§£çƒ­ä¿¡å·ä¹Ÿæ˜¯å¾ˆè‡ªç„¶çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Subject-Types&quot;&gt;&lt;a href=&quot;#Subject-Types&quot; class=&quot;headerlink&quot; title=&quot;Subject Types&quot;&gt;&lt;/a&gt;Subject Types&lt;/h3&gt;&lt;p&gt;å¸¸ç”¨çš„ &lt;code&gt;Subject&lt;/code&gt; æœ‰ä¸‰ç§ã€‚ ä»–ä»¬å…¶å®éƒ½å·®ä¸å¤š, å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯: åœ¨è®¢é˜…ä¹‹å‰, å®ƒä¼šå¹²ä»€ä¹ˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusSun.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusSun.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift For Dummies ğŸ£ Part2</title>
    <link href="https://CepheusSun.github.io/2017/05/07/RxSwift%20For%20Dummies%20Part2/"/>
    <id>https://CepheusSun.github.io/2017/05/07/RxSwift For Dummies Part2/</id>
    <published>2017-05-06T16:26:57.000Z</published>
    <updated>2017-05-06T16:26:16.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº† RxSwift åŸºç¡€çš„éƒ¨åˆ†. ç°åœ¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€äº›æ“ä½œç¬¦, æ¥å­¦ä¹ ä¸€ä¸‹ <strong>FRP</strong> ä¸­çš„<strong>F</strong>(unctional) éƒ¨åˆ†</p>
<h3 id="Schedulers"><a href="#Schedulers" class="headerlink" title="Schedulers"></a>Schedulers</h3><p>æˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹ä¹‹å‰å°±å·²ç»æåˆ°è¿‡çš„, ä½†æ˜¯æ²¡æœ‰è¯¦ç»†ä»‹ç»çš„ <strong>Schedulers</strong></p>
<p><strong>Schedulers</strong> æœ€å¸¸è§çš„ç”¨æ³•å°±æ˜¯å‘Šè¯‰ <code>Observables</code> å’Œè®¢é˜…è€… åº”è¯¥åœ¨å“ªä¸ªçº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ä¸­å‘é€äº‹ä»¶,æˆ–è€…é€šçŸ¥ã€‚</p>
<p>å…³äº <code>Schedulers</code> æœ€å¸¸è§çš„æ“ä½œç¬¦æ˜¯<code>observerOn</code> å’Œ <code>subscribleOn</code></p>
<p>é€šå¸¸æƒ…å†µä¸‹ <code>Observables</code> ä¼šåœ¨å®ƒè¢«è®¢é˜…çš„é‚£ä¸ªçº¿ç¨‹å‘é€äº‹ä»¶æˆ–è€…é€šçŸ¥ã€‚</p>
<h4 id="ObserveOn"><a href="#ObserveOn" class="headerlink" title="ObserveOn"></a>ObserveOn</h4><p><strong>ObserveOn</strong> æŒ‡å®š <code>Observables</code> å‘é€äº‹ä»¶çš„çº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ã€‚å®ƒä¸ä¼šæ”¹å˜å®ƒæ‰§è¡Œçš„çº¿ç¨‹ã€‚</p>
<p>ä¸¾ä¸€ä¸ªè·Ÿ part1 å¾ˆç›¸ä¼¼çš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">            observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">            observer.onCompleted()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡è®¾è®¢é˜…è€…æ˜¯ä¸€ä¸ª UI å±‚çš„ä¸œè¥¿ï¼Œ æ¯”å¦‚è¯´æ˜¯ä¸€ä¸ª <code>UIViewController</code> æˆ–è€… <code>UIView</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠè¿™ä¸ªä»»åŠ¡æ”¾åœ¨å­çº¿ç¨‹ä¸­å»æ‰§è¡Œï¼Œ ä»¥å…é˜»å¡ UI </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DispatchQueue.main.async&#123; ...</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­å»æ›´æ–° UI, ä½ åº”è¯¥çŸ¥é“ <code>UIKit</code> è¦æ±‚å¯¹ <code>UI</code> çš„æ“ä½œéƒ½å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œã€‚æ‰€ä»¥è¿™äº›æ“ä½œå¯¹ä½ æ¥è¯´ä¸€å®šæ˜¯å¾ˆç†Ÿæ‚‰çš„äº†ã€‚</p>
<p>è®°ä¸‹æ¥ä½¿ç”¨ <strong>ObserveOn</strong> æ¥é‡æ„ä¸€ä¸‹è¿™æ®µä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create(&#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">        observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">        observer.onCompleted()</div><div class="line">    &#125;</div><div class="line">        <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;).observeOn(<span class="type">MainScheduler</span>.instance)</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åˆ æ‰äº† <code>DispatchQueue.main.async {}</code> ç„¶åæ·»åŠ äº† <code>.observeOn(MainScheduler.instance)</code>ã€‚ è¿™ä¸ªå°±å¯ä»¥è®©æ‰€æœ‰çš„äº‹ä»¶éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ <code>&quot;Hello dummy ğŸ¥&quot;</code> è¿™ä¸ªå…ƒç´ å°±èƒ½å¤Ÿå¾ˆå®‰å…¨çš„è¢«å‘é€ç»™ UI çš„å…ƒç´ ï¼Œ å› ä¸ºæˆ‘ä»¬å¯ä»¥å¾ˆç¡®å®šä»–ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">observable.subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>?.label.text = element</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>ObserveOn</strong> å¤§æ¦‚æ˜¯æœ€å¸¸è§çš„çº¿ç¨‹è°ƒåº¦æ“ä½œç¬¦äº†ã€‚ä½ å¸Œæœ› <code>Observables</code> åŒ…å«äº†æ‰€æœ‰çš„é€»è¾‘, å’Œçº¿ç¨‹æ“ä½œ, è®©è®¢é˜…è€…å°½å¯èƒ½çš„ç®€å•ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å†äº†è§£ä¸€ä¸‹ <code>subscribeOn</code> è¿™ä¸ªæ“ä½œç¬¦ã€‚</p>
<h4 id="SubscribeOn-Optional"><a href="#SubscribeOn-Optional" class="headerlink" title="SubscribeOn (Optional)"></a>SubscribeOn (Optional)</h4><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å…ˆè¿›çš„æ“ä½œç¬¦ã€‚ä½ å¯ä»¥å…ˆè·³è¿‡è¿™éƒ¨åˆ†, ä»¥åå†æ¥ç ”ç©¶ğŸ¤</p>
<p><code>subscribeOn</code> è·Ÿ <code>ObserveOn</code> éå¸¸çš„ç›¸ä¼¼ã€‚<strong>ä½†æ˜¯ä»–åªèƒ½æ”¹å˜ <code>Observable</code> å°†è¦æ‰§è¡Œçš„ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹ã€‚</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">    observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">    observer.onCompleted()</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125; </div><div class="line">observable</div><div class="line">    .subscribeOn(<span class="type">ConcurrentDispatchQueueScheduler</span>(qos: .<span class="keyword">default</span>))</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.label.text = element</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘åˆ æ‰äº† <code>Observable</code> ä¸­çš„ <code>DispatchQueue.global(qos: .default).async {}</code>  æ˜¯è¿™ä¸ªè®¢é˜…è€…å‘Šè¯‰ä»–åº”è¯¥åœ¨ä¸€ä¸ª <code>global queue</code> ä¸­æ‰§è¡Œä¸‹é¢çš„æ“ä½œ, ä»¥å…é˜»å¡ UI. å¾ˆæ˜æ˜¾è¿™å›å¯¼è‡´ä¸€ä¸ªå¼‚å¸¸çš„æŠ›å‡º, ä¹‹å‰æåˆ°è¿‡ï¼š è¿™å›å¯¼è‡´ <code>Observable</code> åœ¨å…¨å±€é˜Ÿåˆ—ä¸­æ‰§è¡Œ, <strong>ä¹Ÿä¼šåœ¨å…¨å±€é˜Ÿåˆ—ä¸­å‘å‡ºäº‹ä»¶</strong>ã€‚åªéœ€è¦æ·»åŠ åœ¨ <code>Observable</code> ä¸­æ·»åŠ  <code>.observeOn(MainScheduler.instance)</code>å°±èƒ½é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">    observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">    observer.onCompleted()</div><div class="line">        <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;.observeOn(<span class="type">MainScheduler</span>.instance)      </div><div class="line">observable</div><div class="line">    .subscribeOn(<span class="type">ConcurrentDispatchQueueScheduler</span>(qos: .<span class="keyword">default</span>))</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.label.text = element</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>æ·»åŠ ä¹‹åï¼Œå°±èƒ½å¤Ÿå‘ç°åˆšåˆšè¯´åˆ°çš„é—®é¢˜å·²ç»è§£å†³æ‰äº†ã€‚</p>
<p>æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨ <code>observeOn</code> å‘¢ï¼Ÿæœ€å¸¸è§çš„åœºæ™¯æ˜¯:å¦‚æœåœ¨ <code>Observable</code> ä¸éœ€è¦åœ¨åå°æ‰§è¡Œè€—æ—¶æ“ä½œ(è¯»å–æ•°æ®, å¤§çš„è®¡ç®—ä»»åŠ¡)çš„è¯.æˆ‘ä¸è®¤ä¸ºè¿™æ˜¯éå¸¸é¢‘ç¹çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œcome on!  å¤šçŸ¥é“ä¸€ä¸ªä½ èƒ½ç”¨çš„å·¥å…· ğŸ› ä¸æ˜¯ä»¶å¾ˆ cool çš„äº‹æƒ…å—ï¼Ÿ</p>
<h4 id="Scheduler-Types"><a href="#Scheduler-Types" class="headerlink" title="Scheduler Types"></a>Scheduler Types</h4><p>åšä¸º RxSwift èœé¸Ÿ, å¥½å¥‡ <code>observeOn</code> å’Œ <code>MainScheduler.instance</code> æ²¡ä»€ä¹ˆå…³ç³»ã€‚ä½ å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æˆ–è€…ç›´æ¥ä½¿ç”¨å·²ç»åˆ›å»ºå¥½äº†çš„ã€‚å¦‚æœä½ å¾ˆå¥½å¥‡çš„è¯<a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/Schedulers.md">è¿™é‡Œæœ‰å¾ˆå¤š</a>ã€‚ è¿™ä¹Ÿæ²¡ä»€ä¹ˆå¥½å¤æ‚çš„ï¼Œ å°±æ˜¯å¯¹ GCD å’Œ NSOperation çš„å°è£…è€Œå·²ã€‚</p>
<a id="more"></a>
<h3 id="Transforming-Operators"><a href="#Transforming-Operators" class="headerlink" title="Transforming Operators"></a>Transforming Operators</h3><p>ç°åœ¨ä½ å·²ç»çŸ¥é“ä¸¤ç§æ“ä½œç¬¦äº†: åˆ›å»ºæ“ä½œç¬¦(<code>create</code>ã€<code>interval</code>ã€<code>just</code>)  å’Œ åŠŸèƒ½æ“ä½œç¬¦(<code>observeOn</code>, <code>subscribeOn</code>)ã€‚ ç°åœ¨å†å­¦ä¸€äº›è½¬æ¢æ“ä½œç¬¦å§ï¼</p>
<h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>è¿™æ˜¯éå¸¸ç®€å•ï¼Œä½†éå¸¸æœ‰ç”¨çš„æ“ä½œç¬¦ã€‚å®ƒä¹Ÿå¯èƒ½æ˜¯ä½ æœªæ¥æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ“ä½œç¬¦å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observerable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;        </div><div class="line"><span class="keyword">let</span> boolObservable: <span class="type">Observable</span>&lt;<span class="type">Bool</span>&gt; = observerable.<span class="built_in">map</span>&#123;(element) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">if</span> element == <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div><div class="line">boolObservable.subscribe(onNext: &#123; (boolElement) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(boolElement)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>Map</strong> æ“ä½œç¬¦å·ï¼Œæ”¹å˜äº†åºåˆ—ä¸­å€¼çš„ç±»å‹ã€‚ä»–æ˜ å°„äº†ä¸€ä¸ª <code>Observable</code> æ‰€ä»¥ä»–ä»¥ä½ å‘Šè¯‰ä»–çš„æ–°çš„æ–¹å¼å‘é€äº‹ä»¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬å°†ä¸€ä¸ª <code>Int</code> ç±»å‹çš„ <code>Observable</code> æ˜ å°„æˆäº†ä¸€ä¸ª <code>Bool</code> ç±»å‹ã€‚ </p>
<p>æ‰€ä»¥è¿™ä¸ªä¾‹å­çš„ç»“æœæ˜¯</p>
<blockquote>
<p>true</p>
</blockquote>
<h4 id="Scan"><a href="#Scan" class="headerlink" title="Scan"></a>Scan</h4><p><strong>scan</strong> è¦å¤æ‚ä¸€äº›äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"D"</span>)</div><div class="line">    observer.onNext(<span class="string">"U"</span>)</div><div class="line">    observer.onNext(<span class="string">"M"</span>)</div><div class="line">    observer.onNext(<span class="string">"M"</span>)</div><div class="line">    observer.onNext(<span class="string">"Y"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">observable.scan(<span class="string">""</span>) &#123; (lastValue, currentValue) -&gt; <span class="type">String</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> lastValue + currentValue</div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¼šè¾“å‡º</p>
<blockquote>
<p>D<br>DU<br>DUM<br>DUMM<br>DUMMY</p>
</blockquote>
<p><strong>scan</strong>æ“ä½œç¬¦, è®©ä½ å¯ä»¥é€šè¿‡ä¸Šä¸€ä¸ªå€¼æ¥æ”¹å˜è¿™ä¸€ä¸ªå€¼ã€‚ä»–ä¹Ÿè¢«ç§°ä½œå…ƒç´ å †ç§¯ã€‚ä¸Šé¢ä»£ç ä¸­çš„ <code>â€œâ€</code>æ˜¯æ‰«æå‚æ•°ä¼ é€’çš„èµ·å§‹å€¼ã€‚è¿˜æ˜¯æƒ³ç€èƒ½å¹²ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    observer.onNext(<span class="number">2</span>)</div><div class="line">    observer.onNext(<span class="number">3</span>)</div><div class="line">    observer.onNext(<span class="number">4</span>)</div><div class="line">    observer.onNext(<span class="number">5</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">observable.scan(<span class="number">1</span>) &#123; (lastValue, currentValue) -&gt; <span class="type">Int</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> lastValue + currentValue</div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯é€šè¿‡ <strong>scan</strong> æ“ä½œç¬¦è®¡ç®— 5 çš„é˜¶å±‚ã€‚ ç®—å‡ºæ¥çš„ç­”æ¡ˆæ˜¯: 120</p>
<p><a href="http://rx-marin.com/post/rxswift-state-with-scan/">Marin ç»™äº†ä¸€ä¸ªæ›´æœ‰ç”¨çš„ä¾‹å­</a> å…³äºæŒ‰é’®çš„ selected çŠ¶æ€</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> button = <span class="type">UIButton</span>()</div><div class="line">button.rx.tap.scan(<span class="literal">false</span>) &#123; last, new <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> !last</div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"tap: <span class="subst">\(element)</span>"</span>)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ çŸ¥é“ä»–èƒ½å¹²ä»€ä¹ˆäº†å§ï¼Ÿ å½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„è½¬æ¢æ“ä½œç¬¦ã€‚</p>
<h3 id="Filtering-Operators"><a href="#Filtering-Operators" class="headerlink" title="Filtering Operators"></a>Filtering Operators</h3><p>å‘å‡ºäº‹ä»¶æ˜¯å¾ˆé‡è¦çš„äº‹æƒ…, ä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬è¿˜éœ€è¦è¿‡æ»¤æ‰ä¸€äº›æ²¡ç”¨çš„äº‹ä»¶ã€‚è¿™å°±æ˜¯ filter æ“ä½œç¬¦æ‰€åšçš„äº‹ä»€ä¹ˆã€‚</p>
<h4 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h4><p>å†³å®šé‚£äº›äº‹ä»¶æ˜¯è¦å“åº”çš„é‚£äº›æ˜¯è¦è¿‡æ»¤æ‰çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observerable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">observerable.<span class="built_in">filter</span> &#123; (element) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> element == <span class="string">"ğŸ"</span></div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<blockquote>
<p>ğŸ<br>ğŸ</p>
</blockquote>
<h4 id="Debounce"><a href="#Debounce" class="headerlink" title="Debounce"></a>Debounce</h4><p>ç®€å•ä¸”æœ‰ç”¨</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observerable</div><div class="line">    .debounce(<span class="number">2</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(element)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>debounce</strong> ä¼šè¿‡æ»¤æ‰2ç§’ä»¥å†…çš„æ‰€æœ‰äº‹ä»¶, å¦‚æœäº‹ä»¶aåœ¨ä¸Šä¸€æ¬¡äº‹ä»¶ä¹‹åçš„0.5ç§’è¢«å‘é€å‡ºæ¥ã€‚é‚£ä¹ˆä»–å°±ä¼šè¢«è¿‡æ»¤æ‰ã€‚å¦‚æœä»–åœ¨ä¸Šæ¬¡äº‹ä»¶çš„2.5ç§’è¢«å‘é€å‡ºæ¥ã€‚é‚£ä¹ˆä»–å°±ä¼šè¢«æ¥å—åˆ°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯, å¦‚æœå°±ç®—å½“å‰æ—¶é—´ä¹‹åæ²¡æœ‰å…¶ä»–çš„äº‹ä»¶ï¼Œä»–ä¹Ÿè¦åœ¨2ç§’ä¹‹åè¢«å‘é€å‡ºæ¥ã€‚</p>
<blockquote>
<p>è¯‘è€…: éœ€è¦æ³¨æ„çš„ <code>debounce</code> å’Œ <code>throttle</code> çš„åŒºåˆ«ã€‚è¿˜æœ‰ Obj-C ä¸­çš„ <code>ReactiveCocoa</code> ä¸­çš„ throttle çš„åŒºåˆ«ã€‚</p>
</blockquote>
<h3 id="Combining-Operator"><a href="#Combining-Operator" class="headerlink" title="Combining Operator"></a>Combining Operator</h3><p>è”åˆæ“ä½œç¬¦è®©ä½ å¯ä»¥æŠŠå¤šä¸ª <code>Observable</code> è½¬æ¢æˆä¸€ä¸ªã€‚</p>
<h4 id="Merge"><a href="#Merge" class="headerlink" title="Merge"></a>Merge</h4><p>åˆå¹¶åªæ˜¯å°†å¤šä¸ª <code>Observable</code> å‘é€çš„äº‹ä»¶åˆå¹¶åˆ°ä¸€ä¸ª <code>Observable</code> ä¸­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> observable2 = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="type">Observable</span>.of(observable, observable2).merge().subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ğŸ<br>ğŸ<br>ğŸ’©<br>ğŸ’©</p>
</blockquote>
<h4 id="Zip"><a href="#Zip" class="headerlink" title="Zip"></a>Zip</h4><p><strong>Zip</strong> å°†æ¯ä¸ª <code>Observable</code> å‘å‡ºæ¥çš„å€¼åˆå¹¶æˆä¸€ä¸ªå€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> observable2 = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="type">Observable</span>.<span class="built_in">zip</span>(observable ,observable2).subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ğŸğŸ’©<br>ğŸğŸ’©</p>
</blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ“ä½œç¬¦ã€‚è¿˜æ˜¯ä¸¾ä¸€ä¸ªä¾‹å­å§ï¼ å‡å¦‚ä½ æœ‰ä¸¤ä¸ªç½‘ç»œè¯·æ±‚, ä½ éœ€è¦ç­‰åˆ°ä»–ä»¬éƒ½ç»“æŸä¹‹åå†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">3</span>)</div><div class="line">        observer.onNext(<span class="string">"fetched from sever 1"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> observable2 = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">2</span>)</div><div class="line">        observer.onNext(<span class="string">"fetched from sever 2"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="type">Observable</span>.<span class="built_in">zip</span>(observable, observable2)</div><div class="line">    .subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(element)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>Zip</strong> ä¼šç­‰åˆ°ä¸¤ä¸ª <code>Observable</code> éƒ½ç»“æŸä¹‹åå°†ä¸¤ä¸ªè¯·æ±‚çš„ç»“æœåˆå¹¶æˆä¸€ä¸ªå€¼å‘é€å‡ºæ¥ã€‚</p>
<h3 id="Other-Operators"><a href="#Other-Operators" class="headerlink" title="Other Operators"></a>Other Operators</h3><p>è¿˜æœ‰å¾ˆå¤šæœ‰è¶£çš„æ“ä½œç¬¦, æ¯”å¦‚ <code>reduce</code>ã€ <code>takeUntil</code> ç­‰ç­‰ã€‚æˆ‘è®¤ä¸ºå¦‚æœä½ ä»€ä¹ˆæ—¶å€™æœ‰äº†ä¸€äº›æƒ³æ³•, ä½ ä¹Ÿä¼šå¾ˆå®¹æ˜“çš„æ‰¾åˆ°ä»–ä»¬ã€‚ä»–ä»¬éå¸¸çš„å¼ºå¤§, èƒ½è®©ä½ å¿«é€Ÿç®€å•çš„æ“ä½œäº‹ä»¶åºåˆ—ã€‚</p>
<h3 id="Mixing-Operators"><a href="#Mixing-Operators" class="headerlink" title="Mixing Operators"></a>Mixing Operators</h3><p>è¿™ä¸ªæ•™ç¨‹ä¸éœ€è¦å…·ä½“çš„å®ä¾‹é¡¹ç›®, ä½†æ˜¯èƒ½å¿«çš„å°†å„ç§æ“ä½œç¬¦æ­é…ä½¿ç”¨ã€‚æˆ‘ä»¬æ¥åšä¸€ä¸ªå®éªŒå§ï¼šå·¥å…·æ ¹æ®äº‹ä»¶æ”¹å˜è§†å›¾çš„é¢œè‰²ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="type">Observable</span>&lt;<span class="type">NSDate</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="keyword">while</span> <span class="literal">true</span> &#123;</div><div class="line">            <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">0.01</span>)</div><div class="line">            observer.onNext(<span class="type">NSDate</span>())</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;<span class="comment">// éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­åˆ·æ–° UI</span></div><div class="line">    .observeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">    <span class="comment">// æˆ‘ä»¬åªéœ€è¦èƒ½å¤Ÿè¢«2æ•´é™¤çš„äº‹ä»¶</span></div><div class="line">    .<span class="built_in">filter</span> &#123; (date) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">        <span class="keyword">return</span> <span class="type">Int</span>(date.timeIntervalSince1970) % <span class="number">2</span> == <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// å°†æ•°æ®è½¬æ¢æˆé¢œè‰²</span></div><div class="line">    .<span class="built_in">map</span> &#123; (date) -&gt; <span class="type">UIColor</span> <span class="keyword">in</span></div><div class="line">        <span class="keyword">let</span> interval: <span class="type">Int</span> = <span class="type">Int</span>(date.timeIntervalSince1970)</div><div class="line">        <span class="keyword">let</span> color1 = <span class="type">CGFloat</span>( <span class="type">Double</span>(((interval * <span class="number">1</span>) % <span class="number">255</span>)) / <span class="number">255.0</span>)</div><div class="line">        <span class="keyword">let</span> color2 = <span class="type">CGFloat</span>( <span class="type">Double</span>(((interval * <span class="number">2</span>) % <span class="number">255</span>)) / <span class="number">255.0</span>)</div><div class="line">        <span class="keyword">let</span> color3 = <span class="type">CGFloat</span>( <span class="type">Double</span>(((interval * <span class="number">3</span>) % <span class="number">255</span>)) / <span class="number">255.0</span>)</div><div class="line">        <span class="keyword">return</span> <span class="type">UIColor</span>(red: color1, green: color2, blue: color3, alpha: <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">    .subscribe(onNext: &#123;[<span class="keyword">weak</span> <span class="keyword">self</span>] (color) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.demoView.backgroundColor = color</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>You can find more examples in the <a href="https://github.com/ReactiveX/RxSwift/blob/master/Rx.playground/Pages/Combining_Operators.xcplaygroundpage/Contents.swift">RxSwfit playgrounds</a></p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p>ä½ çŸ¥é“äº†å¤ªå¤šäº†ã€‚å‰©ä¸‹çš„å°±æ˜¯ <code>Subjects</code> äº†</p>
<p><a href="http://swiftpearls.com/RxSwift-for-dummies-2-Operators.html">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº† RxSwift åŸºç¡€çš„éƒ¨åˆ†. ç°åœ¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€äº›æ“ä½œç¬¦, æ¥å­¦ä¹ ä¸€ä¸‹ &lt;strong&gt;FRP&lt;/strong&gt; ä¸­çš„&lt;strong&gt;F&lt;/strong&gt;(unctional) éƒ¨åˆ†&lt;/p&gt;
&lt;h3 id=&quot;Schedulers&quot;&gt;&lt;a href=&quot;#Schedulers&quot; class=&quot;headerlink&quot; title=&quot;Schedulers&quot;&gt;&lt;/a&gt;Schedulers&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹ä¹‹å‰å°±å·²ç»æåˆ°è¿‡çš„, ä½†æ˜¯æ²¡æœ‰è¯¦ç»†ä»‹ç»çš„ &lt;strong&gt;Schedulers&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Schedulers&lt;/strong&gt; æœ€å¸¸è§çš„ç”¨æ³•å°±æ˜¯å‘Šè¯‰ &lt;code&gt;Observables&lt;/code&gt; å’Œè®¢é˜…è€… åº”è¯¥åœ¨å“ªä¸ªçº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ä¸­å‘é€äº‹ä»¶,æˆ–è€…é€šçŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;å…³äº &lt;code&gt;Schedulers&lt;/code&gt; æœ€å¸¸è§çš„æ“ä½œç¬¦æ˜¯&lt;code&gt;observerOn&lt;/code&gt; å’Œ &lt;code&gt;subscribleOn&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;é€šå¸¸æƒ…å†µä¸‹ &lt;code&gt;Observables&lt;/code&gt; ä¼šåœ¨å®ƒè¢«è®¢é˜…çš„é‚£ä¸ªçº¿ç¨‹å‘é€äº‹ä»¶æˆ–è€…é€šçŸ¥ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ObserveOn&quot;&gt;&lt;a href=&quot;#ObserveOn&quot; class=&quot;headerlink&quot; title=&quot;ObserveOn&quot;&gt;&lt;/a&gt;ObserveOn&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;ObserveOn&lt;/strong&gt; æŒ‡å®š &lt;code&gt;Observables&lt;/code&gt; å‘é€äº‹ä»¶çš„çº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ã€‚å®ƒä¸ä¼šæ”¹å˜å®ƒæ‰§è¡Œçš„çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸€ä¸ªè·Ÿ part1 å¾ˆç›¸ä¼¼çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.global(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;).async &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.main.async &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ¥&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‡è®¾è®¢é˜…è€…æ˜¯ä¸€ä¸ª UI å±‚çš„ä¸œè¥¿ï¼Œ æ¯”å¦‚è¯´æ˜¯ä¸€ä¸ª &lt;code&gt;UIViewController&lt;/code&gt; æˆ–è€… &lt;code&gt;UIView&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.global(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;).async&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬æŠŠè¿™ä¸ªä»»åŠ¡æ”¾åœ¨å­çº¿ç¨‹ä¸­å»æ‰§è¡Œï¼Œ ä»¥å…é˜»å¡ UI &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;DispatchQueue.main.async&amp;#123; ...&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­å»æ›´æ–° UI, ä½ åº”è¯¥çŸ¥é“ &lt;code&gt;UIKit&lt;/code&gt; è¦æ±‚å¯¹ &lt;code&gt;UI&lt;/code&gt; çš„æ“ä½œéƒ½å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œã€‚æ‰€ä»¥è¿™äº›æ“ä½œå¯¹ä½ æ¥è¯´ä¸€å®šæ˜¯å¾ˆç†Ÿæ‚‰çš„äº†ã€‚&lt;/p&gt;
&lt;p&gt;è®°ä¸‹æ¥ä½¿ç”¨ &lt;strong&gt;ObserveOn&lt;/strong&gt; æ¥é‡æ„ä¸€ä¸‹è¿™æ®µä»£ç &lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create(&amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.global(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;).async &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ¥&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).observeOn(&lt;span class=&quot;type&quot;&gt;MainScheduler&lt;/span&gt;.instance)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬åˆ æ‰äº† &lt;code&gt;DispatchQueue.main.async {}&lt;/code&gt; ç„¶åæ·»åŠ äº† &lt;code&gt;.observeOn(MainScheduler.instance)&lt;/code&gt;ã€‚ è¿™ä¸ªå°±å¯ä»¥è®©æ‰€æœ‰çš„äº‹ä»¶éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ &lt;code&gt;&amp;quot;Hello dummy ğŸ¥&amp;quot;&lt;/code&gt; è¿™ä¸ªå…ƒç´ å°±èƒ½å¤Ÿå¾ˆå®‰å…¨çš„è¢«å‘é€ç»™ UI çš„å…ƒç´ ï¼Œ å› ä¸ºæˆ‘ä»¬å¯ä»¥å¾ˆç¡®å®šä»–ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;observable.subscribe(onNext: &amp;#123; [&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;] (element) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;?.label.text = element&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;ObserveOn&lt;/strong&gt; å¤§æ¦‚æ˜¯æœ€å¸¸è§çš„çº¿ç¨‹è°ƒåº¦æ“ä½œç¬¦äº†ã€‚ä½ å¸Œæœ› &lt;code&gt;Observables&lt;/code&gt; åŒ…å«äº†æ‰€æœ‰çš„é€»è¾‘, å’Œçº¿ç¨‹æ“ä½œ, è®©è®¢é˜…è€…å°½å¯èƒ½çš„ç®€å•ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å†äº†è§£ä¸€ä¸‹ &lt;code&gt;subscribeOn&lt;/code&gt; è¿™ä¸ªæ“ä½œç¬¦ã€‚&lt;/p&gt;
&lt;h4 id=&quot;SubscribeOn-Optional&quot;&gt;&lt;a href=&quot;#SubscribeOn-Optional&quot; class=&quot;headerlink&quot; title=&quot;SubscribeOn (Optional)&quot;&gt;&lt;/a&gt;SubscribeOn (Optional)&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªéå¸¸å…ˆè¿›çš„æ“ä½œç¬¦ã€‚ä½ å¯ä»¥å…ˆè·³è¿‡è¿™éƒ¨åˆ†, ä»¥åå†æ¥ç ”ç©¶ğŸ¤&lt;/p&gt;
&lt;p&gt;&lt;code&gt;subscribeOn&lt;/code&gt; è·Ÿ &lt;code&gt;ObserveOn&lt;/code&gt; éå¸¸çš„ç›¸ä¼¼ã€‚&lt;strong&gt;ä½†æ˜¯ä»–åªèƒ½æ”¹å˜ &lt;code&gt;Observable&lt;/code&gt; å°†è¦æ‰§è¡Œçš„ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ¥&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observable&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribeOn(&lt;span class=&quot;type&quot;&gt;ConcurrentDispatchQueueScheduler&lt;/span&gt;(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; [&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;] (element) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;?.label.text = element&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘åˆ æ‰äº† &lt;code&gt;Observable&lt;/code&gt; ä¸­çš„ &lt;code&gt;DispatchQueue.global(qos: .default).async {}&lt;/code&gt;  æ˜¯è¿™ä¸ªè®¢é˜…è€…å‘Šè¯‰ä»–åº”è¯¥åœ¨ä¸€ä¸ª &lt;code&gt;global queue&lt;/code&gt; ä¸­æ‰§è¡Œä¸‹é¢çš„æ“ä½œ, ä»¥å…é˜»å¡ UI. å¾ˆæ˜æ˜¾è¿™å›å¯¼è‡´ä¸€ä¸ªå¼‚å¸¸çš„æŠ›å‡º, ä¹‹å‰æåˆ°è¿‡ï¼š è¿™å›å¯¼è‡´ &lt;code&gt;Observable&lt;/code&gt; åœ¨å…¨å±€é˜Ÿåˆ—ä¸­æ‰§è¡Œ, &lt;strong&gt;ä¹Ÿä¼šåœ¨å…¨å±€é˜Ÿåˆ—ä¸­å‘å‡ºäº‹ä»¶&lt;/strong&gt;ã€‚åªéœ€è¦æ·»åŠ åœ¨ &lt;code&gt;Observable&lt;/code&gt; ä¸­æ·»åŠ  &lt;code&gt;.observeOn(MainScheduler.instance)&lt;/code&gt;å°±èƒ½é¿å…è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ¥&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;.observeOn(&lt;span class=&quot;type&quot;&gt;MainScheduler&lt;/span&gt;.instance)      &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observable&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribeOn(&lt;span class=&quot;type&quot;&gt;ConcurrentDispatchQueueScheduler&lt;/span&gt;(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; [&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;] (element) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;?.label.text = element&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ·»åŠ ä¹‹åï¼Œå°±èƒ½å¤Ÿå‘ç°åˆšåˆšè¯´åˆ°çš„é—®é¢˜å·²ç»è§£å†³æ‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨ &lt;code&gt;observeOn&lt;/code&gt; å‘¢ï¼Ÿæœ€å¸¸è§çš„åœºæ™¯æ˜¯:å¦‚æœåœ¨ &lt;code&gt;Observable&lt;/code&gt; ä¸éœ€è¦åœ¨åå°æ‰§è¡Œè€—æ—¶æ“ä½œ(è¯»å–æ•°æ®, å¤§çš„è®¡ç®—ä»»åŠ¡)çš„è¯.æˆ‘ä¸è®¤ä¸ºè¿™æ˜¯éå¸¸é¢‘ç¹çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œcome on!  å¤šçŸ¥é“ä¸€ä¸ªä½ èƒ½ç”¨çš„å·¥å…· ğŸ› ä¸æ˜¯ä»¶å¾ˆ cool çš„äº‹æƒ…å—ï¼Ÿ&lt;/p&gt;
&lt;h4 id=&quot;Scheduler-Types&quot;&gt;&lt;a href=&quot;#Scheduler-Types&quot; class=&quot;headerlink&quot; title=&quot;Scheduler Types&quot;&gt;&lt;/a&gt;Scheduler Types&lt;/h4&gt;&lt;p&gt;åšä¸º RxSwift èœé¸Ÿ, å¥½å¥‡ &lt;code&gt;observeOn&lt;/code&gt; å’Œ &lt;code&gt;MainScheduler.instance&lt;/code&gt; æ²¡ä»€ä¹ˆå…³ç³»ã€‚ä½ å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æˆ–è€…ç›´æ¥ä½¿ç”¨å·²ç»åˆ›å»ºå¥½äº†çš„ã€‚å¦‚æœä½ å¾ˆå¥½å¥‡çš„è¯&lt;a href=&quot;https://github.com/ReactiveX/RxSwift/blob/master/Documentation/Schedulers.md&quot;&gt;è¿™é‡Œæœ‰å¾ˆå¤š&lt;/a&gt;ã€‚ è¿™ä¹Ÿæ²¡ä»€ä¹ˆå¥½å¤æ‚çš„ï¼Œ å°±æ˜¯å¯¹ GCD å’Œ NSOperation çš„å°è£…è€Œå·²ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusSun.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusSun.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift For Dummies ğŸ£ Part1</title>
    <link href="https://CepheusSun.github.io/2017/05/06/RxSwift%20For%20Dummies%20Part1/"/>
    <id>https://CepheusSun.github.io/2017/05/06/RxSwift For Dummies Part1/</id>
    <published>2017-05-06T10:41:59.000Z</published>
    <updated>2017-05-06T16:25:51.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>RxSwift</strong> çœŸçš„æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å­¦ä¹ çš„ä¸œè¥¿ã€‚éå¸¸é—æ†¾çš„æ˜¯æˆ‘æ²¡æœ‰ç ”ç©¶æ‰€æœ‰çš„æ¶æ„æ¨¡å¼MVVM VIPER Routingã€‚</p>
<p>è¦éå¸¸å¥½çš„è®²å‡ºæ¥RxSwiftåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¹Ÿè¯´ä¸å¥½ã€‚æ¯•ç«Ÿä»–èƒ½åšå¤ªå¤šçš„äº‹æƒ…äº†ã€‚æ™®éè®¤ä¸ºï¼Œä»–æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ä¸­éå¸¸é‡è¦çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚åœ¨æœ€åˆçš„å®šä¹‰ä¸­,ä»–å¹¶ä¸å°±æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ã€‚ä»–æœ€åˆçš„è®¾è®¡çµæ„Ÿå°±æ˜¯æ¥è‡ªäºå‡½æ•°å“åº”å¼(<strong>FRP</strong>), æ‰€ä»¥ä¹Ÿå¯ä»¥è¯´å®ƒåŒ…å«äº†å‡½æ•°å“åº”å¼çš„ç‰¹æ€§ã€‚</p>
<p>å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ <strong>FRP</strong> çš„è¯, ä¸ç”¨æ‹…å¿ƒ, åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ä½ ä¼šè‡ªç„¶è€Œç„¶çš„ç†è§£ä»€ä¹ˆæ˜¯ <strong>FRP</strong>ã€‚</p>
<p>é€šè¿‡å¯¹ RXSwift çš„æ·±å…¥ç ”ç©¶, æˆ‘å¾—åˆ°äº†å¾ˆå¤šçš„å¯å‘, åŒæ—¶ä¹Ÿè¢«å¾ˆå¤šçš„é—®é¢˜å›°æ‰°ã€‚ç›¸ä¿¡ä½ ä¹Ÿä¼šè¿™æ ·ã€‚</p>
<p>éœ€è¦èŠ±å¾ˆå¤šä¸ªå°æ—¶çš„æ—¶é—´æ¥é€‚åº”æ–°çš„æ€ç»´æ¨¡å¼ï¼Œå”¯ä¸€èƒ½ç¡®å®šçš„æ˜¯ï¼Œä¸€æ—¦ä½ é€‚åº”äº†ï¼Œä½ å°±å†ä¹Ÿä¸æƒ³å›åˆ°ä»å‰äº†ã€‚</p>
<p>åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä¼šå°½å¯èƒ½çš„èŠ‚çº¦ä½ çš„æ—¶é—´ï¼Œå¹¶ä¸”è§£é‡Šçš„å°½å¯èƒ½çš„è¯¦ç»†ã€‚æƒ³æ•™å¹¼å„¿å›­çš„å°æœ‹å‹ä¸€æ ·ã€‚</p>
<p>å¼€å§‹å­¦ä¹ ä¹‹å‰, è¯·ç¡®å®šä½ å·²ç»æŒæ¡äº† Swift å’Œ UIkit çš„åŸºç¡€çŸ¥è¯†. </p>
<h3 id="The-Why"><a href="#The-Why" class="headerlink" title="The Why?"></a>The Why?</h3><p>å†™ UI çš„æ—¶å€™ç»å¸¸ä¼šå¤„ç†ä¸€äº›å¼‚æ­¥çš„æ“ä½œã€‚æˆ‘ä»¬å¾ˆæ—©å°±çŸ¥é“è¦ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°è¿™ä¸ªä¸œè¥¿ã€‚æˆ‘ç›¸ä¿¡ä½ ç°åœ¨å·²ç»éå¸¸ç†Ÿæ‚‰ä»£ç†æ¨¡å¼äº†ã€‚ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§å¾ˆé…·çš„è®¾è®¡æ¨¡å¼ã€‚ä½†æ˜¯å†™èµ·æ¥çœŸçš„å¾ˆçƒ¦ğŸ˜¡ã€‚</p>
<center><br><img src="http://swiftpearls.com/images/cry.jpg" alt=""><br></center>

<ul>
<li>ä»£ç†æ¨¡å¼éœ€è¦äº›å¾ˆå¤šçš„æ¨¡ç‰ˆä»£ç : åˆ›å»ºä¸€ä¸ªåè®®, å£°æ˜ä¸€ä¸ª <code>delegate</code> å˜é‡, éµå®ˆåè®®, è®¾ç½®ä»£ç†â€¦</li>
<li>å†™å®Œè¿™ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ,å¯èƒ½ä½ ä¸å°å¿ƒå°±å¿˜äº†å…¶ä¸­çš„æŸä¸ªæ­¥éª¤ã€‚ æ¯”å¦‚è¯´ <code>object.delegete = self</code></li>
<li>ç®¡ç†èµ·æ¥éå¸¸éº»çƒ¦ã€‚ä»–éœ€è¦åœ¨å¥½å‡ ä¸ªæ–‡ä»¶ä¸­è·³è·ƒã€‚</li>
</ul>
<p>RxSwift è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä»–èƒ½å¤Ÿè®©ä½ é€šè¿‡å£°æ˜çš„æ–¹å¼ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚å‡å°‘äº†ç®¡ç†çš„è´Ÿæ‹…, å½“ç„¶ï¼Œä¹Ÿä¸ç”¨å†™é‚£ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ã€‚</p>
<p>æˆ‘åˆšåˆšå¼€å§‹äº†ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œè‡³ä»Šè¿˜æ²¡æœ‰å†™ä¸€ä¸ª <code>delegate</code></p>
<h3 id="Basic-Example"><a href="#Basic-Example" class="headerlink" title="Basic Example"></a>Basic Example</h3><p>talk is cheap, show you the code.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleClass</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">runExample</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">// OBSERVABLE //</span></div><div class="line">        <span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span></div><div class="line">            <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">                <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">                observer.onNext(<span class="string">"Hello dummy ğŸ£"</span>)</div><div class="line">                observer.onCompleted()</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// OBSERVER //</span></div><div class="line">        </div><div class="line">        observable.subscribe(onNext:&#123; (element) <span class="keyword">in</span></div><div class="line">            <span class="built_in">print</span>(element)</div><div class="line">        &#125;).addDisposableTo(disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯æœ€åŸºæœ¬çš„ä¾‹å­, åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­, æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª runExample æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œçš„æ˜¯ä¸€äº› RxSwift ä¸­çš„äº‹æƒ…ã€‚æƒ³ä¸€ä¸‹åœ¨è¿™ä¸ªä¾‹å­ä¸­å‘ç”Ÿäº†ä»€ä¹ˆå§ã€‚</p>
<a id="more"></a>
<h3 id="Observable-ğŸ“¡"><a href="#Observable-ğŸ“¡" class="headerlink" title="Observable ğŸ“¡"></a>Observable ğŸ“¡</h3><p>æˆ‘ä»¬è¿˜æ˜¯ä» RxSwift ä¸­æœ€åŸºæœ¬çš„æ„å»ºå•å…ƒå¼€å§‹å§ã€‚ <code>Observable</code>ã€‚ å®ƒå…¶å®éå¸¸çš„ç®€å•ã€‚ <code>Observable</code> æ‰§è¡ŒæŸäº›åŠ¨ä½œ, ç„¶åè§‚å¯Ÿè€…èƒ½å¤Ÿå¯¹æ­¤ä½œå‡ºä¸€äº›ååº”ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="comment">// Simulate some work</span></div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">        observer.onNext(<span class="string">"Hello dummy ğŸ£"</span>)</div><div class="line">        observer.onCompleted()</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">                </div><div class="line">observable.subscribe(onNext:&#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ª <code>Observable</code> ä¿¡å·äº†ã€‚è¿™ç§ä¿¡å·åªæœ‰åœ¨è¢«è®¢é˜…ä¹‹åæ‰ä¼šæ‰§è¡Œå®ƒä¹Ÿè¢«å«åš:å†·ä¿¡å·â„ï¸ã€‚ç›¸åçƒ­ä¿¡å·ğŸ”¥æ˜¯é‚£ç§æ—¢æ˜¯æ²¡æœ‰è¢«è®¢é˜…ä¹Ÿä¼šæ‰§è¡Œçš„ä¿¡å·ã€‚</p>
<p>åœ¨ä¸‹ä¸€æ­¥ä»¬æˆ‘ä»¬ä¼šå…·ä½“çš„è®²è§£äºŒè€…çš„åŒºåˆ«ã€‚ç°åœ¨ä½ åªéœ€è¦ç†è§£çš„æ˜¯: å› ä¸ºä½ åˆå§‹åŒ–å‡ºæ¥çš„æ˜¯ä¸€ä¸ªå†·â„ï¸ä¿¡å·<code>Hello dummy ğŸ£</code>è¿™ä¸ªå€¼æ˜¯ä¸ä¼šè¢«å‘é€å‡ºæ¥çš„ã€‚å†·ä¿¡å·â„ï¸åªæœ‰åœ¨æœ‰ä¸œè¥¿è®¢é˜…ä¹‹åæ‰ä¼šå‘é€æ¶ˆæ¯ã€‚</p>
<p>æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„æ¥åˆ†æä¸€ä¸‹è¿™ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ„æ€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;...&#125;</div></pre></td></tr></table></figure>
<p>è¿™è¡Œä»£ç ä¿è¯è¿™ä¸ª <code>Observable</code> ä¿¡å·åœ¨ä¸»çº¿ç¨‹ä¸­å‘é€æ¶ˆæ¯ã€‚å…¶å® RxSwift æ˜¯æœ‰ä¸€ä¸ªè°ƒåº¦æœºåˆ¶, ä½†æ˜¯æˆ‘ç°åœ¨è¿˜ä¸æƒ³é‚£ä¹ˆæ—©å‘Šè¯‰ä½ , ä¸ç„¶ä½ è¯¥è®°ä¸å€¼äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">observer.onNext(<span class="string">"Hello dummy ğŸ£"</span>)</div></pre></td></tr></table></figure>
<p>ä¸€ä¸ª <code>Observable</code> ä¿¡å·å‘å‡ºçš„æ¶ˆæ¯ä»æ—¶é—´ä¸Šæ¥çœ‹, å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ª <strong>åºåˆ—</strong>ã€‚åœ¨è¿™ä¸ªåºåˆ—ä¸­å¯èƒ½æœ‰æ— é™å¤šçš„å€¼ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>onNext</code> æ–¹æ³•ç±»å°†è¿™äº›å€¼å‘é€å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">observer.onCompleted()</div></pre></td></tr></table></figure>
<p>å½“è¿™ä¸ªåºåˆ—å·²ç»å‘é€å®Œäº†æ‰€æœ‰çš„å€¼ä¹‹åï¼Œå®ƒå¯ä»¥å‘é€ä¸€ä¸ª <code>Completed</code> æˆ–è€… <code>Error</code>å‡ºæ¥ã€‚ä¹‹åè¿™ä¸ªä¿¡å·å°±ä¸èƒ½åœ¨äº§ç”Ÿæ›´å¤šçš„å€¼äº†, ç„¶åå°±ä¼šéšç€ä¸€ä¸ªé—­åŒ…è¢«é‡Šæ”¾æ‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">Disposables</span>.create()</div></pre></td></tr></table></figure>
<p>æ¯ä¸€ä¸ª  <code>Observable</code> ä¿¡å·éƒ½è¦è¿”å›ä¸€ä¸ª <code>Disposable</code>.</p>
<p>ä½¿ç”¨ <code>Disposables.create()</code> å¦‚æœä½ ä¸æƒ³åœ¨ä¿¡å·è¢«é‡Šæ”¾çš„æ—¶å€™å¤„ç†å…¶ä»–äº‹æƒ…ã€‚ä½ å¯ä»¥çœ‹çœ‹<a href="https://github.com/ReactiveX/RxSwift/blob/master/RxSwift/Disposables/NopDisposable.swift">NopDisposable</a>çš„å®ç°ï¼Œä½ ä¼šå‘ç°ï¼Œä»–ä»€ä¹ˆäº‹æƒ…éƒ½æ²¡æœ‰åšï¼Œåªæ˜¯ä¸€äº›ç©ºæ–¹æ³•ã€‚</p>
<h3 id="Disposable"><a href="#Disposable" class="headerlink" title="Disposable"></a>Disposable</h3><p><code>Disposable</code> å¯¹è±¡å¿…é¡»è¦åœ¨ <code>Observable</code> ä¸­è¿”å›, å®ƒæ˜¯ç”¨æ¥åœ¨<code>Observable</code>ä¸èƒ½å†æ­£å¸¸çš„å®Œæˆçš„æ—¶å€™æ¸…é™¤æ‰è¿™äº›ä¿¡å·çš„ã€‚æ¯”å¦‚è¯´ä½ å¯ä»¥ä½¿ç”¨ <strong>AnonymousDisposable</strong>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">Disposables</span>.create(with: &#123;</div><div class="line">    connection.close()</div><div class="line">    database.closeImportantSomething()</div><div class="line">    cache.clear()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>åªæœ‰å½“ä¿¡å·è¢«æå‰é‡Šæ”¾æˆ–è€…ç¨‹åºæ‰‹åŠ¨è°ƒç”¨äº† <code>dispose()</code> æ–¹æ³•, <code>Disposable</code> æ‰ä¼šè¢«è°ƒç”¨ã€‚ä½†æ˜¯åœ¨å¤šæ•°æƒ…å†µä¸‹, <code>dispose()</code> æ–¹æ³•éƒ½æ˜¯é€šè¿‡ <strong>Dispose Bags</strong> è‡ªåŠ¨è°ƒç”¨çš„ã€‚åˆ«ç€æ€¥ï¼Œä½ å¯ä»¥åœ¨ä¸€äº›æ›´å…·ä½“çš„ä¾‹å­ä¸­è‡ªå·±å®ç°è¿™ä¸ªä¸œè¥¿ã€‚</p>
<h3 id="Observer-ğŸ•µ"><a href="#Observer-ğŸ•µ" class="headerlink" title="Observer ğŸ•µ"></a>Observer ğŸ•µ</h3><p>æˆ‘ä»¬åˆ›å»ºçš„ <code>Observable</code> æ˜¯å†·ä¿¡å·â„ï¸ã€‚ é™¤éæˆ‘ä»¬è®¢é˜…äº†å®ƒï¼Œä¸ç„¶å®ƒæ˜¯ä¸ä¼šå‘é€ä¿¡å·çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">observable.subscribe(onNext: &#123;(element) <span class="keyword">in</span></div><div class="line">  <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯è®¢é˜…ä¿¡å·çš„æ–¹æ³•ã€‚åœ¨ <code>subscribeNext</code> æ–¹æ³•ä¸­ä¸€ä¸ªè®¢é˜…å°±å‘ç”Ÿäº†ã€‚è¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ª <code>Disposable</code>.è¿™ä¸ª <code>Disposable</code> å°±æ˜¯å¯¹è¿™ä¸ªè®¢é˜…çš„è®°å½•</p>
<p>è¿™ä¸ª <code>Observable</code> å°±å¼€å§‹å·¥ä½œäº†, 10ç§’ä¹‹å, ä½ å°±ä¼šåœ¨æ§åˆ¶å°çœ‹è§</p>
<blockquote>
<p>Hello dummy ğŸ£</p>
</blockquote>
<p><code>subscribe(onNext:)</code> åªä¼šåœ¨Nextäº‹ä»¶å‘é€å‡ºæ¥çš„æ—¶å€™å“åº”ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>subscribe(onCompleted:)</code> å’Œ <code>subscribe(onError:)</code> å“åº”å¯¹åº”çš„äº‹ä»¶ã€‚</p>
<h3 id="Dispose-Bag-ğŸ—‘"><a href="#Dispose-Bag-ğŸ—‘" class="headerlink" title="Dispose Bag ğŸ—‘"></a>Dispose Bag ğŸ—‘</h3><p>å”¯ä¸€ä¸€ä¸ªè¿˜æœ‰ç‚¹ç¥ç§˜çš„ä¸œè¥¿å°±æ˜¯ <code>addDisposableTo</code> è¿™ä¸ªæ–¹æ³•äº†ã€‚</p>
<blockquote>
<p>Dispose bags are used to return ARC like behavior to RX. When a DisposeBag is deallocated, it will call dispose on each of the added disposables.</p>
<p>Dispose bags å°±åƒæ˜¯ä¸€ä¸ªåƒåœ¾ç­ã€‚å°±åƒæ˜¯ AutoreleasePool ä¸€æ ·ï¼Œå½“è¿™ä¸ªåƒåœ¾ç­è¢«é‡Šæ”¾çš„æ—¶å€™, é‡Œé¢çš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè¢«é‡Šæ”¾æ‰ã€‚</p>
</blockquote>
<p>å½“ä½ è®¢é˜…ä¸€ä¸ªä¿¡å·çš„æ—¶å€™, ä½ å°±éœ€è¦æŠŠä½ åˆ›å»ºå‡ºæ¥çš„ <code>Disposable</code> æ·»åŠ åˆ°è¿™ä¸ªæ¡†é‡Œé¢ã€‚å½“è¿™çš„æ¡†è¢«é‡Šæ”¾çš„æ—¶å€™(ExampleClass å¯¹è±¡ dealloc çš„æ—¶å€™)ã€‚è¿™äº›æ²¡æœ‰æ‰§è¡Œå®Œçš„<code>Disposable</code>å°±ä¼šè¢«é‡Šæ”¾æ‰ã€‚</p>
<p>å®ƒè¢«ç”¨ä½œé‡Šæ”¾åœ¨é—­åŒ…ä¸­å¼•ç”¨çš„å€¼, ä»¥åŠæ²¡ç”¨çš„èµ„æº, æ¯”å¦‚è¯´, ä¸€ä¸ª HTTP ç½‘ç»œè¿æ¥, æ•°æ®åº“è¿æ¥, æˆ–è€…æ˜¯ç¼“å­˜çš„å¯¹è±¡ã€‚</p>
<p>å¦‚æœä½ è¿˜æ˜¯ä¸æ‡‚, ä¸€ä¼šå„¿å†ä¸¾ä¸€ä¸ªä¾‹å­ã€‚</p>
<h3 id="Observable-operators"><a href="#Observable-operators" class="headerlink" title="Observable operators"></a>Observable operators</h3><p><code>create</code> åªæ˜¯ä¿¡å·è¯¸å¤šæ“ä½œæ–¹æ³•ä¸­çš„ä¸€ä¸ªè€Œå·²ï¼Œå®ƒè¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ä¿¡å·ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ ReactiveX<br>çš„<a href="http://reactivex.io/documentation/operators.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚å“ªé‡Œæœ‰æ‰€æœ‰çš„æ“ä½œæ–¹æ³•ã€‚æˆ‘åªæ˜¯ä¸¾ä¸€äº›å¸¸è§çš„ä¾‹å­ã€‚</p>
<h4 id="Just"><a href="#Just" class="headerlink" title="Just"></a>Just</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.just(<span class="string">"Hello again dummy ğŸ¥"</span>);</div><div class="line">observable.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">        </div><div class="line">observable.subscribe(onCompleted: &#123; </div><div class="line">    <span class="built_in">print</span>(<span class="string">"I'm done"</span>)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>Hello again dummy ğŸ¥<br>Iâ€™m done</p>
</blockquote>
<p><strong>Just</strong> just åˆ›å»ºäº†ä¸€ä¸ªæ™ºèƒ½é‡Šæ”¾ä¸€ä¸ªå€¼çš„ä¿¡å·ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªä¿¡å·åºåˆ—ä¸­çš„äº‹ä»¶ï¼Œæ˜¯è¿™æ ·çš„:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.Next(&quot;Hello&quot;) -&gt;  .Completed</div></pre></td></tr></table></figure>
<h4 id="Interval"><a href="#Interval" class="headerlink" title="Interval"></a>Interval</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">0.3</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">observable.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">   <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>0<br>1<br>2<br>3<br>â€¦</p>
</blockquote>
<p><strong>Interval</strong> æ˜¯ä¸€ä¸ªéå¸¸å…·ä½“çš„æ“ä½œç¬¦å·ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­, å®ƒä» 0 æ¯0.3ç§’é€’å¢, <code>scheduler</code> æ˜¯ç”¨æ¥å®šä¹‰å¼‚æ­¥è¡Œä¸ºçš„ã€‚</p>
<h4 id="Repeat"><a href="#Repeat" class="headerlink" title="Repeat"></a>Repeat</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.repeatElement(<span class="string">"This is fun ğŸ™„"</span>)</div><div class="line">observable.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">   <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>This is fun ğŸ™„<br>This is fun ğŸ™„<br>This is fun ğŸ™„<br>This is fun ğŸ™„<br>â€¦</p>
</blockquote>
<p><strong>repeat</strong> ä¼šæ— é™çš„é‡å¤æˆ‘ä»¬ç»™å®šçš„å€¼ã€‚ä½ å¯ä»¥é€šè¿‡å®šä¹‰ <code>scheduler</code> ç±»å‹çš„æ–¹æ³•æ¥æ§åˆ¶çº¿ç¨‹çš„è¡Œä¸ºã€‚</p>
<p>ç›®å‰ä¸ºæ­¢, å¯èƒ½éƒ½ä¸æ˜¯éå¸¸çš„ç»™åŠ›ã€‚ä½†æ˜¯çŸ¥é“å…¶ä»–çš„æ“ä½œæ˜¯å¿…è¦çš„ã€‚å¦å¤–ä¸€ä»¶å¾ˆé‡è¦çš„äº‹æƒ…æ¶˜ï¼Œè¿™æ˜¯ RxSwift æœ€æœ‰ç”¨çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="Real-life-example"><a href="#Real-life-example" class="headerlink" title="Real life example"></a>Real life example</h3><p>ç°åœ¨æˆ‘ä»¬å¼€å§‹å¿«é€Ÿçš„é€šè¿‡ä¸€ä¸ªä¾‹å­å·©å›ºä¸€ä¸‹è¿™äº›çŸ¥è¯†ã€‚æˆ‘ä»¬å¯¹ RxSwift çš„äº†è§£ç›®å‰ä¸ºæ­¢æ˜¯éå¸¸æœ‰é™çš„ã€‚æ‰€æœ‰æˆ‘ä»¬å…ˆä½¿ç”¨ä¸€ä¸ªç®€å•çš„ MVC çš„ä¾‹å­ã€‚æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼Œ å®ƒå¯ä»¥ä» google ä¸Šè·å–æ•°æ®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> RxCocoa</div><div class="line"><span class="keyword">import</span> RxSwift</div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">GoogleModel</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createGoogleDataObservable</span><span class="params">()</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create(&#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">            </div><div class="line">            <span class="keyword">let</span> session = <span class="type">URLSession</span>.shared</div><div class="line">            <span class="keyword">let</span> task = session.dataTask(with: <span class="type">URL</span>(string: <span class="string">"https://www.google.com"</span>)!) &#123; (data, response, error) <span class="keyword">in</span></div><div class="line">                </div><div class="line">                <span class="comment">// æˆ‘ä»¬éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­æ›´æ–°</span></div><div class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> err = error &#123;</div><div class="line">                        <span class="comment">// å¦‚æœè¯·æ±‚å¤±è´¥, ç›´æ¥å‘å¤„å¤±è´¥çš„äº‹ä»¶</span></div><div class="line">                        observer.onError(err)</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="comment">// è§£ææ•°æ®</span></div><div class="line">                        <span class="keyword">if</span> <span class="keyword">let</span> googleString = <span class="type">String</span>(data: data!, encoding: .ascii) &#123;</div><div class="line">                            <span class="comment">// å°†æ•°æ®å‘é€å‡ºå»</span></div><div class="line">                            observer.onNext(googleString)</div><div class="line">                        &#125; <span class="keyword">else</span> &#123;</div><div class="line">                            <span class="comment">// å¦‚æœè§£æå¤±è´¥å‘é€å¤±è´¥çš„äº‹ä»¶</span></div><div class="line">                            observer.onNext(<span class="string">"Error! Unable to parse the response data from google!"</span>)</div><div class="line">                        &#125;</div><div class="line">                        <span class="comment">// ç»“æŸè¿™ä¸ªåºåˆ—</span></div><div class="line">                        observer.onCompleted()</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            task.resume()</div><div class="line">            </div><div class="line">            <span class="comment">// è¿”å›ä¸€ä¸ª AnonymousDisposable</span></div><div class="line">            <span class="keyword">return</span> <span class="type">Disposables</span>.create(with: &#123;</div><div class="line">                <span class="comment">// å–æ¶ˆè¯·æ±‚</span></div><div class="line">                task.cancel()</div><div class="line">            &#125;)</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯éå¸¸ç®€å•çš„ã€‚ <code>createGoogleDataObservable</code>ä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥è¢«è®¢é˜…çš„ä¿¡å·ã€‚è¿™ä¸ªä¿¡å·åˆ›å»ºäº†ä¸€ä¸ªä» google è·å–æ•°æ®çš„ä»»åŠ¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.main.async &#123;...&#125;</div></pre></td></tr></table></figure>
<p>URLSession çš„ä»»åŠ¡æ˜¯åœ¨åå°çº¿ç¨‹ä¸­è¿›è¡Œçš„, æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ UI çº¿ç¨‹ä¸­æ›´æ–°ã€‚è®°ä½è¿˜æœ‰ä¸€ä¸ª <code>schedulers</code> è¿™ä¼šåœ¨æ›´é«˜çº§çš„é˜¶æ®µä»‹ç»å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">Disposables</span>.create(with: &#123;</div><div class="line"> task.cancel()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><code>Disposable</code> æ˜¯ä¸€ä¸ªç»™é•¿ç»™åŠ›çš„æœºåˆ¶ï¼š å¦‚æœè®¢é˜…è€…åœæ­¢è®¢é˜…è¿™ä¸ªä¿¡å·äº†ã€‚è¿™ä¸ªä»»åŠ¡å°±ä¼šè¢«å–æ¶ˆã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯è®¢é˜…è€…è¿™éƒ¨åˆ†çš„å†…å®¹äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"><span class="keyword">import</span> RxCocoa</div><div class="line"><span class="keyword">import</span> RxSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// é€šå¸¸å°±æ˜¯è¿™æ ·åˆ›å»º DisposeBag çš„</span></div><div class="line">    <span class="comment">// å½“è¿™ä¸ª controller è¢«é‡Šæ”¾æ‰çš„æ—¶å€™ï¼Œdisposebag</span></div><div class="line">    <span class="comment">// ä¹Ÿä¼šé‡Šæ”¾æ‰, å¹¶ä¸”æ‰€æœ‰ bag ä¸­çš„å…ƒç´ éƒ½ä¼šè°ƒç”¨ dispose() æ–¹æ³•</span></div><div class="line">    <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    <span class="keyword">let</span> model = <span class="type">GoogleModel</span>()</div><div class="line">    </div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> googleText: <span class="type">UITextView</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        <span class="comment">// è®°ä½ä½¿ç”¨ [weak self] æˆ–è€… [unowned self] æ¥é¿å…å¾ªç¯å¼•ç”¨</span></div><div class="line">        model.createGoogleDataObservable()</div><div class="line">            .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">                <span class="keyword">self</span>?.googleText.text = element</div><div class="line">            &#125;).addDisposableTo(disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¥å¥‡å—ï¼Ÿæ²¡æœ‰åè®®, æ²¡æœ‰ä»£ç†ã€‚åªæ˜¯å£°æ˜äº†ä¸€ä¸‹åœ¨ä¸€ä¸ªäº‹æƒ…å‘ç”Ÿçš„æ—¶å€™åº”è¯¥åšä»€ä¹ˆã€‚</p>
<p>åœ¨é—­åŒ…ä¸­è®°å¾—ä½¿ç”¨ <code>[weak self]</code> æˆ–è€… <code>[unowned self]</code> æ¥é¿å…å¾ªç¯å¼•ç”¨</p>
<p>è¿˜æœ‰ä¸€ç§æ›´å“åº”å¼çš„æ–¹æ³•æ¥ä¸º <code>UITextView</code> ç»‘å®šæ–‡æœ¬, ç»‘å®šã€‚ä½†é‚£æ˜¯æ›´é«˜çº§çš„å†…å®¹ã€‚</p>
<h3 id="Dispose-Bag-Example"><a href="#Dispose-Bag-Example" class="headerlink" title="Dispose Bag Example"></a>Dispose Bag Example</h3><p>ä½ å¯èƒ½å·²ç»å‘ç°äº† <code>disposeBag</code> æ˜¯ <code>ViewController</code> çš„ä¸€ä¸ªæˆå‘˜å˜é‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div></pre></td></tr></table></figure>
<p>å½“è¿™ä¸ªæ§åˆ¶å™¨è¢«é‡Šæ”¾çš„æ—¶å€™ï¼Œå®ƒä¹Ÿä¼šé‡Šæ”¾æ‰è¿™ä¸ª <code>disposeBag</code> .</p>
<p>å¦‚æœè¿™ä¸ª <code>disposeBag</code> è¢«é‡Šæ”¾æ‰ä¹‹å, å®ƒæˆ‘ä»¬æ·»åŠ åˆ°è¿™ä¸ª bag é‡Œé¢æ‰€æœ‰çš„ä¿¡å·éƒ½ä¼šè¢«é‡Šæ”¾æ‰ã€‚è€Œè¿™ä¸ªç½‘ç»œè¯·æ±‚ä»»åŠ¡å¦‚æœè¿˜æ²¡æœ‰ç»“æŸçš„è¯ä¹Ÿä¼šè¢«å–æ¶ˆã€‚<br>å¸Œæœ›æˆ‘è®²æ¸…æ¥šäº† <code>DisposeBag</code> çš„æœºåˆ¶ã€‚</p>
<h3 id="Thatâ€˜s-itï¼"><a href="#Thatâ€˜s-itï¼" class="headerlink" title="Thatâ€˜s itï¼"></a>Thatâ€˜s itï¼</h3><p>Demo æˆ‘å·²ç»æ”¾åœ¨ <a href="https://github.com/CepheusTeam/Translate">GitHub</a> ä¸Šäº†ã€‚</p>
<p>åˆ°ç°åœ¨, æˆ‘ä»¬å·²ç»å­¦åˆ°äº†å¦‚ä½•åˆ›å»ºä¸€ä¸ª Observable å’Œ è®¢é˜…è€…ã€‚ä»¥åŠ disposing æœºåˆ¶æ˜¯æ€ä¹ˆå›äº‹ã€‚å¸Œæœ›ä½ èƒ½å¤Ÿç†è§£åˆ°è¿™æ ·åšæ¯”å¹³å¸¸çš„è§‚å¯Ÿè€…æ¨¡å¼æœ‰ä»€ä¹ˆä¼˜åŠ¿ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æ˜¯å…³äº RxSwift æ“ä½œç¬¦çš„ã€‚</p>
<p><a href="http://swiftpearls.com/RxSwift-for-dummies-1-Observables.html#basic-example">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;RxSwift&lt;/strong&gt; çœŸçš„æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å­¦ä¹ çš„ä¸œè¥¿ã€‚éå¸¸é—æ†¾çš„æ˜¯æˆ‘æ²¡æœ‰ç ”ç©¶æ‰€æœ‰çš„æ¶æ„æ¨¡å¼MVVM VIPER Routingã€‚&lt;/p&gt;
&lt;p&gt;è¦éå¸¸å¥½çš„è®²å‡ºæ¥RxSwiftåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¹Ÿè¯´ä¸å¥½ã€‚æ¯•ç«Ÿä»–èƒ½åšå¤ªå¤šçš„äº‹æƒ…äº†ã€‚æ™®éè®¤ä¸ºï¼Œä»–æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ä¸­éå¸¸é‡è¦çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚åœ¨æœ€åˆçš„å®šä¹‰ä¸­,ä»–å¹¶ä¸å°±æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ã€‚ä»–æœ€åˆçš„è®¾è®¡çµæ„Ÿå°±æ˜¯æ¥è‡ªäºå‡½æ•°å“åº”å¼(&lt;strong&gt;FRP&lt;/strong&gt;), æ‰€ä»¥ä¹Ÿå¯ä»¥è¯´å®ƒåŒ…å«äº†å‡½æ•°å“åº”å¼çš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ &lt;strong&gt;FRP&lt;/strong&gt; çš„è¯, ä¸ç”¨æ‹…å¿ƒ, åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ä½ ä¼šè‡ªç„¶è€Œç„¶çš„ç†è§£ä»€ä¹ˆæ˜¯ &lt;strong&gt;FRP&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¯¹ RXSwift çš„æ·±å…¥ç ”ç©¶, æˆ‘å¾—åˆ°äº†å¾ˆå¤šçš„å¯å‘, åŒæ—¶ä¹Ÿè¢«å¾ˆå¤šçš„é—®é¢˜å›°æ‰°ã€‚ç›¸ä¿¡ä½ ä¹Ÿä¼šè¿™æ ·ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦èŠ±å¾ˆå¤šä¸ªå°æ—¶çš„æ—¶é—´æ¥é€‚åº”æ–°çš„æ€ç»´æ¨¡å¼ï¼Œå”¯ä¸€èƒ½ç¡®å®šçš„æ˜¯ï¼Œä¸€æ—¦ä½ é€‚åº”äº†ï¼Œä½ å°±å†ä¹Ÿä¸æƒ³å›åˆ°ä»å‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä¼šå°½å¯èƒ½çš„èŠ‚çº¦ä½ çš„æ—¶é—´ï¼Œå¹¶ä¸”è§£é‡Šçš„å°½å¯èƒ½çš„è¯¦ç»†ã€‚æƒ³æ•™å¹¼å„¿å›­çš„å°æœ‹å‹ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å§‹å­¦ä¹ ä¹‹å‰, è¯·ç¡®å®šä½ å·²ç»æŒæ¡äº† Swift å’Œ UIkit çš„åŸºç¡€çŸ¥è¯†. &lt;/p&gt;
&lt;h3 id=&quot;The-Why&quot;&gt;&lt;a href=&quot;#The-Why&quot; class=&quot;headerlink&quot; title=&quot;The Why?&quot;&gt;&lt;/a&gt;The Why?&lt;/h3&gt;&lt;p&gt;å†™ UI çš„æ—¶å€™ç»å¸¸ä¼šå¤„ç†ä¸€äº›å¼‚æ­¥çš„æ“ä½œã€‚æˆ‘ä»¬å¾ˆæ—©å°±çŸ¥é“è¦ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°è¿™ä¸ªä¸œè¥¿ã€‚æˆ‘ç›¸ä¿¡ä½ ç°åœ¨å·²ç»éå¸¸ç†Ÿæ‚‰ä»£ç†æ¨¡å¼äº†ã€‚ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§å¾ˆé…·çš„è®¾è®¡æ¨¡å¼ã€‚ä½†æ˜¯å†™èµ·æ¥çœŸçš„å¾ˆçƒ¦ğŸ˜¡ã€‚&lt;/p&gt;
&lt;center&gt;&lt;br&gt;&lt;img src=&quot;http://swiftpearls.com/images/cry.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;/center&gt;

&lt;ul&gt;
&lt;li&gt;ä»£ç†æ¨¡å¼éœ€è¦äº›å¾ˆå¤šçš„æ¨¡ç‰ˆä»£ç : åˆ›å»ºä¸€ä¸ªåè®®, å£°æ˜ä¸€ä¸ª &lt;code&gt;delegate&lt;/code&gt; å˜é‡, éµå®ˆåè®®, è®¾ç½®ä»£ç†â€¦&lt;/li&gt;
&lt;li&gt;å†™å®Œè¿™ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ,å¯èƒ½ä½ ä¸å°å¿ƒå°±å¿˜äº†å…¶ä¸­çš„æŸä¸ªæ­¥éª¤ã€‚ æ¯”å¦‚è¯´ &lt;code&gt;object.delegete = self&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç®¡ç†èµ·æ¥éå¸¸éº»çƒ¦ã€‚ä»–éœ€è¦åœ¨å¥½å‡ ä¸ªæ–‡ä»¶ä¸­è·³è·ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;RxSwift è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä»–èƒ½å¤Ÿè®©ä½ é€šè¿‡å£°æ˜çš„æ–¹å¼ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚å‡å°‘äº†ç®¡ç†çš„è´Ÿæ‹…, å½“ç„¶ï¼Œä¹Ÿä¸ç”¨å†™é‚£ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åˆšåˆšå¼€å§‹äº†ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œè‡³ä»Šè¿˜æ²¡æœ‰å†™ä¸€ä¸ª &lt;code&gt;delegate&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;Basic-Example&quot;&gt;&lt;a href=&quot;#Basic-Example&quot; class=&quot;headerlink&quot; title=&quot;Basic Example&quot;&gt;&lt;/a&gt;Basic Example&lt;/h3&gt;&lt;p&gt;talk is cheap, show you the code.&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ExampleClass&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; disposeBag = &lt;span class=&quot;type&quot;&gt;DisposeBag&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;runExample&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// OBSERVABLE //&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.global(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;).async &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ£&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// OBSERVER //&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        observable.subscribe(onNext:&amp;#123; (element) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(element)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™å°±æ˜¯æœ€åŸºæœ¬çš„ä¾‹å­, åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­, æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª runExample æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œçš„æ˜¯ä¸€äº› RxSwift ä¸­çš„äº‹æƒ…ã€‚æƒ³ä¸€ä¸‹åœ¨è¿™ä¸ªä¾‹å­ä¸­å‘ç”Ÿäº†ä»€ä¹ˆå§ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusSun.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusSun.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>MVVM design pattern and RxSwift</title>
    <link href="https://CepheusSun.github.io/2017/05/06/MVVM%20design%20pattern%20and%20RxSwift/"/>
    <id>https://CepheusSun.github.io/2017/05/06/MVVM design pattern and RxSwift/</id>
    <published>2017-05-05T17:35:57.000Z</published>
    <updated>2017-05-06T16:25:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç¿»è¯‘è‡ª(<a href="http://lukagabric.com/mvvm-design-pattern-and-rxswift/">http://lukagabric.com/mvvm-design-pattern-and-rxswift/</a>)</p>
<h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><p>MVVM æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚ä»–æ˜¯ç¨‹åºçš„ä»£ç åˆ†ç¦»æˆä¸‰ä¸ªéƒ¨åˆ†: <code>Model</code>ã€<code>View</code>ã€<code>ViewModel</code>ã€‚ <code>Model</code> ä»£è¡¨æ•°æ®çš„è¡¨ç°, <code>View</code> ä»£è¡¨ç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ï¼Œ<code>ViewModel</code> ä»£è¡¨ç€æ¨¡å‹å±‚å’Œè§†å›¾å±‚çš„ä¸»è¦å…³è”å…³ç³»ã€‚</p>
<h4 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h4><p><code>Model</code> å°±æ˜¯æ•°æ®å±‚ã€‚ä»–åŒ…æ‹¬ä¸€å®šèŒƒå›´å†…çš„æ¨¡å‹ï¼Œå’Œä¸šåŠ¡é€»è¾‘ã€‚ <code>Model</code> å¹¶ä¸åªæ˜¯ä½ ç¨‹åºä¸­çš„é‚£äº›æ¨¡å‹ç»“æ„ä½“æˆ–è€…æ•°æ®åº“, ä»–ä¹ŸåŒ…å«äº†ä¸€äº› Service æˆ–è€…ç»„ä»¶, æ¯”å¦‚è¯´ <code>Alamofire</code>å’Œä¸€äº› SDK ç­‰ç­‰ã€‚</p>
<p><code>Model</code> å±‚æ‰§è¡Œæ‰€æœ‰è·Ÿæ•°æ®æœ‰å…³çš„æ“ä½œã€‚æ¯”å¦‚å¸¸è§çš„å¢åˆ æ”¹æŸ¥ç­‰ç­‰ã€‚è¿™äº›æ“ä½œç”± <code>ViewModel</code> å‘èµ·ã€‚å½“ <code>Model</code>æ“ä½œå®Œäº†æ•°æ®ä¹‹åå®ƒå†å‘Šè¯‰ <code>ViewModel</code> ç»“æœã€‚</p>
<p><code>Model</code> è¢« ViewModel æŒæœ‰ã€‚ä»–ä¹Ÿå¹¶ä¸çŸ¥é“è§†å›¾å±‚å’Œ <code>ViewModel</code> å±‚çš„äº‹æƒ…ã€‚å› ä¸ºä»–æ˜¯å’Œè¿™ä¸¤ä¸ªä¸œè¥¿å®Œå…¨éš”ç¦»å¼€çš„ã€‚</p>
<h4 id="View"><a href="#View" class="headerlink" title="View"></a>View</h4><p><code>View</code> æ˜¯ç¨‹åºä¸­æ•°æ®çš„å¯è§†åŒ–å±•ç¤ºã€‚å®ƒæ²¡æœ‰é€»è¾‘ç›¸å…³çš„ä¸œè¥¿ã€‚ä»–ä¸»è¦æœ‰æ¥å—ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œå’Œå°†æ•°æ®å±•ç¤ºåœ¨ç•Œé¢ä¸Šä¸¤ä¸ªäººç‰©ã€‚å®ƒå°†ç”¨æˆ·äº¤äº’çš„äº‹ä»¶è½¬å‘åˆ° <code>ViewModel</code> ä¸­è¿›è¡Œå¤„ç†ã€‚<code>View</code> è§‚å¯Ÿ <code>ViewModel</code> ä¸­æ•°æ®çš„å˜åŒ–, å¹¶ä¸”å°†è¿™äº›å˜åŒ–å±•ç°å‡ºæ¥ã€‚</p>
<p><code>View</code> å’Œ <code>Model</code> ä¹‹é—´æ²¡æœ‰ä»»ä½•ç›´æ¥çš„å…³è”ã€‚ ä»–ä»¬é€šè¿‡ <code>View</code> æŒæœ‰çš„ <code>ViewModel</code> äº§ç”Ÿå…³è”ã€‚</p>
<p>ç•Œé¢ä¿¡æ¯åœ¨ <code>xib</code> æˆ–è€… <code>StoryBoard</code> ä¸­é€šè¿‡ <code>UIKit</code> ä¸­çš„ç»„ä»¶è¢«å®šä¹‰ã€‚<code>ViewController</code> æ˜¯ç›´æ¥è·Ÿ <code>xib</code> æˆ–è€… <code>StoryBoard</code> å…³è”çš„ã€‚å®ƒåŒ…å«äº† <code>Xib</code> æˆ–è€… <code>StoryBoard</code> ä¸­çš„ <code>outlets</code> å’Œä¸€äº›å®šä¹‰ UI çš„é¢å¤–é…ç½®ã€‚ä»–ä¹Ÿè´Ÿè´£ç®¡ç† <code>View</code> çš„ç”Ÿå‘½å‘¨æœŸã€‚ åœ¨ MVVM ä¸­ä»–å’Œ <code>View</code> çš„å…³è”æ˜¯éå¸¸ç´§å¯†çš„, ä»–å…¶å®å°±æ˜¯ <code>View</code> å±‚çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h4 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h4><p><code>ViewModel</code> æ˜¯ç¨‹åºçš„é€»è¾‘å±‚ã€‚ä»–å¤„ç†ç”¨æˆ·äº¤äº’è¡Œä¸ºã€‚ç„¶åæ›´æ–°æ•°æ®ã€‚ç„¶ååœ¨é€šçŸ¥ <code>View</code> æ–°çš„æ•°æ®å’Œæ˜¾ç¤ºçš„æ–¹å¼ã€‚ä¸¾ä¸€ä¸ªå¾ˆå¹³å¸¸çš„ä¾‹å­ã€‚ä¸€ä¸ª ViewModel ä»Modelå±‚ä¸­è¯·æ±‚åˆ°äº†ä¸€äº›åŒ…å« <code>Date</code> çš„æ¨¡å‹ã€‚ è¿™ä¸ª Date å€¼å¹¶ä¸ä¼šè¢«å‘Šè¯‰ç»™ View, ViewModel å‘Šè¯‰ View çš„åº”è¯¥æ˜¯è¢«æ ¼å¼åŒ–ä¹‹åçš„å­—ç¬¦ä¸²ã€‚è§†å›¾ä¸ä¼šæ“ä½œæ•°æ®æœ¬èº«ï¼Œä»–åªè´Ÿè´£å°† ViewModel å‡†å¤‡å¥½çš„æ•°æ®å±•ç¤ºå‡ºæ¥ã€‚</p>
<h4 id="Similar-to-MVC"><a href="#Similar-to-MVC" class="headerlink" title="Similar to MVC"></a>Similar to MVC</h4><p>åœ¨ MVC è®¾è®¡æ¨¡å¼ä¸­, <code>ViewController</code> æ˜¯ <code>Model</code> å’Œ <code>View</code> ä¹‹é—´çš„æ¡¥æ¢ã€‚ä»–åªæœ‰è§†å›¾, ç®¡ç†è§†å›¾çš„ç»“æ„ï¼Œç®¡ç†ç”¨æˆ·çš„äº¤äº’ã€‚ä»–è¿˜è´Ÿè´£ç®¡ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸ,åŠ è½½ã€æ˜¾ç¤ºã€æ¶ˆå¤±ç­‰ã€‚ä»–å…·æœ‰çš„å¦å¤–ä¸€ä¸ªæŒ‡è´£æ˜¯æ›´æ–°æ¨¡å‹æ•°æ®, è¿™å°±åŒ…æ‹¬äº†æ˜¾ç¤ºæ•°æ®çš„ç›¸å…³é€»è¾‘(ä¹Ÿå°±æ˜¯æ•°æ®çš„å¤„ç†,å¦‚ä¸Šæ–‡æåˆ°çš„è®² <code>Date</code> è½¬åŒ–æˆ <code>String</code> çš„é€»è¾‘)ã€‚å› ä¸ºä»–å…·æœ‰è¿™ä¹ˆå¤šçš„èŒè´£ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹ <code>Viewcontroller</code> å°±ä¼šå˜çš„éå¸¸å¤§ã€‚æ‰€ä»¥ä¹Ÿæœ‰äººç§°MVC ä¸º Massive View Controller</p>
<p>å‡ºç°å¤æ‚çš„ <code>viewController</code> ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ã€‚ç”±äº <code>Controller</code> æœ‰å¾ˆå¤šçš„èŒè´£ã€‚ä»£ç å°±ä¼šå˜çš„éå¸¸çš„å¤æ‚ã€‚è¿™å¾ˆæ˜æ˜¾å°±è¿èƒŒäº†å•ä¸€èŒè´£è¿™ä¸ªåŸåˆ™ã€‚è¿™ä¹Ÿè®©æµ‹è¯• <code>Controller</code> ä¸­çš„é€»è¾‘å˜æˆä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ã€‚<code>Controller</code> å’Œ <code>View</code> çš„é«˜åº¦è€¦åˆã€‚<code>view</code> çš„ç”Ÿå‘½å‘¨æœŸä½¿å¾—é€»è¾‘çš„åˆ†ç¦»å˜çš„ä¸é‚£ä¹ˆå®¹æ˜“ã€‚æˆ‘ä»¬å°±éœ€è¦èŠ±å¾ˆå¤§çš„ç²¾åŠ›æ¥å¤„ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>MVVM å’Œ MVC éå¸¸ç›¸ä¼¼ã€‚ æ­£å¦‚å‰æ–‡æ‰€è¯´ã€‚ MVC ä¸­çš„ <code>Controller</code> åŒæ—¶åŒ…å«äº†è§†å›¾å’Œç¨‹åºçš„é€»è¾‘ã€‚å°†é€»è¾‘ç›¸å…³çš„ä»£ç ä» <code>Controller</code> ä¸­åˆ†ç¦»å‡ºæ¥, æ”¾åˆ°ä»–è‡ªå·±æŠ½è±¡å‡ºæ¥çš„ç±»é‡Œé¢å»ã€‚è¿™æ—¶å€™çš„ <code>Controller</code>å°±åªå…³æ³¨è§†å›¾ç›¸å…³çš„äº‹æƒ…ã€‚åˆšåˆšåˆ†ç¦»å‡ºæ¥çš„è¿™ä¸ªç±»å¤„ç†ç›¸å…³çš„é€»è¾‘ã€‚è¿™ä¸ªç±»å°±æ˜¯ ViewModelã€‚ä»–å’Œ <code>Controller</code> å…·æœ‰ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚æ‰€ä»¥è¯´ MVVM å°±æ˜¯å°†é€»è¾‘ä»£ç ä» <code>controller</code>ä¸­åˆ†ç¦»åˆ° <code>ViewModel</code> ä¸­çš„ MVC</p>
<h4 id="Binding-data-from-ViewModel-to-View"><a href="#Binding-data-from-ViewModel-to-View" class="headerlink" title="Binding data from ViewModel to View"></a>Binding data from ViewModel to View</h4><p>æœ‰å¾ˆå¤šå°†æ•°æ®ç»‘å®šçš„æœºåˆ¶, æ¯”å¦‚ Swift ä¸­çš„å±æ€§è§‚å¯Ÿã€‚è§†å›¾å¯ä»¥å¯¹å¤–æä¾›ä¸€ä¸ª Closure æ¥è¿›è¡Œè§†å›¾çš„æ›´æ–°ã€‚è¿™ä¸ª Closure ç”¨æ¥é€šçŸ¥ View ä»–å…³è”çš„å±æ€§çš„æ›´æ–°ã€‚é™¤äº†ç†Ÿæ‚‰è§‚å¯Ÿã€‚æˆ‘ä»¬çš„ç¨‹åºè¿˜ç»å¸¸éœ€è¦å¤„ç†å„ç§å¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œå’Œé€šçŸ¥æˆ–è€…äº‹ä»¶çš„æµä¿¡æ¯ã€‚å‡½æ•°å“åº”å¼ç¼–ç¨‹(FRP)æ¡†æ¶ç®€ç›´å°±æ˜¯ä¸ºäº†å¤„ç†è¿™ç±»äº‹ä»¶è€Œç”Ÿçš„ã€‚ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šFRP æ¡†æ¶ï¼Œå¯¹ iOS å¼€å‘æ¥è¯´ï¼Œæœ€å‡ºåçš„åº”è¯¥æ˜¯ <code>RxSwift</code> å’Œ <code>ReactiveCocoa</code>äº†ã€‚ä¹‹å‰åœ¨ä¸€ç¯‡å¯¹æ¯”æ–‡ç« ä¸­æœ‰æåˆ°è¿‡, ä¸ç®¡æ€æ ·ï¼Œæˆ‘æ›´å–œæ¬¢ <code>RxSwift</code> </p>
<h3 id="RxSwift"><a href="#RxSwift" class="headerlink" title="RxSwift"></a>RxSwift</h3><p>æŒ‡ä»¤å¼ç¼–ç¨‹æ˜¯åŸºäºä¸€æ­¥ä¸€æ­¥æ˜ç¡®çš„æŒ‡ä»¤æ¥æ‰§è¡Œçš„ã€‚ä»–è¯¦ç»†çš„æè¿°äº†ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ã€‚å€¼åšä¸ºçŠ¶æ€è€Œå­˜åœ¨ã€‚ç”±äºç¨‹åºæ˜¯ä¸€æ­¥ä¸€æ­¥çš„æ‰§è¡Œçš„,æ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå€¼åœ¨ä¹‹åå‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™ä¸€æ”¹å˜ä¹Ÿä¸ä¼šè¢«ä¼ åˆ°ä¸‹ä¸€æ­¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æŒ‡ä»¤å¼ç¼–ç¨‹</span></div><div class="line">a = <span class="number">1</span></div><div class="line">b = <span class="number">2</span></div><div class="line"><span class="built_in">c</span> = a + b  <span class="comment">// c = 3</span></div><div class="line">a = <span class="number">5</span>   <span class="comment">// c = 3</span></div></pre></td></tr></table></figure>
<p>å“åº”å¼ç¼–ç¨‹,è·ŸæŒ‡ä»¤å¼ç›¸åã€‚ä»–æ˜¯åŸºäºå˜åŒ–çš„ã€‚ä»–åŸºäºå£°æ˜å¼ç¼–ç¨‹ï¼Œè¿™å°±æ„å‘³ç€ä»–å…³æ³¨çš„æ˜¯ç¨‹åºåº”è¯¥å®Œæˆä»€ä¹ˆï¼Œè€Œä¸æ˜¯ç¨‹åºæ˜¯æ€ä¹ˆè¿è¡Œçš„ã€‚å®ƒæ˜¯é€šè¿‡æ•°å­¦è¿ç®—å’Œå…¶ä»–åƒæ˜¯ <code>filter</code> <code>map</code> <code>reduce</code> ä¹‹ç±»çš„è¿ç®—æ“ä½œçš„è¿ç”¨æ¥å®ç°çš„ã€‚å¦‚ä½•å‡†ç¡®çš„è¿è¡Œè¢«äº¤ç»™åº•å±‚çš„ç¨‹åºè¯­è¨€æˆ–è€…æ¡†æ¶æ¥è€ƒè™‘äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å“åº”å¼ç¼–ç¨‹</span></div><div class="line">a = <span class="number">1</span></div><div class="line">b = <span class="number">2</span></div><div class="line"><span class="built_in">c</span> = a + b <span class="comment">// c = 3</span></div><div class="line">a = <span class="number">5</span>     <span class="comment">// c = 7</span></div></pre></td></tr></table></figure>
<p>RxSwift è®©ä½ èƒ½ç”¨é€šè¿‡å‡½æ•°å“åº”å¼ç¼–ç¨‹æ¥ç¼–å†™ä½ çš„ä»£ç ã€‚ä½¿ç”¨ RxSwift å¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºäº‹ä»¶æˆ–è€…æ•°æ®æµã€‚è¿™äº›äº‹ä»¶æˆ–è€…æ•°æ®æµå¯ä»¥äº’ç›¸ç»„åˆã€è½¬æ¢ã€‚å¹¶ä¸”æœ€ç»ˆè¢«è§‚å¯Ÿåˆ°ï¼ŒåŸºäºå€¼æ¥è¿›è¡Œä¸€äº›æ“ä½œã€‚</p>
<p>æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼Œåœ¨ MVVM ä¸­ View è§‚å¯Ÿ ViewModel ä¸­æ¨¡å‹çš„æ•°æ®ã€‚RxSwift æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•å¹¶ä¸”å¹²å‡€çš„æ–¹æ³•æ¥è§‚å¯Ÿè¿™äº›å€¼ï¼Œå¹¶ç»‘å®šåˆ°å¯¹åº”çš„ View ä¸Šã€‚</p>
<a id="more"></a>
<h4 id="Observable"><a href="#Observable" class="headerlink" title="Observable"></a>Observable</h4><p>Observable æ˜¯ RxSwift çš„ä¸»è¦æ„æˆéƒ¨åˆ†ã€‚ä»–æ˜¯ä¸€ä¸ªå¯ä»¥å¼‚æ­¥çš„æ¥å—å…ƒç´ çš„åºåˆ—ã€‚è¿™ä¸ªåºåˆ—å¯ä»¥æœ‰0ä¸ªæˆ–è€…å¾ˆå¤šä¸ªçš„å…ƒç´ ã€‚æœ‰ä¸‰ç§äº‹ä»¶èƒ½å¤ŸåŸºäºå®ƒå‘ç”Ÿã€‚ä¸‹ä¸€æ­¥(Next)ã€å®Œæˆ(Completed)ã€é”™è¯¯(Error)</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Event</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> next(<span class="type">Element</span>)   <span class="comment">// è¿™ä¸ªåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span></div><div class="line">    <span class="keyword">case</span> error(<span class="type">Swift</span>.<span class="type">Error</span>)<span class="comment">// è¿™ä¸ªåºåˆ—å‘ç”Ÿäº†é”™è¯¯</span></div><div class="line">    <span class="keyword">case</span> completed      <span class="comment">// è¿™ä¸ªåºåˆ—æˆåŠŸçš„å®Œæˆçš„æ‰€æœ‰äººä»»åŠ¡</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨ <code>Observable</code> çš„ <code>subscribe</code> æ–¹æ³•æ¥è®¢é˜…è¿™äº›äº‹ä»¶ã€‚ ç”¨è¿™ç§æ–¹æ³•å¯ä»¥åˆ†åˆ«å¤„ç†è¿™ä¸ªäº‹ä»¶çš„å„ç§æƒ…å†µã€‚</p>
<ul>
<li>OnNext: å¯ä»¥ä½¿ç”¨è¢«è®¢é˜…çš„å…ƒç´ å€¼ã€‚</li>
<li>OnCompleted: å½“è¿™ä¸ªåºåˆ—æˆåŠŸçš„å‘é€å®Œæ‰€æœ‰å…ƒç´ ä¹‹åä¼šè¢«è°ƒç”¨ã€‚</li>
<li>OnError: å½“è¿™ä¸ªåºåˆ—ä¸èƒ½å®Œæˆçš„æ—¶å€™è¢«è°ƒç”¨ã€‚</li>
</ul>
<p>åªè¦ <code>Complete</code> æˆ–è€… <code>Error</code> è¢«è§‚å¯Ÿåˆ°äº†, è¿™ä¸ªåºåˆ—å°±ä¸èƒ½äº§ç”Ÿä»»ä½•æ–°çš„å…ƒç´ äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observable.subscribe(</div><div class="line">    onNext: &#123; element <span class="keyword">in</span> ... &#125;, </div><div class="line">    onError: &#123; error <span class="keyword">in</span> ... &#125;,</div><div class="line">    onCompleted: &#123; ... &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<h4 id="Hot-and-cold-observables"><a href="#Hot-and-cold-observables" class="headerlink" title="Hot and cold observables"></a>Hot and cold observables</h4><p>å³ä½¿æ²¡æœ‰è¢«è§‚å¯Ÿä¹Ÿä¼šå‘é€æ¶ˆæ¯çš„ä¿¡å·è¢«ç§°ä½œçƒ­ä¿¡å·ã€‚æƒ³è±¡ä¸€ä¸‹ <code>NotificationCenter</code> æŠ€æœ¯æ²¡æœ‰å…¶ä»–å¯¹è±¡æ¥å—é€šçŸ¥, ä¹Ÿä¹Ÿç„¶ä¼šå‘é€å‡ºæ¥ã€‚å¦‚æœä½ åœ¨æŸä¸ªæ—¶å€™è®¢é˜…äº†è¿™ä¸ªä¿¡å·, ä¹‹å‰å‘å‡ºæ¥çš„æ¶ˆæ¯ä½ å°±ä¼šé”™è¿‡ã€‚</p>
<p>é‚£äº›åªæœ‰è¢«è®¢é˜…ä¹‹åæ‰å¼€å§‹å‘é€æ¶ˆæ¯çš„ä¿¡å·è¢«ç§°ä½œå†·ä¿¡å·ã€‚è¿™äº›èµ„æºä¼šè¢«åˆ†é…ç»™æ¯ä¸ªè®¢é˜…å¯¹è±¡ã€‚(æ¯”å¦‚è¯´ï¼Œä½ æ¯æ¬¡è®¢é˜…çš„ç½‘ç»œè¯·æ±‚å°±ä¼šè¢«é‡Šæ”¾)ä½†æ˜¯è¿™äº›èµ„æºå¯ä»¥è¢«å¤šä¸ªå¯¹è±¡å…±äº«(åªæœ‰ä¸€ä¸ªç½‘ç»œè¯·æ±‚è¢«é‡Šæ”¾äº†,ä½†å¯èƒ½è¿™è¢«å¾ˆå¤šä¸ªè§‚å¯Ÿè€…è®¢é˜…)</p>
<h4 id="Driver"><a href="#Driver" class="headerlink" title="Driver"></a>Driver</h4><p>Driver æ˜¯ RxCocoa æ¡†æ¶ä¸­çš„ä¸€ä¸ªå€¼ç±»å‹ã€‚å®ƒæ˜¯å¯¹ä¸€ä¸ªå¯è®¢é˜…çš„åºåˆ—çš„å°è£…ï¼Œå¦‚æœè¦æŠŠä¸€ä¸ªç®€å•çš„å€¼ç»‘å®šåˆ°Viewä¸Š, å®ƒä¼šæ˜¯ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ã€‚å¦‚æœ <code>Observables</code> å‘ç”Ÿäº†é”™è¯¯, ä½ éœ€è¦å¾ˆæ–¹ä¾¿çš„å°†ä¸€äº›ä¸œè¥¿å±•ç¤ºå‡ºæ¥ã€‚æ¯ä¸ªä¿¡å·éƒ½å¯ä»¥å¾ˆå®¹æ˜“çš„è¢«è½¬æ¢æˆ <code>Driver</code>ã€‚ å½“ä½ æä¾›äº†è¿™ä¸ªä¿¡å·å‘ç”Ÿé”™è¯¯çš„è¿”å›ä»€ä¹ˆçš„æ—¶å€™ï¼Œåªéœ€è¦ä½¿ç”¨ <code>asDriver</code> æ–¹æ³•å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.asDriver(onErrorJustReturn: <span class="string">"No items to display."</span>)</div></pre></td></tr></table></figure>
<p>æƒ³è±¡ä¸€ä¸‹å¼‚æ­¥æ“ä½œçš„åœºæ™¯ã€‚æ¯”å¦‚è¯´ç½‘ç»œè¯·æ±‚ã€‚æˆ‘ä»¬éœ€è¦åœ¨ç•Œé¢ä¸Šå±•ç¤ºè¿”å›å€¼çš„ä¸ªæ•°ã€‚åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿”å›å€¼çš„ä¸ªæ•°æ˜ å°„æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¯èƒ½è¿™ä¸ªå­—ç¬¦ä¸²çš„æ ¼å¼å¯èƒ½æ˜¯ <code>&quot;X item(s)&quot;</code> <code>Driver</code> è¿˜èƒ½å¤Ÿç¡®ä¿æˆ‘ä»¬éœ€è¦ä¿®æ”¹ UI çš„è¿™ä¸ªè®¢é˜…æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹å½“ä¸­çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> results: <span class="type">Observable</span>&lt;[<span class="type">SomeItem</span>]&gt; = ...</div><div class="line"><span class="keyword">let</span> resultsCountDriver = results</div><div class="line">    .<span class="built_in">map</span> &#123; <span class="string">"<span class="subst">\($<span class="number">0</span>.<span class="built_in">count</span>)</span> item(s)"</span> &#125;</div><div class="line">    .asDriver(onErrorJustReturn: <span class="string">"No items to display."</span>)</div></pre></td></tr></table></figure>
<p>æŠŠè¿™ä¸ªæ•°æ®ç»‘å®šåˆ° Label ä¸­å°±å¾ˆç®€å•äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">resultsCountDriver.drive(resultCountLabel.rx.text).disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h4 id="DisposeBag"><a href="#DisposeBag" class="headerlink" title="DisposeBag"></a>DisposeBag</h4><p>å¦‚æœä¸€ä¸ªåºåˆ—åœæ­¢äº†, ä½†æ˜¯å®ƒå¹¶æ²¡æœ‰è¢«é‡Šæ”¾æ‰ã€‚åœ¨ä»–å°±ä¼šé€ æˆèµ„æºçš„æµªè´¹å’Œå†…å­˜çš„æ³„æ¼ã€‚çŸ¥é“ä»–å®Œæˆäº†æˆ–è€…å¤„é”™äº†ã€‚å¦‚æœä¸€ä¸ªåºåˆ—æ²¡æœ‰åœæ­¢ï¼Œä¹Ÿæ²¡æœ‰å‡ºé”™ï¼Œè¿™ä¸ªèµ„æºå°±ä¼šè¢«æ°¸ä¹…çš„å ç”¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åœ¨éœ€è¦è®¢é˜…çš„å¯¹è±¡ä¸­ç”Ÿå‘½ä¸€ä¸ª <code>DisposeBag</code> çš„æˆå‘˜å˜é‡çš„åŸå› äº†ã€‚è¿™æ ·çš„è¯ï¼Œåªè¦è¿™ä¸ªå¯¹è±¡å‘—é‡Šæ”¾æ‰äº†ï¼Œæ‰€æœ‰ç›¸å…³çš„èµ„æºéƒ½ä¼šè¢«é‡Šæ”¾å¹¶ä¸”è¢«ç³»ç»Ÿå›æ”¶ã€‚</p>
<h4 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h4><p><code>Variable</code>è¡¨ç¤ºå¯ä»¥è¢«è®¢é˜…çš„çŠ¶æ€ã€‚å®ƒæ˜¯ä¿¡å·å’ŒåŠŸèƒ½èŒƒå¼ä¹‹é—´çš„æ¡¥æ¢ã€‚<code>Variable</code> æ€»æ˜¯åŒ…å«äº†æä¾›ç»™æ„é€ å‡½æ•°çš„åˆå§‹å€¼å½“ä½ è®¢é˜…å½“å‰çš„å€¼çš„æ—¶å€™ï¼Œè¿™ä¸ªåˆå§‹å€¼ä¼šç«‹é©¬è¢«å‘é€åˆ°è¿‡æ¥ã€‚(åªæœ‰æœ€æ–°å’Œå½“å‰å€¼ä¼šè¢«å‘å‡ºï¼Œæ—§çš„å€¼ä¸ä¼š)ã€‚ä¹Ÿå¯ä»¥ç›´æ¥è·å–æˆ–è€…è®¾ç½® <code>Variable</code> çš„å€¼ã€‚ä»–å†…éƒ¨çš„ä¿¡å·å¯ä»¥é€šè¿‡ <code>asObservable</code> æ–¹æ³•è·å–åˆ°ã€‚å¦å¤–, <code>Variable</code> æ°¸è¿œéƒ½ä¸ä¼šå‡ºé”™ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> variable = <span class="type">Variable</span>(<span class="string">"My Variable"</span>)</div><div class="line">variable.value = <span class="string">"Some value"</span></div><div class="line"><span class="keyword">let</span> variableObservable = variable.asObservable()</div><div class="line">variableObservable.subscribe(onNext: &#123; value <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(value) <span class="comment">//prints "Some value"</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œ æˆ‘å†™äº†ä¸€ä¸ª Demo æ¥æ¼”ç¤º MVVM + RxSwift. è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¨‹åºè·å–å¹¶ä¸”æ˜¾ç¤ºå¤©æ°”çš„æ•°æ®ã€‚è¿™ä¸ªappæœ‰ä¸‰ç§çŠ¶æ€ï¼Œ åŠ è½½ä¸­ï¼Œæ˜¾ç¤ºä¸­ï¼Œé”™è¯¯ã€‚æœ‰ä¸¤ç§å¯¹é”™è¯¯çš„å¤„ç†ï¼Œä¸€æ˜¯ï¼Œæˆ‘ä»¬åªæ˜¾ç¤ºé”™è¯¯ã€‚å¦ä¸€ä¸ªæ˜¯æ˜¾ç¤ºä¹‹å‰çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±æ˜¾ç¤ºé”™è¯¯ã€‚è¿™ä¸¤ç§å¤„ç†æ–¹å¼éƒ½æ˜¯é€šè¿‡å“åº”å¼ç¼–ç¨‹å’ŒæŒ‡ä»¤å¼ç¼–ç¨‹å®ç°çš„ã€‚</p>
<p>åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œåªæœ‰ ViewMoel ä¼šå‘ç”Ÿæ”¹å˜ã€‚ä½ å¯ä»¥çœ‹åˆ°ç»™åŠŸèƒ½å¢åŠ å¤æ‚æ€§(æ˜¾ç¤ºé”™è¯¯æˆ–è€…æ—§çš„æ•°æ®)ã€‚å¦‚æœä½¿ç”¨æŒ‡ä»¤å¼ç¼–ç¨‹ï¼Œå¯èƒ½ä¼šå¯¹ä»£ç å¸¦æ¥å¾ˆå¤šçš„å˜åŠ¨ã€‚è€Œä½¿ç”¨å“åº”å¼ç¼–ç¨‹ï¼Œåªéœ€è¦å¢åŠ é¢å¤–çš„çŠ¶æ€è€Œå·²ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ç¿»è¯‘è‡ª(&lt;a href=&quot;http://lukagabric.com/mvvm-design-pattern-and-rxswift/&quot;&gt;http://lukagabric.com/mvvm-design-pattern-and-rxswift/&lt;/a&gt;)&lt;/p&gt;
&lt;h3 id=&quot;MVVM&quot;&gt;&lt;a href=&quot;#MVVM&quot; class=&quot;headerlink&quot; title=&quot;MVVM&quot;&gt;&lt;/a&gt;MVVM&lt;/h3&gt;&lt;p&gt;MVVM æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚ä»–æ˜¯ç¨‹åºçš„ä»£ç åˆ†ç¦»æˆä¸‰ä¸ªéƒ¨åˆ†: &lt;code&gt;Model&lt;/code&gt;ã€&lt;code&gt;View&lt;/code&gt;ã€&lt;code&gt;ViewModel&lt;/code&gt;ã€‚ &lt;code&gt;Model&lt;/code&gt; ä»£è¡¨æ•°æ®çš„è¡¨ç°, &lt;code&gt;View&lt;/code&gt; ä»£è¡¨ç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ï¼Œ&lt;code&gt;ViewModel&lt;/code&gt; ä»£è¡¨ç€æ¨¡å‹å±‚å’Œè§†å›¾å±‚çš„ä¸»è¦å…³è”å…³ç³»ã€‚&lt;/p&gt;
&lt;h4 id=&quot;Model&quot;&gt;&lt;a href=&quot;#Model&quot; class=&quot;headerlink&quot; title=&quot;Model&quot;&gt;&lt;/a&gt;Model&lt;/h4&gt;&lt;p&gt;&lt;code&gt;Model&lt;/code&gt; å°±æ˜¯æ•°æ®å±‚ã€‚ä»–åŒ…æ‹¬ä¸€å®šèŒƒå›´å†…çš„æ¨¡å‹ï¼Œå’Œä¸šåŠ¡é€»è¾‘ã€‚ &lt;code&gt;Model&lt;/code&gt; å¹¶ä¸åªæ˜¯ä½ ç¨‹åºä¸­çš„é‚£äº›æ¨¡å‹ç»“æ„ä½“æˆ–è€…æ•°æ®åº“, ä»–ä¹ŸåŒ…å«äº†ä¸€äº› Service æˆ–è€…ç»„ä»¶, æ¯”å¦‚è¯´ &lt;code&gt;Alamofire&lt;/code&gt;å’Œä¸€äº› SDK ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Model&lt;/code&gt; å±‚æ‰§è¡Œæ‰€æœ‰è·Ÿæ•°æ®æœ‰å…³çš„æ“ä½œã€‚æ¯”å¦‚å¸¸è§çš„å¢åˆ æ”¹æŸ¥ç­‰ç­‰ã€‚è¿™äº›æ“ä½œç”± &lt;code&gt;ViewModel&lt;/code&gt; å‘èµ·ã€‚å½“ &lt;code&gt;Model&lt;/code&gt;æ“ä½œå®Œäº†æ•°æ®ä¹‹åå®ƒå†å‘Šè¯‰ &lt;code&gt;ViewModel&lt;/code&gt; ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Model&lt;/code&gt; è¢« ViewModel æŒæœ‰ã€‚ä»–ä¹Ÿå¹¶ä¸çŸ¥é“è§†å›¾å±‚å’Œ &lt;code&gt;ViewModel&lt;/code&gt; å±‚çš„äº‹æƒ…ã€‚å› ä¸ºä»–æ˜¯å’Œè¿™ä¸¤ä¸ªä¸œè¥¿å®Œå…¨éš”ç¦»å¼€çš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;View&quot;&gt;&lt;a href=&quot;#View&quot; class=&quot;headerlink&quot; title=&quot;View&quot;&gt;&lt;/a&gt;View&lt;/h4&gt;&lt;p&gt;&lt;code&gt;View&lt;/code&gt; æ˜¯ç¨‹åºä¸­æ•°æ®çš„å¯è§†åŒ–å±•ç¤ºã€‚å®ƒæ²¡æœ‰é€»è¾‘ç›¸å…³çš„ä¸œè¥¿ã€‚ä»–ä¸»è¦æœ‰æ¥å—ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œå’Œå°†æ•°æ®å±•ç¤ºåœ¨ç•Œé¢ä¸Šä¸¤ä¸ªäººç‰©ã€‚å®ƒå°†ç”¨æˆ·äº¤äº’çš„äº‹ä»¶è½¬å‘åˆ° &lt;code&gt;ViewModel&lt;/code&gt; ä¸­è¿›è¡Œå¤„ç†ã€‚&lt;code&gt;View&lt;/code&gt; è§‚å¯Ÿ &lt;code&gt;ViewModel&lt;/code&gt; ä¸­æ•°æ®çš„å˜åŒ–, å¹¶ä¸”å°†è¿™äº›å˜åŒ–å±•ç°å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;View&lt;/code&gt; å’Œ &lt;code&gt;Model&lt;/code&gt; ä¹‹é—´æ²¡æœ‰ä»»ä½•ç›´æ¥çš„å…³è”ã€‚ ä»–ä»¬é€šè¿‡ &lt;code&gt;View&lt;/code&gt; æŒæœ‰çš„ &lt;code&gt;ViewModel&lt;/code&gt; äº§ç”Ÿå…³è”ã€‚&lt;/p&gt;
&lt;p&gt;ç•Œé¢ä¿¡æ¯åœ¨ &lt;code&gt;xib&lt;/code&gt; æˆ–è€… &lt;code&gt;StoryBoard&lt;/code&gt; ä¸­é€šè¿‡ &lt;code&gt;UIKit&lt;/code&gt; ä¸­çš„ç»„ä»¶è¢«å®šä¹‰ã€‚&lt;code&gt;ViewController&lt;/code&gt; æ˜¯ç›´æ¥è·Ÿ &lt;code&gt;xib&lt;/code&gt; æˆ–è€… &lt;code&gt;StoryBoard&lt;/code&gt; å…³è”çš„ã€‚å®ƒåŒ…å«äº† &lt;code&gt;Xib&lt;/code&gt; æˆ–è€… &lt;code&gt;StoryBoard&lt;/code&gt; ä¸­çš„ &lt;code&gt;outlets&lt;/code&gt; å’Œä¸€äº›å®šä¹‰ UI çš„é¢å¤–é…ç½®ã€‚ä»–ä¹Ÿè´Ÿè´£ç®¡ç† &lt;code&gt;View&lt;/code&gt; çš„ç”Ÿå‘½å‘¨æœŸã€‚ åœ¨ MVVM ä¸­ä»–å’Œ &lt;code&gt;View&lt;/code&gt; çš„å…³è”æ˜¯éå¸¸ç´§å¯†çš„, ä»–å…¶å®å°±æ˜¯ &lt;code&gt;View&lt;/code&gt; å±‚çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ViewModel&quot;&gt;&lt;a href=&quot;#ViewModel&quot; class=&quot;headerlink&quot; title=&quot;ViewModel&quot;&gt;&lt;/a&gt;ViewModel&lt;/h4&gt;&lt;p&gt;&lt;code&gt;ViewModel&lt;/code&gt; æ˜¯ç¨‹åºçš„é€»è¾‘å±‚ã€‚ä»–å¤„ç†ç”¨æˆ·äº¤äº’è¡Œä¸ºã€‚ç„¶åæ›´æ–°æ•°æ®ã€‚ç„¶ååœ¨é€šçŸ¥ &lt;code&gt;View&lt;/code&gt; æ–°çš„æ•°æ®å’Œæ˜¾ç¤ºçš„æ–¹å¼ã€‚ä¸¾ä¸€ä¸ªå¾ˆå¹³å¸¸çš„ä¾‹å­ã€‚ä¸€ä¸ª ViewModel ä»Modelå±‚ä¸­è¯·æ±‚åˆ°äº†ä¸€äº›åŒ…å« &lt;code&gt;Date&lt;/code&gt; çš„æ¨¡å‹ã€‚ è¿™ä¸ª Date å€¼å¹¶ä¸ä¼šè¢«å‘Šè¯‰ç»™ View, ViewModel å‘Šè¯‰ View çš„åº”è¯¥æ˜¯è¢«æ ¼å¼åŒ–ä¹‹åçš„å­—ç¬¦ä¸²ã€‚è§†å›¾ä¸ä¼šæ“ä½œæ•°æ®æœ¬èº«ï¼Œä»–åªè´Ÿè´£å°† ViewModel å‡†å¤‡å¥½çš„æ•°æ®å±•ç¤ºå‡ºæ¥ã€‚&lt;/p&gt;
&lt;h4 id=&quot;Similar-to-MVC&quot;&gt;&lt;a href=&quot;#Similar-to-MVC&quot; class=&quot;headerlink&quot; title=&quot;Similar to MVC&quot;&gt;&lt;/a&gt;Similar to MVC&lt;/h4&gt;&lt;p&gt;åœ¨ MVC è®¾è®¡æ¨¡å¼ä¸­, &lt;code&gt;ViewController&lt;/code&gt; æ˜¯ &lt;code&gt;Model&lt;/code&gt; å’Œ &lt;code&gt;View&lt;/code&gt; ä¹‹é—´çš„æ¡¥æ¢ã€‚ä»–åªæœ‰è§†å›¾, ç®¡ç†è§†å›¾çš„ç»“æ„ï¼Œç®¡ç†ç”¨æˆ·çš„äº¤äº’ã€‚ä»–è¿˜è´Ÿè´£ç®¡ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸ,åŠ è½½ã€æ˜¾ç¤ºã€æ¶ˆå¤±ç­‰ã€‚ä»–å…·æœ‰çš„å¦å¤–ä¸€ä¸ªæŒ‡è´£æ˜¯æ›´æ–°æ¨¡å‹æ•°æ®, è¿™å°±åŒ…æ‹¬äº†æ˜¾ç¤ºæ•°æ®çš„ç›¸å…³é€»è¾‘(ä¹Ÿå°±æ˜¯æ•°æ®çš„å¤„ç†,å¦‚ä¸Šæ–‡æåˆ°çš„è®² &lt;code&gt;Date&lt;/code&gt; è½¬åŒ–æˆ &lt;code&gt;String&lt;/code&gt; çš„é€»è¾‘)ã€‚å› ä¸ºä»–å…·æœ‰è¿™ä¹ˆå¤šçš„èŒè´£ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹ &lt;code&gt;Viewcontroller&lt;/code&gt; å°±ä¼šå˜çš„éå¸¸å¤§ã€‚æ‰€ä»¥ä¹Ÿæœ‰äººç§°MVC ä¸º Massive View Controller&lt;/p&gt;
&lt;p&gt;å‡ºç°å¤æ‚çš„ &lt;code&gt;viewController&lt;/code&gt; ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ã€‚ç”±äº &lt;code&gt;Controller&lt;/code&gt; æœ‰å¾ˆå¤šçš„èŒè´£ã€‚ä»£ç å°±ä¼šå˜çš„éå¸¸çš„å¤æ‚ã€‚è¿™å¾ˆæ˜æ˜¾å°±è¿èƒŒäº†å•ä¸€èŒè´£è¿™ä¸ªåŸåˆ™ã€‚è¿™ä¹Ÿè®©æµ‹è¯• &lt;code&gt;Controller&lt;/code&gt; ä¸­çš„é€»è¾‘å˜æˆä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ã€‚&lt;code&gt;Controller&lt;/code&gt; å’Œ &lt;code&gt;View&lt;/code&gt; çš„é«˜åº¦è€¦åˆã€‚&lt;code&gt;view&lt;/code&gt; çš„ç”Ÿå‘½å‘¨æœŸä½¿å¾—é€»è¾‘çš„åˆ†ç¦»å˜çš„ä¸é‚£ä¹ˆå®¹æ˜“ã€‚æˆ‘ä»¬å°±éœ€è¦èŠ±å¾ˆå¤§çš„ç²¾åŠ›æ¥å¤„ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p&gt;
&lt;p&gt;MVVM å’Œ MVC éå¸¸ç›¸ä¼¼ã€‚ æ­£å¦‚å‰æ–‡æ‰€è¯´ã€‚ MVC ä¸­çš„ &lt;code&gt;Controller&lt;/code&gt; åŒæ—¶åŒ…å«äº†è§†å›¾å’Œç¨‹åºçš„é€»è¾‘ã€‚å°†é€»è¾‘ç›¸å…³çš„ä»£ç ä» &lt;code&gt;Controller&lt;/code&gt; ä¸­åˆ†ç¦»å‡ºæ¥, æ”¾åˆ°ä»–è‡ªå·±æŠ½è±¡å‡ºæ¥çš„ç±»é‡Œé¢å»ã€‚è¿™æ—¶å€™çš„ &lt;code&gt;Controller&lt;/code&gt;å°±åªå…³æ³¨è§†å›¾ç›¸å…³çš„äº‹æƒ…ã€‚åˆšåˆšåˆ†ç¦»å‡ºæ¥çš„è¿™ä¸ªç±»å¤„ç†ç›¸å…³çš„é€»è¾‘ã€‚è¿™ä¸ªç±»å°±æ˜¯ ViewModelã€‚ä»–å’Œ &lt;code&gt;Controller&lt;/code&gt; å…·æœ‰ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚æ‰€ä»¥è¯´ MVVM å°±æ˜¯å°†é€»è¾‘ä»£ç ä» &lt;code&gt;controller&lt;/code&gt;ä¸­åˆ†ç¦»åˆ° &lt;code&gt;ViewModel&lt;/code&gt; ä¸­çš„ MVC&lt;/p&gt;
&lt;h4 id=&quot;Binding-data-from-ViewModel-to-View&quot;&gt;&lt;a href=&quot;#Binding-data-from-ViewModel-to-View&quot; class=&quot;headerlink&quot; title=&quot;Binding data from ViewModel to View&quot;&gt;&lt;/a&gt;Binding data from ViewModel to View&lt;/h4&gt;&lt;p&gt;æœ‰å¾ˆå¤šå°†æ•°æ®ç»‘å®šçš„æœºåˆ¶, æ¯”å¦‚ Swift ä¸­çš„å±æ€§è§‚å¯Ÿã€‚è§†å›¾å¯ä»¥å¯¹å¤–æä¾›ä¸€ä¸ª Closure æ¥è¿›è¡Œè§†å›¾çš„æ›´æ–°ã€‚è¿™ä¸ª Closure ç”¨æ¥é€šçŸ¥ View ä»–å…³è”çš„å±æ€§çš„æ›´æ–°ã€‚é™¤äº†ç†Ÿæ‚‰è§‚å¯Ÿã€‚æˆ‘ä»¬çš„ç¨‹åºè¿˜ç»å¸¸éœ€è¦å¤„ç†å„ç§å¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œå’Œé€šçŸ¥æˆ–è€…äº‹ä»¶çš„æµä¿¡æ¯ã€‚å‡½æ•°å“åº”å¼ç¼–ç¨‹(FRP)æ¡†æ¶ç®€ç›´å°±æ˜¯ä¸ºäº†å¤„ç†è¿™ç±»äº‹ä»¶è€Œç”Ÿçš„ã€‚ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šFRP æ¡†æ¶ï¼Œå¯¹ iOS å¼€å‘æ¥è¯´ï¼Œæœ€å‡ºåçš„åº”è¯¥æ˜¯ &lt;code&gt;RxSwift&lt;/code&gt; å’Œ &lt;code&gt;ReactiveCocoa&lt;/code&gt;äº†ã€‚ä¹‹å‰åœ¨ä¸€ç¯‡å¯¹æ¯”æ–‡ç« ä¸­æœ‰æåˆ°è¿‡, ä¸ç®¡æ€æ ·ï¼Œæˆ‘æ›´å–œæ¬¢ &lt;code&gt;RxSwift&lt;/code&gt; &lt;/p&gt;
&lt;h3 id=&quot;RxSwift&quot;&gt;&lt;a href=&quot;#RxSwift&quot; class=&quot;headerlink&quot; title=&quot;RxSwift&quot;&gt;&lt;/a&gt;RxSwift&lt;/h3&gt;&lt;p&gt;æŒ‡ä»¤å¼ç¼–ç¨‹æ˜¯åŸºäºä¸€æ­¥ä¸€æ­¥æ˜ç¡®çš„æŒ‡ä»¤æ¥æ‰§è¡Œçš„ã€‚ä»–è¯¦ç»†çš„æè¿°äº†ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ã€‚å€¼åšä¸ºçŠ¶æ€è€Œå­˜åœ¨ã€‚ç”±äºç¨‹åºæ˜¯ä¸€æ­¥ä¸€æ­¥çš„æ‰§è¡Œçš„,æ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå€¼åœ¨ä¹‹åå‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™ä¸€æ”¹å˜ä¹Ÿä¸ä¼šè¢«ä¼ åˆ°ä¸‹ä¸€æ­¥ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æŒ‡ä»¤å¼ç¼–ç¨‹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;b = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;c&lt;/span&gt; = a + b  &lt;span class=&quot;comment&quot;&gt;// c = 3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;   &lt;span class=&quot;comment&quot;&gt;// c = 3&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å“åº”å¼ç¼–ç¨‹,è·ŸæŒ‡ä»¤å¼ç›¸åã€‚ä»–æ˜¯åŸºäºå˜åŒ–çš„ã€‚ä»–åŸºäºå£°æ˜å¼ç¼–ç¨‹ï¼Œè¿™å°±æ„å‘³ç€ä»–å…³æ³¨çš„æ˜¯ç¨‹åºåº”è¯¥å®Œæˆä»€ä¹ˆï¼Œè€Œä¸æ˜¯ç¨‹åºæ˜¯æ€ä¹ˆè¿è¡Œçš„ã€‚å®ƒæ˜¯é€šè¿‡æ•°å­¦è¿ç®—å’Œå…¶ä»–åƒæ˜¯ &lt;code&gt;filter&lt;/code&gt; &lt;code&gt;map&lt;/code&gt; &lt;code&gt;reduce&lt;/code&gt; ä¹‹ç±»çš„è¿ç®—æ“ä½œçš„è¿ç”¨æ¥å®ç°çš„ã€‚å¦‚ä½•å‡†ç¡®çš„è¿è¡Œè¢«äº¤ç»™åº•å±‚çš„ç¨‹åºè¯­è¨€æˆ–è€…æ¡†æ¶æ¥è€ƒè™‘äº†ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å“åº”å¼ç¼–ç¨‹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;b = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;c&lt;/span&gt; = a + b &lt;span class=&quot;comment&quot;&gt;// c = 3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;     &lt;span class=&quot;comment&quot;&gt;// c = 7&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;RxSwift è®©ä½ èƒ½ç”¨é€šè¿‡å‡½æ•°å“åº”å¼ç¼–ç¨‹æ¥ç¼–å†™ä½ çš„ä»£ç ã€‚ä½¿ç”¨ RxSwift å¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºäº‹ä»¶æˆ–è€…æ•°æ®æµã€‚è¿™äº›äº‹ä»¶æˆ–è€…æ•°æ®æµå¯ä»¥äº’ç›¸ç»„åˆã€è½¬æ¢ã€‚å¹¶ä¸”æœ€ç»ˆè¢«è§‚å¯Ÿåˆ°ï¼ŒåŸºäºå€¼æ¥è¿›è¡Œä¸€äº›æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼Œåœ¨ MVVM ä¸­ View è§‚å¯Ÿ ViewModel ä¸­æ¨¡å‹çš„æ•°æ®ã€‚RxSwift æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•å¹¶ä¸”å¹²å‡€çš„æ–¹æ³•æ¥è§‚å¯Ÿè¿™äº›å€¼ï¼Œå¹¶ç»‘å®šåˆ°å¯¹åº”çš„ View ä¸Šã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusSun.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusSun.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://CepheusSun.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I</title>
    <link href="https://CepheusSun.github.io/2017/05/05/RxSwift%20and%20the%20awesome%20things%20you%20can%20do%20with%20Reactive%20Programming%E2%80%8A%E2%80%94%E2%80%8APart%20I/"/>
    <id>https://CepheusSun.github.io/2017/05/05/RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I/</id>
    <published>2017-05-04T16:00:00.000Z</published>
    <updated>2017-05-04T17:18:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç¿»è¯‘è‡ªå›½å¤–çš„ç¾å¥³å·¥ç¨‹å¸ˆ <a href="https://medium.com/@kenzai">Kenza Iraki</a> çš„æ–‡ç«  <a href="https://medium.com/@kenzai/rxswift-and-the-awesome-things-you-can-do-with-reactive-programming-part-i-3921137d251">RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I</a></p>
<p>ç¬¬ä¸€æ¬¡å¬è§å“åº”å¼ç¼–ç¨‹ï¼Œæˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„</p>
<center><br><img src="https://cdn-images-1.medium.com/max/1600/1*28RdzpfQBHklPcgLGsg0jw.png"><br></center>

<p>æ¥ä¸‹æ¥çš„å‡ æ¬¡å‡ æ¬¡æ¥è§¦, ä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ã€‚æ•´æ•´ä¸¤ä¸ªæ˜ŸæœŸä¹‹å,å³ä½¿æˆ‘åœ¨é¡¹ç›®ä¸­å†™äº†ä¸€äº›å“åº”å¼ä»£ç ã€‚æˆ‘ä¾ç„¶æ˜¯è¿™ç§æ„Ÿè§‰ã€‚</p>
<p>ç°åœ¨æˆ‘æ‰çŸ¥é“æœ‰å¾ˆå¤šçš„äººåœ¨ç¬¬ä¸€æ¬¡é‡è§å“åº”å¼ç¼–ç¨‹çš„æ—¶å€™è·Ÿæˆ‘æœ‰ä¸€æ ·çš„æ„Ÿè§‰ã€‚æˆ‘ä¹ŸçŸ¥é“å¾ˆå¤šäººçœ‹è¿‡å“åº”å¼çš„ä»£ç ä¹‹åå†ä¹Ÿä¸æƒ³å†è§åˆ°å®ƒäº†ï¼Œå› ä¸ºå¥¹çš„å­¦ä¹ æ›²çº¿å¤ªè¿‡é™¡å³­äº†ã€‚ä½†æ˜¯æˆ‘èƒ½å‘Šè¯‰ä½ ä¸€ä¸ªäº‹å®, æˆ‘è¿˜æ²¡å¬è¯´è¿‡ä¸€ä¸ªäººï¼Œ åœ¨æœ€ç»ˆç†è§£äº†ä»–æ˜¯æ€ä¹ˆå›äº‹ä¹‹å,åæ‚”å­¦ä¹ å“åº”å¼ç¼–ç¨‹ã€‚</p>
<p>æˆ‘çŸ¥é“ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºå“åº”å¼ç¼–ç¨‹ç†è®ºå’Œæ€æƒ³è¿˜æœ‰ RxSwift çš„çš„èµ„æº, ä¹Ÿæœ‰å¾ˆå¤šæ•™ä½ ç”¨Rxæ¥åšå„ç§äº‹æƒ…çš„æ•™ç¨‹(æ–‡æœ«æˆ‘ä¼šç»™å‡ºä¸€äº›é“¾æ¥)ã€‚è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ˜¯ä¸€ä¸ªæ•™ç¨‹, ä¹Ÿä¸ä¼šè§£é‡Š <code>stream</code> å’Œ <code>observables</code> æ˜¯æ€ä¹ˆå›äº‹ã€‚ æˆ‘è¦åšçš„æ˜¯æä¾›ä¸€ä¸ªç›´æ¥ã€æ˜ç¡®å¹¶ä¸”å°½é‡å°‘çš„ç†è®ºæ€»ç»“æ¥å‘Šè¯‰ä½  RxSwift èƒ½åšä»€ä¹ˆ, å¹¶ä¸”å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆä½ ä¼šå–œæ¬¢ä¸Šå®ƒã€‚ç”±äº Rx çš„ä¸–ç•Œæ·±ä¼¼æµ·, æ‰€ä»¥æˆ‘æ‰“ç®—å†™ä¸‰ç¯‡æ–‡ç« æ¥è®¨è®ºè¿™ä»¶äº‹æƒ…, è¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚</p>
<h2 id="Part1-Data-Binding-control-events-and-gesture-recognizers"><a href="#Part1-Data-Binding-control-events-and-gesture-recognizers" class="headerlink" title="Part1: Data Binding, control events and gesture recognizers"></a>Part1: Data Binding, control events and gesture recognizers</h2><h3 id="Data-Binding"><a href="#Data-Binding" class="headerlink" title="Data Binding"></a>Data Binding</h3><p>æ•°æ®ç»‘å®šçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªé«˜ç«¯çš„è¯è¯­, ä½†æ˜¯å®ƒå´æ˜¯ä¸€ä»¶éå¸¸ç®€å•çš„äº‹æƒ…ã€‚å‡å¦‚ä½ æœ‰ä¸€ä¸ª App éœ€è¦ç”¨æˆ·åœ¨ <code>UITextField</code> ä¸­è¾“å…¥å®ƒä»¬çš„åå­—ã€‚å½“ä»–ä»¬åœ¨æ‰“å­—çš„æ—¶å€™, ç”¨ â€œä½ å¥½ + ç”¨æˆ·è¾“å…¥çš„æ–‡å­—â€ å±•ç¤ºåœ¨ç•Œé¢ä¸Šã€‚è¿™æ ·ä¸€ä¸ªå¾ˆåŸºæœ¬çš„åœºæ™¯ã€‚å¦‚æœåœ¨ä¸æ˜¯å“åº”å¼çš„ç¨‹åºä¸­, æˆ‘ä»¬éœ€è¦éµå®ˆ <code>UITextFieldDelegate</code> è¿™ä¸ªåè®®, ç„¶ååœ¨ <code>ViewController</code> ä¸­å®ç° <code>textFieldDidEndEditing</code> è¿™ä¸ªæ–¹æ³•, æ¥ç›‘å¬ç”¨æˆ·ç”¨æˆ·çš„è¡Œä¸ºï¼Œç„¶åç»™ <code>Label</code> èµ‹å€¼ã€‚</p>
<p>è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯å‡å¦‚æœ‰å¾ˆå¤šçš„ <code>UITextField</code> æˆ‘ä»¬è¿˜è¦åœ¨ä»£ç†æ–¹æ³•ä¸­åˆ¤æ–­, åˆæˆ–è€…, æˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨è¾“å…¥çš„è¿‡ç¨‹ä¸­æ—¶æ—¶çš„åˆ·æ–° <code>Label</code>ã€‚è¿™ç§åœºæ™¯, æˆ‘ä»¬çš„ä»£ç ï¼Œçœ‹èµ·æ¥å°±ä¼šå¾ˆç³Ÿç³•ã€‚è‡³å°‘ä¸ä¼šå¾ˆä¼˜é›…å§ã€‚</p>
<p>åœ¨å“åº”å¼ä¸­, è¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨æ•°æ®ç»‘å®šæ¥å®ç°ã€‚è¯´ç™½äº†,å°±æ˜¯å°†ç”¨æˆ·åœ¨ <code>UITextField</code> ä¸­è¾“å…¥çš„æ–‡å­—ç»‘å®šåˆ° <code>UILabel</code> ä¸Šã€‚åœ¨ <code>RxSwift</code> çš„ä¸–ç•Œé‡Œ,  æ²¡æœ‰ä»€ä¹ˆæ¯”å¤„ç†æ•°æ®ç»‘å®šæ›´ç®€å•çš„äº†ã€‚åˆšæ‰æè¿°çš„éœ€æ±‚, æˆ‘ä»¬åªéœ€è¦é€šè¿‡ä»¥ä¸‹ä»£ç å°±å¯ä»¥å®ç°äº†ã€‚</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> namefield = <span class="type">UITextField</span>()</div><div class="line"><span class="keyword">var</span> helloLabel = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    nameField.rx.text.<span class="built_in">map</span> &#123; <span class="string">"Hello <span class="subst">\($<span class="number">0</span>)</span>"</span> &#125;</div><div class="line">                     .bindTo(helloLabel.rx.text)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ï¼Œ æˆ‘ä»¬é¦–å…ˆæ˜¯è·å–åˆ°äº† <code>UITextField</code> çš„æ–‡å­—ã€‚ ç„¶åæˆ‘ä»¬å°†è¿™æ®µæ–‡å­—æ˜ å°„æˆæƒ³è¦çš„æ ¼å¼ï¼Œç„¶åèµ‹å€¼ç»™ <code>UILabel</code>ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¹‹é—´è§åˆ°çš„åœ¨æ–‡å­—å‰é¢åŠ äº†ä¸€ä¸ª <code>&#39;hello&#39;</code>ï¼Œ å› ä¸º map æ˜¯ä¸€ä¸ªé—­åŒ…, å¯ä»¥ç®€å•çš„è¢«çœ‹ä½œä¸€ä¸ªåŒ¿åå‡½æ•°, å®ƒçš„å‚æ•°:<code>$0</code>(ç¬¬ä¸€ä¸ªå‚æ•°)ã€<code>$1</code>(ç¬¬äºŒä¸ªå‚æ•°)ä»¥æ­¤ç±»æ¨ã€‚ç„¶åå°†æ˜ å°„åçš„æ–‡å­—ç»‘å®šåˆ° <code>UILabel</code> çš„ <code>text</code> å±æ€§ä¸Šã€‚å°±è¿™ä¹ˆç®€å•ï¼Œè¿™ä¸ªéœ€æ±‚å°±å®Œæˆäº†ã€‚æ²¡æœ‰ä½¿ç”¨ä»£ç†ï¼Œä¹Ÿæ²¡æœ‰ç”¨å„ç§ if è¯­å¥, å°±ç®€å•æ˜äº†çš„å‡ è¡Œä»£ç ã€‚</p>
<p>ä½ å…ˆåœ¨è‚¯å®šåœ¨æƒ³,â€æ˜¯ï¼Œè¿™æ˜¯å¾ˆç¥å¥‡, ä½†æ˜¯çœŸçš„æœ‰å¾ˆå¤š app åœ¨è¿™æ ·åšå—â€ æˆ‘å¯ä»¥å‘Šè¯‰ä½ ï¼Œæ˜¯çš„ã€‚ä¸è¦ä»…ä»…æ˜¯é™åˆ¶åœ¨è¿™ç®€å•çš„å‡ ä¸ªä¾‹å­ä¸­ã€‚èƒ½å¤Ÿå°†æ•°æ®ç»‘å®šåˆ°è§†å›¾æ˜¯éå¸¸å¼ºå¤§çš„äº‹æƒ…ã€‚ä½ æƒ³æƒ³çœ‹ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªè§†å›¾çš„èƒŒæ™¯é¢œè‰²éœ€è¦æ ¹æ®å¤©æ°”ç”¨æˆ·çš„åœ°ç†ä½ç½®è€Œæ”¹å˜ã€‚åŸºäºå¯èƒ½å˜åŒ–çš„æ•°æ®å’Œä¸€äº›ç®€å•çš„é€»è¾‘, ä¸éœ€è¦å¤ªè¿‡æ·±å…¥çš„ç ”ç©¶å®ƒèƒŒåçš„ä¸œè¥¿ã€‚è¿™å°±æ˜¯æ•°æ®ç»‘å®šæœ€ä¸»è¦çš„æ€æƒ³ã€‚</p>
<h3 id="Control-Events-and-Gesture-Recognizers"><a href="#Control-Events-and-Gesture-Recognizers" class="headerlink" title="Control Events and Gesture Recognizers"></a>Control Events and Gesture Recognizers</h3><p>ç®€å•çš„è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯äº‹ä»¶å§ï¼äº‹ä»¶åŸºæœ¬ä¸Šæ˜¯ç”¨æˆ·èƒ½åœ¨ä½ çš„ app ä¸Šæ“ä½œçš„æ‰€æœ‰è¡Œä¸ºï¼Œç‚¹å‡»ã€æ»‘åŠ¨ã€æ‹–æ‹½ç­‰ç­‰ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é’®çš„æ—¶å€™ï¼Œä½ çš„ç¨‹åºä¼šç›‘å¬åˆ°ä¸€ä¸ª <code>UIControlEvent</code> çš„äº‹ä»¶ç±»å‹ <code>.touchUpInSide</code>ã€‚ å¦‚æœä½ ç”¨çš„æ˜¯ <code>StoryBoary</code> ï¼Œä½ å¯èƒ½åœ¨åˆ›å»º <code>IBAction</code> çš„æ—¶å€™ï¼Œæ²¡æœ‰æƒ³è¿‡è¿™ä¸ªæŒ‰é’®çš„è¡Œä¸ºã€‚æˆ‘å·²ç»å†™äº†ä¸€ç¯‡<a href="">why I never use storyboards</a> ã€‚å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·,è¿™æ®µä»£ç ä½ è‚¯å®šä¼šå¾ˆç†Ÿæ‚‰äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> button = <span class="type">UIButton</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    button.addTarget(#selector(<span class="type">ViewController</span>.loginUser), target: <span class="keyword">self</span>, event: .touchUpInside</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">loginUser</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// Implementation here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘çœŸçš„å¾ˆè®¨åŒ Selector, è¿™äº›ä»£ç å¤ªä¸æ˜ç¡®äº†ï¼Œè®©ä»£ç çœ‹èµ·æ¥å¾ˆä¹±ï¼Œä¹Ÿè®©æˆ‘ä»¬æ¢—å®¹æ˜“çŠ¯é”™ã€‚ä½†æ˜¯ç”¨ Rx è¿™æ ·å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> button = <span class="type">UIButton</span>()</div><div class="line"><span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    button.rx.tap.subscribe &#123; onNext <span class="number">_</span> <span class="keyword">in</span></div><div class="line">        <span class="comment">// Implementation here</span></div><div class="line">    &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸è¦å¤ªè¿‡çº ç»“ <code>disposeBag</code> å’Œ <code>subscribe</code> è¿™äº›ä¸œè¥¿ã€‚ä½ åªè¦çŸ¥é“è¿™äº›æ˜¯ä¸€äº›å¿…é¡»çš„åŠ¨ä½œå°±å¯ä»¥äº†ã€‚(ä¸‹é¢ä¼šæœ‰ä»‹ç»)</p>
<p>å½“ä½ éœ€è¦ç»™ä¸å…·æœ‰ control event çš„ç©ºé—´æ·»åŠ ä¸€äº›é€»è¾‘äº‹ä»¶, æ¯”å¦‚ç»™ <code>UILabel</code> æˆ–è€… <code>UIImageView</code> æ·»åŠ ç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ã€‚æˆ‘ä»¬åªèƒ½ç»™ä»–æ·»åŠ æ‰‹åŠ¿ã€‚(è¿™æ˜¯æˆ‘åšè®¨åŒçš„ UIKit ç‰¹ç‚¹ä¹‹ä¸€)ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// Show example of gesture recognizers</span></div><div class="line">    <span class="keyword">let</span> gestureRecognizer = <span class="type">UITapGestureRecognizer</span>(target: <span class="keyword">self</span>, action: â€œhandleTap:â€)</div><div class="line">    label.addGestureRecognizer(gestureRecognizer)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">handleTap</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// Your logic here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¶ä»–çš„æ‰‹åŠ¿ï¼Œå¦‚æœä½ éœ€è¦å“åº”çš„è¯ã€‚ä½ å°±éœ€è¦ç»™è¿™ä¸ªæ§ä»¶æ·»åŠ å¤šä¸ª <code>gesture recognizer</code> ,ä½ è¦ç©¿ä»¶å¤šä¸ªæ‰‹åŠ¿ï¼Œç„¶åæŒ¨ä¸ªæ·»åŠ åˆ°è¿™ä¸ªæ§ä»¶ä¸Šã€‚è¿™ä¸ä»…æ˜¯å¾ˆå¤šæ ·æ¿ä»£ç è¿™ä¹ˆç®€å•ï¼Œè¿™ä¹Ÿå¯èƒ½å¸¦æ¥ä¸€äº›éš¾ä»¥æƒ³è±¡çš„æ··ä¹±å’Œæ½œåœ¨çš„é”™è¯¯ã€‚</p>
<p>ä½ å¯ä»¥å·²ç»æƒ³åˆ°äº†ã€‚Rx è®©è¿™ä¸ªä¸œè¥¿å˜çš„å¼‚å¸¸çš„ç®€å•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    label.rx.gesture(.tap).subscribe &#123;onNext (gesture) <span class="keyword">in</span></div><div class="line">        <span class="comment">// Your logic here</span></div><div class="line">    &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡å¦‚ä½ éœ€è¦æ·»åŠ å¤šä¸ªæ‰‹åŠ¿çš„è¯:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    label.rx.gesture(.tap, .pan, .swipeUp).subscribe &#123; onNext (gesture) <span class="keyword">in</span></div><div class="line">        <span class="keyword">switch</span> gesture &#123;</div><div class="line">        <span class="keyword">case</span> .tap: <span class="comment">// Do something</span></div><div class="line">        <span class="keyword">case</span> .pan: <span class="comment">// Do something</span></div><div class="line">        <span class="keyword">case</span> .swipeUp: <span class="comment">// Do something </span></div><div class="line">        <span class="keyword">default</span>: <span class="keyword">break</span>       </div><div class="line">        &#125;        </div><div class="line">    &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™äº›éƒ½æ˜¯ä¸€ä¸ªå« <a href="https://github.com/RxSwiftCommunity/RxGesture">RxGesture</a> çš„ RxSwift åº“æä¾›çš„ã€‚</p>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p><a href="https://github.com/ReactiveX/RxSwift">ReactiveX/RxSwift</a></p>
<p><a href="https://realm.io/news/altconf-ash-furrow-functional-reactive-swift/">Functional Reactive Awesomeness With Swift</a></p>
<p><a href="https://medium.com/swift-programming/reactive-swift-3b6050375534">My journey with reactive programming in Swiftâ€Šâ€”â€Šand the iOS app that came out of it.</a></p>
<p><a href="https://github.com/DTVD/The-introduction-to-RxSwift-you-have-been-missing">DTVD/The-introduction-to-RxSwift-you-have-been-missing</a></p>
<p><a href="https://www.thedroidsonroids.com/blog/ios/rxswift-by-examples-1-the-basics/">RxSwift by Examples #1 â€“ The basics.</a></p>
<p><a href="https://news.realm.io/news/tryswift-Marin-Todorov-I-create-iOS-apps-is-RxSwift-for-me/">I create iOS apps - is RxSwift for me?</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ç¿»è¯‘è‡ªå›½å¤–çš„ç¾å¥³å·¥ç¨‹å¸ˆ &lt;a href=&quot;https://medium.com/@kenzai&quot;&gt;Kenza Iraki&lt;/a&gt; çš„æ–‡ç«  &lt;a href=&quot;https://medium.com/@kenzai/rxswift-and-the-awesome-things-you-can-do-with-reactive-programming-part-i-3921137d251&quot;&gt;RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å¬è§å“åº”å¼ç¼–ç¨‹ï¼Œæˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;center&gt;&lt;br&gt;&lt;img src=&quot;https://cdn-images-1.medium.com/max/1600/1*28RdzpfQBHklPcgLGsg0jw.png&quot;&gt;&lt;br&gt;&lt;/center&gt;

&lt;p&gt;æ¥ä¸‹æ¥çš„å‡ æ¬¡å‡ æ¬¡æ¥è§¦, ä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ã€‚æ•´æ•´ä¸¤ä¸ªæ˜ŸæœŸä¹‹å,å³ä½¿æˆ‘åœ¨é¡¹ç›®ä¸­å†™äº†ä¸€äº›å“åº”å¼ä»£ç ã€‚æˆ‘ä¾ç„¶æ˜¯è¿™ç§æ„Ÿè§‰ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘æ‰çŸ¥é“æœ‰å¾ˆå¤šçš„äººåœ¨ç¬¬ä¸€æ¬¡é‡è§å“åº”å¼ç¼–ç¨‹çš„æ—¶å€™è·Ÿæˆ‘æœ‰ä¸€æ ·çš„æ„Ÿè§‰ã€‚æˆ‘ä¹ŸçŸ¥é“å¾ˆå¤šäººçœ‹è¿‡å“åº”å¼çš„ä»£ç ä¹‹åå†ä¹Ÿä¸æƒ³å†è§åˆ°å®ƒäº†ï¼Œå› ä¸ºå¥¹çš„å­¦ä¹ æ›²çº¿å¤ªè¿‡é™¡å³­äº†ã€‚ä½†æ˜¯æˆ‘èƒ½å‘Šè¯‰ä½ ä¸€ä¸ªäº‹å®, æˆ‘è¿˜æ²¡å¬è¯´è¿‡ä¸€ä¸ªäººï¼Œ åœ¨æœ€ç»ˆç†è§£äº†ä»–æ˜¯æ€ä¹ˆå›äº‹ä¹‹å,åæ‚”å­¦ä¹ å“åº”å¼ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çŸ¥é“ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºå“åº”å¼ç¼–ç¨‹ç†è®ºå’Œæ€æƒ³è¿˜æœ‰ RxSwift çš„çš„èµ„æº, ä¹Ÿæœ‰å¾ˆå¤šæ•™ä½ ç”¨Rxæ¥åšå„ç§äº‹æƒ…çš„æ•™ç¨‹(æ–‡æœ«æˆ‘ä¼šç»™å‡ºä¸€äº›é“¾æ¥)ã€‚è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ˜¯ä¸€ä¸ªæ•™ç¨‹, ä¹Ÿä¸ä¼šè§£é‡Š &lt;code&gt;stream&lt;/code&gt; å’Œ &lt;code&gt;observables&lt;/code&gt; æ˜¯æ€ä¹ˆå›äº‹ã€‚ æˆ‘è¦åšçš„æ˜¯æä¾›ä¸€ä¸ªç›´æ¥ã€æ˜ç¡®å¹¶ä¸”å°½é‡å°‘çš„ç†è®ºæ€»ç»“æ¥å‘Šè¯‰ä½  RxSwift èƒ½åšä»€ä¹ˆ, å¹¶ä¸”å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆä½ ä¼šå–œæ¬¢ä¸Šå®ƒã€‚ç”±äº Rx çš„ä¸–ç•Œæ·±ä¼¼æµ·, æ‰€ä»¥æˆ‘æ‰“ç®—å†™ä¸‰ç¯‡æ–‡ç« æ¥è®¨è®ºè¿™ä»¶äº‹æƒ…, è¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Part1-Data-Binding-control-events-and-gesture-recognizers&quot;&gt;&lt;a href=&quot;#Part1-Data-Binding-control-events-and-gesture-recognizers&quot; class=&quot;headerlink&quot; title=&quot;Part1: Data Binding, control events and gesture recognizers&quot;&gt;&lt;/a&gt;Part1: Data Binding, control events and gesture recognizers&lt;/h2&gt;&lt;h3 id=&quot;Data-Binding&quot;&gt;&lt;a href=&quot;#Data-Binding&quot; class=&quot;headerlink&quot; title=&quot;Data Binding&quot;&gt;&lt;/a&gt;Data Binding&lt;/h3&gt;&lt;p&gt;æ•°æ®ç»‘å®šçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªé«˜ç«¯çš„è¯è¯­, ä½†æ˜¯å®ƒå´æ˜¯ä¸€ä»¶éå¸¸ç®€å•çš„äº‹æƒ…ã€‚å‡å¦‚ä½ æœ‰ä¸€ä¸ª App éœ€è¦ç”¨æˆ·åœ¨ &lt;code&gt;UITextField&lt;/code&gt; ä¸­è¾“å…¥å®ƒä»¬çš„åå­—ã€‚å½“ä»–ä»¬åœ¨æ‰“å­—çš„æ—¶å€™, ç”¨ â€œä½ å¥½ + ç”¨æˆ·è¾“å…¥çš„æ–‡å­—â€ å±•ç¤ºåœ¨ç•Œé¢ä¸Šã€‚è¿™æ ·ä¸€ä¸ªå¾ˆåŸºæœ¬çš„åœºæ™¯ã€‚å¦‚æœåœ¨ä¸æ˜¯å“åº”å¼çš„ç¨‹åºä¸­, æˆ‘ä»¬éœ€è¦éµå®ˆ &lt;code&gt;UITextFieldDelegate&lt;/code&gt; è¿™ä¸ªåè®®, ç„¶ååœ¨ &lt;code&gt;ViewController&lt;/code&gt; ä¸­å®ç° &lt;code&gt;textFieldDidEndEditing&lt;/code&gt; è¿™ä¸ªæ–¹æ³•, æ¥ç›‘å¬ç”¨æˆ·ç”¨æˆ·çš„è¡Œä¸ºï¼Œç„¶åç»™ &lt;code&gt;Label&lt;/code&gt; èµ‹å€¼ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯å‡å¦‚æœ‰å¾ˆå¤šçš„ &lt;code&gt;UITextField&lt;/code&gt; æˆ‘ä»¬è¿˜è¦åœ¨ä»£ç†æ–¹æ³•ä¸­åˆ¤æ–­, åˆæˆ–è€…, æˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨è¾“å…¥çš„è¿‡ç¨‹ä¸­æ—¶æ—¶çš„åˆ·æ–° &lt;code&gt;Label&lt;/code&gt;ã€‚è¿™ç§åœºæ™¯, æˆ‘ä»¬çš„ä»£ç ï¼Œçœ‹èµ·æ¥å°±ä¼šå¾ˆç³Ÿç³•ã€‚è‡³å°‘ä¸ä¼šå¾ˆä¼˜é›…å§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å“åº”å¼ä¸­, è¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨æ•°æ®ç»‘å®šæ¥å®ç°ã€‚è¯´ç™½äº†,å°±æ˜¯å°†ç”¨æˆ·åœ¨ &lt;code&gt;UITextField&lt;/code&gt; ä¸­è¾“å…¥çš„æ–‡å­—ç»‘å®šåˆ° &lt;code&gt;UILabel&lt;/code&gt; ä¸Šã€‚åœ¨ &lt;code&gt;RxSwift&lt;/code&gt; çš„ä¸–ç•Œé‡Œ,  æ²¡æœ‰ä»€ä¹ˆæ¯”å¤„ç†æ•°æ®ç»‘å®šæ›´ç®€å•çš„äº†ã€‚åˆšæ‰æè¿°çš„éœ€æ±‚, æˆ‘ä»¬åªéœ€è¦é€šè¿‡ä»¥ä¸‹ä»£ç å°±å¯ä»¥å®ç°äº†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusSun.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusSun.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RAC æœ€åŸºæœ¬çš„ä¸œè¥¿-- RACSignal</title>
    <link href="https://CepheusSun.github.io/2017/04/27/RAC%20%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E4%B8%9C%E8%A5%BF--%20RACSignal/"/>
    <id>https://CepheusSun.github.io/2017/04/27/RAC æœ€åŸºæœ¬çš„ä¸œè¥¿-- RACSignal/</id>
    <published>2017-04-26T16:00:00.000Z</published>
    <updated>2017-04-27T09:20:19.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åŸºç¡€ç”¨æ³•"><a href="#åŸºç¡€ç”¨æ³•" class="headerlink" title="åŸºç¡€ç”¨æ³•"></a>åŸºç¡€ç”¨æ³•</h3><ul>
<li>åˆ›å»ºä¿¡å·</li>
<li>è®¢é˜…ä¿¡å·</li>
<li>å‘é€ä¿¡å·</li>
</ul>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1.åˆ›å»ºä¿¡å·(cold)</span></div><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;</div><div class="line">    <span class="comment">// 3.å‘é€ä¿¡å·</span></div><div class="line">    [subscriber sendNext:<span class="string">@"hello, RAC."</span>];</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 2.è®¢é˜…ä¿¡å·(hot)</span></div><div class="line">[signal subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>åœ¨åˆ›å»º RACSignal çš„æ—¶å€™, </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (RACSignal&lt;ValueType&gt; *)createSignal:(RACDisposable * _Nullable (^)(id&lt;RACSubscriber&gt; subscriber))didSubscribe;</div></pre></td></tr></table></figure>
<p>æ–¹æ³•ä¼ å…¥çš„ block ä¼šè¿”å›ä¸€ä¸ª <code>RACDisposable</code> å¯¹è±¡ã€‚</p>
<p>å°†ä»¥ä¸Šä»£ç ä¸­çš„ <code>return nilï¼›</code> æ›¿æ¢æˆå¦‚ä¸‹ä»£ç </p>
<a id="more"></a>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line"><span class="comment">// è®¢é˜…è€…é‡Šæ”¾æ—¶ä¼šè‡ªåŠ¨å–æ¶ˆè®¢é˜…ä¿¡å·, ä½†æ˜¯åªè¦è®¢é˜…è€…æ²¡æœ‰é‡Šæ”¾, å°±ä¸ä¼šå–æ¶ˆè®¢é˜…ä¿¡å·.</span></div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ä¿¡å·è¢«å–æ¶ˆè®¢é˜…äº†!"</span>);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™åœ¨ <code>[subscriber sendComplete]</code> çš„æ—¶å€™ä¼šæ‰§è¡Œåˆ›å»º <code>RACDisposable</code> ä¼ å…¥çš„ <code>block</code> </p>
<p><strong>å¦‚ä½•ä¸»åŠ¨å–æ¶ˆè®¢é˜…</strong></p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">_disposable = [signal subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, x);</div><div class="line">&#125;];<span class="comment">// å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™é‡Œçš„ subscribeNext è¿”å›çš„å°±æ˜¯å–æ¶ˆè®¢é˜…è¿™ä¸ª signal çš„ RACDisoisable</span></div><div class="line"><span class="comment">// ä¸ç®¡ åœ¨åˆ›å»º signal çš„æ—¶å€™ return çš„æ˜¯ nil è¿˜æ˜¯ RACDisposable å¯¹è±¡</span></div><div class="line">[_disposable dispose]</div></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;ReactiveObjC.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) RACDisposable *disposable;    </div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    RACSignal *signal = [RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber ) &#123;       </div><div class="line">        [subscriber sendNext:<span class="string">@"hello, RAC."</span>];</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                    [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                        [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                            [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                                [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                                    [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                                    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                                        [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                                        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                                            [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                                        &#125;);</div><div class="line">                                    &#125;);</div><div class="line">                                &#125;);</div><div class="line">                            &#125;);</div><div class="line">                        &#125;);</div><div class="line">                    &#125;);</div><div class="line">                &#125;);</div><div class="line">            &#125;);</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// å¦‚æœä¿¡å·ä¸å†å‘é€æ•°æ®, æœ€å¥½è°ƒç”¨ä¿¡å·çš„å‘é€å®Œæˆæ–¹æ³•, è¯¥æ–¹æ³•ä¼šè°ƒç”¨ [RACDisposable disposable] å–æ¶ˆè®¢é˜…ä¿¡å·.</span></div><div class="line">        <span class="comment">//[subscriber sendCompleted];</span></div><div class="line">        </div><div class="line">        <span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line">            <span class="comment">// è®¢é˜…è€…é‡Šæ”¾æ—¶ä¼šè‡ªåŠ¨å–æ¶ˆè®¢é˜…ä¿¡å·, ä½†æ˜¯åªè¦è®¢é˜…è€…æ²¡æœ‰é‡Šæ”¾, å°±ä¸ä¼šå–æ¶ˆè®¢é˜…ä¿¡å·.</span></div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ä¿¡å·è¢«å–æ¶ˆè®¢é˜…äº†!"</span>);</div><div class="line">        &#125;];</div><div class="line">        <span class="comment">//å¦‚æœå–æ¶ˆè®¢é˜…çš„æ—¶å€™ä¸éœ€è¦åšä»€ä¹ˆäº‹æƒ…, return nil ä¹Ÿæ²¡æœ‰å…³ç³»</span></div><div class="line">        <span class="comment">//return nil;</span></div><div class="line">    &#125;];</div><div class="line">    _disposable = [signal subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)touchesBegan:(<span class="built_in">NSSet</span>&lt;<span class="built_in">UITouch</span> *&gt; *)touches withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</div><div class="line">    <span class="comment">// ä¸»åŠ¨å–æ¶ˆè®¢é˜…ä¿¡å·</span></div><div class="line">    [_disposable dispose];</div><div class="line">&#125;  </div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h3 id="timer"><a href="#timer" class="headerlink" title="timer"></a>timer</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[[RACSignal interval:<span class="number">2.0</span> onScheduler:[RACScheduler currentScheduler]] subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="delay"><a href="#delay" class="headerlink" title="delay"></a>delay</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"first"</span>);</div><div class="line">[[[RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">    [subscriber sendNext:<span class="string">@"sendï¼Œsignal"</span>];</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;] </div><div class="line">delay:<span class="number">2.0</span>] <span class="comment">// ä¿¡å·å»¶è¿Ÿä¸¤ç§’</span></div><div class="line">subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="timeout"><a href="#timeout" class="headerlink" title="timeout"></a>timeout</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [[RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">    [subscriber sendNext:<span class="string">@"sendï¼Œsignal"</span>];</div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">3</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        [subscriber sendNext:<span class="string">@"sendï¼Œsignal2"</span>];</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;] timeout:<span class="number">2.0</span> onScheduler:[RACScheduler currentScheduler]];</div><div class="line"><span class="comment">// 2s åå‘é€é”™è¯¯ä¿¡å·ã€‚2s ä¹‹åçš„ä¿¡å·è¢«å¿½ç•¥</span></div><div class="line"></div><div class="line">[signal subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125; error:^(<span class="built_in">NSError</span> *error) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,error);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="retry"><a href="#retry" class="headerlink" title="retry"></a>retry</h3><p>é‡è¯•, é‡åˆ° error å°±ä¼šé‡æ–°æ‰§è¡Œåˆ›å»ºä¿¡å·ä¸­çš„block,ç›´åˆ°æˆåŠŸ. ä¹Ÿå¯ä»¥ä¼ å…¥ retry çš„æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ¬¡æ•°è¿˜æ˜¯ error åˆ™è¿”å› error</p>
<h2 id="å¯¹-RACSignal-çš„æ“ä½œ"><a href="#å¯¹-RACSignal-çš„æ“ä½œ" class="headerlink" title="å¯¹ RACSignal çš„æ“ä½œ"></a>å¯¹ RACSignal çš„æ“ä½œ</h2><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;</div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">5</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        [subscriber sendNext:<span class="string">@"1"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"5"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"6"</span>];</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="map-æ˜ å°„"><a href="#map-æ˜ å°„" class="headerlink" title="map æ˜ å°„"></a>map æ˜ å°„</h3><h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</div><div class="line">Mapä½¿ç”¨æ­¥éª¤:</div><div class="line">1.ä¼ å…¥ä¸€ä¸ªblock,ç±»å‹æ˜¯è¿”å›å¯¹è±¡ï¼Œå‚æ•°æ˜¯value</div><div class="line">2.valueå°±æ˜¯æºä¿¡å·çš„å†…å®¹ï¼Œç›´æ¥æ‹¿åˆ°æºä¿¡å·çš„å†…å®¹åšå¤„ç†</div><div class="line">3.æŠŠå¤„ç†å¥½çš„å†…å®¹ï¼Œç›´æ¥è¿”å›å°±å¥½äº†ï¼Œä¸ç”¨åŒ…è£…æˆä¿¡å·ï¼Œè¿”å›çš„å€¼ï¼Œå°±æ˜¯æ˜ å°„çš„å€¼ã€‚</div><div class="line">*/</span></div><div class="line">[[signal map:^<span class="keyword">id</span> _Nullable(<span class="keyword">id</span>  _Nullable value) &#123;</div><div class="line">    <span class="keyword">return</span> @([value integerValue] * <span class="number">10</span>);</div><div class="line">&#125;] subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 10,20,30,50,30,60</span></div></pre></td></tr></table></figure>
<h4 id="flattenMap"><a href="#flattenMap" class="headerlink" title="flattenMap"></a>flattenMap</h4><p>æŠŠæºä¿¡å·çš„å†…å®¹æ˜ å°„æˆä¸€ä¸ªæ–°çš„ä¿¡å·ï¼Œä¿¡å·å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</div><div class="line">flattenMapä½¿ç”¨æ­¥éª¤:</div><div class="line">1.ä¼ å…¥ä¸€ä¸ªblockï¼Œblockç±»å‹æ˜¯è¿”å›å€¼RACStreamï¼Œå‚æ•°value</div><div class="line">2.å‚æ•°valueå°±æ˜¯æºä¿¡å·çš„å†…å®¹ï¼Œæ‹¿åˆ°æºä¿¡å·çš„å†…å®¹åšå¤„ç†</div><div class="line">3.åŒ…è£…æˆRACReturnSignalä¿¡å·ï¼Œè¿”å›å‡ºå»ã€‚</div><div class="line">*/</span></div><div class="line">[[signal flattenMap:^__kindof RACSignal * _Nullable(<span class="keyword">id</span>  _Nullable value) &#123;</div><div class="line">    <span class="keyword">return</span> [RACReturnSignal <span class="keyword">return</span>:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@%@"</span>,value,value]];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="flattenmap-å’Œ-map-çš„åŒºåˆ«"><a href="#flattenmap-å’Œ-map-çš„åŒºåˆ«" class="headerlink" title="flattenmap å’Œ map çš„åŒºåˆ«"></a>flattenmap å’Œ map çš„åŒºåˆ«</h4><ol>
<li>FlatternMapä¸­çš„Blockè¿”å›ä¿¡å·ã€‚</li>
<li>Mapä¸­çš„Blockè¿”å›å¯¹è±¡ã€‚</li>
<li>å¼€å‘ä¸­ï¼Œå¦‚æœä¿¡å·å‘å‡ºçš„å€¼ä¸æ˜¯ä¿¡å·ï¼Œæ˜ å°„ä¸€èˆ¬ä½¿ç”¨Map</li>
<li>å¼€å‘ä¸­ï¼Œå¦‚æœä¿¡å·å‘å‡ºçš„å€¼æ˜¯ä¿¡å·ï¼Œæ˜ å°„ä¸€èˆ¬ä½¿ç”¨flatternMapã€‚</li>
</ol>
<h4 id="mapReplace"><a href="#mapReplace" class="headerlink" title="mapReplace"></a>mapReplace</h4><p>ä¼ å…¥ä¸€ä¸ªå€¼ x , å°†æ¯ä¸ªä¿¡å·çš„å€¼éƒ½æ”¹ä¸º x</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal mapReplace:<span class="string">@"4"</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line">    <span class="comment">// 4,4,4,4,4,4,4</span></div></pre></td></tr></table></figure>
<h3 id="filter-è¿‡æ»¤"><a href="#filter-è¿‡æ»¤" class="headerlink" title="filter è¿‡æ»¤"></a>filter è¿‡æ»¤</h3><h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p>ä¼ å…¥ä¸€ä¸ª block , å½“è¿™ä¸ª block è¿”å› YES çš„æ—¶å€™æ‰èƒ½å“åº”</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;</div><div class="line">    [subscriber sendNext:<span class="string">@"1"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"5"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"6"</span>];</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div><div class="line">[[signal filter:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable value) &#123;</div><div class="line"><span class="comment">// åªæœ‰ value ä¸º @â€œ3â€ çš„æ—¶å€™æ‰è¿›å…¥ä¸‹ä¸€æ­¥</span></div><div class="line">    <span class="keyword">return</span> [value isEqualToString:<span class="string">@"3"</span>];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="ignore"><a href="#ignore" class="headerlink" title="ignore"></a>ignore</h4><p>ä¼ å…¥ä¸€ä¸ªå‚æ•° x å¿½ç•¥ value == x çš„ä¿¡å·</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal ignore:<span class="string">@"3"</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,5,6</span></div></pre></td></tr></table></figure>
<h4 id="distinctUntilChanged"><a href="#distinctUntilChanged" class="headerlink" title="distinctUntilChanged"></a>distinctUntilChanged</h4><blockquote>
<p>å¦‚æœè¿™æ¬¡å—åˆ°çš„ä¿¡å· <code>value</code> è·Ÿä¸Šæ¬¡çš„ä¿¡å· <code>value</code> ç›¸åŒ, è¿™æ¬¡ä¿¡å·è¢«å¿½ç•¥ã€‚</p>
</blockquote>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal distinctUntilChanged] </div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,3,5,3,6</span></div></pre></td></tr></table></figure>
<h4 id="startWith"><a href="#startWith" class="headerlink" title="startWith"></a>startWith</h4><p>ä¼ å…¥ä¸€ä¸ªå‚æ•° x , è®¢é˜…çš„æ—¶å€™é¦–å…ˆæ”¶åˆ° value = x çš„ä¿¡å·ã€‚ ç±»ä¼¼äºåœ¨åˆ›å»º RACSignal çš„ç¬¬ä¸€è¡Œ <code>[subscriber sendNext:x];</code></p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal startWith:<span class="string">@"1"</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,1,2,3,3,5,3,6</span></div></pre></td></tr></table></figure>
<h4 id="take"><a href="#take" class="headerlink" title="take"></a>take</h4><p>ä¼ å…¥ä¸€ä¸ªæ•°ç»„ nï¼Œ è¡¨æ˜åªå“åº”å‰ n ä¸ªä¿¡å·</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal take:<span class="number">3</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,3</span></div></pre></td></tr></table></figure>
<h4 id="takeLast"><a href="#takeLast" class="headerlink" title="takeLast"></a>takeLast</h4><p>ä¼ å…¥ä¸€ä¸ªæ•°å€¼ n, å–æœ€å n ä¸ªä¿¡å·</p>
<p>åªæœ‰æ”¶åˆ°äº†completeæ‰çŸ¥é“ç»“æœã€‚</p>
<h4 id="takeUntilBlock"><a href="#takeUntilBlock" class="headerlink" title="takeUntilBlock"></a>takeUntilBlock</h4><p>ä¸€ç›´å“åº”ï¼Œç›´åˆ°ä¼ å…¥çš„ block ç¬¬ä¸€æ¬¡è¿”å› YES</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[signal takeUntilBlock:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="keyword">return</span> [x isEqualToString:<span class="string">@"5"</span>];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,3,3</span></div></pre></td></tr></table></figure>
<h4 id="takeWhileBlock"><a href="#takeWhileBlock" class="headerlink" title="takeWhileBlock"></a>takeWhileBlock</h4><p>ä¸€ç›´å“åº”ï¼Œç›´åˆ°ä¼ å…¥çš„ block ç¬¬ä¸€æ¬¡è¿”å› NO</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[signal takeWhileBlock:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="keyword">return</span> [x integerValue] &lt; <span class="number">5</span>;</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,3,3</span></div></pre></td></tr></table></figure>
<h4 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h4><p>ä¼ å…¥ä¸€ä¸ªæ•°å­— n è¡¨æ˜å¿½ç•¥å‰é¢ç¬¬ n ä¸ªä¿¡å·, ç¬¬ n + 1 ä¸ªä¿¡å·å¼€å§‹å“åº”ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal skip:<span class="number">3</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 3,5,3,6</span></div></pre></td></tr></table></figure>
<h4 id="skipUntilBlock"><a href="#skipUntilBlock" class="headerlink" title="skipUntilBlock"></a>skipUntilBlock</h4><p>ä¸€ç›´å¿½ç•¥ä¿¡å·, ç›´åˆ°ä¼ å…¥çš„ block ç¬¬ä¸€æ¬¡è¿”å› YES</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[signal skipUntilBlock:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="keyword">return</span> ![x isEqualToString:<span class="string">@"1"</span>];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 2ï¼Œ3ï¼Œ3ï¼Œ5ï¼Œ3ï¼Œ6</span></div></pre></td></tr></table></figure>
<h4 id="skipWhileBlock"><a href="#skipWhileBlock" class="headerlink" title="skipWhileBlock"></a>skipWhileBlock</h4><p>ä¸€ç›´å¿½ç•¥ä¿¡å·, ç›´åˆ°ä¼ å…¥çš„ block ç¬¬ä¸€æ¬¡è¿”å› NO</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[signal skipWhileBlock:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="keyword">return</span> [x isEqualToString:<span class="string">@"1"</span>];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 2ï¼Œ3ï¼Œ3ï¼Œ5ï¼Œ3ï¼Œ6</span></div></pre></td></tr></table></figure>
<h4 id="scanWithStart-reduce"><a href="#scanWithStart-reduce" class="headerlink" title="scanWithStart:reduce"></a>scanWithStart:reduce</h4><p>è§£å†³ç±»ä¼¼æ•°ç»„æ±‚å’Œçš„é—®é¢˜</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">RACSequence *number = @[@<span class="number">1</span>,@<span class="number">2</span>,@<span class="number">3</span>,@<span class="number">4</span>].rac_sequence;</div><div class="line">RACSequence *sums =[number scanWithStart:@<span class="number">2</span> reduce:^<span class="keyword">id</span> _Nullable(<span class="built_in">NSNumber</span> *running, <span class="built_in">NSNumber</span> *next) &#123;</div><div class="line">    <span class="keyword">return</span> @(running.integerValue + next.integerValue);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯èµ·ç‚¹å€¼, ç¬¬äºŒä¸ªæ˜¯ä¾¿åˆ©çš„block block ä¸­ç¬¬ä¸€ä¸ªæ˜¯ä¸Šä¸€æ¬¡ä¾¿åˆ©çš„ç»“æœï¼Œ ç¬¬äºŒä¸ªæ˜¯å½“å‰ä½ç½®çš„å€¼</span></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, sums.array);</div><div class="line"><span class="comment">//3,5,8,12</span></div></pre></td></tr></table></figure>
<h3 id="ç»„åˆ"><a href="#ç»„åˆ" class="headerlink" title="ç»„åˆ"></a>ç»„åˆ</h3><h4 id="contact"><a href="#contact" class="headerlink" title="contact"></a>contact</h4><p>æŠŠsignalAæ‹¼æ¥åˆ°signalBåï¼ŒsignalAå‘é€å®Œæˆï¼ŒsignalBæ‰ä¼šè¢«æ¿€æ´»ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;  dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">2</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        [subscriber sendNext:<span class="string">@"1"</span>];</div><div class="line">        [subscriber sendCompleted];<span class="comment">// å¿…é¡»conpleted æ‰ä¼šåˆ°ç¬¬äºŒä¸ª signal</span></div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div><div class="line">RACSignal *singnal2 = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;</div><div class="line">    [subscriber sendNext:<span class="string">@"11"</span>];</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div><div class="line">RACSignal *contact = [signal concat:singnal2];</div><div class="line">[contact subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,11</span></div></pre></td></tr></table></figure>
<h4 id="then"><a href="#then" class="headerlink" title="then"></a>then</h4><p>ç±»ä¼¼ contact å°†ä¸¤ä¸ª signal é“¾æ¥</p>
<ol>
<li>åªæœ‰ç­‰ç¬¬ä¸€ä¸ª signal ä»‹ç»ä¹‹åæ‰ä¼šæ¿€æ´»ç¬¬äºŒä¸ª signalã€‚ </li>
<li>åœ¨ç¬¬ä¸€ä¸ª signal ç»“æŸä¹‹å‰ signal2 çš„ä¿¡å·ä¼šè¢«å¿½ç•¥ã€‚  </li>
<li>ç¬¬ä¸€ä¸ª signal åªå…³æ³¨ <code>complete</code> sendNext è¢«å¿½ç•¥</li>
</ol>
<p><strong>åŒºåˆ«: contact signal1 çš„ sendNext ä¼šå“åº”, è€Œ then çš„ä¸ä¼šã€‚</strong></p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// signal complete å‘å‡ºä¹‹å signal çš„ä¿¡å·æ‰ä¼šå“åº”.</span></div><div class="line">RACSignal *then = [signal then:^RACSignal * _Nonnull&#123;</div><div class="line">    <span class="keyword">return</span> singnal2;</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h4><p>å°†ä¸¤ä¸ª signal åˆå¹¶ä¸ºä¸€ä¸ª signal åŸå…ˆçš„ä¿¡å·å‘å‡º éƒ½ä¼šå“åº”, æ²¡æœ‰å‰åé¡ºåºã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">RACSignal *merge = [signal merge:singnal2];    </div><div class="line">[merge subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h4><p>å°†ä¸¤ä¸ªsignal åˆå¹¶ä¹‹åçš„ next åˆå¹¶ä¸ºä¸€ä¸ª tuple è¿”å›å›æ¥ã€‚ ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œä¸€ä¸ªä¿¡å·çš„ next ç­‰åˆ°ç¬¬äºŒä¸ªä¿¡å·æœ‰ next ä¹‹å åŒ…è£…æˆ signal è¿”å›ã€‚<br>è¿”å›çš„ zip ç¬¬ä¸€ä¸ªå€¼å°±æ˜¯ç¬¬ä¸€ä¸ªä¿¡å·çš„nextã€‚</p>
<h4 id="combineLatest"><a href="#combineLatest" class="headerlink" title="combineLatest"></a>combineLatest</h4><p>å°†å¤šä¸ªä¿¡å·åˆå¹¶èµ·æ¥ï¼Œå¹¶ä¸”æ‹¿åˆ°å„ä¸ªä¿¡å·çš„æœ€æ–°çš„å€¼,å¿…é¡»æ¯ä¸ªåˆå¹¶çš„signalè‡³å°‘éƒ½æœ‰è¿‡ä¸€æ¬¡sendNextï¼Œæ‰ä¼šè§¦å‘åˆå¹¶çš„ä¿¡å·ã€‚</p>
<p><strong>zip å’Œ combineLatest çš„åŒºåˆ«</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">signal1-----1----2-----3------4-------5-------6--------7-----</div><div class="line"></div><div class="line">signal2----------------5----------------------7--------------</div><div class="line"></div><div class="line"></div><div class="line">combine è¿”å› (3ï¼Œ5)  ï¼ˆ6ï¼Œ7ï¼‰</div><div class="line">zip è¿”å›     (1,5)    (2,7)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;åŸºç¡€ç”¨æ³•&quot;&gt;&lt;a href=&quot;#åŸºç¡€ç”¨æ³•&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€ç”¨æ³•&quot;&gt;&lt;/a&gt;åŸºç¡€ç”¨æ³•&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åˆ›å»ºä¿¡å·&lt;/li&gt;
&lt;li&gt;è®¢é˜…ä¿¡å·&lt;/li&gt;
&lt;li&gt;å‘é€ä¿¡å·&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 1.åˆ›å»ºä¿¡å·(cold)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;&amp;lt;RACSubscriber&amp;gt;  _Nonnull subscriber) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 3.å‘é€ä¿¡å·&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    [subscriber sendNext:&lt;span class=&quot;string&quot;&gt;@&quot;hello, RAC.&quot;&lt;/span&gt;];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 2.è®¢é˜…ä¿¡å·(hot)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[signal subscribeNext:^(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;  _Nullable x) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%@&quot;&lt;/span&gt;, x);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨åˆ›å»º RACSignal çš„æ—¶å€™, &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;+ (RACSignal&amp;lt;ValueType&amp;gt; *)createSignal:(RACDisposable * _Nullable (^)(id&amp;lt;RACSubscriber&amp;gt; subscriber))didSubscribe;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ–¹æ³•ä¼ å…¥çš„ block ä¼šè¿”å›ä¸€ä¸ª &lt;code&gt;RACDisposable&lt;/code&gt; å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;å°†ä»¥ä¸Šä»£ç ä¸­çš„ &lt;code&gt;return nilï¼›&lt;/code&gt; æ›¿æ¢æˆå¦‚ä¸‹ä»£ç &lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>çªç„¶æƒ³èŠèŠ throttle</title>
    <link href="https://CepheusSun.github.io/2017/04/26/%E7%AA%81%E7%84%B6%E6%83%B3%E8%81%8A%E8%81%8A%20throttle/"/>
    <id>https://CepheusSun.github.io/2017/04/26/çªç„¶æƒ³èŠèŠ throttle/</id>
    <published>2017-04-25T16:00:00.000Z</published>
    <updated>2017-04-27T01:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å¦‚æœæˆ‘ä»¬å°†æ°´é¾™å¤´æ‹§ç´§çŸ¥é“æ°´æ˜¯ä»¥æ°´æ»´çš„å½¢å¼æµå‡º, ä¸éš¾å‘ç°, æ¯éš”ä¸€æ®µæ—¶é—´, å°±ä¼šæœ‰ä¸€æ»´æ°´æµå‡ºæ¥ã€‚</p>
</blockquote>
<p>å¦‚æœæˆ‘ä»¬é¢„å…ˆè®¾ç½®ä¸€ä¸ªæ‰§è¡Œå‘¨æœŸ, å½“ç¬¬ä¸€æ¬¡è°ƒç”¨åŠ¨ä½œ(æ»´æ°´)å’Œç¬¬äºŒæ¬¡è°ƒç”¨åŠ¨ä½œä¹‹é—´çš„é—´éš”å¤§äºæ‰§è¡Œå‘¨æœŸ, åˆ™æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œã€‚åæ­£, ä¸æ‰§è¡Œã€‚</p>
<p>ç›´æ¥ç¿»è¯‘ <code>throttle</code> è¿™ä¸ªå•è¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">throttle</div><div class="line"></div><div class="line">n.	èŠ‚æµé˜€; å–‰å’™ï¼Œæ°”ç®¡; [æœº] é£é—¨;</div><div class="line">vt.	æ‰¼æ€ï¼Œå‹åˆ¶; å‹’æ­»ï¼Œä½¿çª’æ¯; ä½¿èŠ‚æµ; ï¼ˆç”¨èŠ‚æ±½é˜€ç­‰ï¼‰ è°ƒèŠ‚;</div><div class="line">vi.	èŠ‚æµï¼Œå‡é€Ÿ; çª’æ¯;</div></pre></td></tr></table></figure>
<p>ä¸éš¾ç†è§£, throttle å…¶å®å°±æ˜¯ä¸€ç§æ§åˆ¶æ•°æ®æˆ–è€…æµé‡å¤§å°çš„æœºåˆ¶ã€‚</p>
<p>MrPeak æ›¾ç»å†™çš„æ–‡ç« ä¸­ä»‹ç»è¿‡ <code>I/O Throttle</code> åœ¨ <code>DISPATCH_QUEUE_PRIORITY_BACKGROUND</code> queue çš„ä½¿ç”¨åœºæ™¯ã€‚åœ¨æ²¡æœ‰éå¸¸ä¸¥è‹›çš„å®æ—¶æ€§è¦æ±‚çš„æƒ…å†µä¸‹, å¯¹äºé‡åº¦ä¾èµ–ç£ç›˜çš„åå°ä»»åŠ¡, ä½¿ç”¨ <code>DISPATCH_QUEUE_PRIORITY_BACKGROUND</code> çš„ queue ä¼šæ›´åŠ å‹å¥½ã€‚æ–‡ä¸­ä¹Ÿå¼•ç”¨äº†å®˜æ–¹æ–‡æ¡£çš„ä¸€æ®µè¯ </p>
<blockquote>
<p>Items dispatched to the queue run at background priority; the queue is scheduled for execution after all high priority queues have been scheduled and the system runs items on a thread whose priority is set for background status. Such a thread has the lowest priority and any disk I/O is throttled to minimize the impact on the system.</p>
</blockquote>
<p>æ„æ€æ˜¯è¯´, è¿™ç§ Global Queue ä¼šåœ¨å…¶ä»–æ‰€æœ‰çš„ queue ç»“æŸä¹‹åæ‰ä¼šåœ¨åå°æ‰§è¡Œã€‚ è¿™æ˜¯æœ€ä½ä¼˜å…ˆçº§çš„ã€‚å¹¶ä¸”ä¸€äº›ç£ç›˜ I/O æ“ä½œä¼šå› ä¸ºæœ€å°åŒ–å¯¹ç³»ç»Ÿçš„å½±å“è€Œè¢«èŠ‚æµã€‚</p>
<a id="more"></a>
<p>æ–‡ä¸­ä¹Ÿä»‹ç»äº† ASI å’Œ AFN ä¸­ä¹Ÿå‡ºç°äº†çš„ throttleã€‚</p>
<blockquote>
<p>æˆ‘ä»¬é€šè¿‡HTTPè¯·æ±‚å‘é€æ•°æ®çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ•°æ®æ˜¯ä»¥Packetçš„å½¢å¼å­˜åœ¨äºä¸€ä¸ªSend Bufferä¸­çš„ï¼Œåº”ç”¨å±‚å¹³æ—¶æ„ŸçŸ¥ä¸åˆ°è¿™ä¸ªBufferçš„å­˜åœ¨ã€‚TCPæä¾›å¯é çš„ä¼ è¾“ï¼Œåœ¨å¼±ç½‘ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªPacketä¸€æ¬¡ä¼ è¾“å¤±è´¥çš„æ¦‚ç‡ä¼šå‡é«˜ï¼Œå³ä½¿ä¸€æ¬¡å¤±è´¥ï¼ŒTCPå¹¶ä¸ä¼šé©¬ä¸Šè®¤ä¸ºè¯·æ±‚å¤±è´¥äº†ï¼Œè€Œæ˜¯ä¼šç»§ç»­é‡è¯•ä¸€æ®µæ—¶é—´ï¼ŒåŒæ—¶TCPè¿˜ä¿è¯Packetçš„æœ‰åºä¼ è¾“ï¼Œæ„å‘³ç€å‰é¢çš„Packetå¦‚æœä¸è¢«ackï¼Œåé¢çš„Packetå°±ä¼šç»§ç»­ç­‰å¾…ï¼Œå¦‚æœæˆ‘ä»¬ä¸€æ¬¡å¾€Send Bufferä¸­å†™å…¥å¤§é‡çš„æ•°æ®ï¼Œé‚£ä¹ˆåœ¨å¼±ç½‘ç¯å¢ƒä¸‹ï¼Œæ’åœ¨åé¢çš„Packetå¤±è´¥çš„æ¦‚ç‡ä¼šå˜é«˜ï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬HTTPè¯·æ±‚å¤±è´¥çš„å‡ ç‡ä¼šå˜å¤§ã€‚</p>
</blockquote>
<p>æ‰€ä»¥åœ¨å¼±ç½‘ç¯å¢ƒä¸‹, ä½¿ç”¨ <code>Network Throttle</code> æœºåˆ¶ å»¶è¿Ÿå‘èµ·ä¸€äº›è¯·æ±‚æˆ–è€…å‡å°‘å¾€ Send Buffer ä¸­çš„æ•°æ®é‡ã€‚ ä¹Ÿä¼šå¤§å¤§çš„æé«˜è¯·æ±‚æˆåŠŸç‡ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</div><div class="line"> Throttles request bandwidth by limiting the packet size and adding a delay for each chunk read from the upload stream.</div><div class="line"></div><div class="line"> When uploading over a 3G or EDGE connection, requests may fail with "request body stream exhausted". Setting a maximum packet size and delay according to the recommended values (`kAFUploadStream3GSuggestedPacketSize` and `kAFUploadStream3GSuggestedDelay`) lowers the risk of the input stream exceeding its allocated bandwidth. Unfortunately, there is no definite way to distinguish between a 3G, EDGE, or LTE connection over `NSURLConnection`. As such, it is not recommended that you throttle bandwidth based solely on network reachability. Instead, you should consider checking for the "request body stream exhausted" in a failure block, and then retrying the request with throttled bandwidth.</div><div class="line"></div><div class="line"> @param numberOfBytes Maximum packet size, in number of bytes. The default packet size for an input stream is 16kb.</div><div class="line"> @param delay Duration of delay each time a packet is read. By default, no delay is set.</div><div class="line"> */</span></div><div class="line"><span class="comment">// AFN ä¸­çš„æ–¹æ³•</span></div><div class="line">- (<span class="keyword">void</span>)throttleBandwidthWithPacketSize:(<span class="built_in">NSUInteger</span>)numberOfBytes</div><div class="line">                                  delay:(<span class="built_in">NSTimeInterval</span>)delay;</div></pre></td></tr></table></figure>
<h2 id="RAC-ä¸­çš„-throttle"><a href="#RAC-ä¸­çš„-throttle" class="headerlink" title="RAC ä¸­çš„ throttle"></a>RAC ä¸­çš„ throttle</h2><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[[[<span class="keyword">self</span>.button rac_signalForControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>] throttle:<span class="number">2</span>] subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"throttle"</span>);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>RAC ä¸­çš„ <code>throttle</code> æ¥å—ä¸€ä¸ªæ—¶é—´é—´éš” <code>interval</code> ä½œä¸ºå‚æ•°, å¦‚æœ <code>RACSignal</code> å‘å‡ºçš„ <code>next</code> äº‹ä»¶ä¹‹åçš„ interval æ—¶é—´å†…ä¸å†å‘å‡º next é‚£ä¹ˆ, ä»–è¿”å›çš„ RACSignal ä¼šå°†è¿™ä¸ªäº‹ä»¶å‘å‡ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå°†å‘é€æ¯”è¾ƒé¢‘ç¹çš„ <code>next</code> äº‹ä»¶èˆå¼ƒ,åªä¿ç•™ç€ä¸€æ®µæ—¶é—´ä¹‹å‰çš„ next äº‹ä»¶ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯:</p>
<p><strong>1ã€å¤„ç†ç”¨æˆ·è¾“å…¥æ¡†çš„ä¿¡å·</strong></p>
<p>åœ¨å¤„ç†æœç´¢è¿™æ ·çš„éœ€æ±‚çš„æ—¶å€™,æœ‰æ—¶å€™å¯èƒ½ä¼šåœ¨ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥ä¹‹åè‡ªåŠ¨è·ŸæœåŠ¡å™¨äº¤äº’ã€‚ç„¶ååœ¨ä¸‹é¢åˆ—è¡¨ä¸­å±•ç¤ºå¤„ç†ç»“æœã€‚å¦‚æœç”¨æˆ·æ‰“å­—å¾ˆå¿«,è¿™ä¸ªæ—¶å€™å¯èƒ½å‡ ç§’é’Ÿä¹‹å†…è¿ç»­å‘å»å¥½å‡ ä¸ªè¯·æ±‚ï¼Œå…¶å®æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚ è¿™ä¸ªæ—¶å€™ä½¿ç”¨ throttle å¯ä»¥å°†ä¿ç•™ç”¨æˆ·è¾“å…¥çš„å°‘æ•°å‡ ä¸ªç»“æœ, ç„¶åè¿”å›ä¸€ä¸ªä¿¡å·, å°†æœ€åçš„æ–‡å­—ä½œä¸º next å‘å‡ºã€‚</p>
<p><strong>2ã€ç›‘å¬æŒ‰é’®ç‚¹å‡»</strong></p>
<p>ç•Œé¢ä¸Šåˆä¸€ä¸ªæŒ‰é’®, ç„¶åç‚¹å‡»è¿™ä¸ªæŒ‰é’®, å‘èµ·ç½‘ç»œè¯·æ±‚, è·Ÿä¸Šé¢çš„ä¾‹å­ç±»ä¼¼ã€‚å¦‚æœç”¨æˆ·å¿«é€Ÿçš„ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ä¹Ÿæ¯”è¾ƒè›‹ç–¼ã€‚æŒ‰ç…§ä»¥å‰çš„å†™æ³•, æˆ‘ä»¬å¯èƒ½ä¼šè®¾ç½®ä¸€ä¸ª <code>flag</code> åœ¨ç‚¹å‡»çš„æ—¶å€™å°†è¿™ä¸ª <code>flag</code> è®¾ç½®ä¸º no, ç„¶ååœ¨ <code>button</code> çš„ <code>action</code> ä¸­åˆ¤æ–­æ˜¯å¦å‘èµ·è¯·æ±‚,ç„¶ååœ¨è¯·æ±‚ç»“æœå›æ¥ä¹‹å, æŠŠè¿™ä¸ª <code>flag</code> æ”¹å›æ¥ã€‚ æƒ³æƒ³éƒ½æ¯”è¾ƒè›‹ç–¼ã€‚è¿™æ—¶å€™ä½¿ç”¨ <code>throttle</code> å°†æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶èŠ‚æµä¸€ä¸‹, å°±å¥½äº†ã€‚</p>
<p>è¿™ä¸ªç›´æ¥æ¬ç”¨ MrPeak <a href="http://mp.weixin.qq.com/s/MsPEZ9GUwCSZN1kngBkJxw">iOSç¼–ç¨‹ä¸­throttleé‚£äº›äº‹</a>ä¸­çš„swiftä»£ç ã€‚ æ¯•ç«Ÿ OC çš„æ„è§åœ¨ä¸Šé¢äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">button.rx_tap</div><div class="line">   .throttle(<span class="number">0.5</span>, <span class="type">MainScheduler</span>.instance)</div><div class="line">   .subscribeNext &#123; <span class="number">_</span> <span class="keyword">in</span> </div><div class="line">      <span class="built_in">print</span>(<span class="string">"Hello World"</span>)</div><div class="line">   &#125;</div><div class="line">   .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>åœ¨ OC çš„ demo ä¸­(ReactiveCocoa 2.5.0) æˆ‘ä¹Ÿå‘ç°äº†ä¸€ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€æ¬¡çš„ç‚¹å‡»ä¹Ÿä¼šåœ¨è¿™ä¸ªé—´éš”ä¹‹åå“åº”ã€‚ä¹‹ååˆä½¿ç”¨äº† ReactiveObjc(3.0) ä¸­ä¹Ÿå‘ç°äº†è¿™ä¸ªé—®é¢˜,è€Œåœ¨ swift çš„ demo ä¸­å¹¶æ²¡æœ‰è¿™ç§æƒ…å†µã€‚</strong></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å…¶å® throttle å¹¶æ²¡æœ‰å‡å°‘å®é™…é€»è¾‘å¤„ç†è¿‡ç¨‹çš„æ‰§è¡Œæ¥æé«˜äº‹ä»¶å¤„ç†å‡½æ•°è¿è¡Œæ€§èƒ½çš„æ‰‹æ®µ, å¹¶æ²¡æœ‰å‡å°‘äº‹ä»¶çš„è§¦å‘æ¬¡æ•°ã€‚å†™åˆ°æœ€å, å‘ç°æ–‡ç« æœ‰ç‚¹å˜æˆå­¦ä¹ å¿ƒå¾—äº†ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬å°†æ°´é¾™å¤´æ‹§ç´§çŸ¥é“æ°´æ˜¯ä»¥æ°´æ»´çš„å½¢å¼æµå‡º, ä¸éš¾å‘ç°, æ¯éš”ä¸€æ®µæ—¶é—´, å°±ä¼šæœ‰ä¸€æ»´æ°´æµå‡ºæ¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬é¢„å…ˆè®¾ç½®ä¸€ä¸ªæ‰§è¡Œå‘¨æœŸ, å½“ç¬¬ä¸€æ¬¡è°ƒç”¨åŠ¨ä½œ(æ»´æ°´)å’Œç¬¬äºŒæ¬¡è°ƒç”¨åŠ¨ä½œä¹‹é—´çš„é—´éš”å¤§äºæ‰§è¡Œå‘¨æœŸ, åˆ™æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œã€‚åæ­£, ä¸æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ç›´æ¥ç¿»è¯‘ &lt;code&gt;throttle&lt;/code&gt; è¿™ä¸ªå•è¯ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;throttle&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;n.	èŠ‚æµé˜€; å–‰å’™ï¼Œæ°”ç®¡; [æœº] é£é—¨;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vt.	æ‰¼æ€ï¼Œå‹åˆ¶; å‹’æ­»ï¼Œä½¿çª’æ¯; ä½¿èŠ‚æµ; ï¼ˆç”¨èŠ‚æ±½é˜€ç­‰ï¼‰ è°ƒèŠ‚;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vi.	èŠ‚æµï¼Œå‡é€Ÿ; çª’æ¯;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸éš¾ç†è§£, throttle å…¶å®å°±æ˜¯ä¸€ç§æ§åˆ¶æ•°æ®æˆ–è€…æµé‡å¤§å°çš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;MrPeak æ›¾ç»å†™çš„æ–‡ç« ä¸­ä»‹ç»è¿‡ &lt;code&gt;I/O Throttle&lt;/code&gt; åœ¨ &lt;code&gt;DISPATCH_QUEUE_PRIORITY_BACKGROUND&lt;/code&gt; queue çš„ä½¿ç”¨åœºæ™¯ã€‚åœ¨æ²¡æœ‰éå¸¸ä¸¥è‹›çš„å®æ—¶æ€§è¦æ±‚çš„æƒ…å†µä¸‹, å¯¹äºé‡åº¦ä¾èµ–ç£ç›˜çš„åå°ä»»åŠ¡, ä½¿ç”¨ &lt;code&gt;DISPATCH_QUEUE_PRIORITY_BACKGROUND&lt;/code&gt; çš„ queue ä¼šæ›´åŠ å‹å¥½ã€‚æ–‡ä¸­ä¹Ÿå¼•ç”¨äº†å®˜æ–¹æ–‡æ¡£çš„ä¸€æ®µè¯ &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Items dispatched to the queue run at background priority; the queue is scheduled for execution after all high priority queues have been scheduled and the system runs items on a thread whose priority is set for background status. Such a thread has the lowest priority and any disk I/O is throttled to minimize the impact on the system.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ„æ€æ˜¯è¯´, è¿™ç§ Global Queue ä¼šåœ¨å…¶ä»–æ‰€æœ‰çš„ queue ç»“æŸä¹‹åæ‰ä¼šåœ¨åå°æ‰§è¡Œã€‚ è¿™æ˜¯æœ€ä½ä¼˜å…ˆçº§çš„ã€‚å¹¶ä¸”ä¸€äº›ç£ç›˜ I/O æ“ä½œä¼šå› ä¸ºæœ€å°åŒ–å¯¹ç³»ç»Ÿçš„å½±å“è€Œè¢«èŠ‚æµã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘ç”¨RACå¹²äº†äº›ä»€ä¹ˆ(ä¸€)</title>
    <link href="https://CepheusSun.github.io/2017/04/21/%E6%88%91%E7%94%A8RAC%E5%B9%B2%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88(%E4%B8%80)/"/>
    <id>https://CepheusSun.github.io/2017/04/21/æˆ‘ç”¨RACå¹²äº†äº›ä»€ä¹ˆ(ä¸€)/</id>
    <published>2017-04-20T16:00:00.000Z</published>
    <updated>2017-04-21T04:34:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹è±¡é—´çš„äº¤äº’, ä¸»è¦æœ‰ <code>target-action</code>ã€<code>Notification</code>ã€<code>KVO</code>ã€<code>Delegate</code></p>
<h3 id="target-action"><a href="#target-action" class="headerlink" title="target-action"></a>target-action</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[[<span class="keyword">self</span>.loginBtn rac_signalForControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>] subscribeNext:^(<span class="built_in">UIButton</span> *btn) &#123;</div><div class="line"> <span class="comment">// btn, å³ self.loginBtn</span></div><div class="line"> <span class="comment">// è¿™é‡Œæ‰§è¡Œç‚¹å‡»ä¹‹åçš„æ“ä½œ</span></div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨ BlocksKit æ›¿ä»£</p>
<h3 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[RACObserve(<span class="keyword">self</span>, name) subscribeNext:^(<span class="built_in">NSString</span> *name) &#123;</div><div class="line">  <span class="comment">// name å³ self.name</span></div><div class="line">  <span class="comment">// ä¸€æ—¦ name å±æ€§æ”¹å˜å°±ç«‹å³è¿›å…¥åˆ°è¿™ä¸ª block</span></div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// self.myLab.text éšç€ self.myTF.text çš„æ”¹å˜è€Œæ”¹å˜</span></div><div class="line">RAC(<span class="keyword">self</span>.myLab, text) = <span class="keyword">self</span>.myTF.rac_textSignal;</div></pre></td></tr></table></figure>
<h3 id="Notificaiton"><a href="#Notificaiton" class="headerlink" title="Notificaiton"></a>Notificaiton</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[[[<span class="built_in">NSNotificationCenter</span> defaultCenter] </div><div class="line">rac_addObserverForName:<span class="built_in">UIKeyboardWillChangeFrameNotification</span> object:<span class="literal">nil</span>] </div><div class="line">  <span class="comment">// è¿™å¥ä¸å¯å°‘ï¼Œè¡¨ç¤º å½“ self å°†è¦ dealloc çš„æ—¶å€™ï¼Œå°±è¦é‡Šæ”¾ é€šçŸ¥</span></div><div class="line">  takeUntil:<span class="keyword">self</span>.rac_willDeallocSignal] </div><div class="line">  subscribeNext:^(<span class="built_in">NSNotification</span> *notification) &#123;</div><div class="line">      <span class="built_in">NSLog</span>(<span class="string">@"-----%@"</span>, notification.description);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>ä¸è¦å¿˜äº†è¿˜æ˜¯åŸæ¥çš„æ–¹æ³•å‘é€é€šçŸ¥ã€‚</p>
<p><strong>é€šçŸ¥å·²ç»é€šè¿‡ RAC å†…éƒ¨å¾—åˆ°äº†é‡Šæ”¾ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–åœ¨ - dealloc æ·»åŠ ç§»é™¤çš„ä»£ç </strong></p>
<h3 id="RACCommand"><a href="#RACCommand" class="headerlink" title="RACCommand"></a>RACCommand</h3><blockquote>
<p>A command, represented by the RACCommand class, creates and subscribes to a signal in response to some action. This makes it easy to perform side-effecting work as the user interacts with the app.</p>
</blockquote>
<p>ç®€å•çš„ä½¿ç”¨RACCommand å®ç°ä¸€ä¸ª viewModel çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
<a id="more"></a>
<h4 id="æ¯ä¸ªviewModeléƒ½æœ‰ä¸åŒçš„äº‹ä»¶"><a href="#æ¯ä¸ªviewModeléƒ½æœ‰ä¸åŒçš„äº‹ä»¶" class="headerlink" title="æ¯ä¸ªviewModeléƒ½æœ‰ä¸åŒçš„äº‹ä»¶"></a>æ¯ä¸ªviewModeléƒ½æœ‰ä¸åŒçš„äº‹ä»¶</h4><p><code>ViewModel</code> æŒæœ‰ä¸€ä¸ª <code>RACCommand</code> çš„å±æ€§ <code>sourceCommand</code></p>
<h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç›´æ¥æ„å»º</span></div><div class="line">- (<span class="keyword">id</span>)initWithSignalBlock:(RACSignal * (^)(<span class="keyword">id</span> input))signalBlock;</div><div class="line"></div><div class="line"><span class="comment">// åªæœ‰å½“enabledSignalä¸ºtrueæ—¶, commandæ‰æ‰§è¡Œ</span></div><div class="line">- (<span class="keyword">id</span>)initWithEnabled:(RACSignal *)enabledSignal signalBlock:(RACSignal * (^)(<span class="keyword">id</span> input))signalBlock;</div><div class="line"></div><div class="line"></div><div class="line">_sourceCommand = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(<span class="keyword">id</span> input) &#123;</div><div class="line">    <span class="keyword">return</span> [[SYHTTPManager shared] request:[[SFAPI_Find_SectionList alloc] init]];</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="è®¢é˜…"><a href="#è®¢é˜…" class="headerlink" title="è®¢é˜…"></a>è®¢é˜…</h4><p>å¤±è´¥å’ŒæˆåŠŸä¸èƒ½åƒè®¢é˜…å…¶ä»–<code>signal</code>ä¸€æ ·ç›´æ¥<code>Next</code>ã€<code>onError</code>å°±å¯ä»¥ã€‚RACCommand çš„å¤±è´¥æ¶ˆæ¯, éƒ½è¢«åˆ†å‘åˆ°äº† <code>errors</code> è¿™ä¸ªå±æ€§ã€‚æ‰€ä»¥éœ€è¦åœ¨è¿™ä¸ªåœ°æ–¹è®¢é˜…å¤±è´¥çš„æ¶ˆæ¯.</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è®¢é˜…æˆåŠŸ</span></div><div class="line">[_sourceCommand.executionSignals.switchToLatest subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    PSLog(<span class="string">@"---%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// è®¢é˜…å¤±è´¥</span></div><div class="line">[_sourceCommand.errors subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    PSLog(<span class="string">@"xxx%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="æ‰§è¡Œ"><a href="#æ‰§è¡Œ" class="headerlink" title="æ‰§è¡Œ"></a>æ‰§è¡Œ</h4><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[command execute:someParameters];</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯¹è±¡é—´çš„äº¤äº’, ä¸»è¦æœ‰ &lt;code&gt;target-action&lt;/code&gt;ã€&lt;code&gt;Notification&lt;/code&gt;ã€&lt;code&gt;KVO&lt;/code&gt;ã€&lt;code&gt;Delegate&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;target-action&quot;&gt;&lt;a href=&quot;#target-action&quot; class=&quot;headerlink&quot; title=&quot;target-action&quot;&gt;&lt;/a&gt;target-action&lt;/h3&gt;&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loginBtn rac_signalForControlEvents:&lt;span class=&quot;built_in&quot;&gt;UIControlEventTouchUpInside&lt;/span&gt;] subscribeNext:^(&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; *btn) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;// btn, å³ self.loginBtn&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;// è¿™é‡Œæ‰§è¡Œç‚¹å‡»ä¹‹åçš„æ“ä½œ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯ä»¥ç”¨ BlocksKit æ›¿ä»£&lt;/p&gt;
&lt;h3 id=&quot;KVO&quot;&gt;&lt;a href=&quot;#KVO&quot; class=&quot;headerlink&quot; title=&quot;KVO&quot;&gt;&lt;/a&gt;KVO&lt;/h3&gt;&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[RACObserve(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, name) subscribeNext:^(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *name) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// name å³ self.name&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// ä¸€æ—¦ name å±æ€§æ”¹å˜å°±ç«‹å³è¿›å…¥åˆ°è¿™ä¸ª block&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// self.myLab.text éšç€ self.myTF.text çš„æ”¹å˜è€Œæ”¹å˜&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;RAC(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.myLab, text) = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.myTF.rac_textSignal;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Notificaiton&quot;&gt;&lt;a href=&quot;#Notificaiton&quot; class=&quot;headerlink&quot; title=&quot;Notificaiton&quot;&gt;&lt;/a&gt;Notificaiton&lt;/h3&gt;&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[[[[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rac_addObserverForName:&lt;span class=&quot;built_in&quot;&gt;UIKeyboardWillChangeFrameNotification&lt;/span&gt; object:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;] &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// è¿™å¥ä¸å¯å°‘ï¼Œè¡¨ç¤º å½“ self å°†è¦ dealloc çš„æ—¶å€™ï¼Œå°±è¦é‡Šæ”¾ é€šçŸ¥&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  takeUntil:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.rac_willDeallocSignal] &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  subscribeNext:^(&lt;span class=&quot;built_in&quot;&gt;NSNotification&lt;/span&gt; *notification) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;-----%@&quot;&lt;/span&gt;, notification.description);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸è¦å¿˜äº†è¿˜æ˜¯åŸæ¥çš„æ–¹æ³•å‘é€é€šçŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€šçŸ¥å·²ç»é€šè¿‡ RAC å†…éƒ¨å¾—åˆ°äº†é‡Šæ”¾ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–åœ¨ - dealloc æ·»åŠ ç§»é™¤çš„ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;RACCommand&quot;&gt;&lt;a href=&quot;#RACCommand&quot; class=&quot;headerlink&quot; title=&quot;RACCommand&quot;&gt;&lt;/a&gt;RACCommand&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;A command, represented by the RACCommand class, creates and subscribes to a signal in response to some action. This makes it easy to perform side-effecting work as the user interacts with the app.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç®€å•çš„ä½¿ç”¨RACCommand å®ç°ä¸€ä¸ª viewModel çš„ç½‘ç»œè¯·æ±‚ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusSun.github.io/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Gitlabå’ŒCocoapodsåˆ›å»ºç§æœ‰pod</title>
    <link href="https://CepheusSun.github.io/2017/04/19/%E4%BD%BF%E7%94%A8Gitlab%E5%92%8CCocoapods%E5%88%9B%E5%BB%BA%E7%A7%81%E6%9C%89pod/"/>
    <id>https://CepheusSun.github.io/2017/04/19/ä½¿ç”¨Gitlabå’ŒCocoapodsåˆ›å»ºç§æœ‰pod/</id>
    <published>2017-04-19T14:39:27.000Z</published>
    <updated>2017-05-11T08:44:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ¯ä¸ªç¨å¾®æœ‰ç‚¹å¼€å‘ç»éªŒçš„ iOS å·¥ç¨‹å¸ˆéƒ½å¾ˆå®¹æ˜“çš„å‘ç°ä¸€ä¸‹å‡ ç‚¹: </p>
<ol>
<li>å‡ ä¹æ¯ä¸ª iOS çš„é¡¹ç›®éƒ½é€‚ç”¨äº† <code>Cocoapods</code> </li>
<li>å‡ ä¹æ¯ä¸ª ObjC çš„ iOS é¡¹ç›®æ˜¯ä½¿ç”¨ <code>AFNetworking</code> ã€ <code>SDWebImage</code>ç­‰ä¸‰æ–¹æ¡†æ¶ã€‚</li>
<li>å‡ ä¹æ¯ä¸ª Swift çš„ iOS é¡¹ç›®éƒ½æ˜¯ç”¨äº† <code>Alamofire</code>ã€ <code>Kingfisher</code>ç­‰ä¸‰æ–¹æ¡†æ¶</li>
<li>æ¯ä¸€æ¬¡è¿™äº›æ¡†æ¶æ›´æ–°ä¹‹å, æ— æ•°ä¸ªå·¥ç¨‹å¸ˆåªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œä¸€ä¸‹â€™pod updateâ€™ æˆ– <code>pod install</code>å°±èƒ½å¯¹åº”çš„æ›´æ–°è‡ªå·±é¡¹ç›®ä¸­çš„ä»£ç </li>
</ol>
<p>è¿™å‡ ä¹éƒ½æ˜¯æ¯ä¸ª iOS å·¥ç¨‹å¸ˆç»å¸¸éƒ½ä¼šé‡åˆ°çš„äº‹æƒ…ã€‚ç›®å‰å‡ ä¹æ‰€æœ‰ä¼˜ç§€çš„ iOS å¼€æºæ¡†æ¶éƒ½æ”¯æŒäº† CocoaPodsã€‚ å‡ ä¹æ‰€æœ‰çš„ iOS é¡¹ç›®éƒ½é›†æˆäº† CocoaPods</p>
<p>ä½†æ˜¯æˆ‘ä»¬åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ä¹Ÿå¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜:</p>
<ol>
<li>å¾ˆå¤šå…¬å¸éƒ½æœ‰å¥½ App åŒæ—¶åœ¨è¿›è¡Œå¼€å‘ã€‚</li>
<li>è¿™äº› App æˆ–å¤šæˆ–å°‘åœ¨ä¸šåŠ¡æˆ–è€… UI éƒ½å¾ˆå¾ˆå¤šçš„é‡åˆã€‚</li>
</ol>
<p>ç€å°±æ„å‘³ç€æœ‰å¾ˆå¤šçš„ä»£ç åœ¨è¿™äº› App ä¸­éƒ½æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚ç”±äºå„ç§å„æ ·çš„åŸå› ,åŒä¸ªå…¬å¸çš„ä¸åŒ App å¯èƒ½æ›´æ–°ä¸åŒæ­¥ã€‚ app A å¯èƒ½å·²ç»å‡çº§åˆ°æ–°ç‰ˆæœ¬ app B å¯èƒ½è¿˜åœ¨è€ç‰ˆæœ¬ã€‚æ¯ä¸ª App åˆ†åˆ«ç®¡ç†åŠ¿å¿…ä¼šå‡ºç°æ··ä¹±çš„å±€é¢ã€‚ä¸€èµ·ç®¡ç†åˆå­˜åœ¨æ–°æ—§äº¤æ›¿çš„é—®é¢˜ã€‚å¦‚æœæ¯ä¸ª App åˆä¸åŒçš„å·¥ç¨‹å¸ˆè´Ÿè´£, å³ä½¿å¯èƒ½æœ‰äº¤å‰ review çš„æœºåˆ¶, ä½†ä¹Ÿå¾ˆéš¾ä¿è¯å…¬å¸ä»£ç çš„ç»Ÿä¸€ã€‚å¾ˆå¤šé€»è¾‘éƒ½å­˜åœ¨å¤šæ®µä»£ç ã€‚</p>
<p>å¦‚ä½•ç®¡ç†å…¬å¸çš„å…¬å…±ä»£ç åº“å°±æˆäº†ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦çš„é—®é¢˜ã€‚</p>
<p>é›†æˆ IJKMediaPlayer çš„æ—¶å€™,æƒ³åˆ°äº†ä½¿ç”¨gitæ¥åŒºåˆ«ç‰ˆæœ¬,ç„¶åä½¿ç”¨ framework æ¥ç®¡ç†å…±æœ‰ä»£ç ã€‚ç„¶è€Œåœ¨å‡ºç°äº†ä½ çš„ä»£ç éœ€è¦ä½¿ç”¨åˆ°å…¶ä»–çš„ Framework çš„æ—¶å€™, æˆ–è€…å¥½å‡ ä¸ª Framework éƒ½éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªç¬¬ä¸‰æ–¹æ¡†æ¶çš„æ—¶å€™, è¿™ä¹ˆåšç¡®å®ä¹Ÿæ˜¯ä»¶æ¼ç«çš„äº‹æƒ…ã€‚</p>
<a id="more"></a>
<p>å»å¹´å†™äº†ä¸‰äº†å°ç»„ä»¶ <code>SYNetwork</code> <code>EmptyDataKit</code> <code>SYPhotoBrowser</code>ã€‚å‰ä¸¤ä¸ªå·²ç»æ”¯æŒäº† <code>Cocoapods</code> ä¹‹åç½‘ä¸Šä¸æ–­çš„å¼€å§‹æœ‰ä¸€äº›åˆ©ç”¨ <code>cocoapods</code>è¿›è¡Œç»„ä»¶åŒ–çš„æ–‡ç« ã€‚å‰äº›å¤©åœ¨ å»ç›´æ’­çœ‹äº† casa çš„ä¸¤ä¸ªå…³äºç»„å»ºåŒ–çš„ç›´æ’­ä¹‹åã€‚ä¹Ÿä¸€ç›´è ¢è ¢æ¬²åŠ¨æƒ³è‡ªå·±ä¹Ÿæ¥åšä¸€ä¸‹è¿™ä»¶äº‹æƒ…ã€‚</p>
<p>åšå¼€æºçš„ repo çš„æ—¶å€™ï¼Œè¿˜æ˜¯æ¯”è¾ƒé¡ºåˆ©çš„åšåˆ°äº†è¿™ä»¶äº‹æƒ…ã€‚ä½†æ˜¯å½“æ—¶æƒ³ç”¨ <code>OSChina</code> æ¥åšäº†å‡ æ¬¡éƒ½æ²¡æœ‰æˆåŠŸã€‚å°±ä¸€ç›´æç½®äº†ã€‚</p>
<p>æ˜¥èŠ‚ä¹‹åæ¢äº†ä¸ªå·¥ä½œ, é€‚åº”äº†å…¬å¸çš„ç¯å¢ƒ, ç®€å•çš„å­¦ä¹ äº†ä¸€ä¸‹ Swift ä¹‹å, å…¬å¸è¿˜æ˜¯å†³å®šå¯¹ç°æœ‰çš„é¡¹ç›®è¿›è¡Œä¸€æ¬¡æ¢³ç†,ç„¶ååšä¸€æ¬¡é‡æ„ã€‚ æ‰€ä»¥å¾ˆè‡ªç„¶çš„è¿˜æ˜¯æƒ³åˆ°äº†ä½¿ç”¨ <code>CocoaPods</code> å°†å…¬å¸åŸæœ‰çš„é¡¹ç›®è¿›è¡Œç»„ä»¶åŒ–ã€‚</p>
<p>ç»“æœäº†åŠå¤©æ—¶é—´çš„å°è¯•,æŠ¥é”™create gitlabè´¦å·ç­‰ç­‰ã€‚ç»ˆäºè¾¾åˆ°äº†æœ€åˆçš„æƒ³æ³•ã€‚ æ‰€ä»¥å°†è¿™ä¸ªè¿‡ç¨‹è®°å½•ä¸‹æ¥ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨-GitLab"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨-GitLab" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ GitLab"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ GitLab</h2><p>å…¶å®ä¸Šé¢å·²ç»è¯´åˆ°äº†,ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ CocoaPods æ¥åšè¿™ä»¶äº‹æƒ…ã€‚ä¹Ÿè¯´åˆ°äº†ä¸ºä»€ä¹ˆè¦åšè¿™ä»¶äº‹æƒ…ã€‚ä¸ºä»€ä¹ˆä½¿ç”¨ gitlab å‘¢ï¼Ÿ åŸå› å¾ˆç®€å•ã€‚ æ¯•ç«Ÿ GitHub çš„ç§æœ‰repo æ˜¯æ”¶è´¹çš„ã€‚åŸè°…æˆ‘ç©·, ä¹Ÿå¯ä»¥è¯´æ˜¯å…¬å¸æ‰£é—¨å„¿ã€‚åªèƒ½æŠŠå¼€æºçš„ä¸œè¥¿æ”¾åœ¨, GitHub æŠŠä¸èƒ½å¼€æºçš„ä¸œè¥¿æ”¾åœ¨å…¶ä»–åœ°æ–¹ã€‚</p>
<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>å…¶å®æ²¡ä»€ä¹ˆå¥½å‡†å¤‡çš„ã€‚ ä½†æ˜¯é¦–å…ˆä½ å¾—æœ‰ä¸ª Gitlab è´¦å·å§ï¼ å¦‚æœæ²¡æœ‰æ³¨å†Œä¹‹åæ·»åŠ  SSH å°±å¥½äº†ã€‚</p>
<p>ç„¶ååœ¨ Gitlab ä¸Šåˆ›å»ºä¸€ä¸ªç©ºçš„ä»“åº“:XXX ç„¶åè®°ä½è¿™ä¸ªé¡¹ç›®çš„ åœ°å€: git@gitlab.com:XXX/XXX.git </p>
<h2 id="åˆ›å»ºå·¥ç¨‹"><a href="#åˆ›å»ºå·¥ç¨‹" class="headerlink" title="åˆ›å»ºå·¥ç¨‹"></a>åˆ›å»ºå·¥ç¨‹</h2><p>è¿™äº›å¯ä»¥çœ‹æˆ‘å»å¹´å¹´åº•å†™å¼€æº Cocoapods çš„æ—¶å€™å†™çš„ä¸œè¥¿ã€‚<a href="http://cepheussun.com/2016/12/02/%E4%BD%BF%E7%94%A8Cocoapods%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/">ä½¿ç”¨ Cocoapods ç®¡ç†ä½ çš„é¡¹ç›®</a></p>
<p>åŸºæœ¬ä¸Šç®€åŒ–ä¸€ä¸‹å°±æ˜¯ä»¥ä¸‹</p>
<h3 id="åˆ›å»ºå·¥ç¨‹-1"><a href="#åˆ›å»ºå·¥ç¨‹-1" class="headerlink" title="åˆ›å»ºå·¥ç¨‹"></a>åˆ›å»ºå·¥ç¨‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod lib create XXX</div></pre></td></tr></table></figure>
<p>å›ç­”é—®é¢˜</p>
<h3 id="æ·»åŠ ç§æœ‰åº“åˆ°æœ¬åœ°-pod-åº“-å¤šäººå¼€å‘å…¶ä»–äººä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªæ“ä½œ"><a href="#æ·»åŠ ç§æœ‰åº“åˆ°æœ¬åœ°-pod-åº“-å¤šäººå¼€å‘å…¶ä»–äººä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªæ“ä½œ" class="headerlink" title="æ·»åŠ ç§æœ‰åº“åˆ°æœ¬åœ° pod åº“(å¤šäººå¼€å‘å…¶ä»–äººä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªæ“ä½œ)"></a>æ·»åŠ ç§æœ‰åº“åˆ°æœ¬åœ° pod åº“(å¤šäººå¼€å‘å…¶ä»–äººä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªæ“ä½œ)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod repo add XXX git@gitlab.com:XXX/XXX.git</div></pre></td></tr></table></figure>
<blockquote>
<p>å¯ä»¥æ£€æŸ¥ä¸€ä¸‹: ~./cocoapods/repos ç›®å½•ä¸‹åˆäº† XXX æ–‡ä»¶å¤¹</p>
</blockquote>
<h3 id="å°†ä»£ç æ”¾è¿›å»"><a href="#å°†ä»£ç æ”¾è¿›å»" class="headerlink" title="å°†ä»£ç æ”¾è¿›å»"></a>å°†ä»£ç æ”¾è¿›å»</h3><blockquote>
<p>è¿™ä¸€æ­¥ä¸Šç¯‡æ–‡ç« ä¸­æœ‰ã€‚ <a href="http://cepheussun.com/2016/12/02/%E4%BD%BF%E7%94%A8Cocoapods%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/">ä½¿ç”¨ Cocoapods ç®¡ç†ä½ çš„é¡¹ç›®</a></p>
</blockquote>
<h4 id="ä¿®æ”¹-podspec"><a href="#ä¿®æ”¹-podspec" class="headerlink" title="ä¿®æ”¹ .podspec"></a>ä¿®æ”¹ .podspec</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Pod::Spec.new <span class="keyword">do</span> <span class="params">|s|</span></div><div class="line">  s.name             = <span class="string">'XXX'</span></div><div class="line">  s.version          = <span class="string">'0.0.1'</span></div><div class="line">  s.summary          = <span class="string">'è¿™æ˜¯é¡¹ç›®çš„åŸºç¡€æ¡†æ¶,æ‰€æœ‰é¡¹ç›®éƒ½éœ€è¦é›†æˆ.'</span></div><div class="line"></div><div class="line">  s.homepage         = <span class="string">'https://gitlab.com/XXX/XXX'</span></div><div class="line">  s.license          = &#123; <span class="symbol">:type</span> =&gt; <span class="string">'MIT'</span>, <span class="symbol">:file</span> =&gt; <span class="string">'LICENSE'</span> &#125;</div><div class="line">  s.author           = &#123; <span class="string">'XXX'</span> =&gt; <span class="string">'cd_sunyang@163.com'</span> &#125;</div><div class="line">  s.source           = &#123; <span class="symbol">:git</span> =&gt; <span class="string">'git@gitlab.com:XXX/XXX.git'</span>, <span class="symbol">:tag</span> =&gt; s.version &#125;</div><div class="line"></div><div class="line">  s.ios.deployment_target = <span class="string">'8.0'</span></div><div class="line"></div><div class="line">  s.source_files = <span class="string">'XXX/Classes/**/*'</span></div><div class="line">  s.frameworks = <span class="string">'UIKit'</span></div><div class="line">  s.dependency <span class="string">'AFNetworking'</span></div><div class="line">  s.dependency <span class="string">'MBProgressHUD'</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>æˆ‘è¿™ä¸ªDemoå¼•ç”¨äº†ä¸¤ä¸ªå…¬æœ‰çš„repo</p>
<h4 id="æäº¤ä»£ç "><a href="#æäº¤ä»£ç " class="headerlink" title="æäº¤ä»£ç "></a>æäº¤ä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git add .</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git commit -m &quot;commit comments&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push origin master</div></pre></td></tr></table></figure>
<h4 id="æ£€æŸ¥ä¸€ä¸‹"><a href="#æ£€æŸ¥ä¸€ä¸‹" class="headerlink" title="æ£€æŸ¥ä¸€ä¸‹"></a>æ£€æŸ¥ä¸€ä¸‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ pod lib lint</div><div class="line"></div><div class="line">#æˆ–è€… pod lib lint --allow-warnings å¿½ç•¥è­¦å‘Š</div></pre></td></tr></table></figure>
<p>ç„¶åä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ä¸­çš„ <code>podfile</code>æ–‡ä»¶ä¸­æ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pod &apos;XXX&apos;, :path =&gt; &apos;/Users/xxx/Desktop/XXX&apos;</div><div class="line"></div><div class="line">## æœ€åè·¯å¾„ä»¥å®é™…æƒ…å†µä¸ºå‡†, æœ‰å¯èƒ½ä¸åœ¨æ¡Œé¢</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod install</div></pre></td></tr></table></figure>
<p>æˆåŠŸåæˆ‘ä»¬çš„åº“ä¼šå‡ºç°åœ¨<code>Development Pods</code>æ–‡ä»¶å¤¹é‡Œé¢ã€‚å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰é—®é¢˜ã€‚</p>
<h4 id="æäº¤ç§æœ‰åº“"><a href="#æäº¤ç§æœ‰åº“" class="headerlink" title="æäº¤ç§æœ‰åº“"></a>æäº¤ç§æœ‰åº“</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git tag 0.0.1</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push --tags</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod repo push XXX XXX.podspec</div></pre></td></tr></table></figure>
<h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><h4 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="headerlink" title="æŠ¥é”™"></a>æŠ¥é”™</h4><p>åœ¨æ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod lib lint</div></pre></td></tr></table></figure></p>
<p>çš„æ—¶å€™,å¦‚æœåœ¨ä½ çš„æ–‡ä»¶ä¸­å¼•å…¥äº†ä¸€äº›ä¸‰æ–¹åº“, å¹¶ä¸”åœ¨<code>.podspec</code>æ–‡ä»¶ä¸­ä¹Ÿæ·»åŠ äº†å¯¹ç”¨çš„<code>.dependency</code> ä¾ç„¶å‡ºç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- ERROR | xcodebuild: /Users/xinhuikeji/Library/Developer/Xcode/DerivedData/App-cpgccqdjhyrbqwcpjanyefntolkf/Build/Products/Release-iphonesimulator/wLib/wLib.framework/Headers/BaseModel.h:13:9: error: include of non-modular header inside framework module &apos;wLib.BaseModel&apos; [-Werror,-Wnon-modular-include-in-framework-module]</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„é”™è¯¯ã€‚</p>
<p>åœ¨å‘½ä»¤åé¢æ·»åŠ å‚æ•° <code>--use-libraries</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ pod lib lint xxx.podspec --use-libraries</div><div class="line">$ pod repo push XXX XXX.podspec --use-libraries</div></pre></td></tr></table></figure>
<p>åœ¨<a href="https://segmentfault.com/q/1010000006885674">segmentfault</a>ä¸­çœ‹åˆ°çš„ç­”æ¡ˆã€‚</p>
<h4 id="pod-search-æ‰¾ä¸åˆ°"><a href="#pod-search-æ‰¾ä¸åˆ°" class="headerlink" title="pod search æ‰¾ä¸åˆ°"></a>pod search æ‰¾ä¸åˆ°</h4><p>æœ€åå®Œæˆä¹‹ååœ¨æ–°å»ºçš„å·¥ç¨‹ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod init</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim podfile</div></pre></td></tr></table></figure>
<p>æ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod &quot;SYBase&quot;, :git =&gt; &apos;git@gitlab.com:CepheusSun/SYBase.git&apos;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod install</div></pre></td></tr></table></figure>
<p>ç„¶åè«åå…¶å¦™å‘ç°å¼•å…¥çš„ repo æ˜¯<code>0.1.0</code>æˆ–è€…ä»€ä¹ˆå·´æ‹‰å·´æ‹‰ç‰ˆæœ¬çš„ã€‚è¿™ä¸ªæ—¶å€™æ›´æ–°ä¸€ä¸‹pod</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod update</div></pre></td></tr></table></figure>
<p>å†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod install</div></pre></td></tr></table></figure></p>
<h4 id="å¼ºè¿«ç—‡"><a href="#å¼ºè¿«ç—‡" class="headerlink" title="å¼ºè¿«ç—‡"></a>å¼ºè¿«ç—‡</h4><p>å¦‚æœé‡åˆ°å¼ºè¿«ç—‡æƒ³è¦ç”¨ 1.1.1 è¿™æ ·çš„ä¸‰çº§ç‰ˆæœ¬çš„è¯ã€‚</p>
<p><code>XXX.podspec</code> æ–‡ä»¶ä¸­çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s.source = &#123; :git =&gt; &apos;git@gitlab.com:XXX/XXX.git&apos;, :tag =&gt; s.version &#125;</div></pre></td></tr></table></figure></p>
<p>å¿…é¡»ç”¨ s.version</p>
<p>æˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚</p>
<h3 id="ç»“æŸç¯‡"><a href="#ç»“æŸç¯‡" class="headerlink" title="ç»“æŸç¯‡"></a>ç»“æŸç¯‡</h3><p>å¥½ä¹…æ²¡å†™æ–‡ç« äº†ã€‚ç»ˆäºè¿˜æ˜¯ç»§ç»­å†™äº†ä¸‹å»ã€‚è¿™æ®µæ—¶é—´è‡ªå·±å­¦äº†å­¦Swift å­¦äº†å­¦ å‡½æ•°å“åº”å¼ç¼–ç¨‹, ä¸ƒç‰›äº‘ç›´æ’­çš„è®¤è¯ä¹Ÿä¸‹æ¥çš„ã€‚æ¥ä¸‹æ¥å¯èƒ½è¦ç ”ç©¶ä¸€ä¸‹æ¨æµç›¸å…³çš„ä¸œè¥¿ã€‚2017 çš„å‰åŠæ®µè€å®è¯´å­¦åˆ°äº†å¾ˆå¤šçš„ä¸œè¥¿ã€‚ä¸€ç›´å¾ˆæ„Ÿæ©ä¹Ÿå¾ˆçæƒœè¿™æ ·çš„æƒ…å†µã€‚</p>
<p><strong>å‚è€ƒæ–‡æ¡£</strong></p>
<p><a href="http://www.th7.cn/program/ios/201702/1119967.shtml">ç»„ä»¶åŒ–å¼€å‘ä¹‹CocoaPodsç§æœ‰åº“åˆ¶ä½œ</a><br><a href="http://mt.sohu.com/20160824/n465823814.shtml">ä½¿ç”¨cocoapodsç®¡ç†ç§æœ‰åº“</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¯ä¸ªç¨å¾®æœ‰ç‚¹å¼€å‘ç»éªŒçš„ iOS å·¥ç¨‹å¸ˆéƒ½å¾ˆå®¹æ˜“çš„å‘ç°ä¸€ä¸‹å‡ ç‚¹: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‡ ä¹æ¯ä¸ª iOS çš„é¡¹ç›®éƒ½é€‚ç”¨äº† &lt;code&gt;Cocoapods&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;å‡ ä¹æ¯ä¸ª ObjC çš„ iOS é¡¹ç›®æ˜¯ä½¿ç”¨ &lt;code&gt;AFNetworking&lt;/code&gt; ã€ &lt;code&gt;SDWebImage&lt;/code&gt;ç­‰ä¸‰æ–¹æ¡†æ¶ã€‚&lt;/li&gt;
&lt;li&gt;å‡ ä¹æ¯ä¸ª Swift çš„ iOS é¡¹ç›®éƒ½æ˜¯ç”¨äº† &lt;code&gt;Alamofire&lt;/code&gt;ã€ &lt;code&gt;Kingfisher&lt;/code&gt;ç­‰ä¸‰æ–¹æ¡†æ¶&lt;/li&gt;
&lt;li&gt;æ¯ä¸€æ¬¡è¿™äº›æ¡†æ¶æ›´æ–°ä¹‹å, æ— æ•°ä¸ªå·¥ç¨‹å¸ˆåªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œä¸€ä¸‹â€™pod updateâ€™ æˆ– &lt;code&gt;pod install&lt;/code&gt;å°±èƒ½å¯¹åº”çš„æ›´æ–°è‡ªå·±é¡¹ç›®ä¸­çš„ä»£ç &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™å‡ ä¹éƒ½æ˜¯æ¯ä¸ª iOS å·¥ç¨‹å¸ˆç»å¸¸éƒ½ä¼šé‡åˆ°çš„äº‹æƒ…ã€‚ç›®å‰å‡ ä¹æ‰€æœ‰ä¼˜ç§€çš„ iOS å¼€æºæ¡†æ¶éƒ½æ”¯æŒäº† CocoaPodsã€‚ å‡ ä¹æ‰€æœ‰çš„ iOS é¡¹ç›®éƒ½é›†æˆäº† CocoaPods&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æˆ‘ä»¬åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ä¹Ÿå¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¾ˆå¤šå…¬å¸éƒ½æœ‰å¥½ App åŒæ—¶åœ¨è¿›è¡Œå¼€å‘ã€‚&lt;/li&gt;
&lt;li&gt;è¿™äº› App æˆ–å¤šæˆ–å°‘åœ¨ä¸šåŠ¡æˆ–è€… UI éƒ½å¾ˆå¾ˆå¤šçš„é‡åˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç€å°±æ„å‘³ç€æœ‰å¾ˆå¤šçš„ä»£ç åœ¨è¿™äº› App ä¸­éƒ½æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚ç”±äºå„ç§å„æ ·çš„åŸå› ,åŒä¸ªå…¬å¸çš„ä¸åŒ App å¯èƒ½æ›´æ–°ä¸åŒæ­¥ã€‚ app A å¯èƒ½å·²ç»å‡çº§åˆ°æ–°ç‰ˆæœ¬ app B å¯èƒ½è¿˜åœ¨è€ç‰ˆæœ¬ã€‚æ¯ä¸ª App åˆ†åˆ«ç®¡ç†åŠ¿å¿…ä¼šå‡ºç°æ··ä¹±çš„å±€é¢ã€‚ä¸€èµ·ç®¡ç†åˆå­˜åœ¨æ–°æ—§äº¤æ›¿çš„é—®é¢˜ã€‚å¦‚æœæ¯ä¸ª App åˆä¸åŒçš„å·¥ç¨‹å¸ˆè´Ÿè´£, å³ä½¿å¯èƒ½æœ‰äº¤å‰ review çš„æœºåˆ¶, ä½†ä¹Ÿå¾ˆéš¾ä¿è¯å…¬å¸ä»£ç çš„ç»Ÿä¸€ã€‚å¾ˆå¤šé€»è¾‘éƒ½å­˜åœ¨å¤šæ®µä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä½•ç®¡ç†å…¬å¸çš„å…¬å…±ä»£ç åº“å°±æˆäº†ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;é›†æˆ IJKMediaPlayer çš„æ—¶å€™,æƒ³åˆ°äº†ä½¿ç”¨gitæ¥åŒºåˆ«ç‰ˆæœ¬,ç„¶åä½¿ç”¨ framework æ¥ç®¡ç†å…±æœ‰ä»£ç ã€‚ç„¶è€Œåœ¨å‡ºç°äº†ä½ çš„ä»£ç éœ€è¦ä½¿ç”¨åˆ°å…¶ä»–çš„ Framework çš„æ—¶å€™, æˆ–è€…å¥½å‡ ä¸ª Framework éƒ½éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªç¬¬ä¸‰æ–¹æ¡†æ¶çš„æ—¶å€™, è¿™ä¹ˆåšç¡®å®ä¹Ÿæ˜¯ä»¶æ¼ç«çš„äº‹æƒ…ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="CocoaPods" scheme="https://CepheusSun.github.io/categories/CocoaPods/"/>
    
    
      <category term="CocoaPods" scheme="https://CepheusSun.github.io/tags/CocoaPods/"/>
    
      <category term="iOS" scheme="https://CepheusSun.github.io/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>python çˆ¬è™«ä¹‹ä¸€ &quot;Requests åº“å­¦ä¹ &quot;</title>
    <link href="https://CepheusSun.github.io/2017/03/07/Requests%20%E5%BA%93/"/>
    <id>https://CepheusSun.github.io/2017/03/07/Requests åº“/</id>
    <published>2017-03-06T16:00:00.000Z</published>
    <updated>2017-03-10T01:54:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªç³»åˆ—çš„æ–‡ç« æ˜¯ç”¨æ¥è®°å½•æˆ‘å­¦ä¹  python çˆ¬è™«çš„ã€‚è¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚</p>
<a id="more"></a>
<h2 id="å®‰è£…-requests-åº“"><a href="#å®‰è£…-requests-åº“" class="headerlink" title="å®‰è£… requests åº“"></a>å®‰è£… requests åº“</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pip install requests</div></pre></td></tr></table></figure>
<h2 id="éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ"><a href="#éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ" class="headerlink" title="éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ"></a>éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ python</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#import requests</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.get(<span class="string">"http://www.baidu.com"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r.status_code</div><div class="line"><span class="number">200</span></div><div class="line">&gt;&gt;&gt;r.encoding = <span class="string">'utf-8'</span></div><div class="line">&gt;&gt;&gt;r.text</div></pre></td></tr></table></figure>
<h3 id="Requests-åº“çš„ä¸»è¦æ–¹æ³•"><a href="#Requests-åº“çš„ä¸»è¦æ–¹æ³•" class="headerlink" title="Requests åº“çš„ä¸»è¦æ–¹æ³•"></a>Requests åº“çš„ä¸»è¦æ–¹æ³•</h3><ul>
<li>requests.request()<blockquote>
<p>æ„é€ ä¸€ä¸ªè¯·æ±‚,æ”¯æ’‘ä¸€ä¸‹å„æ–¹æ³•çš„åŸºç¡€æ–¹æ³•</p>
</blockquote>
</li>
<li>requests.get()<blockquote>
<p>è·å–HTMLç½‘é¡µçš„ä¸»è¦æ–¹æ³•,å¯¹åº”HTTPçš„GET</p>
</blockquote>
</li>
<li>requests.head()<blockquote>
<p>è·å–HTMLç½‘é¡µå¤´ä¿¡æ¯çš„æ–¹æ³•,å¯¹åº”HTTPçš„HEAD</p>
</blockquote>
</li>
<li>requests.post()<blockquote>
<p>å‘HTMLç½‘é¡µæäº¤POSTè¯·æ±‚çš„æ–¹æ³•,å¯¹åº”HTTPçš„POST</p>
</blockquote>
</li>
<li>requests.put()<blockquote>
<p>å‘HTMLç½‘é¡µæäº¤PUTè¯·æ±‚çš„æ–¹æ³•,å¯¹åº”HTTPçš„PUT</p>
</blockquote>
</li>
<li>requests.patch()<blockquote>
<p>å‘HTMLç½‘é¡µæäº¤å±€éƒ¨ä¿®æ”¹è¯·æ±‚,å¯¹åº”HTTPçš„POST</p>
</blockquote>
</li>
<li>requests.delete()<blockquote>
<p>å‘HTMLç½‘é¡µæäº¤åˆ é™¤è¯·æ±‚,å¯¹åº”HTTPçš„POST</p>
</blockquote>
</li>
</ul>
<h3 id="Reuqest-æœ€é‡è¦çš„ä¸¤ä¸ªå¯¹è±¡"><a href="#Reuqest-æœ€é‡è¦çš„ä¸¤ä¸ªå¯¹è±¡" class="headerlink" title="Reuqest æœ€é‡è¦çš„ä¸¤ä¸ªå¯¹è±¡"></a>Reuqest æœ€é‡è¦çš„ä¸¤ä¸ªå¯¹è±¡</h3><h4 id="Request-å¯¹è±¡"><a href="#Request-å¯¹è±¡" class="headerlink" title="Request å¯¹è±¡"></a>Request å¯¹è±¡</h4><blockquote>
</blockquote>
<h4 id="Response-å¯¹è±¡"><a href="#Response-å¯¹è±¡" class="headerlink" title="Response å¯¹è±¡"></a>Response å¯¹è±¡</h4><blockquote>
<p>åŒ…å«äº†çˆ¬è™«è¿”å›çš„å…¨éƒ¨å†…å®¹</p>
</blockquote>
<ul>
<li>r.status_code; çŠ¶æ€ç ,200è¡¨ç¤ºæˆåŠŸ,404è¡¨ç¤ºå¤±è´¥</li>
<li>r.text; HTTPå“åº”å†…å®¹çš„å­—ç¬¦ä¸²å½¢å¼,å³, URL å¯¹åº”çš„é¡µé¢å†…å®¹</li>
<li><p>r.encoding; ä» HTTP header ä¸­çŒœæµ‹çš„å“åº”å†…å®¹ç¼–ç æ–¹å¼</p>
<blockquote>
<p>å¦‚æœ header ä¸­ä¸å­˜åœ¨ charset, åˆ™è®¤ä¸ºç¼–ç æ˜¯,ISO-8859-1</p>
</blockquote>
</li>
<li>r.apparent_encoding;ä»å†…å®¹ä¸­åˆ†æå‡ºçš„å“åº”å†…å®¹ç¼–ç æ–¹å¼(å¤‡é€‰ç¼–ç æ–¹å¼)</li>
<li>r.content; HTTP å“åº”å†…å®¹çš„äºŒè¿›åˆ¶å½¢å¼</li>
</ul>
<h3 id="çˆ¬å–ç½‘é¡µçš„é€šç”¨ä»£ç æ¡†æ¶"><a href="#çˆ¬å–ç½‘é¡µçš„é€šç”¨ä»£ç æ¡†æ¶" class="headerlink" title="çˆ¬å–ç½‘é¡µçš„é€šç”¨ä»£ç æ¡†æ¶"></a>çˆ¬å–ç½‘é¡µçš„é€šç”¨ä»£ç æ¡†æ¶</h3><h4 id="Request-çš„å¼‚å¸¸"><a href="#Request-çš„å¼‚å¸¸" class="headerlink" title="Request çš„å¼‚å¸¸"></a>Request çš„å¼‚å¸¸</h4><ul>
<li>request.ConnectionError; ç½‘ç»œè¿æ¥é”™è¯¯å¼‚å¸¸ï¼Œå¦‚DNSæŸ¥è¯¢å¤±è´¥ï¼Œæ‹’ç»è¿æ¥å®š</li>
<li>request.HTTPError; HTTPé”™è¯¯å¼‚å¸¸</li>
<li>request.URLRequired; URL ç¼ºå¤±å¼‚å¸¸</li>
<li>request.TooManyRedirects; è¶…è¿‡æœ€å¤§é‡å®šå‘æ¬¡æ•°,é•¿ç”Ÿé‡å®šå‘å¼‚å¸¸</li>
<li>request.ConnectTimeout;é“¾æ¥è¿œç¨‹æœåŠ¡å™¨è¶…æ—¶å¼‚å¸¸</li>
<li>requests.Timeout;è¯·æ±‚URLè¶…æ—¶ï¼Œäº§ç”Ÿè¶…æ—¶å¼‚å¸¸</li>
</ul>
<p>r.raise_for_status(); å¦‚æœä¸æ˜¯200,äº§ç”Ÿå·²æˆrequests.HTTPError</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -- coding: UTF-8 --</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span><span class="params">(url)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        r = requests.get(url, timeout=<span class="number">30</span>)</div><div class="line">        r.raise_for_status()</div><div class="line">        <span class="comment"># å¦‚æœçŠ¶æ€ä¸æ˜¯200ï¼Œ å¼•å‘HTTPErrorå¼‚å¸¸</span></div><div class="line">        r.encoding = r.apparent_encoding</div><div class="line">        <span class="keyword">return</span> r.text</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">"äº§ç”Ÿå¼‚å¸¸"</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    url = <span class="string">"http://CepheusSun.com"</span></div><div class="line">    print(getHTMLText(url))</div></pre></td></tr></table></figure>
<center>é€šç”¨ä»£ç æ¡†æ¶</center>

<h4 id="HTTP-åè®®"><a href="#HTTP-åè®®" class="headerlink" title="HTTP åè®®"></a>HTTP åè®®</h4><p>HTTP, Hypertext Transfer Protocol, è¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚</p>
<p>HTTP æ˜¯ä¸€ä¸ªåŸºäºâ€è¯·æ±‚ä¸å“åº”â€æ¨¡å¼çš„ã€æ— çŠ¶æ€çš„åº”ç”¨å±‚åè®®ã€‚</p>
<p>HTTP åè®®é‡‡ç”¨ URL ä½œä¸ºå®šä½ç½‘ç»œèµ„æºçš„æ ‡è¯†ã€‚</p>
<p>URLæ ¼å¼: <a href="http://host[:port][path">http://host[:port][path</a>]</p>
<ul>
<li>host:åˆæ³•çš„ Internet ä¸»æœºåŸŸåæˆ–è€… IP åœ°å€</li>
<li>port:ç«¯å£å·,ç¼ºçœç«¯å£ä¸º80</li>
<li>path:è¯·æ±‚èµ„æºçš„è·¯å¾„</li>
</ul>
<p>URL æ˜¯é€šè¿‡ HTTP åè®®å­˜å–èµ„æºçš„ Internet è·¯å¾„, ä¸€ä¸ª URL å¯¹åº”ä¸€ä¸ªæ•°æ®èµ„æºã€‚</p>
<p>HTTP åè®®å¯¹èµ„æºçš„æ“ä½œ</p>
<p><strong>GET</strong>ï¼Œ è·å–èµ„æº<br><strong>HEAD</strong>ï¼Œè·å–èµ„æºå¤´éƒ¨ä¿¡æ¯<br><strong>POST</strong>ï¼Œå‘URLä½ç½®çš„èµ„æºåé™„åŠ æ–°çš„æ•°æ®<br><strong>PUT</strong>ï¼Œå‚¨å­˜ä¸€ä¸ªèµ„æºï¼Œè¦†ç›–åŸæ¥URLçš„èµ„æº<br><strong>PATCH</strong>ï¼Œå¯¹åŸæ¥çš„èµ„æºï¼Œè¿›è¡Œå±€éƒ¨æ›´æ–°<br><strong>DELETE</strong>ï¼Œåˆ é™¤</p>
<h4 id="requests-request-method-url-kwargs"><a href="#requests-request-method-url-kwargs" class="headerlink" title="requests.request(method, url, **kwargs)"></a>requests.request(<code>method</code>, <code>url</code>, <code>**kwargs</code>)</h4><p>method: è¯·æ±‚æ–¹å¼,å¯¹åº”get/put/postç­‰7ç§<br>url: è¯·æ±‚åœ°å€<br><code>**warrgs</code> æ§åˆ¶è®¿é—®çš„å‚æ•°ï¼Œä¸€å…±13ä¸ª</p>
<ul>
<li><code>params</code>: å­—å…¸æˆ–å­—èŠ‚åºåˆ—ï¼Œä½œä¸ºå‚æ•°å¢åŠ åˆ°urlä¸­</li>
<li><code>data</code>: å­—å…¸ã€å­—èŠ‚åºåˆ—æˆ–è€…æ–‡ä»¶å¯¹è±¡ï¼Œä½œä¸º Request çš„å†…å®¹</li>
<li><code>json</code>: JSON æ ¼å¼çš„æ•°æ®,ä½œä¸º Request çš„å†…å®¹</li>
<li><code>headers</code>: å­—å…¸,HTTPå®šåˆ¶å¤´</li>
<li><code>cookies</code>:å­—å…¸æˆ–CookieeJar, requestä¸­çš„cookie</li>
<li><code>auth</code>: å…ƒç»„,æ”¯æŒHTTPè®¤è¯åŠŸèƒ½</li>
<li><code>files</code>: å­—å…¸ç±»å‹,ä¼ è¾“æ–‡ä»¶</li>
<li><code>timeout</code>: è®¾å®šçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’</li>
<li><p><code>proxies</code>: å­—å…¸ç±»å‹,è®¾å®šè®¿é—®ä»£ç†æœåŠ¡å™¨,å¯ä»¥å¢åŠ ç™»å½•è®¤è¯ </p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">pxs = &#123;<span class="string">'http'</span>:<span class="string">'http//balabala'</span>,</div><div class="line"><span class="string">'https'</span>:<span class="string">'https"//balabala'</span></div><div class="line">&#125;</div><div class="line">r= requests.request(<span class="string">'GET'</span>,<span class="string">'http://www.baidu.com'</span>,proxies=pxs)</div></pre></td></tr></table></figure>
</li>
<li><p><code>allow_redirects</code>: True/False,é»˜è®¤True,é‡å®šå‘å¼€å…³</p>
</li>
<li><code>stream</code>:True/False,é»˜è®¤True,è·å–å†…å®¹ç«‹å³ä¸‹è½½å¼€å…³</li>
<li><code>verify</code>:True/False,é»˜è®¤True,ï¼Œè®¤è¯ SSL è¯ä¹¦å¼€å…³</li>
<li><code>cert</code>:æœ¬åœ°SSLè¯ä¹¦è·¯å¾„</li>
</ul>
<h3 id="ç½‘ç»œçˆ¬è™«çš„ç±»å‹"><a href="#ç½‘ç»œçˆ¬è™«çš„ç±»å‹" class="headerlink" title="ç½‘ç»œçˆ¬è™«çš„ç±»å‹"></a>ç½‘ç»œçˆ¬è™«çš„ç±»å‹</h3><p>æŒ‰ç…§å°ºå¯¸åŒºåˆ«</p>
<p>çˆ¬å–ç½‘é¡µï¼Œç©è½¬ç½‘é¡µã€‚å°è§„æ¨¡,æ•°æ®é‡å°ï¼Œçˆ¬å–é€Ÿåº¦ä¸æ•æ„Ÿ requests ã€‚</p>
<p>çˆ¬å–ç½‘ç«™ï¼Œçˆ¬å–ç³»åˆ—ç½‘ç«™. ä¸­è§„æ¨¡ï¼Œæ•°æ®è§„æ¨¡è¾ƒå¤§ï¼Œçˆ¬å–é€Ÿåº¦æ•æ„Ÿ Scrapy åº“</p>
<p>çˆ¬å–å…¨ç½‘ã€‚å¤§è§„æ¨¡,æœç´¢å¼•æ“ï¼Œçˆ¬å–é€Ÿåº¦å…³é”®,åªèƒ½å®šåˆ¶å¼€å‘</p>
<h3 id="åçˆ¬è™«"><a href="#åçˆ¬è™«" class="headerlink" title="åçˆ¬è™«"></a>åçˆ¬è™«</h3><h4 id="æ¥æºå®¡æŸ¥-åˆ¤æ–­-User-Agent-è¿›è¡Œé™åˆ¶"><a href="#æ¥æºå®¡æŸ¥-åˆ¤æ–­-User-Agent-è¿›è¡Œé™åˆ¶" class="headerlink" title="æ¥æºå®¡æŸ¥: åˆ¤æ–­ User-Agent è¿›è¡Œé™åˆ¶"></a>æ¥æºå®¡æŸ¥: åˆ¤æ–­ User-Agent è¿›è¡Œé™åˆ¶</h4><blockquote>
<p>æ£€æŸ¥æ¥è®¿ HTTP åè®®å¤´çš„ User-Agent åŸŸï¼Œåªå“åº”æµè§ˆå™¨æˆ–è€…å‹å¥½çˆ¬è™«çš„è®¿é—®ã€‚</p>
</blockquote>
<h4 id="å‘å¸ƒå…¬å‘Š-Robots-åè®®"><a href="#å‘å¸ƒå…¬å‘Š-Robots-åè®®" class="headerlink" title="å‘å¸ƒå…¬å‘Š Robots åè®®"></a>å‘å¸ƒå…¬å‘Š Robots åè®®</h4><blockquote>
<p>å‘ŠçŸ¥æ‰€æœ‰çˆ¬è™«ç½‘ç«™çš„çˆ¬å–ç­–ç•¥,è¦æ±‚çˆ¬è™«éµå®ˆ</p>
</blockquote>
<h3 id="Robots-åè®®"><a href="#Robots-åè®®" class="headerlink" title="Robots åè®®"></a>Robots åè®®</h3><p>Robots Exclusion Standard ç½‘ç»œçˆ¬è™«æ’é™¤æ ‡å‡†</p>
<p>ä½œç”¨: ç½‘ç«™å‘ŠçŸ¥ç½‘ç»œçˆ¬è™«å“ªäº›é¡µé¢å¯ä»¥æŠ“å–,å“ªäº›ä¸è¡Œã€‚<br>å½¢å¼: åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹çš„ robots.txt æ–‡ä»¶<br>ä½¿ç”¨:</p>
<ul>
<li>ç½‘ç»œçˆ¬è™«ï¼šè‡ªåŠ¨æˆ–è€…äººå·¥è¯†åˆ«robots.txtï¼Œ å†è¿›è¡Œå†…å®¹çˆ¬å–</li>
<li>çº¦æŸæ€§: Robots åè®®æ˜¯å»ºè®®ä½†éçº¦æŸæ€§,ç½‘ç»œçˆ¬è™«å¯ä»¥ä¸éµå®ˆï¼Œä½†æ˜¯å­˜åœ¨æ³•å¾‹é£é™©</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¸ªç³»åˆ—çš„æ–‡ç« æ˜¯ç”¨æ¥è®°å½•æˆ‘å­¦ä¹  python çˆ¬è™«çš„ã€‚è¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://CepheusSun.github.io/categories/python/"/>
    
    
      <category term="python" scheme="https://CepheusSun.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>iOSé¢è¯•é›†é”¦&amp;2017å¹´02æœˆ22æ—¥01</title>
    <link href="https://CepheusSun.github.io/2017/02/22/interview07022201/"/>
    <id>https://CepheusSun.github.io/2017/02/22/interview07022201/</id>
    <published>2017-02-21T16:00:00.000Z</published>
    <updated>2017-03-17T17:00:38.000Z</updated>
    
    <content type="html"><![CDATA[<ol>
<li><code>id</code> å’Œ <code>instancetype</code> çš„åŒºåˆ«?</li>
<li>æœ‰æ–¹æ³•æŸ¥çœ‹å½“å‰ç³»ç»Ÿå†…å­˜ä½¿ç”¨çš„æƒ…å†µå—ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆ NotificationCenter è¦ removeObserver? å¦‚ä½•å®ç°è‡ªåŠ¨ removeï¼Ÿ</li>
<li>iOSçš„æ²™ç›’ç›®å½•ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ App Bundle é‡Œé¢éƒ½æœ‰ä»€ä¹ˆï¼Ÿ</li>
<li>ç®€å•æè¿°ä¸€ä¸‹å®¢æˆ·ç«¯çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ</li>
</ol>
<p>æ³¨æ„ï¼š ä»¥åçš„æ›´æ–°å…¨éƒ¨æ”¾åœ¨ GitHub åšå®¢ä¸å†ç»§ç»­æ·»åŠ äº†ã€‚ æ¯•ç«Ÿå¥½å¤šå†…å®¹æ”¾åœ¨è¿™é‡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚<br><a id="more"></a></p>
<p>##2017-02-22</p>
<p>#####1. <code>id</code> å’Œ <code>instancetype</code> çš„åŒºåˆ«?</p>
<ol>
<li><p>åœ¨ ARC(Auto Reference Count)ç¯å¢ƒä¸‹:</p>
<pre><code>instancetype ç”¨æ¥åœ¨ç¼–è¯‘æœŸç¡®å®šå®ä¾‹çš„ç±»å‹,è€Œä½¿ç”¨ id çš„è¯,ç¼–è¯‘å™¨ä¸æ£€æŸ¥ç±»å‹, è¿è¡Œæ—¶æ£€æŸ¥ç±»å‹.
</code></pre><p>åœ¨ MRC(Manual Reference Count)ç¯å¢ƒä¸‹:</p>
<pre><code>instancetype å’Œ id ä¸€æ ·,ä¸åšå…·ä½“ç±»å‹æ£€æŸ¥
</code></pre></li>
<li><p>id å¯ä»¥ä½œä¸ºæ–¹æ³•çš„å‚æ•°,ä½† instancetype ä¸å¯ä»¥<br>instancetype åªé€‚ç”¨äºåˆå§‹åŒ–æ–¹æ³•å’Œä¾¿åˆ©æ„é€ å™¨çš„è¿”å›å€¼ç±»å‹</p>
</li>
</ol>
<p>#####2. æœ‰æ–¹æ³•æŸ¥çœ‹å½“å‰ç³»ç»Ÿå†…å­˜ä½¿ç”¨çš„æƒ…å†µå—ï¼Ÿ<br>ä¸€èˆ¬æˆ‘ä¸Šæ‰‹æ–°çš„é¡¹ç›®,æ£€æŸ¥å†…å­˜é—®é¢˜ä¸‰éƒ¨æ›²;</p>
<ol>
<li>é™æ€åˆ†æ, åˆæ­¥äº†è§£ä»£ç ä¸è§„èŒƒçš„åœ°æ–¹,æˆ–è€…æ˜¯ä¸€äº›å†…å­˜æ³„æ¼é—®é¢˜ã€‚</li>
<li>instrument, åˆç•¥çš„å®šä½æˆ‘ä»¬åœ¨ä»€ä¹ˆåœ°æ–¹å‘ç”Ÿäº†å†…å­˜æ³„æ¼ã€‚</li>
<li>ä»£ç æµ‹è¯•å†…å­˜æ³„æ¼, è§‚å¯Ÿå¯¹è±¡çš„ç”Ÿæˆå’Œé”€æ¯æ˜¯å¦é…å¯¹ã€‚ä½¿ç”¨MLeaksFinderæ¥é…åˆæ£€æŸ¥</li>
</ol>
<ul>
<li>ä¸¤ä¸ªå¯¹è±¡äº’ç›¸æŒæœ‰ï¼Œä¸»è¦æ˜¯ delegate ä½¿ç”¨ weak å±æ€§, åœ¨ iOS8 ä¸Šç³»ç»Ÿ delegate ä½¿ç”¨çš„æ˜¯ assign è¿™ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜,è¸©è¿‡å‘çš„è€å¸æœºå¯ä»¥æä¸€ä¸‹ã€‚</li>
<li>æœ‰æ—¶å€™éœ€è¦ä½¿ç”¨ removeFromSuperView æ¥é‡Šæ”¾, a æŒæœ‰äº† b ï¼Œ b è¢« add åˆ°äº† c ä¸Š, è€Œåœ¨ç¨‹åºè®¾è®¡ä¸­b çš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥å’Œ a ç›¸åŒ, è¿™ä¸ªæ—¶å€™ä½¿ç”¨ self.b = nil å¹¶ä¸ä¼šå§ b é‡Šæ”¾, æˆ‘ä»¬åº”è¯¥åœ¨ä¹‹å‰åŠ ä¸Š <code>[b removeFromSuperView]</code></li>
</ul>
<p>#####3. ä¸ºä»€ä¹ˆ NotificationCenter è¦ removeObserver? å¦‚ä½•å®ç°è‡ªåŠ¨ removeï¼Ÿ</p>
<ul>
<li>å¦‚æœä¸ç§»é™¤ï¼Œä¸‡ä¸€æ³¨å†Œé€šçŸ¥çš„ç±»è¢«é”€æ¯ä¹‹ååˆå‘é€äº†é€šçŸ¥, ç¨‹åºä¼š crashã€‚ å› ä¸ºé‡æŒ‡é’ˆã€‚</li>
<li>å®ç°è‡ªåŠ¨ remove;é€šè¿‡è‡ªåŠ¨é‡Šæ”¾æœºåˆ¶, é€šè¿‡åŠ¨æ€å±æ€§å°† remove è½¬ç§»ç»™ç¬¬ä¸‰è€…,è§£é™¤è€¦åˆ,è¾¾åˆ°è‡ªåŠ¨å®ç° remove ã€‚</li>
</ul>
<p>#####4. iOSçš„æ²™ç›’ç›®å½•ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ App Bundle é‡Œé¢éƒ½æœ‰ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>æ²™ç›’ç»“æ„<ul>
<li>Application: å­˜æ”¾ç¨‹åºæºæ–‡ä»¶, ä¸Šæ¶å‰ç»è¿‡æ•°å­—ç­¾å,ä¸Šæ¶åä¸å¯ä¿®æ”¹</li>
<li>Documents: å¸¸ç”¨ç›®å½•, iCloud å¤‡ä»½ç›®å½•,å­˜æ”¾æ•°æ®,è¿™é‡Œä¸èƒ½ç¼“å­˜æ–‡ä»¶,å¦åˆ™ä¸Šæ¶ä¸è¢«é€šè¿‡</li>
<li>Library<ul>
<li>Caches: å­˜æ”¾ä½“ç§¯å¤§åˆä¸éœ€è¦å¤‡ä»½çš„æ•°æ®, SDWebImage å°±æ˜¯è¿™ä¸ª</li>
<li>Preference: è®¾ç½®ç›®å½•, iCloudä¼šå¤‡ä»½è®¾ç½®ä¿¡æ¯ã€‚</li>
<li>tmp: å­˜æ”¾ä¸´æ—¶æ–‡ä»¶,ä¸ä¼šè¢«å¤‡ä»½,è€Œä¸”è¿™ä¸ªæ–‡ä»¶ä¸‹çš„æ•°æ®æœ‰å¯èƒ½éšæ—¶è¢«æ¸…é™¤</li>
</ul>
</li>
</ul>
</li>
<li>App Bundle<ul>
<li>Info.plist: æ–‡ä»¶çš„é…ç½®ä¿¡æ¯,ç³»ç»Ÿä¾èµ–æ¬¡æ–‡ä»¶è·å–åº”ç”¨ç¨‹åºçš„ç›¸å…³ä¿¡æ¯ã€‚</li>
<li>å¯æ‰§è¡Œæ–‡ä»¶: æ­¤æ–‡ä»¶åŒ…å«åº”ç”¨ç¨‹åºçš„å…¥å£å’Œé€šè¿‡é™æ€é“¾æ¥åˆ°åº”ç”¨ç¨‹åº target çš„ä»£ç ã€‚</li>
<li>èµ„æºæ–‡ä»¶: å›¾ç‰‡å£°éŸ³</li>
<li>å…¶ä»–: å¯ä»¥æ½œå…¥å®šåˆ¶çš„æ•°æ®èµ„æºã€‚</li>
</ul>
</li>
</ol>
<h5 id="5-ç®€å•æè¿°ä¸€ä¸‹å®¢æˆ·ç«¯çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ"><a href="#5-ç®€å•æè¿°ä¸€ä¸‹å®¢æˆ·ç«¯çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ" class="headerlink" title="5.ç®€å•æè¿°ä¸€ä¸‹å®¢æˆ·ç«¯çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ"></a>5.ç®€å•æè¿°ä¸€ä¸‹å®¢æˆ·ç«¯çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ</h5><ul>
<li>ç¼“å­˜å¯ä»¥åˆ†ä¸º:<ul>
<li>å†…å­˜æ•°æ®ç¼“å­˜</li>
<li>æ•°æ®åº“ç¼“å­˜</li>
<li>æ–‡ä»¶ç¼“å­˜</li>
</ul>
</li>
<li>æ¯æ¬¡æƒ³è·å–æ•°æ®çš„æ—¶å€™<ol>
<li>æ£€æŸ¥å†…å­˜ä¸­æœ‰æ— ç¼“å­˜</li>
<li>æ£€æŸ¥æœ¬åœ°æœ‰æ— ç¼“å­˜(æ•°æ®åº“\æ–‡ä»¶)</li>
<li>å‘èµ·è¯·æ±‚</li>
<li>å°†æœåŠ¡å™¨è¿”å›çš„æ•°æ®è¿›è¡Œç¼“å­˜(å†…å­˜æ•°æ®åº“æ–‡ä»¶)</li>
</ol>
</li>
</ul>
<pre><code>---
</code></pre><h5 id="å†™åœ¨åé¢çš„è¯"><a href="#å†™åœ¨åé¢çš„è¯" class="headerlink" title="å†™åœ¨åé¢çš„è¯"></a>å†™åœ¨åé¢çš„è¯</h5><p>è¿™ä¸ªç³»åˆ—æ‰€æœ‰çš„æ–‡ç« éƒ½æ˜¯åœ¨ä¸€ä¸ªQQç¾¤é‡Œé¢è·Ÿå°ä¼™ä¼´ä»¬è®¨è®ºå‡ºæ¥çš„,æ¯ä¸ª topic éƒ½å·²ç»æ”¾åœ¨äº† GitHub çš„ä¸€ä¸ªä»“åº“ä¸­ <a href="https://github.com/GetOfferSoldier/Objective-C"><strong>è¿™æ˜¯åœ°å€</strong></a>ã€‚ æ‰€æœ‰å†…å®¹çš„æ›´æ–°çš„å°†åœ¨è¿™ä¸ªä»“åº“ä¸­è¿›è¡Œ,åœ¨åšå®¢ä¸­å°†ä¸å†è¿›è¡Œæ›´æ–°ã€‚æœ‰ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥åœ¨è¿™ä¸ªä»“åº“ä¸­ç»™æˆ‘ä»¬æ issue æˆ–è€… pull request.</p>
]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;&lt;code&gt;id&lt;/code&gt; å’Œ &lt;code&gt;instancetype&lt;/code&gt; çš„åŒºåˆ«?&lt;/li&gt;
&lt;li&gt;æœ‰æ–¹æ³•æŸ¥çœ‹å½“å‰ç³»ç»Ÿå†…å­˜ä½¿ç”¨çš„æƒ…å†µå—ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä¸ºä»€ä¹ˆ NotificationCenter è¦ removeObserver? å¦‚ä½•å®ç°è‡ªåŠ¨ removeï¼Ÿ&lt;/li&gt;
&lt;li&gt;iOSçš„æ²™ç›’ç›®å½•ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ App Bundle é‡Œé¢éƒ½æœ‰ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;li&gt;ç®€å•æè¿°ä¸€ä¸‹å®¢æˆ·ç«¯çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ³¨æ„ï¼š ä»¥åçš„æ›´æ–°å…¨éƒ¨æ”¾åœ¨ GitHub åšå®¢ä¸å†ç»§ç»­æ·»åŠ äº†ã€‚ æ¯•ç«Ÿå¥½å¤šå†…å®¹æ”¾åœ¨è¿™é‡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="iOSé¢è¯•é›†é”¦" scheme="https://CepheusSun.github.io/categories/iOS%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
    
      <category term="iOSé¢è¯•é›†é”¦" scheme="https://CepheusSun.github.io/tags/iOS%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
  </entry>
  
  <entry>
    <title>iOSé¢è¯•é›†é”¦&amp;2017å¹´02æœˆ21æ—¥01</title>
    <link href="https://CepheusSun.github.io/2017/02/21/interview07022101/"/>
    <id>https://CepheusSun.github.io/2017/02/21/interview07022101/</id>
    <published>2017-02-20T16:00:00.000Z</published>
    <updated>2017-02-21T16:02:25.000Z</updated>
    
    <content type="html"><![CDATA[<ol>
<li>å†™å‡ºä¸­åºéå†äºŒå‰æ ‘çš„ç®—æ³•(ä¸é™ç¼–ç¨‹è¯­è¨€ï¼Œå·²çŸ¥ TreeRoot ä¸ºäºŒå‰æ ‘çš„æ ¹)</li>
<li>å¿«é€Ÿæ’åºï¼Œå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>UITableViewCell å¯é‡ç”¨æœºåˆ¶æ˜¯ä»€ä¹ˆ?æœ‰ä»€ä¹ˆè¦æ³¨æ„çš„åœ°æ–¹?</li>
<li>OC ä¸­çš„ @property å’Œ @synthesize æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</li>
<li>OCæœ‰æ²¡æœ‰é‡è½½(overload)å’Œé‡å†™(overwrite)ï¼Ÿæœ‰çš„è¯è¯·ä¸¾ä¸ªä¾‹å­ã€‚</li>
<li>åˆ—ä¸¾å‡º iOS å¼€å‘ä¸­ä¸‰ç§æœ€å¸¸å‡ºç°çš„å¾ªç¯å¼•ç”¨çš„åœºæ™¯ã€‚</li>
<li>MVC æ¨¡å¼å…·ä½“æŒ‡ä»€ä¹ˆï¼ŸiOSç°åœ¨æµè¡Œçš„ MVVM æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>iOS ä¸­è®¾è®¡é‡‘é’±è®¡ç®—å’Œæ¯”è¾ƒæ—¶ï¼Œç”¨æ•°å€¼åº”è¯¥ç”¨å“ªä¸ªç±»å‹æ¥å¤„ç†ï¼Ÿ</li>
<li>iOS ä¸Šè§¦æ‘¸äº‹ä»¶çš„è§†å›¾æ£€æµ‹å’Œäº‹ä»¶ä¼ é€’è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ  </li>
<li>å†™ä¸€ä¸ªæŠ˜åŠæŸ¥æ‰¾æˆ–è€…å¿«é€Ÿæ’åº</li>
</ol>
<a id="more"></a>
<p>#####1.å†™å‡ºä¸­åºéå†äºŒå‰æ ‘çš„ç®—æ³•(ä¸é™ç¼–ç¨‹è¯­è¨€ï¼Œå·²çŸ¥ TreeRoot ä¸ºäºŒå‰æ ‘çš„æ ¹)ã€‚  </p>
<pre><code>æœ€è¿‘åœ¨å­¦ Python æ‰€ä»¥æ•´ç†äº†ä¸€ä¸ª Python ç‰ˆçš„
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -- coding: UTF-8 --</span></div><div class="line"><span class="comment"># @Date    : 2017-02-21</span></div><div class="line"><span class="comment"># @Author  : CepheusSun</span></div><div class="line"><span class="comment"># @Version : python 2.7</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tree</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, data, left, right)</span>:</span></div><div class="line">        self.data = data</div><div class="line">        self.left = left</div><div class="line">        self.right = right</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">in_visit</span><span class="params">(tree)</span>:</span></div><div class="line">    <span class="string">"""é€’å½’ä¸­åºéå†"""</span></div><div class="line">    <span class="keyword">if</span> tree:</div><div class="line">        in_visit(tree.left)</div><div class="line">        <span class="keyword">print</span> (tree.data)</div><div class="line">        in_visit(tree.right)</div><div class="line">        </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">in_stack</span><span class="params">(tree)</span>:</span></div><div class="line">    <span class="string">"""å †æ ˆä¸­åºéå†"""</span></div><div class="line">    <span class="keyword">if</span> tree:</div><div class="line">        my_stack = []</div><div class="line">        node = tree</div><div class="line">        <span class="keyword">while</span> node <span class="keyword">or</span> my_stack:</div><div class="line">            <span class="keyword">while</span> node:</div><div class="line">                my_stack.append(node)</div><div class="line">                node = node.left</div><div class="line">            node = my_stack.pop()</div><div class="line">            print(node.data)</div><div class="line">            node = node.right</div><div class="line"></div><div class="line">            <span class="keyword">print</span> my_stack2.pop().data</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    node1 = Tree(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</div><div class="line">    node2 = Tree(<span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>)</div><div class="line">    node3 = Tree(<span class="number">3</span>, node1, node2)</div><div class="line">    node4 = Tree(<span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>)</div><div class="line">    node5 = Tree(<span class="number">5</span>, node4, node3)</div><div class="line">    print(<span class="string">"the post_visit is ..."</span>)</div><div class="line">    post_visit(node5)</div><div class="line">    post_stack(node5)</div><div class="line">    print(<span class="string">"the pre_visit is ..."</span>)</div><div class="line">    pre_visit(node5)</div><div class="line">    pre_stack(node5)</div><div class="line">    print(<span class="string">"the in_visit is ..."</span>)</div><div class="line">    in_visit(node5)</div><div class="line">    in_stack(node5)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>
<h5 id="2-å¿«é€Ÿæ’åºï¼Œå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-å¿«é€Ÿæ’åºï¼Œå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.å¿«é€Ÿæ’åºï¼Œå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.å¿«é€Ÿæ’åºï¼Œå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h5><ul>
<li>å½’å¹¶æ’åºï¼šç¨³å®šï¼Œæ—¶é—´å¤æ‚åº¦ O(nlog n)</li>
<li>å¿«é€Ÿæ’åºï¼šä¸ç¨³å®šï¼Œæ—¶é—´å¤æ‚åº¦ æœ€ç†æƒ³ O(nlogn) æœ€å·®æ—¶é—´O(n^2)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -- coding: UTF-8 --</span></div><div class="line"><span class="comment"># @Date    : 2017-02-21</span></div><div class="line"><span class="comment"># @Author  : CepheusSun</span></div><div class="line"><span class="comment"># @Version : python 2.7</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">quick_sort</span><span class="params">(array, first_index, last_index)</span>:</span></div><div class="line">    <span class="string">"""å¿«é€Ÿæ’åº"""</span></div><div class="line">    <span class="keyword">if</span> first_index &lt; last_index:</div><div class="line">        div_index = partition(array, first_index, last_index)</div><div class="line">        quick_sort(array, first_index, div_index)</div><div class="line">        quick_sort(array, div_index + <span class="number">1</span>, last_index)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(array, first_index, last_index)</span>:</span></div><div class="line">    i = first_index - <span class="number">1</span></div><div class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(first_index, last_index):</div><div class="line">        <span class="keyword">if</span> array[j] &lt;= array[last_index]:</div><div class="line">            i += <span class="number">1</span></div><div class="line">            array[i], array[j] = array[j], array[i]</div><div class="line">    array[i + <span class="number">1</span>], array[last_index] = array[last_index], array[i + <span class="number">1</span>]</div><div class="line">    <span class="keyword">return</span> i</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span><span class="params">(left, right)</span>:</span></div><div class="line">    i, j = <span class="number">0</span>, <span class="number">0</span></div><div class="line">    res = []</div><div class="line">    <span class="keyword">while</span> i &lt; len(left) <span class="keyword">and</span> j &lt; len(right):</div><div class="line">        <span class="keyword">if</span> left[i] &lt;= right[j]:</div><div class="line">            res.append(left[i])</div><div class="line">            i += <span class="number">1</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            res.append(right[j])</div><div class="line">            j += <span class="number">1</span></div><div class="line">    res += left[i:]</div><div class="line">    res += right[j:]</div><div class="line">    <span class="keyword">return</span> res</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_sort</span><span class="params">(array)</span>:</span></div><div class="line">    <span class="string">"""å¹¶å½’æ’åº"""</span></div><div class="line">    <span class="keyword">if</span> len(array) &lt;= <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span> array</div><div class="line">    num = len(array) / <span class="number">2</span></div><div class="line">    left = merge_sort(array[:num])</div><div class="line">    right = merge_sort(array[num:])</div><div class="line">    <span class="keyword">return</span> merge(left, right)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    array = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">76</span>, <span class="number">5</span>, <span class="number">567</span>, <span class="number">54</span>, <span class="number">6</span>, <span class="number">54</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">0</span>]</div><div class="line">    print(<span class="string">"initial array : \n"</span>, array)</div><div class="line">    print(<span class="string">"merge sort result: \n"</span>, merge_sort(array))</div><div class="line">    quick_sort(array, <span class="number">0</span>, len(array) - <span class="number">1</span>)</div><div class="line">    print(<span class="string">"result array :\n"</span>, array)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    main()</div><div class="line"></div><div class="line">``` </div><div class="line">    </div><div class="line"><span class="comment">##### 3.UITableViewCell å¯é‡ç”¨æœºåˆ¶æ˜¯ä»€ä¹ˆ?æœ‰ä»€ä¹ˆè¦æ³¨æ„çš„åœ°æ–¹?</span></div><div class="line"></div><div class="line">UITableView é€šè¿‡é‡ç”¨å•å…ƒæ ¼æ¥è¾¾åˆ°èŠ‚çœå†…å­˜çš„ç›®çš„ï¼šé€šè¿‡ä¸ºæ¯ä¸ªå•å…ƒæ ¼æŒ‡å®šä¸€ä¸ªé‡ç”¨æ ‡è¯†ç¬¦ï¼Œå³æŒ‡å®šæ¥å•å…ƒæ ¼çš„ç§ç±»ï¼Œä»¥åŠå½“å•å…ƒæ ¼æ»šå‡ºå±å¹•æ—¶ï¼Œå…è®¸æ¢å¤å•å…ƒæ ¼ä»¥ä¾¿é‡ç”¨ã€‚å¯¹äºä¸åŒç§ç±»çš„å•å…ƒæ ¼ä½¿ç”¨ä¸åŒçš„IDï¼Œå¯¹äºç®€å•çš„è¡¨æ ¼ï¼Œä¸€ä¸ªæ ‡è¯†ç¬¦å°±å¤Ÿäº†ã€‚</div><div class="line"></div><div class="line">éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</div><div class="line">    å–å‡ºæ¥çš„cellæ˜¯æœ‰å¯èƒ½å·²ç»æ†ç»‘è¿‡æ•°æ®æˆ–è€…åŠ è¿‡å­è§†å›¾çš„ï¼Œå¦‚æœæœ‰å¿…è¦ï¼Œè¦æ¸…é™¤éœ€è¦ç”¨ä¸æ˜¾ç¤ºçš„æ•°æ®å’Œremoveæ‰addè¿‡çš„å­è§†å›¾ã€‚ä¸ç„¶ä¼šé€ æˆé”™ä¹±çš„æƒ…å†µ</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">##### 4.OC ä¸­çš„ @property å’Œ @synthesize æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</span></div><div class="line"></div><div class="line">ç­”ï¼š</div><div class="line">iOS2<span class="number">.0</span> Appleå¼•å…¥ `@property` `@synthesize` æ¦‚å¿µï¼Œä¸¤è€…ç»„åˆä½¿ç”¨å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ `seter` `geter`æ–¹æ³•ï¼ŒiOS4<span class="number">.0</span>ä»¥ååªéœ€è¦ `@property` å³å¯å®ç° è‡ªåŠ¨ç”Ÿæˆ `seter` `geter`æ–¹æ³•ã€‚</div></pre></td></tr></table></figure>
<p>//setter</p>
<ul>
<li>(void)setObjStr:(NSString *)objStr {<br>   if (_ objStr != objStr) {<pre><code>[_objStr release];
 _objStr = [objStr copy];
</code></pre>   }<br>}<br>//getter</li>
<li>(NSString *)objStr {<br>   return _objStr;<br>}<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ä»¥ä¸Šä»£ç ç­‰ä»·äº</div></pre></td></tr></table></figure>
</li>
</ul>
<p>//iOS2.0-iOS4.0<br>@interface Obj : NSObject<br>@property (nonatomic, copy) NSString *objStr;<br>@end</p>
<p>@implementation Object<br>@synthesize objStr = _ objStr;<br>@end<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iOS4.0åŠä»¥å</div></pre></td></tr></table></figure></p>
<p>@interface Obj : NSObject<br>@property (nonatomic, copy) NSString *objStr;<br>@end<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">##### 5.OCæœ‰æ²¡æœ‰é‡è½½(overload)å’Œé‡å†™(overwrite)ï¼Ÿæœ‰çš„è¯è¯·ä¸¾ä¸ªä¾‹å­ã€‚</div><div class="line"></div><div class="line">ç­”ï¼š</div><div class="line">OC è¯­è¨€ä¸æ”¯æŒé‡è½½</div><div class="line"></div><div class="line">```oc</div><div class="line">-(void)doSth:(NSInteger)integer;</div><div class="line">-(void)doSth:(NSString *)str; </div><div class="line">//å¯¹Objective-Cè€Œè¨€æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å«æ–¹æ³•doSth: åŒæ—¶å®šä¹‰å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡çš„ã€‚ è‹¥è¦è¾¾åˆ°ç±»ä¼¼é‡è½½çš„æ•ˆæœï¼Œå¯ä»¥è¿™æ ·è·Ÿä¸åŒå‚æ•°ï¼š</div><div class="line">-(void)doSthWithInt:(NSInteger)integer;</div><div class="line">-(void)doSthWithStr:(NSString *)str</div></pre></td></tr></table></figure></p>
<p>OC æ”¯æŒé‡å†™</p>
<pre><code>å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•
</code></pre><h5 id="6-åˆ—ä¸¾å‡º-iOS-å¼€å‘ä¸­ä¸‰ç§æœ€å¸¸å‡ºç°çš„å¾ªç¯å¼•ç”¨çš„åœºæ™¯ã€‚"><a href="#6-åˆ—ä¸¾å‡º-iOS-å¼€å‘ä¸­ä¸‰ç§æœ€å¸¸å‡ºç°çš„å¾ªç¯å¼•ç”¨çš„åœºæ™¯ã€‚" class="headerlink" title="6.åˆ—ä¸¾å‡º iOS å¼€å‘ä¸­ä¸‰ç§æœ€å¸¸å‡ºç°çš„å¾ªç¯å¼•ç”¨çš„åœºæ™¯ã€‚"></a>6.åˆ—ä¸¾å‡º iOS å¼€å‘ä¸­ä¸‰ç§æœ€å¸¸å‡ºç°çš„å¾ªç¯å¼•ç”¨çš„åœºæ™¯ã€‚</h5><p>ç­”ï¼š</p>
<ul>
<li>delegate è¢«å¼ºå¼•ç”¨äº†ï¼Œä»£ç†åº”è¯¥ä½¿ç”¨ weak (æ‹“å±• weak å¹²äº†å•¥ä½¿è‡ªå·±å¯ä»¥é˜²æ­¢å¾ªç¯çš„å‡ºç°)  </li>
<li>ä½¿ç”¨ block çš„æ—¶å€™ï¼Œæ³¨æ„æ˜¯å¦å‡ºç°äº’ç›¸æŒæœ‰ã€‚  </li>
<li>ä½¿ç”¨ NSTimer çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä½¿<code>+scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:</code> è¿™ä¸ªæ–¹æ³•åœ¨å»ºç«‹çš„æ—¶å€™éœ€è¦æŒ‡å®š target ï¼Œä¼šè¢« timer retain ä¸€ä»½ã€‚å› ä¸º timer è¿˜åœ¨ä¸€ç›´æ‰§è¡Œï¼Œå°±ä¼šå¯¼è‡´æ— æ³•è¿è¡Œ deallocçš„æ–¹æ³•ã€‚æ­£ç¡®çš„åšæ³•æ˜¯åœ¨ viewDidDisappear: çš„æ—¶å€™åœæ­¢timer </li>
</ul>
<h5 id="7-MVC-æ¨¡å¼å…·ä½“æŒ‡ä»€ä¹ˆï¼ŸiOSç°åœ¨æµè¡Œçš„-MVVM-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#7-MVC-æ¨¡å¼å…·ä½“æŒ‡ä»€ä¹ˆï¼ŸiOSç°åœ¨æµè¡Œçš„-MVVM-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="7.MVC æ¨¡å¼å…·ä½“æŒ‡ä»€ä¹ˆï¼ŸiOSç°åœ¨æµè¡Œçš„ MVVM æ˜¯ä»€ä¹ˆï¼Ÿ"></a>7.MVC æ¨¡å¼å…·ä½“æŒ‡ä»€ä¹ˆï¼ŸiOSç°åœ¨æµè¡Œçš„ MVVM æ˜¯ä»€ä¹ˆï¼Ÿ</h5><p>MVCï¼š</p>
<pre><code>MVCæ¨¡å¼è€ƒè™‘ä¸‰ç§å¯¹è±¡ï¼šæ¨¡å‹å¯¹è±¡ã€è§†å›¾å¯¹è±¡å’Œæ§åˆ¶å™¨å¯¹è±¡ã€‚ æ¨¡å‹å¯¹è±¡è´Ÿè´£åº”ç”¨ç¨‹åºçš„æ•°æ®å’Œå®šä¹‰æ“ä½œæ•°æ®çš„é€»è¾‘ï¼› è§†å›¾å¯¹è±¡çŸ¥é“å¦‚ä½•æ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„æ¨¡å‹æ•°æ®ï¼› æ§åˆ¶å™¨å¯¹è±¡æ˜¯Mä¸Vä¹‹é—´çš„åè°ƒè€…ã€‚
</code></pre><p>MVVMï¼š</p>
<pre><code>MVVM æŠŠ View Controller ä½œä¸º View
View å’Œ Model ä¹‹é—´æ²¡æœ‰ç´§è€¦åˆ
MVVM æ˜¯åœ¨ View å’Œ ViewModel ä¹‹é—´è¿›è¡Œç»‘å®šã€‚
ä»€ä¹ˆæ˜¯ ViewModel å‘¢ï¼ŸåŸºæœ¬ä¸Šæ¥è¯´ï¼Œå®ƒæ˜¯ View å’Œ View çŠ¶æ€çš„ç‹¬ç«‹äº     UIKit å¤–çš„ä¸€ä¸ªå‘ˆç°ï¼ŒViewModel è°ƒç”¨ Model ä¸­çš„çš„å˜åŒ–ï¼Œæ ¹æ® Model çš„å˜åŒ–è¿›è¡Œè°ƒæ•´ï¼Œå¹¶ä¸”é€šè¿‡ View å’Œ ViewModel çš„ç»‘å®šï¼ŒåŒæ­¥è°ƒæ•´ Viewã€‚
</code></pre><h5 id="8-iOS-ä¸­è®¾è®¡é‡‘é’±è®¡ç®—å’Œæ¯”è¾ƒæ—¶ï¼Œç”¨æ•°å€¼åº”è¯¥ç”¨å“ªä¸ªç±»å‹æ¥å¤„ç†ï¼Ÿ"><a href="#8-iOS-ä¸­è®¾è®¡é‡‘é’±è®¡ç®—å’Œæ¯”è¾ƒæ—¶ï¼Œç”¨æ•°å€¼åº”è¯¥ç”¨å“ªä¸ªç±»å‹æ¥å¤„ç†ï¼Ÿ" class="headerlink" title="8.iOS ä¸­è®¾è®¡é‡‘é’±è®¡ç®—å’Œæ¯”è¾ƒæ—¶ï¼Œç”¨æ•°å€¼åº”è¯¥ç”¨å“ªä¸ªç±»å‹æ¥å¤„ç†ï¼Ÿ"></a>8.iOS ä¸­è®¾è®¡é‡‘é’±è®¡ç®—å’Œæ¯”è¾ƒæ—¶ï¼Œç”¨æ•°å€¼åº”è¯¥ç”¨å“ªä¸ªç±»å‹æ¥å¤„ç†ï¼Ÿ</h5><ul>
<li><code>NSDecimalNumber</code> ç»§æ‰¿äº <code>NSNumber</code>   </li>
<li><p><code>NSDecimalNumber</code> åŒ…å«  åŠ å‡ä¹˜é™¤ï¼Œå¹‚è¿ç®—ï¼ŒæŒ‡æ•°è¿ç®—ï¼Œå››èˆäº”å…¥ï¼Œæ¯”è¾ƒè¿ç®—ã€‚  </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line">	/** ç¤ºä¾‹ æ¯”è¾ƒè¿ç®—</div><div class="line">	NSOrderedAscending å‡åº</div><div class="line">	NSOrderedSame ç›¸ç­‰</div><div class="line">	NSOrderedDescending é™åº</div><div class="line">	- (NSComparisonResult)compare:(NSNumber *)decimalNumber;</div><div class="line">	*/</div><div class="line">	NSDecimalNumber *discount1 = [NSDecimalNumber decimalNumberWithString:@&quot;1.2&quot;];</div><div class="line">	NSDecimalNumber *discount2 = [NSDecimalNumber decimalNumberWithString:@&quot;1.3&quot;];</div><div class="line">	NSComparisonResult result = [discount1 compare:discount2];</div><div class="line">	if (result == NSOrderedAscending) &#123;</div><div class="line">	    NSLog(@&quot;1.2 &lt; 1.3&quot;);</div><div class="line">	&#125; else if (result == NSOrderedSame) &#123;</div><div class="line">	    NSLog(@&quot;1.2 == 1.3&quot;);</div><div class="line">	&#125; else if (result == NSOrderedDescending) &#123;</div><div class="line">	    NSLog(@&quot;1.2 &gt; 1.3&quot;);</div><div class="line">	&#125;</div><div class="line">	è¾“å‡ºç»“æœ 1.2 &lt; 1.3</div><div class="line">	``` </div><div class="line"></div><div class="line">##### 9.iOS ä¸Šè§¦æ‘¸äº‹ä»¶çš„è§†å›¾æ£€æµ‹å’Œäº‹ä»¶ä¼ é€’è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ  </div><div class="line"></div><div class="line">* å‘ç”Ÿè§¦æ‘¸äº‹ä»¶åï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚(ä¸ºä»€ä¹ˆæ˜¯é˜Ÿåˆ—è€Œä¸æ˜¯æ ˆï¼Ÿå› ä¸ºé˜Ÿåˆ—çš„ç‰¹å®šæ˜¯å…ˆè¿›å…ˆå‡ºï¼Œå…ˆäº§ç”Ÿçš„äº‹ä»¶å…ˆå¤„ç†æ‰ç¬¦åˆå¸¸ç†ï¼Œæ‰€ä»¥æŠŠäº‹ä»¶æ·»åŠ åˆ°é˜Ÿåˆ—ã€‚)</div><div class="line"></div><div class="line">* UIApplicationä¼šä»äº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶åˆ†å‘ä¸‹å»ä»¥ä¾¿å¤„ç†ï¼Œé€šå¸¸ï¼Œå…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£ï¼ˆkeyWindowï¼‰ã€‚</div><div class="line"></div><div class="line">* ä¸»çª—å£ä¼šåœ¨è§†å›¾å±‚æ¬¡ç»“æ„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„è§†å›¾æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ªäº‹ä»¶å¤„ç†è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ã€‚</div><div class="line">æ‰¾åˆ°åˆé€‚çš„è§†å›¾æ§ä»¶åï¼Œå°±ä¼šè°ƒç”¨è§†å›¾æ§ä»¶çš„touchesæ–¹æ³•æ¥ä½œå…·ä½“çš„äº‹ä»¶å¤„ç†ã€‚</div><div class="line"></div><div class="line">##### 10.å†™ä¸€ä¸ªæŠ˜åŠæŸ¥æ‰¾æˆ–è€…å¿«é€Ÿæ’åº</div><div class="line"></div><div class="line">    ç”¨ Pythonå†™äº†ä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾</div><div class="line">    </div><div class="line">```python</div><div class="line"># -- coding: UTF-8 --</div><div class="line"># @Date    : 2017-02-21</div><div class="line"># @Author  : CepheusSun</div><div class="line"># @Version : python 2.7</div><div class="line"></div><div class="line"></div><div class="line">def in_bisect(word_list, word):</div><div class="line">    &quot;&quot;&quot;check weather a word is in a list using bisection search.</div><div class="line">    Precondition: the words in the list are sorted</div><div class="line"></div><div class="line">    :param word_list: list of strings</div><div class="line">    :param word: string</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    if len(word_list) == 0:</div><div class="line">        return False</div><div class="line"></div><div class="line">    # ç»“æœå››èˆäº”å…¥</div><div class="line">    i = len(word_list) // 2</div><div class="line">    if word_list[i] == word:</div><div class="line">        return True</div><div class="line"></div><div class="line">    if word_list[i] &gt; word:</div><div class="line">        # search the first half</div><div class="line">        return in_bisect(word_list[:i], word)</div><div class="line">    else:</div><div class="line">        # search the second half</div><div class="line">        return in_bisect(word_list[i + 1:], word)</div><div class="line"></div><div class="line"></div><div class="line">def main():</div><div class="line">    array = [&apos;1&apos;, &apos;asf&apos;, &apos;sf2&apos;, &apos;df1&apos;, &apos;2das&apos;, &apos;5asdfd&apos;, &apos;0sadf&apos;,</div><div class="line">            &apos;2ge&apos;, &apos;efc2&apos;, &apos;1eds&apos;, &apos;2ef&apos;, &apos;2apple&apos;, &apos;apple&apos;, &apos;orange&apos;]</div><div class="line">    print(in_bisect(array, &apos;1&apos;))</div><div class="line">    print(in_bisect(array, &apos;111&apos;))</div><div class="line"></div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    main()</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>å‚è€ƒèµ„æ–™</strong><br><a href="http://blog.sina.com.cn/s/blog_771849d301010ta0.html">èµ„æ–™1</a></p>
<p><a href="https://my.oschina.net/iamzkt/blog/126503">Objective-C ä¹‹ @propertyå’Œ@synthesize</a>  </p>
<p><a href="https://www.pupboss.com/property-and-synthesize/">å›ç‚‰ç¯‡ä¹‹ï¼ˆä¸€ï¼‰â€“ @propertyå’Œ@synthesize</a>  </p>
<p><a href="http://arthurchen.blog.51cto.com/2483760/761426">iOSå¼€å‘ï¼šObjective-Cç²¾ç¡®çš„è´§å¸è®¡ç®—</a> </p>
<p><a href="http://www.jianshu.com/p/4703d704c953">â€˜NSDecimalNumberâ€“åè¿›åˆ¶æ•°â€™ä½¿ç”¨æ–¹æ³•(å¸¦ä¾‹å­)</a></p>
<p><a href="https://yq.aliyun.com/wenzhang/show_41715">objective c-OCä¸­æœ‰æ–¹æ³•é‡è½½å—ï¼Ÿå…·ä½“æ˜¯æ€ä¹ˆæ ·ï¼Ÿ</a></p>
<p>think python</p>
<hr>
<h5 id="å†™åœ¨åé¢çš„è¯"><a href="#å†™åœ¨åé¢çš„è¯" class="headerlink" title="å†™åœ¨åé¢çš„è¯"></a>å†™åœ¨åé¢çš„è¯</h5><p>è¿™ä¸ªç³»åˆ—æ‰€æœ‰çš„æ–‡ç« éƒ½æ˜¯åœ¨ä¸€ä¸ªQQç¾¤é‡Œé¢è·Ÿå°ä¼™ä¼´ä»¬è®¨è®ºå‡ºæ¥çš„,æ¯ä¸ª topic éƒ½å·²ç»æ”¾åœ¨äº† GitHub çš„ä¸€ä¸ªä»“åº“ä¸­ <a href="https://github.com/GetOfferSoldier/Objective-C"><strong>è¿™æ˜¯åœ°å€</strong></a>ã€‚ æ‰€æœ‰å†…å®¹çš„æ›´æ–°çš„å°†åœ¨è¿™ä¸ªä»“åº“ä¸­è¿›è¡Œ,åœ¨åšå®¢ä¸­å°†ä¸å†è¿›è¡Œæ›´æ–°ã€‚æœ‰ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥åœ¨è¿™ä¸ªä»“åº“ä¸­ç»™æˆ‘ä»¬æ issue æˆ–è€… pull request.</p>
]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;å†™å‡ºä¸­åºéå†äºŒå‰æ ‘çš„ç®—æ³•(ä¸é™ç¼–ç¨‹è¯­è¨€ï¼Œå·²çŸ¥ TreeRoot ä¸ºäºŒå‰æ ‘çš„æ ¹)&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿæ’åºï¼Œå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;li&gt;UITableViewCell å¯é‡ç”¨æœºåˆ¶æ˜¯ä»€ä¹ˆ?æœ‰ä»€ä¹ˆè¦æ³¨æ„çš„åœ°æ–¹?&lt;/li&gt;
&lt;li&gt;OC ä¸­çš„ @property å’Œ @synthesize æœ‰ä»€ä¹ˆç”¨ï¼Ÿ&lt;/li&gt;
&lt;li&gt;OCæœ‰æ²¡æœ‰é‡è½½(overload)å’Œé‡å†™(overwrite)ï¼Ÿæœ‰çš„è¯è¯·ä¸¾ä¸ªä¾‹å­ã€‚&lt;/li&gt;
&lt;li&gt;åˆ—ä¸¾å‡º iOS å¼€å‘ä¸­ä¸‰ç§æœ€å¸¸å‡ºç°çš„å¾ªç¯å¼•ç”¨çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;MVC æ¨¡å¼å…·ä½“æŒ‡ä»€ä¹ˆï¼ŸiOSç°åœ¨æµè¡Œçš„ MVVM æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;li&gt;iOS ä¸­è®¾è®¡é‡‘é’±è®¡ç®—å’Œæ¯”è¾ƒæ—¶ï¼Œç”¨æ•°å€¼åº”è¯¥ç”¨å“ªä¸ªç±»å‹æ¥å¤„ç†ï¼Ÿ&lt;/li&gt;
&lt;li&gt;iOS ä¸Šè§¦æ‘¸äº‹ä»¶çš„è§†å›¾æ£€æµ‹å’Œäº‹ä»¶ä¼ é€’è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ  &lt;/li&gt;
&lt;li&gt;å†™ä¸€ä¸ªæŠ˜åŠæŸ¥æ‰¾æˆ–è€…å¿«é€Ÿæ’åº&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="iOSé¢è¯•é›†é”¦" scheme="https://CepheusSun.github.io/categories/iOS%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
    
      <category term="iOSé¢è¯•é›†é”¦" scheme="https://CepheusSun.github.io/tags/iOS%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
  </entry>
  
  <entry>
    <title>iOSé¢è¯•é›†é”¦&amp;2017å¹´02æœˆ20æ—¥01</title>
    <link href="https://CepheusSun.github.io/2017/02/20/interview07022001/"/>
    <id>https://CepheusSun.github.io/2017/02/20/interview07022001/</id>
    <published>2017-02-19T16:00:00.000Z</published>
    <updated>2017-02-22T17:09:41.000Z</updated>
    
    <content type="html"><![CDATA[<ol>
<li>å¯¹å†…å­˜ç®¡ç†çš„ç†è§£ã€‚</li>
<li>ç±»åˆ«çš„ä½œç”¨</li>
<li>ç‚¹å‡»å±å¹•ä¸Šçš„æŒ‰é’®ï¼Œç³»ç»Ÿåšäº†ä»€ä¹ˆï¼Ÿ</li>
</ol>
<a id="more"></a>
<p>##2017-02-20  Question<br>Question 1.å†…å­˜ç®¡ç†ç†è§£ä¸æ­£ç¡®çš„æ˜¯<br>A ç¨‹åºAé‡Œæœ‰ä¸€æ®µå†…å­˜è¢«æˆåŠŸç”³è¯·å®Œæˆä¹‹åï¼Œå†…å­˜è®¡æ•°å™¨å°±ä»0å˜ä¸º1 (è¿™ä¸ªè¿‡ç¨‹æ˜¯alloc);<br>B ç¨‹åºBé‡Œè¦ä½¿ç”¨å·²å­˜åœ¨å†…å­˜ï¼Œé‚£ä¹ˆå†…å­˜è®¡æ•°å™¨ä»1å˜ä¸º2 (è¿™ä¸ªè¿‡ç¨‹æ˜¯retainæˆ–è€…copy);<br>C ç´§æ¥ç€ç¨‹åºAä¸éœ€è¦è¿™ä¸ªå†…å­˜äº†ï¼Œé‚£ä¹ˆç¨‹åºAå°±æŠŠè¿™ä¸ªå†…å­˜è®¡æ•°å™¨å‡1 (è¿™ä¸ªè¿‡ç¨‹æ˜¯release);<br>D å½“ç³»ç»Ÿå‘ç°è¿™ä¸ªå†…å­˜è®¡æ•°å™¨å˜ä¸ºå°äºç­‰äº0ï¼Œé‚£ä¹ˆå°±è°ƒç”¨åƒåœ¾å›æ”¶ç¨‹åºæŠŠè¿™æ®µå†…å­˜å›æ”¶(è¿™ä¸ªè¿‡ç¨‹æ˜¯dealloc)ï¼›</p>
<p>Question 2.ç±»åˆ«çš„ä½œç”¨ä¸æ­£ç¡®çš„æ˜¯<br>A å°†ç±»çš„å®ç°åˆ†æ•£åˆ°å¤šä¸ªä¸åŒæ–‡ä»¶æˆ–å¤šä¸ªä¸åŒæ¡†æ¶ä¸­ã€‚<br>B åˆ›å»ºå¯¹ç§æœ‰æ–¹æ³•çš„å‰å‘å¼•ç”¨ã€‚<br>C å‘å¯¹è±¡æ·»åŠ éæ­£å¼åè®®ã€‚ ç»§æ‰¿å¯ä»¥å¢åŠ ï¼Œä¿®æ”¹æˆ–è€…åˆ é™¤æ–¹æ³•ã€‚<br>D ä¸èƒ½æ·»åŠ å±æ€§  </p>
<p>Question 3.ç‚¹å‡»å±å¹•ä¸Šçš„æŒ‰é’®ï¼Œç³»ç»Ÿåšäº†ä»€ä¹ˆï¼Ÿ  </p>
<h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><p>Answer 1. B  ä½¿ç”¨å¹¶ä¸ä¼šå¢åŠ å¼•ç”¨æŠ€æœ¯ï¼ŒæŒæœ‰æ‰ä¼šã€‚<br>Answer 2. D  </p>
<pre><code>class-continuationåˆ†ç±»æ˜¯å”¯ä¸€èƒ½ç»™æ·»åŠ å±æ€§çš„åˆ†ç±»ã€‚è€Œæ‰€è°“çš„å…³è”å¯¹è±¡ï¼Œæˆ‘åœ¨52ä¸ªæ–¹æ³•ä¸­æ‰¾åˆ°äº†è¿™æ ·ä¸€å¥è¯ï¼š
    * â€œå®šä¹‰å…³è”å¯¹è±¡æ—¶å¯ä»¥æŒ‡å®šå†…å­˜ç®¡ç†è¯­ä¹‰ï¼Œç”¨ä»¥æ¨¡ä»¿å®šä¹‰å±æ€§æ—¶æ‰€é‡‡ç”¨çš„â€œæ‹¥æœ‰â€å’Œâ€œéæ‹¥æœ‰å…³ç³»â€â€
å¯è§ï¼Œå…³è¿å¯¹è±¡è·Ÿå±æ€§æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œä¸èƒ½æ··ä¸ºä¸€è°ˆã€‚

ç±»åˆ«çš„ä¸‰ä¸ªä½œç”¨ï¼š
    * å¯ä»¥å°†ç±»çš„å®ç°åˆ†æ•£åˆ°å¤šä¸ªä¸åŒæ–‡ä»¶æˆ–å¤šä¸ªä¸åŒæ¡†æ¶ä¸­ï¼Œæ–¹ä¾¿ä»£ç ç®¡ç†ã€‚
    * åˆ›å»ºå¯¹ç§æœ‰æ–¹æ³•çš„å‰å‘å¼•ç”¨ã€‚æ¯”å¦‚åœ¨åˆ«äººçš„ç±»æˆ–è€…æ¡†æ¶ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•çš„æ˜¯æ²¡æœ‰è¯´æ˜çš„ï¼Œè¿™æ—¶å€™é€šè¿‡ç±»åˆ«å£°æ˜è¿™ä¸ªæ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨ä¸ç ´ååŸæ¥æ¡†æ¶çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨åˆ°è¿™ä¸ªæ–¹æ³•ã€‚
    * å‘å¯¹è±¡æ·»åŠ éæ­£å¼åè®®ã€‚
</code></pre><p>Answer 3.   </p>
<ul>
<li>è§¦æ‘¸äº‹ä»¶çš„ä¼ é€’æ˜¯ä»çˆ¶ç©ºé—´ä¼ é€’åˆ°å­æ§ä»¶ï¼Œå¦‚æœçˆ¶ç©ºé—´ä¸èƒ½æ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Œé‚£ä¹ˆå­æ§ä»¶å°±ä¸èƒ½æ¥æ”¶è§¦æ‘¸äº‹ä»¶  </li>
<li>å‘ç”Ÿè§¦æ‘¸äº‹ä»¶åï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚(ä¸ºä»€ä¹ˆæ˜¯é˜Ÿåˆ—è€Œä¸æ˜¯æ ˆï¼Ÿå› ä¸ºé˜Ÿåˆ—çš„ç‰¹å®šæ˜¯å…ˆè¿›å…ˆå‡ºï¼Œå…ˆäº§ç”Ÿçš„äº‹ä»¶å…ˆå¤„ç†æ‰ç¬¦åˆå¸¸ç†ï¼Œæ‰€ä»¥æŠŠäº‹ä»¶æ·»åŠ åˆ°é˜Ÿåˆ—ã€‚)  </li>
<li>UIApplicationä¼šä»äº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶åˆ†å‘ä¸‹å»ä»¥ä¾¿å¤„ç†ï¼Œé€šå¸¸ï¼Œå…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£ï¼ˆkeyWindowï¼‰ã€‚  </li>
<li>ä¸»çª—å£ä¼šåœ¨è§†å›¾å±‚æ¬¡ç»“æ„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„è§†å›¾æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ªäº‹ä»¶å¤„ç†è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ã€‚<br>æ‰¾åˆ°åˆé€‚çš„è§†å›¾æ§ä»¶åï¼Œå°±ä¼šè°ƒç”¨è§†å›¾æ§ä»¶çš„touchesæ–¹æ³•æ¥ä½œå…·ä½“çš„äº‹ä»¶å¤„ç†ã€‚  </li>
</ul>
<blockquote>
<p>å‚è€ƒ<br><a href="http://www.cnblogs.com/LiLihongqiang/p/5645907.html">http://www.cnblogs.com/LiLihongqiang/p/5645907.html</a><br><a href="http://www.infocool.net/kb/IOS/201610/200104.html">http://www.infocool.net/kb/IOS/201610/200104.html</a><br><a href="http://www.cocoachina.com/ios/20160113/14896.html">http://www.cocoachina.com/ios/20160113/14896.html</a><br><a href="http://www.jianshu.com/p/2e074db792ba">http://www.jianshu.com/p/2e074db792ba</a>  </p>
</blockquote>
<hr>
<h5 id="å†™åœ¨åé¢çš„è¯"><a href="#å†™åœ¨åé¢çš„è¯" class="headerlink" title="å†™åœ¨åé¢çš„è¯"></a>å†™åœ¨åé¢çš„è¯</h5><p>è¿™ä¸ªç³»åˆ—æ‰€æœ‰çš„æ–‡ç« éƒ½æ˜¯åœ¨ä¸€ä¸ªQQç¾¤é‡Œé¢è·Ÿå°ä¼™ä¼´ä»¬è®¨è®ºå‡ºæ¥çš„,æ¯ä¸ª topic éƒ½å·²ç»æ”¾åœ¨äº† GitHub çš„ä¸€ä¸ªä»“åº“ä¸­ <a href="https://github.com/GetOfferSoldier/Objective-C"><strong>è¿™æ˜¯åœ°å€</strong></a>ã€‚ æ‰€æœ‰å†…å®¹çš„æ›´æ–°çš„å°†åœ¨è¿™ä¸ªä»“åº“ä¸­è¿›è¡Œ,åœ¨åšå®¢ä¸­å°†ä¸å†è¿›è¡Œæ›´æ–°ã€‚æœ‰ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥åœ¨è¿™ä¸ªä»“åº“ä¸­ç»™æˆ‘ä»¬æ issue æˆ–è€… pull request.</p>
]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;å¯¹å†…å­˜ç®¡ç†çš„ç†è§£ã€‚&lt;/li&gt;
&lt;li&gt;ç±»åˆ«çš„ä½œç”¨&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»å±å¹•ä¸Šçš„æŒ‰é’®ï¼Œç³»ç»Ÿåšäº†ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="iOSé¢è¯•é›†é”¦" scheme="https://CepheusSun.github.io/categories/iOS%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
    
      <category term="iOSé¢è¯•é›†é”¦" scheme="https://CepheusSun.github.io/tags/iOS%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
  </entry>
  
  <entry>
    <title>iOSé¢è¯•é›†é”¦&amp;2017å¹´02æœˆ19æ—¥01</title>
    <link href="https://CepheusSun.github.io/2017/02/19/interview07021901/"/>
    <id>https://CepheusSun.github.io/2017/02/19/interview07021901/</id>
    <published>2017-02-18T16:00:00.000Z</published>
    <updated>2017-02-21T16:04:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>æŒ‰é’®æˆ–è€… View åœ¨è¿›è¡Œ frame åŠ¨ç”»çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆç‚¹å‡» frame åŠ¨ç”»çš„é‡ç‚¹ä½ç½®æ‰èƒ½è§¦å‘äº‹ä»¶ï¼Ÿå¦‚ä½•åœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­å“åº”äº‹ä»¶ï¼Ÿ</p>
<a id="more"></a>  
<p>ç­”ï¼š<br>â‘  <del>åŠ¨ç”»å¼€å§‹åæœ‰ä¸¤ä¸ªå›¾å±‚ï¼š</del><br>ï¼ˆä¿®æ”¹åŸå› ï¼šä¸æ˜¯åŠ¨ç”»å¼€å§‹å,è€Œæ˜¯ view å‡ºç°äº†çš„æ—¶å€™ã€‚åªè¦ view å‡ºç°åœ¨è¯•å›¾ä¸Š,ä»–éƒ½å…·æœ‰è¿™ä¸¤ä¸ªå›¾å±‚ã€‚ï¼‰<br><strong>iOS ä¸­å¯¹äº UIView å…·æœ‰ä¸€ä¸ª CALayer ç±»çš„å±æ€§ layer æˆ‘ä»¬å§‘ä¸”å«ä»– rootLayerã€‚è€Œæ¯ä¸€ä¸ª CALayer éƒ½æœ‰ä¸¤ä¸ªå±æ€§ï¼š</strong><br><del>ä¸€ä¸ª <code>view.layer.presentationLayer</code> ç”¨æ¥æ˜¾ç¤ºåŠ¨ç”»ï¼ˆå±æ€§éšåŠ¨ç”»è¿‡ç¨‹æ…¢æ…¢æ”¹å˜)</del><br>ï¼ˆä¿®æ”¹åŸå› :æ„Ÿè§‰æ˜¾ç¤ºåŠ¨ç”»è¿™ä¸ªç”¨æ³•ä¸å¤§å‡†ç¡®,æˆ‘è¯­æ–‡ä¹Ÿä¸å¥½ğŸ˜‚ï¼‰<br><strong>ä¸€ä¸ª<code>resentationLayer</code> æŒ‡å‘ˆç°å›¾å±‚,æ˜¯æ¨¡å‹å›¾å±‚çš„å¤åˆ¶ï¼Œä»–çš„å±æ€§å€¼ä»£è¡¨äº†åœ¨ä»»ä½•æŒ‡å®šæ—¶åˆ»å½“å‰çš„æ˜¾ç¤ºã€‚æ‰€ä»¥åœ¨ UIView æ²¡æœ‰å‡ºç°çš„æ—¶å€™è¿™ä¸ª view çš„å±æ€§å€¼ä¸º nilï¼Œ å‡ºç°ä¹‹åæ— è®º view æ˜¯å¦åŠ¨ç”»ï¼Œè¿™ä¸ªå€¼çš„å†…å­˜åœ°å€æ¯æ¬¡æ‰“å°éƒ½ä¸ä¸€æ ·ã€‚</strong></p>
<p><del>ä¸€ä¸ª <code>view.layer</code> ç”¨æ¥å¤„ç†ç”¨æˆ·äº¤äº’ï¼ˆåŠ¨ç”»ä¸€å¼€å§‹å±æ€§å€¼ç«‹å³æ”¹å˜åˆ°åŠ¨ç”»ç»“æŸæ—¶çš„çŠ¶æ€å’Œä½ç½®)</del><br>(ä¿®æ”¹åŸå› : CALayer æ˜¯ä¸å¤„ç†äº¤äº’çš„,è¿™ä¸€ç‚¹å¯ä»¥ä»UIViewæœ‰<code>userInteractionEnabled</code>è¿™ä¸ªå±æ€§ï¼Œè€ŒCALayeræ²¡æœ‰å¯ä»¥çœ‹å‡º,å¹¶ä¸”çœ‹ iOS-CoreAnimationè¿™æœ¬ä¹¦,è¿™æ ·ä½¿ç”¨ modelLayer æ¥æè¿°æ›´ MVC ä¸€äº›)<br><strong>ä¸€ä¸ª<code>modelLayer</code> æŒ‡æ¨¡å‹å±‚,åœ¨ view æ˜¾ç¤ºå‡ºæ¥çš„æ—¶å€™<code>view.layer</code> = <code>view.layer.presentationLayer.modelLayer</code> = <code>view.layer.view.layer.modelLayer</code>ã€‚ ä¸‰è€…å†…å­˜åœ°å€æ˜¯ä¸€æ ·çš„,ä¿å­˜å®é™…çš„å±æ€§å€¼ã€‚</strong></p>
<p><strong>æœ€åæ€»ç»“ï¼šå½“ä¸€ä¸ªå›¾å±‚çš„å±æ€§æ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾ç½®çš„å±æ€§å¹¶æ²¡æœ‰ç›´æ¥è°ƒç”¨å›¾å±‚çš„å¤–è§‚ï¼Œåªæ˜¯å®šä¹‰äº†å›¾å±‚åŠ¨ç”»ç»“æŸä¹‹åå°†è¦å˜åŒ–çš„å¤–è§‚ã€‚</strong>å…·ä½“å…³ç³»è§ä¸‹å›¾ï¼š</p>
<center><img src="http://ocg4av0wv.bkt.clouddn.com/layer%E7%9F%A5%E8%AF%86.png" alt=""><br>fromã€ŠiOS-CoreAnimationã€‹<br></center>

<p>â‘¡ è¦åœ¨ç§»åŠ¨åŠ¨ç”»çš„è¿‡ç¨‹ä¸­å¤„ç† è§¦æ‘¸å¯ä»¥é‡å†™ <code>UIViewçš„hitTest</code> æ–¹æ³•<br>(æ€»çš„æ¥è¯´ï¼Œé€šè¿‡<code>view.layer.presentationLayer</code>çš„ç›¸å…³å±æ€§ï¼Œå°±å¯ä»¥å®ç°å“åº”éœ€æ±‚äº†ï¼Œé€šè¿‡<code>touchbegan</code>åˆ¤æ–­ç”¨æˆ·ç‚¹å‡»çš„ä½ç½®æ˜¯å¦åœ¨<code>view.layer.presentationLayer.frame</code>ä¹‹å†…ï¼Œæ˜¯ã€ŠiOSâ€”CoreAnimationã€‹ä¸­å¦å¤–ä¸€ä¸ªå®ç°æ–¹å¼)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (id)hitTest:(CGPoint)point withEvent:(UIEvent *)event &#123;</div><div class="line">    NSArray *subViews = self.subviews;</div><div class="line">    for (UIView *subView in subViews) &#123;</div><div class="line">        if([subView isKindOfClass:[FoamImageView class]])&#123; //æ˜¯è¦æ‰¾çš„å›¾ç‰‡</div><div class="line">            CALayer *layer = subView.layer.presentationLayer; //å›¾ç‰‡çš„æ˜¾ç¤ºå±‚            </div><div class="line">            if(CGRectContainsPoint(layer.frame, point))&#123; //è§¦æ‘¸ç‚¹åœ¨æ˜¾ç¤ºå±‚ä¸­ï¼Œè¿”å›å½“å‰å›¾ç‰‡</div><div class="line">                return subView;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return [super hitTest:point withEvent:event];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</div><div class="line">    CGPoint point = [[touches anyObject] locationInView:self.view];</div><div class="line">    </div><div class="line">    if (CGRectContainsPoint(button_.layer.presentationLayer.frame, point)) &#123;</div><div class="line">        NSLog(@&quot;youxiangying&quot;);</div><div class="line">        [self buttonEvent:button_];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š<br><a href="http://www.voidcn.com/blog/lixuemei45/article/p-5021040.html">www.voidcn.com</a><br><a href="https://www.amazon.com/iOS-Core-Animation-Advanced-Techniques-ebook/dp/B00EHJCORC/ref=sr_1_1?ie=UTF8&amp;qid=1423192842&amp;sr=8-1&amp;keywords=Core+Animation+Advanced+Techniques">iOS-CoreAnimation</a></p>
<hr>
<h5 id="å†™åœ¨åé¢çš„è¯"><a href="#å†™åœ¨åé¢çš„è¯" class="headerlink" title="å†™åœ¨åé¢çš„è¯"></a>å†™åœ¨åé¢çš„è¯</h5><p>è¿™ä¸ªç³»åˆ—æ‰€æœ‰çš„æ–‡ç« éƒ½æ˜¯åœ¨ä¸€ä¸ªQQç¾¤é‡Œé¢è·Ÿå°ä¼™ä¼´ä»¬è®¨è®ºå‡ºæ¥çš„,æ¯ä¸ª topic éƒ½å·²ç»æ”¾åœ¨äº† GitHub çš„ä¸€ä¸ªä»“åº“ä¸­ <a href="https://github.com/GetOfferSoldier/Objective-C"><strong>è¿™æ˜¯åœ°å€</strong></a>ã€‚ æ‰€æœ‰å†…å®¹çš„æ›´æ–°çš„å°†åœ¨è¿™ä¸ªä»“åº“ä¸­è¿›è¡Œ,åœ¨åšå®¢ä¸­å°†ä¸å†è¿›è¡Œæ›´æ–°ã€‚æœ‰ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥åœ¨è¿™ä¸ªä»“åº“ä¸­ç»™æˆ‘ä»¬æ issue æˆ–è€… pull request.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŒ‰é’®æˆ–è€… View åœ¨è¿›è¡Œ frame åŠ¨ç”»çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆç‚¹å‡» frame åŠ¨ç”»çš„é‡ç‚¹ä½ç½®æ‰èƒ½è§¦å‘äº‹ä»¶ï¼Ÿå¦‚ä½•åœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­å“åº”äº‹ä»¶ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
      <category term="iOSé¢è¯•é›†é”¦" scheme="https://CepheusSun.github.io/categories/iOS%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
    
      <category term="iOSé¢è¯•é›†é”¦" scheme="https://CepheusSun.github.io/tags/iOS%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
  </entry>
  
  <entry>
    <title>python ä¸­ str å’Œ list äº’ç›¸è½¬æ¢</title>
    <link href="https://CepheusSun.github.io/2017/02/04/python%20%E4%B8%AD%20str%20%E5%92%8C%20list%20%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2/"/>
    <id>https://CepheusSun.github.io/2017/02/04/python ä¸­ str å’Œ list äº’ç›¸è½¬æ¢/</id>
    <published>2017-02-03T16:00:00.000Z</published>
    <updated>2017-02-04T09:27:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€äº›ç›¸å…³æ–¹æ³•ã€å‡½æ•°ã€è¿ç®—ç¬¦çš„æ•´ç†</p>
<a id="more"></a>
<h3 id="str-gt-list"><a href="#str-gt-list" class="headerlink" title="str -&gt; list"></a>str -&gt; list</h3><h4 id="å°†å­—ç¬¦ä¸²æŒ‰ç…§å­—ç¬¦åˆ†å‰²æˆå­—ç¬¦list"><a href="#å°†å­—ç¬¦ä¸²æŒ‰ç…§å­—ç¬¦åˆ†å‰²æˆå­—ç¬¦list" class="headerlink" title="å°†å­—ç¬¦ä¸²æŒ‰ç…§å­—ç¬¦åˆ†å‰²æˆå­—ç¬¦list"></a>å°†å­—ç¬¦ä¸²æŒ‰ç…§å­—ç¬¦åˆ†å‰²æˆå­—ç¬¦list</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">s = <span class="string">'spam'</span></div><div class="line">t = list(s)</div><div class="line"><span class="keyword">print</span> t</div><div class="line"></div><div class="line"><span class="comment">#ç»“æœï¼š['s', 'p', 'a', 'm']</span></div></pre></td></tr></table></figure>
<h4 id="å°†å­—ç¬¦ä¸²æŒ‰ç…§åˆ†éš”ç¬¦ï¼Œåˆ†å‰²æˆå­—ç¬¦-ä¸²-list"><a href="#å°†å­—ç¬¦ä¸²æŒ‰ç…§åˆ†éš”ç¬¦ï¼Œåˆ†å‰²æˆå­—ç¬¦-ä¸²-list" class="headerlink" title="å°†å­—ç¬¦ä¸²æŒ‰ç…§åˆ†éš”ç¬¦ï¼Œåˆ†å‰²æˆå­—ç¬¦(ä¸²)list"></a>å°†å­—ç¬¦ä¸²æŒ‰ç…§åˆ†éš”ç¬¦ï¼Œåˆ†å‰²æˆå­—ç¬¦(ä¸²)list</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">s = <span class="string">'spam-spam-spsm'</span></div><div class="line">delimiter = <span class="string">'-'</span></div><div class="line">s.split(delimiter)</div><div class="line"><span class="keyword">print</span> s.split(delimiter)</div><div class="line"></div><div class="line"><span class="comment">#ç»“æœï¼š['spam', 'spam', 'spsm']</span></div></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨-split-æ–¹æ³•å°†å­—ç¬¦ä¸²åˆ†æˆå•è¯"><a href="#ä½¿ç”¨-split-æ–¹æ³•å°†å­—ç¬¦ä¸²åˆ†æˆå•è¯" class="headerlink" title="ä½¿ç”¨ split æ–¹æ³•å°†å­—ç¬¦ä¸²åˆ†æˆå•è¯"></a>ä½¿ç”¨ split æ–¹æ³•å°†å­—ç¬¦ä¸²åˆ†æˆå•è¯</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">s = <span class="string">'pinging for the fjords'</span></div><div class="line">t = s.split()</div><div class="line"><span class="keyword">print</span> t</div><div class="line"></div><div class="line"><span class="comment">#ç»“æœï¼š['pinging', 'for', 'the', 'fjords']</span></div></pre></td></tr></table></figure>
<h3 id="list-gt-str"><a href="#list-gt-str" class="headerlink" title="list -&gt; str"></a>list -&gt; str</h3><h4 id="ä½¿ç”¨å­—ç¬¦-ä¸²-å°†-list-ä¸²è”æˆå­—ç¬¦ä¸²"><a href="#ä½¿ç”¨å­—ç¬¦-ä¸²-å°†-list-ä¸²è”æˆå­—ç¬¦ä¸²" class="headerlink" title="ä½¿ç”¨å­—ç¬¦(ä¸²)å°† list ä¸²è”æˆå­—ç¬¦ä¸²"></a>ä½¿ç”¨å­—ç¬¦(ä¸²)å°† list ä¸²è”æˆå­—ç¬¦ä¸²</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">t = [<span class="string">'pinging'</span>, <span class="string">'for'</span>, <span class="string">'the'</span>, <span class="string">'fjords'</span>]</div><div class="line">delimiter = <span class="string">' '</span></div><div class="line"><span class="keyword">print</span> delimiter.join(t)</div><div class="line"></div><div class="line"><span class="comment">#ç»“æœï¼špinging for the fjords</span></div><div class="line"><span class="comment"># å¦‚æœä¸éœ€è¦åˆ†éš”ç¬¦ï¼Œç¬¬äºŒè¡Œä¸­delimiterå¤åˆ¶ä¸º''ç©ºå­—ç¬¦ä¸²å³å¯</span></div></pre></td></tr></table></figure>
<h3 id="æ•°ç»„-å¢-åˆ -æ”¹"><a href="#æ•°ç»„-å¢-åˆ -æ”¹" class="headerlink" title="æ•°ç»„ å¢ åˆ  æ”¹"></a>æ•°ç»„ å¢ åˆ  æ”¹</h3><h4 id="å¢"><a href="#å¢" class="headerlink" title="å¢"></a>å¢</h4><p><strong>ç›´æ¥åœ¨åé¢æ·»åŠ ä¸€ä¸ªå…ƒç´ </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">t = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div><div class="line">t.append(<span class="string">'d'</span>)</div><div class="line"><span class="keyword">print</span> t</div><div class="line"></div><div class="line"><span class="comment">#ç»“æœï¼š['a', 'b', 'c', 'd']</span></div></pre></td></tr></table></figure>
<p><strong>å°†ä¸€ä¸ªæ•°ç»„éå†æ·»åŠ åœ¨åé¢</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">t = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div><div class="line">t2 = [<span class="string">'e'</span> ,<span class="string">'f'</span>]</div><div class="line">t.extend(t2)</div><div class="line"><span class="keyword">print</span> t</div><div class="line"></div><div class="line"><span class="comment">#ç»“æœï¼š['a', 'b', 'c', 'e', 'f']</span></div></pre></td></tr></table></figure>
<h4 id="åˆ "><a href="#åˆ " class="headerlink" title="åˆ "></a>åˆ </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ä»¥ä¸‹æ–¹æ³•è¿ç®—ç¬¦éƒ½å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡</span></div><div class="line"></div><div class="line">t = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div><div class="line"><span class="comment"># del è¿ç®—ç¬¦ å¦‚æœä¸éœ€è¦è¢«åˆ é™¤çš„å€¼ï¼Œä½¿ç”¨è¿™ä¸ª</span></div><div class="line"><span class="keyword">del</span> t[<span class="number">1</span>]</div><div class="line"></div><div class="line"><span class="comment"># pop æ–¹æ³• æ”¹å˜åˆ—è¡¨å¹¶è¿”å›è¢«åˆ é™¤çš„å…ƒç´ ã€‚å¦‚æœä¸æä¾›ç´¢å¼•ï¼Œåˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚</span></div><div class="line"><span class="keyword">print</span> t.pop(<span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment"># remove æ–¹æ³• åˆ é™¤ä¸çŸ¥é“ç´¢å¼•çš„å…ƒç´ , åªåˆ é™¤ç¬¬ä¸€ä¸ª</span></div><div class="line">t.remove(<span class="string">'a'</span>)</div><div class="line"><span class="keyword">print</span> t</div></pre></td></tr></table></figure>
<h4 id="æ”¹"><a href="#æ”¹" class="headerlink" title="æ”¹"></a>æ”¹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">t = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div><div class="line">t[<span class="number">0</span>] = <span class="string">'c'</span></div><div class="line"><span class="keyword">print</span> t</div><div class="line"></div><div class="line"><span class="comment">#ç»“æœï¼š['c', 'b', 'c']</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€äº›ç›¸å…³æ–¹æ³•ã€å‡½æ•°ã€è¿ç®—ç¬¦çš„æ•´ç†&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://CepheusSun.github.io/categories/python/"/>
    
    
      <category term="python" scheme="https://CepheusSun.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python Debug ä¹‹ä¸€</title>
    <link href="https://CepheusSun.github.io/2017/02/02/python%20debug%20%E4%B9%8B%E4%B8%80/"/>
    <id>https://CepheusSun.github.io/2017/02/02/python debug ä¹‹ä¸€/</id>
    <published>2017-02-01T16:00:00.000Z</published>
    <updated>2017-02-01T16:14:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>é”™è¯¯ç±»å‹:SyntaxError: Non-ASCII character â€˜\xe9â€™ in file xxx</p>
<a id="more"></a>
<p>æœ€è¿‘å†™ python ä»£ç çš„æ—¶å€™ï¼Œç®€å•çš„ä¸€ä¸‹ä»£ç ï¼Œç¡®å‡ºç°é”™è¯¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">points = int(raw_input(<span class="string">"é¢†å…ˆçš„åˆ†æ•°ï¼š"</span>))</div><div class="line">is_in_control = raw_input(<span class="string">"æ˜¯å¦é¢†å…ˆé˜Ÿæ§çƒ(Yï¼Nï¼š)"</span>)</div><div class="line">last_seconds = int(raw_input(<span class="string">"æ¯”èµ›å‰©ä½™ç§’æ•°ï¼š"</span>))</div><div class="line"></div><div class="line">points -= <span class="number">3</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> is_in_control == <span class="string">'Y'</span>:</div><div class="line">    points += <span class="number">0.5</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    points -= <span class="number">0.5</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> points &lt; <span class="number">0</span>:</div><div class="line">    points = <span class="number">0</span></div><div class="line"></div><div class="line"></div><div class="line">points = points ** <span class="number">2</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> points &gt; last_seconds:</div><div class="line">    <span class="keyword">print</span> <span class="string">"safe"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span>  <span class="string">"unsafe"</span></div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SyntaxError: Non-ASCII character &apos;\xe9&apos; in file /Users/programersunny/PycharmProjects/pythonDemo/hello on line 58, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details</div></pre></td></tr></table></figure>
<p>æ‰“å¼€ URL é˜…è¯»äº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°åŸå› ï¼š</p>
<blockquote>
<p>Python will default to ASCII as standard encoding if no other encoding hints are given.</p>
</blockquote>
<p>Pythonçš„é»˜è®¤ç¼–ç æ–‡ä»¶æ˜¯ç”¨çš„ASCIIç ï¼Œä½ å°†æ–‡ä»¶å­˜æˆäº†UTF-8ä¹Ÿæ²¡ç”¨ã€‚</p>
<p>è§£å†³åŠæ³•å¾ˆç®€å•ï¼š</p>
<p>åªè¦åœ¨æ–‡ä»¶å¼€å¤´åŠ å…¥<code># -*- coding: UTF-8 â€”</code>æˆ–è€…<code>#coding=utf-8</code> å°±è¡Œäº†ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™ä¸¤è¡Œä»£ç å¿…é¡»æ·»åŠ åœ¨<code>.py</code>æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæˆ–è€…ç¬¬äºŒè¡Œã€‚å¦‚æœåœ¨ç¬¬ä¸‰è¡Œä»¥åŠä»¥ä¸Šï¼Œéƒ½æ²¡æœ‰æ•ˆæœï¼Œè¿™ä¸ªåœ¨è¿™ä¸ªç½‘å€ä¸Šä¹Ÿæœ‰æè¿°</p>
<blockquote>
<p>To define a source code encoding, a magic comment must be placed into the source files either as first or second line in the file</p>
</blockquote>
<p>ç¿»è¯‘ä¸€ä¸‹ï¼š</p>
<blockquote>
<p>ä¸ºäº†å®šä¹‰æºç çš„ç¼–ç æ ¼å¼ï¼Œä¸€ä¸ªç¥å¥‡çš„æ³¨é‡Šéœ€è¦è¢«æ·»åŠ åˆ°æºæ–‡ä»¶çš„ç¬¬ä¸€è¡Œæˆ–è€…ç¬¬äºŒè¡Œä¸­ã€‚</p>
</blockquote>
<p>ç¥å¥‡çš„æ³¨é‡Šå·²ç»åœ¨ä¸Šæ–‡æåˆ°äº†ã€‚</p>
<p><a href="https://www.python.org/dev/peps/pep-0263/">ä¸Šæ–‡æåˆ°çš„URLåœ°å€</a></p>
<p>çºªå¿µä¸€ä¸‹è‡ªå·±åœ¨ python ä¸­é‡åˆ°çš„ç¬¬ä¸€ä¸ªå°å‘ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é”™è¯¯ç±»å‹:SyntaxError: Non-ASCII character â€˜\xe9â€™ in file xxx&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="https://CepheusSun.github.io/categories/python/"/>
    
    
      <category term="python" scheme="https://CepheusSun.github.io/tags/python/"/>
    
  </entry>
  
</feed>
