<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CepheusSun</title>
  <subtitle>Code for a better world.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.CepheusSun.com/"/>
  <updated>2017-07-09T13:44:43.000Z</updated>
  <id>http://www.CepheusSun.com/</id>
  
  <author>
    <name>CepheusSun</name>
    <email>cd_sunyang@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://www.CepheusSun.com/ShareExtension.html"/>
    <id>http://www.CepheusSun.com/ShareExtension.html</id>
    <published>2017-07-03T08:45:57.000Z</published>
    <updated>2017-07-09T13:44:43.000Z</updated>
    
    <content type="html"><![CDATA[<hr>
<p>title: é¢å‘ Extension å¼€å‘ ğŸŒ Share Extension<br>date: 2017-07-09 21:43:38<br>tags: [iOS, App Extension]</p>
<h2 id="categories-App-Extension"><a href="#categories-App-Extension" class="headerlink" title="categories: App Extension"></a>categories: App Extension</h2><p>Share Extension ä½¿ç”¨æˆ·åœ¨ä½¿ç”¨å…¶ä»–çš„app çš„æ—¶å€™, æ›´åŠ æ–¹ä¾¿çš„å°†å…¶å†…å®¹åˆ†äº«å‡ºå»ï¼Œåƒæ˜¯ç¤¾ä¼šåŒ–åˆ†äº«è¿˜æœ‰ä¸Šä¼ æœåŠ¡å™¨ã€‚æ¯”å¦‚è¯´ï¼Œ åœ¨ä¸€ä¸ª app ä¸­æœ‰ä¸ªåˆ†äº«æŒ‰é’®ï¼Œ ç”¨æˆ·å¯ä»¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ª Share Extension æ¥å‘è¡¨è¯„è®ºæˆ–è€…å†…å®¹ã€‚</p>
<a id="more"></a>
<blockquote>
<p><strong>å†™åœ¨å‰é¢çš„è¯</strong></p>
<p>æœ€å¥½çš„ Share Extension èƒ½å¤Ÿè®©ç”¨æˆ·èƒ½å¤Ÿå¾ˆè½»æ¾çš„åˆ†äº«ç½‘é¡µä¸­çš„å†…å®¹ã€‚å¦‚æœä½ éœ€è¦ç”¨ä¸€ä¸ªæ‰©å±•æ¥è®©ç”¨æˆ·ä½¿ç”¨è¿™äº›å†…å®¹åšä¸€äº›å…¶ä»–çš„æ“ä½œ, æˆ–è€…ä¸ºç”¨æˆ·æä¾›ä»–ä»¬æ‰€å…³å¿ƒçš„å†…å®¹çš„æ›´æ–°ï¼Œ Share Extension å¯èƒ½å°±ä¸æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆäº†ã€‚</p>
</blockquote>
<h3 id="å¦‚ä½•ç†è§£-Share-Extension"><a href="#å¦‚ä½•ç†è§£-Share-Extension" class="headerlink" title="å¦‚ä½•ç†è§£ Share Extension"></a>å¦‚ä½•ç†è§£ Share Extension</h3><p> Share Extension æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>è®©ç”¨æˆ·æ›´å®¹æ˜“åˆ†äº«å†…å®¹ã€‚</li>
<li>å¦‚æœå¯ä»¥çš„è¯ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·é¢„è§ˆï¼Œç¼–è¾‘ï¼Œæ ‡æ³¨ï¼Œå¹¶ä¸”è‡ªå®šä¹‰å†…å®¹ã€‚</li>
<li>åœ¨ç”¨æˆ·å‘é€å†…å®¹çš„æ—¶å€™ï¼Œèƒ½å¤Ÿç¡®ä¿å†…å®¹æ˜¯åˆæ³•çš„ã€‚</li>
</ul>
<p>ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡ç³»ç»Ÿæä¾›çš„ UI æ¥è·å¾—ä»–èƒ½å¤Ÿä½¿ç”¨çš„ Share Extensionã€‚åœ¨ iOS ä¸­ï¼Œ ç”¨æˆ·ç‚¹å‡»åˆ†äº«æŒ‰é’®ï¼Œç„¶åä»ç³»ç»Ÿå¼¹å‡ºæ¥çš„åˆ†äº«åŒºåŸŸä¸­é€‰æ‹©ä¸€ä¸ª Share Extensionã€‚</p>
<p>å½“ç”¨æˆ·é€‰æ‹©äº†ä½ çš„ Share Extension ä¹‹åï¼Œä½ éœ€è¦å±•ç¤ºä¸€ä¸ªåŒ…å«äº†å†…å®¹çš„è§†å›¾ï¼Œç„¶åå‘è¡¨å‡ºå»ã€‚ä½ å¯ä»¥å°†ä½ çš„è§†å›¾æœºé‡ç³»ç»Ÿæä¾›çš„ vcï¼Œ æˆ–è€…è‡ªå®šä¹‰ä¸€ä¸ªã€‚ç³»ç»Ÿæä¾›çš„é‚£ä¸ªæä¾›äº†ä¸€äº›å¾ˆå¸¸è§çš„æ“ä½œï¼Œæ¯”å¦‚è¯´ï¼Œé¢„è§ˆï¼Œåˆæ³•æ€§åˆ¤æ–­ï¼ŒåŒæ­¥å†…å®¹ï¼Œä»¥åŠè§†å›¾çš„åŠ¨ç”»ï¼Œè¿˜æœ‰è®¾ç½®å‘å¸ƒã€‚</p>
<h3 id="åˆ›å»º-Share-Extension"><a href="#åˆ›å»º-Share-Extension" class="headerlink" title="åˆ›å»º Share Extension"></a>åˆ›å»º Share Extension</h3><p>åˆ›å»ºçš„è¿‡ç¨‹ç±»ä¼¼äºä¹‹å‰å†™çš„ <a href="http://cepheussun.com/TodayExtension.html">é¢å‘ Extension å¼€å‘ ğŸŒ Today Extension</a></p>
<p>å”¯ä¸€ä¸åŒçš„æ˜¯ Today Extension æœ‰å”¯ä¸€çš„ä¸€ä¸ª å®¿ä¸» app è€Œ Share Extension åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œ å¯èƒ½æœ‰å¾ˆå¤šçš„å®¿ä¸» app æ‰€ä»¥åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªå®¿ä¸» appã€‚ ä¸€èˆ¬éƒ½æ˜¯é€‰æ‹©çš„ Safari ç„¶åï¼Œéšä¾¿æ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼Œä¸‹é¢çš„åˆ†äº«æŒ‰é’®å°±å¯ç”¨äº†ï¼Œç‚¹å‡»ä¹‹åï¼Œåœ¨åˆ†äº«åˆ—è¡¨é‡Œé¢å°±èƒ½å¤Ÿçœ‹åˆ°ä½ çš„ app å’¯ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™çœ‹åˆ°çš„ Share Extension çš„åç§°æ˜¯ä½  Share Extension çš„åç§°ï¼Œè¿™ä¸ªæ˜¯å¯ä»¥æ›´app åç§°ä¸ä¸€æ ·çš„ã€‚åªè¦æ”¹ Share Extension çš„ info.plist ä¸­çš„ Bundle display name ä¸ºä½ æƒ³è¦çš„åç§°å°±å¯ä»¥äº†ã€‚</p>
</blockquote>
<h3 id="è¿™ç¯‡æ–‡ç« è¦åšä»€ä¹ˆï¼Ÿ"><a href="#è¿™ç¯‡æ–‡ç« è¦åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="è¿™ç¯‡æ–‡ç« è¦åšä»€ä¹ˆï¼Ÿ"></a>è¿™ç¯‡æ–‡ç« è¦åšä»€ä¹ˆï¼Ÿ</h3><p>å†™åˆ°è¿™é‡Œ, åŸºæœ¬ä¸Šå·²ç»å®Œæˆäº†å‡†å¤‡å·¥ä½œäº†ã€‚å¯èƒ½è¿˜æœ‰ åˆ›å»º app groups ä¹‹ç±»çš„å·¥ä½œï¼Œè¿™å—å°†åœ¨ä¸‹é¢çš„å†…å®¹ä¸­ä»‹ç»ã€‚èŠ±äº†å‡ å¤©æ—¶é—´æ–­æ–­ç»­ç»­çš„ç ”ç©¶ <code>Share Extension</code>ï¼Œå¯¹æ¯”äº†ç³»ç»Ÿä¸­æœ¬æ¥å°±å­˜åœ¨çš„facebook twitter ä»¥åŠå›½å†…çš„å¾®åšä»€ä¹ˆçš„ã€‚æˆ‘å°†åœ¨æœ¬æ–‡ä¸­æ¨¡ä»¿ç€åšä¸€ä¸ªç±»ä¼¼çš„æ•ˆæœå‡ºæ¥ã€‚</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-07-live.gif" alt=""></p>
<p>è¿™æ˜¯æœ€ç»ˆæ•ˆæœçš„ gif å›¾ã€‚è¿™åªæ˜¯ç¬¬ä¸€æ­¥ã€‚å¥½äº†ï¼Œæˆ‘ä»¬å¼€å§‹å§ã€‚</p>
<h4 id="åŸºæœ¬è®¾ç½®"><a href="#åŸºæœ¬è®¾ç½®" class="headerlink" title="åŸºæœ¬è®¾ç½®"></a>åŸºæœ¬è®¾ç½®</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">       <span class="keyword">super</span>.viewDidLoad()</div><div class="line">       placeholder = <span class="string">"åˆ†äº«åˆ°å¾®åš"</span>  <span class="comment">// å ä½æ–‡å­—</span></div><div class="line">       charactersRemaining = <span class="number">140</span>  <span class="comment">// å·¦ä¸‹è§’çš„æ–‡å­— å±•ç¤ºæ•°å­—ï¼Œå¯ä»¥ç”¨æ¥å€’æ•°ï¼Œè¿˜èƒ½è¾“å…¥å‡ ä¸ªå­—, å°äºç­‰äº0çš„æ—¶å€™å˜æˆçº¢è‰²</span></div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>å¦‚æ³¨é‡Šæ‰€è§ï¼Œè¿™é‡Œè®¾ç½®äº†placeholder å·²ç»å³ä¸‹è§’çš„æ•°å­—ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è¿‡æ»¤åˆ†äº«çš„å†…å®¹</span></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">isContentValid</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    charactersRemaining = <span class="number">140</span> - contentText.characters.<span class="built_in">count</span> <span class="keyword">as</span> <span class="type">NSNumber</span></div><div class="line">    <span class="keyword">return</span> contentText.characters.<span class="built_in">count</span> &gt; <span class="number">2</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ç”¨æ¥éªŒè¯ç”¨æˆ·è¾“å…¥çš„å†…å®¹æ˜¯å¦åˆæ³•ã€‚è¿™é‡Œæˆ‘åªæ˜¯ç®€å•çš„è®¾ç½®äº†å†…å®¹çš„é•¿åº¦ä¸èƒ½è¶…è¿‡140ï¼Œå¹¶ä¸”ä¸èƒ½å°äº2.</p>
<p>ç³»ç»Ÿåœ¨<code>SLComposeServiceViewController</code>ä¸­æä¾›äº†<code>open func didSelectPost()</code>ã€<code>open func didSelectCancel()</code> ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯ä¸Šé¢ä¸¤ä¸ªæŒ‰é’®çš„äº‹ä»¶ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé‡å†™ cancel çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨ super</p>
</blockquote>
<p>æ¥ä¸‹æ¥æ˜¯è®¾ç½®ä½ç½®ï¼Œåˆ†ç»„è¿™äº›å†…å®¹ã€‚è¿™å†™ä¹Ÿæ˜¯åœ¨ç³»ç»Ÿçš„api ä¸­èƒ½æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">configurationItems</span><span class="params">()</span></span> -&gt; [<span class="type">Any</span>]! &#123;</div><div class="line">       <span class="comment">// å®šä½</span></div><div class="line">       <span class="keyword">let</span> item1 = <span class="type">SLComposeSheetConfigurationItem</span>()</div><div class="line">       item1?.title = <span class="string">"ä½ç½®"</span></div><div class="line">       item1?.value = <span class="string">"æ— "</span></div><div class="line">       item1?.valuePending = <span class="literal">false</span></div><div class="line">       item1?.tapHandler = &#123;</div><div class="line">           item1?.valuePending = <span class="literal">true</span></div><div class="line">           <span class="comment">// åœ¨è¿™é‡Œåšå®šä½çš„æ“ä½œ</span></div><div class="line">           <span class="comment">// æ¨¡æ‹ŸèŠ±äº†3sæ—¶é—´</span></div><div class="line">           delay(<span class="number">3</span>, task: &#123;</div><div class="line">               item1?.value = <span class="string">""</span></div><div class="line">               item1?.valuePending = <span class="literal">false</span></div><div class="line">               item1?.value = <span class="string">"å››å·çœ æˆéƒ½å¸‚"</span></div><div class="line">           &#125;)</div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="comment">// è·³è½¬</span></div><div class="line">       <span class="keyword">let</span> item2 = <span class="type">SLComposeSheetConfigurationItem</span>()</div><div class="line">       item2?.title = <span class="string">"å¯è§ç»„"</span></div><div class="line">       item2?.value = <span class="string">""</span></div><div class="line">       </div><div class="line">       item2?.tapHandler = &#123;</div><div class="line">           <span class="keyword">let</span> list = <span class="type">ListController</span>()</div><div class="line">           list.callbackClosure = &#123;</div><div class="line">               item2?.value = $<span class="number">0</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">self</span>.pushConfigurationViewController(list)</div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="comment">// æµ‹è¯•é¢„è§ˆ</span></div><div class="line">       <span class="comment">/*</div><div class="line">       let item3 = SLComposeSheetConfigurationItem()</div><div class="line">       item3?.title = "é¢„è§ˆ"</div><div class="line">       item3?.tapHandler = &#123;</div><div class="line">           let pre = self.loadPreviewView()// è¿™ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯ç”¨æ¥è·å–å³è¾¹çš„å›¾ç‰‡çš„</div><div class="line">           pre?.frame = self.view.bounds</div><div class="line">           self.view.addSubview(pre!)</div><div class="line">       &#125;</div><div class="line">       */</span></div><div class="line">       <span class="keyword">return</span> [item1!, item2!]</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•è¿”å›äº†ä¸€ä¸ªæ•°ç»„ï¼Œå°±æ˜¯å¯¹åº”çš„æŒ‰é’®ç­‰å†…å®¹ã€‚æ¯ä¸ªæŒ‰é’®å…¶å®ä¹Ÿå¾ˆç®€å•ã€‚åªæœ‰ <code>title</code>ï¼Œ<code>value</code>ï¼Œ <code>tapHandler</code>ï¼Œ <code>valuePending</code> å››ä¸ªå±æ€§ã€‚</p>
<ul>
<li>title: å·¦è¾¹çš„æ–‡å­—</li>
<li>value: å³è¾¹çš„æ–‡å­—</li>
<li>tapHandlerï¼š å¤„ç†è¿™ä¸ª item äº‹ä»¶çš„ closure</li>
<li>valuePendingï¼š å·¦è¾¹è½¬èŠèŠ±çš„indicatorï¼Œæ˜¯ä¸€ä¸ª bool ç±»å‹çš„å±æ€§ã€‚</li>
</ul>
<p>åœ¨ä¸Šé¢çš„ä»£ç é‡Œï¼Œæˆ‘ç”¨ <code>self.pushConfigurationViewController(list)</code> è¿™è¡Œä»£ç push åˆ°äº†å¦å¤–çš„ç•Œé¢ï¼Œç”¨æ¥è®©ç”¨æˆ·é€‰æ‹©ä»–ä»¬è¦æŠŠæ¶ˆæ¯åˆ†äº«åˆ°çš„å…·ä½“åˆ†ç»„ã€‚è¿™ä¸ªæ“ä½œæ˜¯åœ¨ Facebook çš„ share extension ä¸­çœ‹è§çš„ã€‚åœ¨å®é™…ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·åšå…¶ä»–å¾ˆå¤šçš„äº‹æƒ…ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¨å‡ºæ¥çš„ Controller éœ€è¦è®¾ç½®èƒŒæ™¯ä¸ºclearï¼Œcell ä¹Ÿè¦è®¾ç½®èƒŒæ™¯ä¸º clear è¿™æ˜¯ä¸ºäº†ä¿è¯ç•Œé¢è·Ÿç³»ç»Ÿç»Ÿä¸€ï¼ˆæ¨¡ç³Šæ•ˆæœï¼‰ã€‚</p>
</blockquote>
<p>ç„¶åå°±æ˜¯è¦æŠŠç”¨æˆ·é€‰æ‹©çš„å†…å®¹åˆ†äº«å‡ºå»äº†ã€‚</p>
<h4 id="é€šè¿‡-Share-Extension-åˆ†äº«å†…å®¹"><a href="#é€šè¿‡-Share-Extension-åˆ†äº«å†…å®¹" class="headerlink" title="é€šè¿‡ Share Extension åˆ†äº«å†…å®¹"></a>é€šè¿‡ Share Extension åˆ†äº«å†…å®¹</h4><p>è¦å°†å†…å®¹åˆ†äº«å‡ºå»ï¼Œéœ€è¦è§£å†³å‡ ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li>ç”¨æˆ·ä¿¡æ¯</li>
<li>è·å–åˆ†äº«çš„å†…å®¹</li>
</ul>
<p>å› ä¸º App Extension å’Œä¸» App æ˜¯ä¸¤ä¸ªä¸åŒçš„ Targetï¼Œ è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨è¿™ä¸ªè·å–åˆ°ä¸» app ä¸­ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ã€‚è‡³å°‘éœ€è¦çŸ¥é“æˆ‘ä»¬è¦æŠŠå†…å®¹åˆ†äº«åˆ°å“ªä¸ªç”¨æˆ·çš„æ•°æ®æµä¸­å§ã€‚</p>
<p>è¿™ä¸ªå…¶å®ä¹Ÿæ˜¯å¾ˆç®€å•çš„äº‹æƒ…ã€‚åœ¨ Today ä¸­æˆ‘ä»¬å·²ç»çŸ¥é“äº† App Groups è¿™ä¸ªä¸œè¥¿ã€‚ä¹ŸçŸ¥é“äº†å¦‚ä½•å…±äº«éƒ¨åˆ†ä»£ç ã€‚</p>
<p>æ‰€ä»¥åœ¨ Share Extension ä¸­</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">fetchUserInfomation</span><span class="params">()</span></span> -&gt; <span class="type">String</span>? &#123;</div><div class="line">    <span class="keyword">let</span> userdefault = <span class="type">UserDefaults</span>.<span class="keyword">init</span>(suiteName: <span class="string">"group.sunny.com"</span>)</div><div class="line">    <span class="keyword">let</span> info = userdefault?.value(forKey: <span class="string">"userInformation"</span>) <span class="keyword">as</span>? [<span class="type">String</span>: <span class="type">String</span>]</div><div class="line">    <span class="keyword">return</span> info?[<span class="string">"token"</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ä¸»app ä¸­</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> userdefault = <span class="type">UserDefaults</span>(suiteName: <span class="string">"group.sunny.com"</span>)</div><div class="line">userdefault?.<span class="keyword">set</span>([<span class="string">"token"</span>: <span class="string">"this the user token"</span>], forKey: <span class="string">"userInformation"</span>)</div><div class="line">userdefault?.synchronize()</div></pre></td></tr></table></figure>
<p>å°±å®ç°äº†æ•°æ®ä¹‹é—´çš„äº¤æ¢ã€‚åˆ°è¿™å„¿ï¼Œå¯èƒ½ä¼šæƒ³åˆ°å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚å¦‚æœæ²¡æœ‰ç™»å½•çš„è¯éœ€è¦è·³è½¬åˆ°ä¸» app ä¸­è¿›è¡Œç™»å½•æ“ä½œã€‚è¿™é‡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜é€šè¿‡ openurl å°±å¯ä»¥ã€‚</p>
<ol>
<li>è®¾ç½®ä¸»app çš„url type</li>
<li>è·³è½¬</li>
</ol>
<p>æ‰€ä»¥æˆ‘åœ¨ <code>viewDidload</code> æ–¹æ³•ä¸­æ·»åŠ äº†ä»¥ä¸‹ä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> fetchUserInfomation() == <span class="literal">nil</span> &#123;</div><div class="line">            </div><div class="line">	<span class="keyword">let</span> alert = <span class="type">UIAlertController</span>(title: <span class="string">"è¿˜æ²¡æœ‰ç™»å½•"</span>, message: <span class="literal">nil</span>, preferredStyle: .alert)</div><div class="line">	alert.addAction(<span class="type">UIAlertAction</span>(title: <span class="string">"å–æ¶ˆ"</span>, style: .cancel) &#123;<span class="number">_</span> <span class="keyword">in</span></div><div class="line">		<span class="keyword">self</span>.cancel()</div><div class="line">	&#125;)</div><div class="line">	alert.addAction(<span class="type">UIAlertAction</span>(title: <span class="string">"å»ç™»å½•"</span>, style: .<span class="keyword">default</span>) &#123;<span class="number">_</span> <span class="keyword">in</span></div><div class="line">	<span class="keyword">self</span>.extensionContext?.open(<span class="type">NSURL</span>(string: <span class="string">"sunny://action=login"</span>)! <span class="keyword">as</span> <span class="type">URL</span>, completionHandler: &#123; (success) <span class="keyword">in</span></div><div class="line">		<span class="keyword">self</span>.cancel()</div><div class="line">		<span class="built_in">print</span>(success)</div><div class="line">	&#125;)</div><div class="line">&#125;)</div><div class="line">	present(alert, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆ¤æ–­ç™»å½•çŠ¶æ€ï¼Œç„¶åå¼¹çª—ã€‚å–æ¶ˆæˆ–è€…å»ç™»å½•ã€‚å¦‚æœé€‰æ‹©å»ç™»å½•çš„è¯ï¼Œå°±é€šè¿‡ openUrl å»æ‰“å¼€ä¸» appã€‚</p>
<p>å¾ˆå®Œç¾å§ï¼<strong>but it doesnâ€™t work!!!</strong>ï¼Œ æˆ‘åœ¨ stackoverflow ä¸Šæ‰¾åˆ°äº†äº›èµ„æ–™ã€‚</p>
<ul>
<li><a href="https://stackoverflow.com/questions/24895093/openurl-doesnt-work-in-share-extension">openURL doesnâ€™t work in Share extension</a></li>
<li><a href="https://stackoverflow.com/questions/24297273/openurl-not-work-in-action-extension">openURL not work in Action Extension</a></li>
</ul>
<blockquote>
<p>è‹¹æœçˆ¸çˆ¸åªå…è®¸ Today Extension é€šè¿‡ extensionContext çš„ openUrl æ‰“å¼€ä¸»app</p>
</blockquote>
<p>ä½†æ˜¯è¿™ä¸ªéœ€æ±‚æ€»æ˜¯éœ€è¦å®ç°çš„ã€‚å…¶å®è¿˜æ˜¯æœ‰è§£å†³æ–¹æ³•ã€‚</p>
<h5 id="æ–¹æ³•ä¸€-åœ¨-Extension-ä¸­å®ç°ç™»å½•æ“ä½œ"><a href="#æ–¹æ³•ä¸€-åœ¨-Extension-ä¸­å®ç°ç™»å½•æ“ä½œ" class="headerlink" title="æ–¹æ³•ä¸€:  åœ¨ Extension ä¸­å®ç°ç™»å½•æ“ä½œ"></a>æ–¹æ³•ä¸€:  åœ¨ Extension ä¸­å®ç°ç™»å½•æ“ä½œ</h5><p>è¿™ä¸ªç¡®å®æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚ä¹Ÿæ˜¯å¼¹å‡ºä¸€ä¸ª alertï¼Œç„¶åè¾“å…¥ç”¨æˆ·åï¼Œå¯†ç ï¼Œç™»å½•ã€‚å®Œæˆæ‰€æœ‰æ“ä½œã€‚æˆ–è€…æ˜¯å…¶ä»–ä»€ä¹ˆæ–¹æ¡ˆï¼Œéƒ½å¯ä»¥ã€‚è¿™ä¸ªå°±ä¸å†è¯¦ç»†æè¿°äº†ã€‚Share Extension æ¥å®ç°ç™»å½•è¡Œä¸ºï¼Œç„¶å ä¸» app ä¹Ÿèƒ½å¤Ÿå…±äº«ç­‰äº†çŠ¶æ€ã€‚è¿™ä»¿ä½›ä¹Ÿæ˜¯è§£å†³äº†è¿™ç§é—®é¢˜ã€‚</p>
<p>å½“ç„¶ï¼Œå¼ºè¿«ç—‡ç¬”è€…ï¼Œè¿˜æ˜¯æƒ³é€šè¿‡æ‰“å¼€ä¸» app çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h5 id="æ–¹æ³•äºŒ-å¦ç±»çš„-openUrl"><a href="#æ–¹æ³•äºŒ-å¦ç±»çš„-openUrl" class="headerlink" title="æ–¹æ³•äºŒ: å¦ç±»çš„ openUrl"></a>æ–¹æ³•äºŒ: å¦ç±»çš„ openUrl</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// For skip compile error.</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">openURL</span><span class="params">(<span class="number">_</span> url: URL)</span></span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">openContainerApp</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> responder: <span class="type">UIResponder</span>? = <span class="keyword">self</span> <span class="keyword">as</span> <span class="type">UIResponder</span></div><div class="line">    <span class="keyword">let</span> selector = #selector(openURL(<span class="number">_</span>:))</div><div class="line">    <span class="keyword">while</span> responder != <span class="literal">nil</span> &#123;</div><div class="line">        <span class="keyword">if</span> responder!.responds(to: selector) &amp;&amp; responder != <span class="keyword">self</span> &#123;</div><div class="line">            responder!.perform(selector, with: <span class="type">URL</span>(string: <span class="string">"sunny://action=login"</span>)!)</div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        responder = responder?.next</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œä¸Šé¢çš„ä¸¤ä¸ªé“¾æ¥è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ–¹æ³•ï¼Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚</p>
<p>è§£å†³äº†æœ€å¼€å§‹çš„ç”¨æˆ·ä¿¡æ¯çš„é—®é¢˜ã€‚æ¥ä¸‹æ¥å°±æ˜¯è¦è·å–åˆ†äº«çš„å†…å®¹è¿™ä¸ªé—®é¢˜äº†ã€‚åœ¨ShareExtension ä¸­ï¼Œç›¸ä¿¡å·²ç»çœ‹è§äº†ã€‚éœ€è¦ä¸¤ä¸ªä¸œè¥¿ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç”¨æˆ·å…³äºè¿™ä¸ªå†…å®¹çš„è¯„è®ºï¼Œä»¥åŠè¿™ä¸ªå†…å®¹æœ¬èº«ï¼ˆurlã€ç…§ç‰‡ç­‰ï¼‰ã€‚å…³äºç”¨æˆ·å¯¹å†…å®¹çš„è¯„è®ºè¿™ç‚¹å…¶å®å¾ˆç®€å•ã€‚</p>
<h5 id="ç”¨æˆ·è¯„è®º"><a href="#ç”¨æˆ·è¯„è®º" class="headerlink" title="ç”¨æˆ·è¯„è®º"></a>ç”¨æˆ·è¯„è®º</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Convenience. This returns the current text from the textView.</span></div><div class="line">open <span class="keyword">var</span> contentText: <span class="type">String</span>! &#123; <span class="keyword">get</span> &#125;</div></pre></td></tr></table></figure>
<p>ç³»ç»Ÿæä¾›çš„è¿™ä¸ª api å°±èƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h5 id="é™„ä»¶å†…å®¹"><a href="#é™„ä»¶å†…å®¹" class="headerlink" title="é™„ä»¶å†…å®¹"></a>é™„ä»¶å†…å®¹</h5><p>æš‚ä¸”å«åšé™„ä»¶å†…å®¹å§ï¼æˆ‘ä¹Ÿä¸çŸ¥é“åº”è¯¥æ€ä¹ˆå«ã€‚è¿™ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬è¿˜æ˜¯çœ‹çœ‹ <code>extensionContext</code> è¿™ä¸ªä¸œè¥¿å§ï¼</p>
<p><code>NSExtensionContext</code> è¿™ä¸ªç±»ä¸€å…±æš´éœ²äº†å››ä¸ªapiå‡ºæ¥ã€‚æˆ‘ä»¬çœ‹ç¬¬ä¸€ä¸ª</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// The list of input NSExtensionItems associated with the context. If the context has no input items, this array will be empty.</span></div><div class="line">open <span class="keyword">var</span> inputItems: [<span class="type">Any</span>] &#123; <span class="keyword">get</span> &#125;</div></pre></td></tr></table></figure>
<p>çœ‹æ ·å­å°±æ˜¯è¿™ä¸ªäº†ã€‚</p>
<blockquote>
<p>çœ‹æ³¨é‡Šå†…å®¹ï¼Œçªç„¶æ„Ÿè§‰ï¼Œapple çš„api ä¹Ÿæœ‰è®¾è®¡çš„ä¸æ˜¯å¾ˆå¥½çš„åœ°æ–¹ï¼Œæ—¢ç„¶æ³¨é‡Šéƒ½æ˜ç¡®è¯´äº† NSExtensionItems æ•°ç»„åº”è¯¥ä¸æ˜¯ Any çš„å§ğŸ˜‚</p>
</blockquote>
<p>æ—¢ç„¶è¿™æ ·, æˆ‘ä»¬å†çœ‹çœ‹ <code>NSExtensionItem</code> è¿™ä¸ªç±»å§ï¼</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// (optional) title for the item</span></div><div class="line"><span class="meta">@NSCopying</span> open <span class="keyword">var</span> attributedTitle: <span class="type">NSAttributedString</span>?</div><div class="line"><span class="comment">// (optional) content text</span></div><div class="line"><span class="meta">@NSCopying</span> open <span class="keyword">var</span> attributedContentText: <span class="type">NSAttributedString</span>?</div><div class="line"><span class="comment">// (optional) Contains images, videos, URLs, etc. This is not meant to be an array of alternate data formats/types, but instead a collection to include in a social media post for example. These items are always typed NSItemProvider.</span></div><div class="line">open <span class="keyword">var</span> attachments: [<span class="type">Any</span>]?</div><div class="line"><span class="comment">// (optional) dictionary of key-value data. The key/value pairs accepted by the service are expected to be specified in the extension's Info.plist. The values of NSExtensionItem's properties will be reflected into the dictionary.</span></div><div class="line">open <span class="keyword">var</span> userInfo: [<span class="type">AnyHashable</span> : <span class="type">Any</span>]?</div></pre></td></tr></table></figure>
<p>æ³¨é‡Šå¤ªå¤æ‚äº†ï¼Œæ•´ç†æˆä¸€ä¸ªè¡¨æ ¼å°±æ˜¯è¿™æ ·çš„:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Properties</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">attributedTitle</td>
<td style="text-align:center">æ ‡é¢˜ optional</td>
</tr>
<tr>
<td style="text-align:center">attributedContentText</td>
<td style="text-align:center">å†…å®¹ optional</td>
</tr>
<tr>
<td style="text-align:center">attachments</td>
<td style="text-align:center">æ‰€æœ‰çš„é™„ä»¶<code>NSItemProvider</code>ç»„æˆä¸€ä¸ªæ•°ç»„ optional</td>
</tr>
<tr>
<td style="text-align:center">userInfo</td>
<td style="text-align:center">ä¸€ä¸ªkeyï¼valueç»“æ„çš„æ•°æ®ã€‚NSExtensionItemä¸­çš„å±æ€§éƒ½ä¼šåœ¨è¿™ä¸ªå±æ€§ä¸­ä¸€ä¸€æ˜ å°„ã€‚æ³¨é‡Šä¸­è®²åˆ°çš„åœ¨ info.plist ä¸­è¦è®¾ç½®çš„éƒ¨åˆ†ä¼šåœ¨åé¢æåˆ°</td>
</tr>
</tbody>
</table>
<p> ä¸‹é¢çš„è¡¨æ ¼å°±æ˜¯ <code>userInfo</code> ä¸­çš„ key :</p>
<table>
<thead>
<tr>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">NSExtensionItemAttributedTitleKey</td>
<td style="text-align:center">æ ‡é¢˜ çš„é”®å</td>
</tr>
<tr>
<td style="text-align:center">NSExtensionItemAttributedContentTextKey</td>
<td style="text-align:center">å†…å®¹ çš„é”®å</td>
</tr>
<tr>
<td style="text-align:center">NSExtensionItemAttachmentsKey</td>
<td style="text-align:center">é™„ä»¶ çš„é”®å</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢åˆæåˆ°äº† <code>NSItemProvider</code> è¿™ä¸ªä¸œè¥¿ã€‚è¿™ç›¸å¿…é¡»å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„é™„ä»¶äº†å§ï¼</p>
<table>
<thead>
<tr>
<th>Api</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>initWithItem:typeIdentifierï¼š</td>
<td>åˆå§‹åŒ–æ–¹æ³•ï¼Œitemä¸ºé™„ä»¶çš„æ•°æ®ï¼ŒtypeIdentifieræ˜¯é™„ä»¶å¯¹åº”çš„ç±»å‹æ ‡è¯†,å¯¹åº”UTIçš„æè¿°ã€‚</td>
</tr>
<tr>
<td>initWithContentsOfURL:</td>
<td>æ ¹æ®åˆ¶å®šçš„æ–‡ä»¶è·¯å¾„æ¥åˆå§‹åŒ–ã€‚</td>
</tr>
<tr>
<td>registerItemForTypeIdentifier:loadHandler:</td>
<td>ä¸ºä¸€ç§èµ„æºç±»å‹è‡ªå®šä¹‰åŠ è½½è¿‡ç¨‹ã€‚è¿™ä¸ªæ–¹æ³•ä¸»è¦é’ˆå¯¹è‡ªå®šä¹‰èµ„æºä½¿ç”¨ï¼Œä¾‹å¦‚è‡ªå·±å®šä¹‰çš„ç±»æˆ–è€…æ–‡ä»¶æ ¼å¼ç­‰ã€‚å½“è°ƒç”¨loadItemForTypeIdentifier:options:completionHandler:æ–¹æ³•æ—¶å°±ä¼šè§¦å‘å®šä¹‰çš„åŠ è½½è¿‡ç¨‹ã€‚</td>
</tr>
<tr>
<td>hasItemConformingToTypeIdentifier:</td>
<td>ç”¨äºåˆ¤æ–­æ˜¯å¦æœ‰typeIdentifier(UTI)æ‰€æŒ‡å®šçš„èµ„æºå­˜åœ¨ã€‚å­˜åœ¨åˆ™è¿”å›YESï¼Œå¦åˆ™è¿”å›NOã€‚è¯¥æ–¹æ³•ç»“åˆloadItemForTypeIdentifier:options:completionHandler:ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td>loadItemForTypeIdentifier:options:completionHandler:</td>
<td>åŠ è½½typeIdentifieræŒ‡å®šçš„èµ„æºã€‚åŠ è½½æ˜¯ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹ï¼ŒåŠ è½½å®Œæˆåä¼šè§¦å‘completionHandlerã€‚</td>
</tr>
<tr>
<td>loadPreviewImageWithOptions:completionHandler:</td>
<td>åŠ è½½èµ„æºçš„é¢„è§ˆå›¾ç‰‡ã€‚</td>
</tr>
</tbody>
</table>
<p>è¿™æ—¶å€™çœ‹çœ‹æ•´ä½“çš„ç»“æ„ï¼š(<a href="http://www.jianshu.com/p/863ce6729455">è¿™ä¸ªå›¾æ˜¯åœ¨çœ‹åˆ°çš„</a>)</p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-09-5D4D49E7-5087-4D01-B78A-D3BCF979E979.png" alt=""></p>
<p>åˆ°è¿™é‡Œï¼Œåº”è¯¥å·²ç»çŸ¥é“äº†åº”è¯¥æ€ä¹ˆåšäº†å§ï¼</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç‚¹å‡»å‘è¡¨çš„äº‹ä»¶</span></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didSelectPost</span><span class="params">()</span></span> &#123;</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.extensionContext?.inputItems.forEach(&#123; (item) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> ext = item <span class="keyword">as</span>! <span class="type">NSExtensionItem</span></div><div class="line">        ext.attachments?.forEach(&#123;</div><div class="line">            <span class="keyword">let</span> atta = $<span class="number">0</span> <span class="keyword">as</span>! <span class="type">NSItemProvider</span></div><div class="line">            <span class="built_in">print</span>(atta)</div><div class="line">            <span class="comment">// åˆ†äº«çš„æ˜¯ç½‘é¡µ</span></div><div class="line">            <span class="keyword">if</span> atta.hasItemConformingToTypeIdentifier(<span class="string">"public.url"</span>) &#123;</div><div class="line">                atta.loadItem(forTypeIdentifier: <span class="string">"public.url"</span>) &#123; (item, error) <span class="keyword">in</span></div><div class="line">                    <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">                    <span class="built_in">print</span>(item!)</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// åˆ†äº«çš„æ˜¯å›¾ç‰‡</span></div><div class="line">            <span class="keyword">if</span> atta.hasItemConformingToTypeIdentifier(<span class="string">"public.jpeg"</span>) &#123;</div><div class="line">                atta.loadItem(forTypeIdentifier: <span class="string">"public.jpeg"</span>) &#123; (item, error) <span class="keyword">in</span></div><div class="line">                    <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">                    <span class="built_in">print</span>(item!)</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"//////////////////////////"</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        <span class="keyword">self</span>.extensionContext!.completeRequest(returningItems: [], completionHandler: <span class="literal">nil</span>)</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»£ç ä¸­åˆ†åˆ«æ˜¯åˆ†äº«ç½‘é¡µå’Œå›¾ç‰‡ä¸¤ä¸ªä¸œè¥¿ã€‚è¿™ä¸€æ­¥è§£å†³äº†æ‰¾åˆ°åˆ†äº«çš„å†…å®¹çš„ä»£ç ã€‚</p>
<p><strong>å…·ä½“åˆ†äº«çš„è¡Œä¸ºå¯ä»¥æœ‰ä¸¤ä¸ªåŠæ³•æ¥è§£å†³</strong></p>
<ul>
<li>å°†éœ€è¦åˆ†äº«çš„å†…å®¹åŠŸè¿‡ apps group ä¿å­˜ï¼Œç„¶ååœ¨æ‰“å¼€ä¸» app çš„æ—¶å€™ï¼Œåœ¨ä¸» app ä¸­å–å‡ºç„¶åå‘é€ç»™severã€‚</li>
<li>ç›´æ¥åœ¨ Share Extension ä¸­åˆ†äº«ã€‚</li>
</ul>
<p>è¿™ä¸ªè¿‡ç¨‹å°±ä¸å†å™è¿°äº†ã€‚</p>
<h4 id="info-plist"><a href="#info-plist" class="headerlink" title="info.plist"></a>info.plist</h4><p>æ—¢ç„¶è¯´åˆ°äº† info.plist ä¸­çš„è®¾ç½®ï¼Œå°±å†çœ‹çœ‹è¿™éƒ¨åˆ†æ˜¯è¯´çš„ä»€ä¹ˆå§ï¼éƒ½æ˜¯ä¸€äº›å¾ˆå›ºå®šçš„å†…å®¹ï¼Œæˆ‘éšä¾¿æŒ‘ä¸¤ä¸ªè¯´è¯´å§ï¼</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>NSExtensionActivationSupportsAttachmentsWithMaxCount</td>
<td>é™„ä»¶æœ€å¤§ä¸ªæ•°</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsAttachmentsWithMinCount</td>
<td>é™„ä»¶æœ€å°ä¸ªæ•°</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsFileWithMaxCount</td>
<td>é™„ä»¶ç§ç±»é™åˆ¶</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsMovieWithMaxCount</td>
<td>è§†é¢‘ä¸ªæ•°é™åˆ¶</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsImageWithMaxCount</td>
<td>å›¾ç‰‡ä¸ªæ•°é™åˆ¶</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsText</td>
<td>æ˜¯å¦æ”¯æŒæ–‡æœ¬ç±»å‹</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsWebURLWithMaxCount</td>
<td>web é“¾æ¥æœ€å¤šé™åˆ¶</td>
</tr>
<tr>
<td>NSExtensionActivationSupportsWebPageWithMaxCount</td>
<td>web é¡µé¢æœ€å¤šé™åˆ¶</td>
</tr>
</tbody>
</table>
<p>å¦‚æœè¦è®¾ç½®ä½ çš„ extension åªæ”¯æŒå›¾ç‰‡ï¼Œurl ä»€ä¹ˆçš„ã€‚åªéœ€è¦æŠŠä¸ªæ•°é™åˆ¶å†™æˆ 0ï¼</p>
<p>ä½†æ˜¯è®¾ç½®çš„æ—¶å€™éœ€è¦æ³¨æ„æ˜¯å°†NSExtensionActivationRule æ”¹æˆ Dictionary ç±»å‹å¹¶æ·»åŠ ï¼š</p>
<ul>
<li>NSExtensionActivationSupportsAttachmentsWithMaxCount</li>
<li>NSExtensionActivationSupportsAttachmentsWithMinCount</li>
<li>NSExtensionActivationSupportsImageWithMaxCount</li>
<li>NSExtensionActivationSupportsMovieWithMaxCount</li>
<li>NSExtensionActivationSupportsWebPageWithMaxCount</li>
<li>NSExtensionActivationSupportsWebURLWithMaxCount</li>
</ul>
<p>è¿™å°±åŸºæœ¬ä¸Šå®Œæˆäº†ï¼Œæˆ‘ä»¬è¦åœ¨ ç³»ç»Ÿæˆ–è€… å¤–éƒ¨ app ä¸­å°†å†…å®¹åˆ†äº«åˆ°æˆ‘ä»¬è‡ªå·±çš„ app ä¸­ã€‚è¿™å¥½åƒè¿˜æ˜¯æœ‰å¾ˆå¤§çš„é™åˆ¶ã€‚æ¯•ç«Ÿå¦‚æœæˆ‘ä»¬çš„äº§å“ä¸æ˜¯åƒå¾®åšqqè¿™æ ·çš„ç¤¾äº¤app çš„è¯ï¼Œè¿™ä¸ªä¸œè¥¿å°±æ²¡ä»€ä¹ˆä½œç”¨äº†ã€‚</p>
<p><strong>å¦å¤–æ³¨æ„è¿™ä¸ªè­¦å‘Š</strong></p>
<p><img src="http://ocg4av0wv.bkt.clouddn.com/2017-07-09-133823.jpg" alt=""></p>
<h3 id="åœ¨è‡ªå·±çš„app-ä¸­è°ƒèµ·-Share-Extension"><a href="#åœ¨è‡ªå·±çš„app-ä¸­è°ƒèµ·-Share-Extension" class="headerlink" title="åœ¨è‡ªå·±çš„app ä¸­è°ƒèµ· Share Extension"></a>åœ¨è‡ªå·±çš„app ä¸­è°ƒèµ· Share Extension</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> activity = <span class="type">UIActivityViewController</span>(activityItems: [<span class="string">"ç™¾åº¦"</span>, <span class="type">URL</span>(string: <span class="string">"http://www.baidu.com"</span>)!], applicationActivities: <span class="literal">nil</span>)</div><div class="line"><span class="comment">// ä¸åˆ†äº«åˆ° airDrop å’Œ ç²˜è´´æ¿</span></div><div class="line">activity.excludedActivityTypes = [.airDrop, .copyToPasteboard]</div><div class="line">present(activity, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div></pre></td></tr></table></figure>
<p>å½“ç„¶è¿˜æœ‰ <code>UIActivityViewControllerCompletionHandler</code> è¿™ä¸ªä¸œè¥¿ï¼Œæ¥å›è°ƒåˆ†äº«çš„ç»“æœã€‚</p>
<p><strong>å¦å¤–ä¸€ç§æ–¹æ³•</strong>å¯ä»¥ç›´æ¥è°ƒèµ·æŸä¸ªç³»ç»Ÿçš„åˆ†äº«ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ”¯æŒ å¾®åš</span></div><div class="line">     </div><div class="line">     <span class="keyword">if</span> !<span class="type">SLComposeViewController</span>.isAvailable(forServiceType: <span class="type">SLServiceTypeSinaWeibo</span>) &#123;</div><div class="line">         <span class="comment">// åº”è¯¥æ˜¯æ²¡æœ‰ç™»å½•çš„åŸå› , æ‰€ä»¥ä¸€ç›´ä¸ä¼šè¿”å›</span></div><div class="line">         <span class="built_in">print</span>(<span class="string">"ä¸å¯ç”¨"</span>)</div><div class="line">         <span class="keyword">return</span></div><div class="line">     &#125;</div><div class="line">     </div><div class="line">     <span class="keyword">let</span> composeVC = <span class="type">SLComposeViewController</span>(forServiceType: <span class="type">SLServiceTypeSinaWeibo</span>)</div><div class="line">     <span class="comment">//        // æ·»åŠ è¦åˆ†äº«çš„å›¾ç‰‡</span></div><div class="line">     <span class="comment">//        composeVC?.add(UIImage(named: "Nameless"))</span></div><div class="line">     <span class="comment">//        // æ·»åŠ è¦åˆ†äº«çš„æ–‡å­—</span></div><div class="line">     <span class="comment">//        composeVC?.setInitialText("åˆ†äº«åˆ°XXX")</span></div><div class="line">     <span class="comment">//        // æ·»åŠ è¦åˆ†äº«çš„url</span></div><div class="line">     <span class="comment">//        composeVC?.add(URL(string: "http://www.baidu.com"))</span></div><div class="line">     <span class="comment">//        // å¼¹å‡ºåˆ†äº«æ§åˆ¶å™¨</span></div><div class="line">     <span class="keyword">self</span>.present(composeVC!, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">     <span class="comment">//        // ç›‘å¬ç”¨æˆ·ç‚¹å‡»äº‹ä»¶</span></div><div class="line">     composeVC?.completionHandler = &#123;</div><div class="line">         <span class="keyword">if</span> $<span class="number">0</span> == .done &#123;</div><div class="line">             <span class="type">NSLog</span>(<span class="string">"ç‚¹å‡»äº†å‘é€"</span>);</div><div class="line">         &#125; <span class="keyword">else</span> <span class="keyword">if</span> $<span class="number">0</span> == .cancelled &#123;</div><div class="line">             <span class="type">NSLog</span>(<span class="string">"ç‚¹å‡»äº†å–æ¶ˆ"</span>);</div><div class="line">         &#125;</div><div class="line">     &#125;</div></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå°±æ˜¯ï¼Œè¿™æ ·çš„åˆ†äº«åªèƒ½å¯¹ç³»ç»Ÿçš„åˆ†äº«ï¼Œå¾®ä¿¡ä»€ä¹ˆçš„å°±ä¸èƒ½è¿™ä¹ˆåšäº†ã€‚</p>
<h3 id="æœ€åçš„è¯"><a href="#æœ€åçš„è¯" class="headerlink" title="æœ€åçš„è¯"></a>æœ€åçš„è¯</h3><p>Share Extension å†™åˆ°è¿™é‡Œå°±å·®ä¸å¤šäº†ã€‚åˆæ­¥çš„å…¥é—¨æ­¥éª¤ä¹Ÿå·²ç»å®Œæˆäº†ã€‚æœ€åï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œå¾®ä¿¡çš„ Share Extension åšçš„äº‹æƒ…ï¼Œæ„Ÿè§‰ç”¨ä»–è¿˜èƒ½åšå¾ˆå¤šçš„äº‹æƒ…ã€‚è¿™ä¸ªä¹Ÿéœ€è¦åœ¨å¼€å‘ä¸­æ ¹æ®å®é™…éœ€æ±‚å»æ‹“å±•äº†ï¼Œå¦å¤–è¿˜æœ‰è‡ªå®šä¹‰ UI ç­‰ï¼Œä¹Ÿæ˜¯å¾ˆç®€å•çš„äº‹æƒ…ã€‚åªæ˜¯ç”¨è‡ªå·± UIViewController å°±å¥½äº†ã€‚è¿™ä¸ªå°±ä¸å†è¯¦ç»†çš„è¯´äº†ã€‚åˆ°æ­¤ï¼Œæˆ‘èƒ½æƒ³åˆ°çš„åŠŸèƒ½ï¼Œå°±åŸºæœ¬ä¸Šå®Œæˆäº†ã€‚å¦‚æœæœ‰æ›´å¤šéœ€æ±‚ä¹Ÿå¯ä»¥è·Ÿæˆ‘è®¨è®ºã€‚</p>
<p><a href="https://github.com/CepheusSun/ShareExtension"><strong>demoåœ°å€</strong></a></p>
]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;p&gt;title: é¢å‘ Extension å¼€å‘ ğŸŒ Share Extension&lt;br&gt;date: 2017-07-09 21:43:38&lt;br&gt;tags: [iOS, App Extension]&lt;/p&gt;
&lt;h2 id=&quot;categories-App-Extension&quot;&gt;&lt;a href=&quot;#categories-App-Extension&quot; class=&quot;headerlink&quot; title=&quot;categories: App Extension&quot;&gt;&lt;/a&gt;categories: App Extension&lt;/h2&gt;&lt;p&gt;Share Extension ä½¿ç”¨æˆ·åœ¨ä½¿ç”¨å…¶ä»–çš„app çš„æ—¶å€™, æ›´åŠ æ–¹ä¾¿çš„å°†å…¶å†…å®¹åˆ†äº«å‡ºå»ï¼Œåƒæ˜¯ç¤¾ä¼šåŒ–åˆ†äº«è¿˜æœ‰ä¸Šä¼ æœåŠ¡å™¨ã€‚æ¯”å¦‚è¯´ï¼Œ åœ¨ä¸€ä¸ª app ä¸­æœ‰ä¸ªåˆ†äº«æŒ‰é’®ï¼Œ ç”¨æˆ·å¯ä»¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ª Share Extension æ¥å‘è¡¨è¯„è®ºæˆ–è€…å†…å®¹ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>é¢å‘ Extension å¼€å‘ ğŸŒ Today Extension</title>
    <link href="http://www.CepheusSun.com/TodayExtension.html"/>
    <id>http://www.CepheusSun.com/TodayExtension.html</id>
    <published>2017-06-30T10:41:38.000Z</published>
    <updated>2017-07-09T13:42:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>app extension è®©æˆ‘ä»¬åœ¨ç”¨æˆ·æ­£åœ¨ä½¿ç”¨å…¶ä»– app çš„æ—¶å€™, æ‹“å±•æˆ‘ä»¬ app çš„åŠŸèƒ½ã€‚</p>
<p>Today Extension ä¹Ÿå«åš widgetã€‚ å®ƒèƒ½å¤Ÿè®©ä¸€äº›é‡è¦çš„æ¶ˆæ¯æ›´å¿«é€Ÿçš„åˆ°è¾¾ä½ çš„ç”¨æˆ·ã€‚æ¯”å¦‚è¯´, ç”¨æˆ·å¯ä»¥é€šè¿‡å®ƒæŸ¥çœ‹å¤©æ°”ï¼Œæˆ–è€…è‚¡ç¥¨ä»·æ ¼, æŸ¥çœ‹æ—¥ç¨‹è¡¨ç­‰ç­‰ã€‚è‹¹æœåœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¯´åˆ°ï¼Œ ä¸€ä¸ª widget åº”è¯¥æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ã€‚</p>
<ul>
<li>ç¡®ä¿å†…å®¹æ˜¯æœ€æ–°çš„</li>
<li>å“åº”çš„ç”¨æˆ·äº‹ä»¶</li>
<li>æ€§èƒ½å¥½(åœ¨iOSä¸Šå ç”¨å¤§é‡å†…å­˜ï¼Œç³»ç»Ÿå¯èƒ½ä¼škillæ‰è¿™ä¸ªwidget)</li>
</ul>
<a id="more"></a>
<h3 id="åˆ›å»º-Today-Extension"><a href="#åˆ›å»º-Today-Extension" class="headerlink" title="åˆ›å»º Today Extension"></a>åˆ›å»º Today Extension</h3><p>Xcode -&gt; File -&gt; New -&gt; Target -&gt; TodayExtension</p>
<p>è·Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ä¸€æ ·, è®¾ç½®åˆ›å»ºå¥½ä¹‹å, é¡¹ç›®ä¸­ä¼šå¤šä¸€ä¸ª Target, ä¿®æ”¹Scheme ä¸ºä½ åˆšåˆšåˆ›å»ºçš„ Extension å†è¿è¡Œ, å°±èƒ½åœ¨ é€šçŸ¥ä¸­å¿ƒçš„ Today é‡Œé¢çœ‹åˆ°ä½ åˆšåˆšåˆ›å»ºçš„ widget äº†, ä¸Šé¢å†™ç€â€œHello worldâ€</p>
<p>å¦å¤– Xcode ç»™ä½ åˆ›å»ºäº†é»˜è®¤çš„æ¨¡ç‰ˆæ–‡ä»¶ã€‚</p>
<ul>
<li>TodayViewController.swift(å¦‚æœæ˜¯ OC å¯¹åº”ä¼šæ˜¯ <code>.h</code> å’Œ <code>.m</code> æ–‡ä»¶)</li>
<li>MainInterface.storyboard</li>
<li>Info.plist</li>
</ul>
<p><strong>æ³¨æ„:</strong> é»˜è®¤æ˜¯ä½¿ç”¨è¿™ä¸ª storyboard ä½œä¸ºè¿™ä¸ª widget çš„å…¥å£ã€‚å¦‚æœä¸éœ€è¦ä½¿ç”¨storyboard å¯ä»¥åˆ é™¤æ‰è¿™ä¸ªstoryboardå¹¶ä¸”å°†Info.plist ä¸­çš„</p>
<ul>
<li><code>NSExtensionMainStoryboard</code> æ”¹æˆ <code>NSExtensionPrincipalClass</code></li>
<li><code>MainInterface</code> æ”¹æˆ <code>TodayViewController</code></li>
</ul>
<h3 id="è®¾ç½®ç•Œé¢"><a href="#è®¾ç½®ç•Œé¢" class="headerlink" title="è®¾ç½®ç•Œé¢"></a>è®¾ç½®ç•Œé¢</h3><p>å®Œæˆäº†ä¸Šé¢çš„æ­¥éª¤ä¹‹å, ä¸è®ºä½ æ˜¯é€‰æ‹©ç”¨ stroyboard ä½œä¸ºä½  widget çš„å…¥å£, è¿˜æ˜¯é€‰æ‹©ç”¨ä»£ç æ¥åšè¿™ä»¶äº‹æƒ…ã€‚éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<blockquote>
<p>ç”±äºä¸çŸ¥é“ä»€ä¹ˆåŸå› , æˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°çš„æ–‡ç« éƒ½æ˜¯ä½¿ç”¨ä»£ç æ¥åšçš„è¿™ä»¶äº‹æƒ…ã€‚æ‰€ä»¥åœ¨è¿™ç¯‡æ–‡ç« ä»¥åŠåé¢çš„ç¤ºä¾‹ä»£ç ä¸­éƒ½å°†ä½¿ç”¨ Xcode é»˜è®¤çš„ storyboard æ¥åšè¿™ä¸ª widget çš„å¸ƒå±€ã€‚</p>
</blockquote>
<h3 id="æˆ‘å°†è§£å†³çš„é—®é¢˜"><a href="#æˆ‘å°†è§£å†³çš„é—®é¢˜" class="headerlink" title="æˆ‘å°†è§£å†³çš„é—®é¢˜"></a>æˆ‘å°†è§£å†³çš„é—®é¢˜</h3><ul>
<li>åœ¨ widget ä¸­æ‰“å¼€ä¸» app å¹¶ä¼ é€’å‚æ•°</li>
<li>widget å’Œ ä¸» app å…±äº«æ•°æ®</li>
<li>widget å’Œ ä¸» app å…±ç”¨èµ„æº</li>
<li>widget çš„æ‰“å¼€å’ŒæŠ˜å </li>
</ul>
<h3 id="æˆ‘é‡åˆ°çš„å‘"><a href="#æˆ‘é‡åˆ°çš„å‘" class="headerlink" title="æˆ‘é‡åˆ°çš„å‘"></a>æˆ‘é‡åˆ°çš„å‘</h3><p>ä¹Ÿæ²¡ä»€ä¹ˆå‘, æ¯•ç«Ÿ Today Extension å¹¶ä¸æ˜¯ä»€ä¹ˆå¾ˆéš¾çš„ä¸œè¥¿ã€‚</p>
<ul>
<li>æµ‹è¯•çš„æ—¶å€™, ç”±äº widget å’Œ ä¸»app æ˜¯ä¸¤ä¸ªä¸åŒçš„ target, æ‰€ä»¥åœ¨ä¼ é€’å‚æ•°çš„æ—¶å€™, åœ¨ appdelegate ä¸­æ‰“å°å¯¹åº”çš„å€¼æ²¡æœ‰æ•ˆæœã€‚æœ€å¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ˜¯å› ä¸ºè®¾ç½®çš„ scheme æ˜¯ widget æ‰€ä»¥åœ¨ ä¸» app ä¸­çš„ä¿®æ”¹æ˜¯æ— æ•ˆçš„ã€‚ä½†æ˜¯å®é™…æ˜¯å¹¶ä¸æ˜¯è¿™æ ·ã€‚å°†å‚æ•°ä»¥ alert çš„å½¢å¼è¡¨ç°å‡ºæ¥, è¿™æ—¶å€™èƒ½å¤Ÿå‘ç°, å…¶å®ä¸» app æ˜¯è·‘èµ·æ¥äº†çš„ã€‚</li>
</ul>
<h3 id="å…ˆè¯´è¯´æˆ‘åšçš„å‡†å¤‡å·¥ä½œå§"><a href="#å…ˆè¯´è¯´æˆ‘åšçš„å‡†å¤‡å·¥ä½œå§" class="headerlink" title="å…ˆè¯´è¯´æˆ‘åšçš„å‡†å¤‡å·¥ä½œå§"></a>å…ˆè¯´è¯´æˆ‘åšçš„å‡†å¤‡å·¥ä½œå§</h3><p>ä¸ºäº†ä¸æ‰¯é‚£ä¹ˆå¤šæ²¡ç”¨çš„ä¸œè¥¿ã€‚å…ˆè¯´è¯´æˆ‘åšäº†é‚£äº›è·Ÿä»Šå¤©ä¸»é¢˜æ²¡ä»€ä¹ˆå…³ç³»çš„äº‹æƒ…ã€‚</p>
<h4 id="å†™ä¸»app"><a href="#å†™ä¸»app" class="headerlink" title="å†™ä¸»app"></a>å†™ä¸»app</h4><p>åœ¨ä¸» app ä¸­æˆ‘å†™äº†ä¸€ä¸ª UITableView, å¹¶ä½¿ç”¨ Userdefault å°†æˆ‘è¦æŒä¹…åŒ–çš„æ•°æ®ä¿å­˜ä¸‹æ¥ã€‚ç„¶åå¯¹åº”ç»™ Todo list åšäº†ï¼Œæ·»åŠ ï¼Œå’Œåˆ é™¤çš„åŠŸèƒ½ã€‚</p>
<h4 id="widget"><a href="#widget" class="headerlink" title="widget"></a>widget</h4><p>åœ¨ widget ä¸­æˆ‘ä¹Ÿä¸‹äº†åŒæ ·çš„ä¸€ä¸ª UITableView åªæœ‰æŸ¥çœ‹çš„åŠŸèƒ½ã€‚</p>
<h4 id="è¦åšçš„äº‹æƒ…"><a href="#è¦åšçš„äº‹æƒ…" class="headerlink" title="è¦åšçš„äº‹æƒ…"></a>è¦åšçš„äº‹æƒ…</h4><h5 id="widget-å’Œ-ä¸»-app-å…±ç”¨èµ„æº"><a href="#widget-å’Œ-ä¸»-app-å…±ç”¨èµ„æº" class="headerlink" title="widget å’Œ ä¸» app å…±ç”¨èµ„æº"></a>widget å’Œ ä¸» app å…±ç”¨èµ„æº</h5><p>widget å’Œ ä¸»app å…±äº«ä»£ç å’Œèµ„æºã€‚ä½œä¸ºä¸€ä¸ªå·¥ç¨‹å¸ˆ, æˆ‘ä»¬åœ¨ä»»ä½•äº‹æƒ…çš„æ—¶å€™éƒ½è¦æƒ³åˆ°é«˜ç±»èšä½è€¦åˆç€å¥ä¸å˜çš„çœŸç†ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯è¦å°½å¯èƒ½çš„è®© widget å’Œ ä¸» app å…±äº«ä»£ç ã€‚</p>
<p>ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ¡ˆ:</p>
<ul>
<li>framework</li>
<li>ç›´æ¥å…±äº«</li>
</ul>
<p>framework çš„è¯ï¼Œå°±æ‹¿ cocoapods æ¥è¯´å§ï¼Œ ç”±äº widget æ˜¯ä¸€ä¸ªæ–°çš„target, æ‰€ä»¥åªéœ€è¦åœ¨ podfile ä¸­å¯¹åº”æ·»åŠ ä»£ç å°±èƒ½å¤Ÿåœ¨ widget ä¸­ä½¿ç”¨ã€‚</p>
<p>å¦å¤–ä¸€ä¸ªæ˜¯ ç›´æ¥å…±äº«, è¿™ä¸ªå°±å¾ˆç®€å•äº†ã€‚æˆ‘åœ¨ç¤ºä¾‹ä¸­è®©ä¸»app å’Œ widget å…±äº«äº†ä¸€å¼ å›¾ç‰‡ï¼Œä¸€ä¸ª TodoCell ç±»(åŒ…æ‹¬xib æ–‡ä»¶)ã€‚æˆ‘åšçš„å”¯ä¸€çš„ä¸€ä»¶äº‹æƒ…å°±æ˜¯åœ¨ Xcode ä¸­é€‰ä¸­è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶ååœ¨ Xcodeå³è¾¹çš„ TargetMenberShip ä¸­å‹¾é€‰å¯¹åº”çš„ target.</p>
<h5 id="widget-å’Œ-ä¸»-app-å…±äº«æ•°æ®"><a href="#widget-å’Œ-ä¸»-app-å…±äº«æ•°æ®" class="headerlink" title="widget å’Œ ä¸» app å…±äº«æ•°æ®"></a>widget å’Œ ä¸» app å…±äº«æ•°æ®</h5><p>ä¸¥æ ¼æ¥è¯´ widget å’Œ app æ˜¯ä¸åŒçš„ä¸¤ä¸ª app äº†, ä»–ä»¬ä¹‹é—´è¦å…±äº«æ•°æ®çš„è¯åªèƒ½ä½¿ç”¨ <strong>App Groups</strong> äº†ã€‚</p>
<p>é¦–å…ˆåœ¨ä¸» app</p>
<p>target -&gt; capabilities -&gt; app groups</p>
<p>æ‰“å¼€ app groups åŠŸèƒ½, ç‚¹å‡» <code>+</code> , è®¾ç½® id ã€‚å¦‚æœé‡å¤äº†å°±æ”¹ä¸€ä¸ªã€‚</p>
<p>widget app</p>
<p>target -&gt; capabilities -&gt; app groups</p>
<p>è¿™æ—¶å€™çš„ group åˆ—è¡¨å°±èƒ½å¤Ÿçœ‹åˆ°å¯¹åº”çš„ group äº†ã€‚å‹¾é€‰å³å¯ã€‚</p>
<p>è¿™æ—¶å€™å·²ç»å®Œæˆäº†widget å’Œ ä¸»appå…±äº«æ•°æ®çš„å‰ææ¡ä»¶ã€‚</p>
<p>æ¥ä¸‹æ¥è¿˜éœ€è¦åšçš„äº‹æƒ…, å°±æ˜¯å°†æˆ‘ä»¬å‡†å¤‡å·¥ä½œé‡Œé¢Userdefaultç›¸å…³ä»£ç è¿›è¡Œè°ƒæ•´ã€‚</p>
<p>å°† <code>UserDefaults.standard</code> æ”¹æˆ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UserDefaults(suiteName: &quot;your group id&quot;)</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥åœ¨ widget ä¸­ ä½¿ç”¨</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> userdefault = <span class="type">UserDefaults</span>(suiteName: <span class="string">"group.com.sunny.group"</span>)</div></pre></td></tr></table></figure>
<p>è·å¾—åœ¨ä¸» app ä¸­æŒä¹…åŒ–çš„æ•°æ®äº†ã€‚å…³äº app groups å…¶ä»–çš„ç”¨æ³•ï¼Œå¯ä»¥ç»§ç»­æ·±å…¥ç ”ç©¶ã€‚</p>
<h5 id="widget-çš„æŠ˜å å’Œå±•å¼€"><a href="#widget-çš„æŠ˜å å’Œå±•å¼€" class="headerlink" title="widget çš„æŠ˜å å’Œå±•å¼€"></a>widget çš„æŠ˜å å’Œå±•å¼€</h5><p>è‹¹æœçš„å®˜æ–¹æ–‡æ¡£é‡Œé¢æ˜ç¡®çš„è¯´äº†ï¼Œwidget çš„ç•Œé¢æ˜¯ä¸èƒ½æ»‘åŠ¨çš„ã€‚æ¯•ç«Ÿ widget å’Œé€šçŸ¥ä¸­å¿ƒçš„æ»‘åŠ¨ä¸èƒ½å†²çªå•Šã€‚</p>
<p>æ‰€ä»¥æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°† widget æŠ˜å èµ·æ¥ï¼Œæ¯•ç«Ÿå¤ªé•¿çš„ widget å®åœ¨æ˜¯ä»¤äººè®¨åŒå•Šã€‚</p>
<p>ä¸»è¦è¿˜æ˜¯è¯´è¯´iOS10 ä¸Šæ€ä¹ˆåšçš„å§ï¼Œæ¯•ç«Ÿæ²¡æœ‰iOS10 ä»¥ä¸‹çš„è®¾å¤‡ã€‚</p>
<p>åœ¨ TodayViewController çš„ didLoad ä¸­æ·»åŠ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">        <span class="comment">// iOS10 æ·»åŠ æŠ˜å æŒ‰é’®</span></div><div class="line">        <span class="keyword">if</span> #available(iOSApplicationExtension <span class="number">10.0</span>, *) &#123;</div><div class="line">            extensionContext?.widgetLargestAvailableDisplayMode = .expanded</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"><span class="comment">// iOS8 ã€iOS9 ä¸Šéœ€è¦è‡ªå·±æ·»åŠ æŠ˜å æŒ‰é’®</span></div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>ç„¶åå®ç° <code>NCWidgetProviding</code> åè®®ä¸­çš„æ–¹æ³•</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">widgetActiveDisplayModeDidChange</span><span class="params">(<span class="number">_</span> activeDisplayMode: NCWidgetDisplayMode, withMaximumSize maxSize: CGSize)</span></span> &#123;</div><div class="line"><span class="comment">// ç”±äº iOS8 ã€iOS9 ä¸Šæ²¡æœ‰è¿™ä¸ªä»£ç†ã€‚éœ€è¦å¯¹è‡ªå·±æ·»åŠ çš„æŒ‰é’®è®¾ç½® target-action ç„¶åè¿›è¡Œä¿®æ”¹</span></div><div class="line">        <span class="keyword">switch</span> activeDisplayMode &#123;</div><div class="line">        <span class="keyword">case</span> .compact:</div><div class="line">            preferredContentSize = maxSize</div><div class="line">        <span class="keyword">case</span> .expanded:</div><div class="line">            preferredContentSize = <span class="type">CGSize</span>(width: <span class="number">0.0</span>, height: <span class="number">60</span> * <span class="type">CGFloat</span>(dataSource.<span class="built_in">count</span>))</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>åœ¨ iOS8 å’Œ iOS9 ä¸­, ç”±äºç³»ç»Ÿæ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚æˆ‘ä»¬åªèƒ½è‡ªå·±å†™ä¸€ä¸ªæŒ‰é’®ç„¶åå†æ¥åšè¿™äº›äº‹æƒ…äº†ã€‚</p>
<h5 id="widget-æ‰“å¼€-ä¸»app"><a href="#widget-æ‰“å¼€-ä¸»app" class="headerlink" title="widget æ‰“å¼€ ä¸»app"></a>widget æ‰“å¼€ ä¸»app</h5><p>widget æ‰“å¼€ä¸» app è¿˜æ˜¯è€æ€è·¯ï¼Œopenurl å°±å¯ä»¥äº†ï¼Œç„¶ååœ¨url ä¸­æ·»åŠ å¯¹åº”éœ€è¦çš„å‚æ•°ã€‚</p>
<p><strong>å‡†å¤‡å·¥ä½œ</strong> </p>
<p>ä¸»app -&gt; target -&gt; info -&gt; UrlTypes </p>
<p>æ·»åŠ ä¸€ä¸ª URlType ç„¶åè®¾ç½® URL Scheme ä¸ºä½ è‡ªå®šä¹‰çš„å­—ç¬¦ä¸²ã€‚ æ¯”å¦‚ â€œsunnyâ€ã€‚</p>
<p>åœ¨ widget ä¸­éœ€è¦è·³è½¬çš„åœ°æ–¹å†™è¿™æ ·çš„ä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">self</span>.extensionContext?.open(<span class="type">NSURL</span>(string: <span class="string">"sunny://action=<span class="subst">\(dataSource[indexPath.row])</span>"</span>)</div></pre></td></tr></table></figure>
<p>å‚æ•°ä¼ é€’ä¹Ÿå°±æ˜¯æŒ‰ç…§ä¸Šæ–‡, åœ¨urlä¸­æ‹¼æ¥äº†ã€‚ä¸Šæ–‡æœ‰æåˆ°, widget å’Œ app å¯ä»¥å…±äº«æ•°æ®ã€‚è¿™ä¹Ÿå¯èƒ½æ˜¯ä¸€ç§ä¼ é€’å‚æ•°çš„æ–¹å¼ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™æ‰“å¼€ä¸»è¦ app å°±æ˜¯ç›´æ¥è¿›å…¥ä¸»è¦ç•Œé¢äº†ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åšä¸€äº›å…¶ä»–çš„äº‹æƒ…åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>æƒ³æƒ³ä»¥å‰åšå¾®ä¿¡æˆ–è€…æ”¯ä»˜å®æ”¯ä»˜çš„æ—¶å€™ï¼Œ éƒ½è¦åœ¨ appdelegate ä¸­å†™ä¸€äº›ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:])</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">let</span> <span class="keyword">prefix</span> = <span class="string">"sunny://"</span><span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯å¯é çš„åœ°æ–¹ä¼ é€’è¿‡æ¥çš„</span></div><div class="line">    <span class="keyword">if</span> url.absoluteString.hasPrefix(<span class="keyword">prefix</span>) &#123;</div><div class="line">    <span class="comment">// å‚æ•°è¿‡æ¥äº†ï¼ åšå¯¹åº”çš„äº‹æƒ…</span></div><div class="line">        <span class="keyword">let</span> a = <span class="type">UIAlertController</span>(title: url.absoluteString, message: <span class="literal">nil</span>, preferredStyle: .alert)</div><div class="line">        a.addAction(<span class="type">UIAlertAction</span>(title: <span class="string">"å–æ¶ˆ"</span>, style: .cancel, handler: <span class="literal">nil</span>))</div><div class="line">        <span class="keyword">self</span>.window?.rootViewController?.present(a, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="others"><a href="#others" class="headerlink" title="others"></a>others</h4><h5 id="é«˜åº¦"><a href="#é«˜åº¦" class="headerlink" title="é«˜åº¦"></a>é«˜åº¦</h5><p>widgetçš„é»˜è®¤é«˜åº¦æ˜¯æœ‰é™åˆ¶çš„ã€‚</p>
<p>compact ä¸‹:</p>
<ul>
<li>max = 110</li>
<li>mim = 110</li>
</ul>
<p>expanded ä¸‹:</p>
<ul>
<li>min = 110</li>
<li>max = æ ¹æ®ä¸åŒçš„æœºå‹äºŒä¸åŒã€‚</li>
</ul>
<p>æ— è®ºæ€ä¹ˆè®¾ç½®, éƒ½ä¸å›è¶…å‡ºè¿™ä¸ªèŒƒå›´</p>
<h5 id="widgetPerformUpdate"><a href="#widgetPerformUpdate" class="headerlink" title="widgetPerformUpdate"></a>widgetPerformUpdate</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">func widgetPerformUpdate(completionHandler: (@escaping (NCUpdateResult) -&gt; Void)) &#123;</div><div class="line">    // Perform any setup necessary in order to update the view.</div><div class="line">    </div><div class="line">    // If an error is encountered, use NCUpdateResult.Failed</div><div class="line">    // If there&apos;s no update required, use NCUpdateResult.NoData</div><div class="line">    // If there&apos;s an update, use NCUpdateResult.NewData</div><div class="line">    </div><div class="line">    completionHandler(NCUpdateResult.newData)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•ç”¨æ¥é€‰æ‹© widget å†å‡ºç°çš„æ—¶å€™ä¼šä¸ä¼šé‡æ–°åˆ·æ–°ã€‚</p>
<h5 id="é€šçŸ¥"><a href="#é€šçŸ¥" class="headerlink" title="é€šçŸ¥"></a>é€šçŸ¥</h5><p><del>åœ¨ <code>NSExtensionContext</code> ä¸­çœ‹åˆ°çš„å‡ ä¸ªé€šçŸ¥è²Œä¼¼ä¸æ˜¯ç»™ TodayExtension ç”¨çš„ã€‚</del></p>
<p><code>NSExtensionContext</code> ä¸­èƒ½çœ‹åˆ°å‡ ä¸ªé€šçŸ¥ä»–ä»¬éƒ½æ˜¯ç›‘å¬ host app çš„çŠ¶æ€çš„ã€‚æ‰€ä»¥å¯¹äºwidget æ¥è¯´ï¼Œ host app å°±æ˜¯ Today è¿™ä¸ªä¸œè¥¿å•¦ã€‚</p>
<h4 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h4><p>æŠ›ç –å¼•ç‰ï¼Œæœ¬æ–‡ç”¨Today Extensionåšäº†ä¸€ä¸ªå¾ˆç®€å•çš„åŠŸèƒ½ã€‚ å½“ç„¶, æˆ‘ä»¬èƒ½ç”¨ä»–åšçš„äº‹æƒ…å¯ä¸æ­¢è¿™äº›ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬å‘åŠ¨æˆ‘ä»¬çš„èªæ˜æ‰æ™ºäº†ã€‚</p>
<p><a href="https://github.com/CepheusSun/TodayExtension">ç¤ºä¾‹ä»£ç ä¸‹è½½é“¾æ¥</a>ç”±äºä½¿ç”¨swiftå†™çš„, ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› , ä½ å‘ç°ç¼–è¯‘ä¸è¿‡äº†ã€‚å¯ä»¥è”ç³»æˆ‘, æˆ‘å°†åšé€‚é…ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;app extension è®©æˆ‘ä»¬åœ¨ç”¨æˆ·æ­£åœ¨ä½¿ç”¨å…¶ä»– app çš„æ—¶å€™, æ‹“å±•æˆ‘ä»¬ app çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;Today Extension ä¹Ÿå«åš widgetã€‚ å®ƒèƒ½å¤Ÿè®©ä¸€äº›é‡è¦çš„æ¶ˆæ¯æ›´å¿«é€Ÿçš„åˆ°è¾¾ä½ çš„ç”¨æˆ·ã€‚æ¯”å¦‚è¯´, ç”¨æˆ·å¯ä»¥é€šè¿‡å®ƒæŸ¥çœ‹å¤©æ°”ï¼Œæˆ–è€…è‚¡ç¥¨ä»·æ ¼, æŸ¥çœ‹æ—¥ç¨‹è¡¨ç­‰ç­‰ã€‚è‹¹æœåœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¯´åˆ°ï¼Œ ä¸€ä¸ª widget åº”è¯¥æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¡®ä¿å†…å®¹æ˜¯æœ€æ–°çš„&lt;/li&gt;
&lt;li&gt;å“åº”çš„ç”¨æˆ·äº‹ä»¶&lt;/li&gt;
&lt;li&gt;æ€§èƒ½å¥½(åœ¨iOSä¸Šå ç”¨å¤§é‡å†…å­˜ï¼Œç³»ç»Ÿå¯èƒ½ä¼škillæ‰è¿™ä¸ªwidget)&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="App Extension" scheme="http://www.CepheusSun.com/categories/App-Extension/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="App Extension" scheme="http://www.CepheusSun.com/tags/App-Extension/"/>
    
  </entry>
  
  <entry>
    <title>Handing non-optional optionals in Swift</title>
    <link href="http://www.CepheusSun.com/Handing%20non-optional%20optionals%20in%20Swift.html"/>
    <id>http://www.CepheusSun.com/Handing non-optional optionals in Swift.html</id>
    <published>2017-06-09T02:05:23.000Z</published>
    <updated>2017-06-09T02:22:15.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>optional</strong>, å¯ä»¥è¯´æ˜¯ Swift ä¸­æœ€ä¸ºé‡è¦çš„ç‰¹æ€§, ä¹Ÿæ˜¯å®ƒè·Ÿ <code>Objective-C</code> ä¸åŒçš„å…³é”®ç‰¹å¾ã€‚åœ¨ç¼–ç çš„æ—¶å€™å¼ºåˆ¶å¤„ç†é‚£äº›å¯èƒ½ä¸ºç©ºçš„å€¼, å¯ä»¥è®©ç¨‹åºæ›´å…·æœ‰å¯é¢„æµ‹æ€§, å‡å°‘é”™è¯¯å‘ç”Ÿçš„æœºä¼šã€‚</p>
<p>ç„¶è€Œåœ¨å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€äº›å˜é‡, æ˜æ˜æ˜¯ <code>optional</code> çš„, ä½†åœ¨é€»è¾‘åˆä¸€å®šæ˜¯éç©ºçš„ã€‚æ¯”å¦‚è¯´ <code>controller</code> ä¸­çš„ <code>view</code></p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ViewModel</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TableViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> tableView: <span class="type">UITableView</span>?</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        tableView = <span class="type">UITableView</span>.<span class="keyword">init</span>(frame: view.bounds)</div><div class="line">        view.addSubview(tableView!)</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">viewModelDidUpdate</span><span class="params">(<span class="number">_</span> viewModel: ViewModel)</span></span> &#123;</div><div class="line">        tableView?.reloadData()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µåœ¨ <code>Swift</code> ç¨‹åºå‘˜ä¹‹é—´çš„äº‰è®®, å°±ä½¿ç”¨ <code>tab</code> è¿˜æ˜¯ <code>space</code>æ¥ç¼©è¿›ä¸€æ ·ã€‚</p>
<blockquote>
<p>æ—¢ç„¶æ˜¯å¯é€‰ç±»å‹, æˆ‘ä»¬å°±åº”è¯¥æ­£ç¡®çš„ä½¿ç”¨å®ƒã€‚ ä½¿ç”¨<code>if let</code> æˆ–è€… <code>guard</code></p>
</blockquote>
<p>ä¹Ÿæœ‰äººæŒæœ‰ç›¸åçš„æ€åº¦: </p>
<blockquote>
<p>æ—¢ç„¶éƒ½çŸ¥é“è¿™ä¸ªå˜é‡éç©º, é‚£å°±å¼ºåˆ¶è§£åŒ…ã€‚å°±ç®—å´©æºƒä¹Ÿä¸èƒ½è®©ç¨‹åºè¿›å…¥ä¸å¯æ§çš„çŠ¶æ€ã€‚</p>
</blockquote>
<p>ä¸Šé¢çš„è®¨è®ºåŸºæœ¬ä¸Šéƒ½æ˜¯å›´ç»•ç€<strong>æ˜¯å¦æœ‰å¿…è¦è¿›è¡Œé˜²å¾¡æ€§ç¼–ç¨‹</strong>å±•å¼€çš„ã€‚åº”è¯¥è®©ç¨‹åºä»æœªå®šä¹‰çš„çŠ¶æ€ä¸­æ¢å¤, è¿˜æ˜¯åº”è¯¥è®©ç¨‹åºç›´æ¥å´©æºƒã€‚</p>
<p>å¦‚æœéè¦å›ç­”è¿™ä¸ªé—®é¢˜, æˆ‘å¯èƒ½ä¼šé€‰æ‹©åè€…ã€‚æœªå®šä¹‰çš„çŠ¶æ€ä¼šå¯¼è‡´å¾ˆéš¾è¿½è¸ªçš„ bug, å¯èƒ½ä¼šæ‰§è¡Œä¸å¿…è¦çš„ä»£ç ã€‚è€Œä¸”é˜²å¾¡æ€§çš„ä»£ç å¾€å¾€ä¹Ÿå¾ˆéš¾ç»´æŠ¤ã€‚</p>
<p>ä½†æ˜¯æˆ‘è§‰å¾—, ç ”ç©¶ä¸€äº›é¿å…å‡ºç°è¿™ç§æƒ…å†µçš„æŠ€å·§æ›´å®åœ¨ä¸€äº›ã€‚</p>
<h3 id="Is-it-really-optional"><a href="#Is-it-really-optional" class="headerlink" title="Is it really optional?"></a>Is it really optional?</h3><p>å˜é‡å’Œå±æ€§æ˜¯ä¸æ˜¯å¯é€‰å–å†³äºä½ ä»£ç çš„é€»è¾‘ã€‚å¦‚æœåœ¨è®¾è®¡ç¨‹åºçš„æ—¶å€™, æ ¹æœ¬å°±æ²¡æœ‰æƒ³è¿‡è¿™ä¸ªå˜é‡ä¼šæ˜¯ <code>nil</code>ã€‚æˆ–è€…è¯´åœ¨è®¾è®¡ä¹‹åˆ, è¿™ä¸ªå˜é‡å°±ä¸ä¼šå‡ºç°ä¸ºç©ºçš„æƒ…å†µã€‚è¿™ä¸ªå˜é‡å°±ä¸åº”è¯¥æ˜¯ <code>optional</code> </p>
<p>å³ä½¿åœ¨å’Œä¸€äº›ç³»ç»Ÿ API äº¤äº’çš„æ—¶å€™, å¯é€‰ç±»å‹åŸºæœ¬ä¸Šéƒ½æ˜¯æ— æ³•é¿å…çš„ã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›åŠæ³•è®©æˆ‘ä»¬å°½å¯èƒ½çš„é¿å…ä½¿ç”¨ <code>optional</code> ç±»å‹ã€‚</p>
<h3 id="Being-lazy-is-better-than-being-non-optionally-optional"><a href="#Being-lazy-is-better-than-being-non-optionally-optional" class="headerlink" title="Being lazy is better than being non-optionally optional"></a>Being lazy is better than being non-optionally optional</h3><p>å¯¹äºä¸€ä¸ªå¯¹è±¡æ¥è¯´, å¦‚æœå®ƒçš„å±æ€§ä¼šåœ¨è¿™ä¸ªå¯¹è±¡åˆå§‹åŒ–ä¹‹åèµ‹å€¼ã€‚æ¯”å¦‚è¯´ <code>UIController</code> ä¸Šé¢çš„ <code>View</code> åº”è¯¥åœ¨ <code>viewDidLoad()</code> ä¸­åˆå§‹åŒ–ã€‚å°±å¯ä»¥ä½¿ç”¨ <code>lazy</code> å±æ€§ã€‚ä¸€ä¸ªæ‡’åŠ è½½å±æ€§æ˜¯ä¸å¯ç©ºçš„, å³ä½¿ä»–åœ¨è¿™ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•ä¸­æ²¡æœ‰è¢«èµ‹å€¼ã€‚å› ä¸ºåœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™, å®ƒå°±ä¼šè¢«åˆå§‹åŒ–å‡ºæ¥ã€‚</p>
<p>æˆ‘ä»¬æ¥æ›´æ–°ä¸€ä¸‹åˆšæ‰çš„ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ViewModel</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TableViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> tableView = <span class="type">UITableView</span>()</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        tableView = <span class="type">UITableView</span>.<span class="keyword">init</span>(frame: view.bounds)</div><div class="line">        view.addSubview(tableView)</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">viewModelDidUpdate</span><span class="params">(<span class="number">_</span> viewModel: ViewModel)</span></span> &#123;</div><div class="line">        tableView.reloadData()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ²¡æœ‰å¯ç©ºç±»å‹äº†ã€‚ğŸ‰</p>
<h3 id="Proper-dependency-management-is-better-than-non-optional-optionals"><a href="#Proper-dependency-management-is-better-than-non-optional-optionals" class="headerlink" title="Proper dependency management is better than non-optional optionals"></a>Proper dependency management is better than non-optional optionals</h3><p>ä¸ºäº†æ‰“ç ´å¾ªç¯ä¾èµ–æˆ‘ä»¬ä¹Ÿç»å¸¸ä¼šä½¿ç”¨å¯é€‰ç±»å‹ã€‚æ¯”å¦‚ï¼šåœ¨Aã€Bä¸¤ä¸ªç±»äº’ç›¸ä¾èµ–çš„æ—¶å€™: </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(text: <span class="type">String</span>) &#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">weak</span> <span class="keyword">var</span> commentManager: <span class="type">CommentManager</span>?</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">userDidpostComment</span><span class="params">(<span class="number">_</span> comment: Comment)</span></span> &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">logOutCurrentUser</span><span class="params">()</span></span> &#123;</div><div class="line">        commentManager?.clearCache()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">weak</span> <span class="keyword">var</span> userManager: <span class="type">UserManager</span>?</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">composer</span><span class="params">(<span class="number">_</span> composer: Comment)</span></span> &#123;</div><div class="line">        userManager?.userDidpostComment(composer)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">clearCache</span><span class="params">()</span></span> &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>çœ‹ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥å‘ç°ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„å¾ªç¯å¼•ç”¨ <code>UserManager</code> - <code>CommentManager</code> ä»»ä½•ä¸€ä¸ªéƒ½æ²¡æœ‰æŒæœ‰å¦å¤–ä¸€ä¸ª, ä½†æ˜¯å®ƒä»¬ä¹Ÿä¾èµ–å¦å¤–ä¸€ä¸ªæ¥å®Œæˆè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚ğŸ˜…</p>
<p>è§£å†³è¿™æ ·çš„é—®é¢˜, æˆ‘ä»¬å¯ä»¥è®© <code>CommentComposer</code> æ¥åšä¸ºä¸­é—´äººã€‚ ä»–æ¥é€šçŸ¥ <code>UserManger</code> è¿˜æœ‰ <code>CommentManager</code> ä¸€æ¡è¯„è®ºæ¶ˆæ¯äº§ç”Ÿäº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentComposer</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> commentManager: <span class="type">CommentManager</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> userManager: <span class="type">UserManager</span></div><div class="line">    <span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> textView = <span class="type">UITextView</span>()</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(commentManager: <span class="type">CommentManager</span>,</div><div class="line">         userManager: <span class="type">UserManager</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.commentManager = commentManager</div><div class="line">        <span class="keyword">self</span>.userManager = userManager</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">postComment</span><span class="params">()</span></span>  &#123;</div><div class="line">        <span class="keyword">let</span> comment = <span class="type">Comment</span>(text: textView.text)</div><div class="line">        commentManager.composer(comment)</div><div class="line">        userManager.userDidpostComment(comment)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è¯ <code>UserManager</code> å°±å¯ä»¥å¼ºå¼•ç”¨ <code>CommentManager</code> äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> commentManager: <span class="type">CommentManager</span></div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(commentManager: <span class="type">CommentManager</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.commentManager = commentManager</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">userDidpostComment</span><span class="params">(<span class="number">_</span> comment: Comment)</span></span> &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">logOutCurrentUser</span><span class="params">()</span></span> &#123;</div><div class="line">        commentManager.clearCache()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>optional</code> ä¹Ÿæ¶ˆå¤±äº†ğŸ‰</p>
<h3 id="Crashing-gracefully"><a href="#Crashing-gracefully" class="headerlink" title="Crashing gracefully"></a>Crashing gracefully</h3><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸¤ä¸ªé€šè¿‡è°ƒæ•´æˆ‘ä»¬çš„ä»£ç , æ¥æ§åˆ¶ä»£ç ä¸­çš„ä¸ç¡®å®šæ€§ã€‚ä½†æ˜¯åœ¨æœ‰äº›æƒ…å†µä¸‹è¿™ä¹ˆåšæ˜¯ä¸å¯èƒ½çš„ã€‚æˆ‘ä»¬æ¥å‡è®¾ä¸€ä¸‹, ä½ æ­£åœ¨åŠ è½½ä¸€ä¸ªåŒ…å«äº†ä½ ç¨‹åºçš„é…ç½®ä¿¡æ¯çš„ JSON æ–‡ä»¶ã€‚è¿™å°±å¤©ç„¶çš„å­˜åœ¨ä¸€äº›å¯èƒ½ä¼šå‡ºé”™çš„æƒ…å†µã€‚æ­¤æ—¶éœ€è¦åšçš„å°±æ˜¯å°½å¯èƒ½çš„é”™è¯¯å¤„ç†ã€‚</p>
<p>æ‹¿åˆ°äº†é”™è¯¯çš„é…ç½®æ–‡ä»¶, å¦‚æœç»§ç»­å¾€ä¸‹æ‰§è¡Œçš„è¯, ç¨‹åºè¿›å…¥æˆ‘ä»¬æ²¡æœ‰å®šä¹‰çš„çŠ¶æ€ä¸­ã€‚è¿™ç§æƒ…å†µä¸‹, æœ€å¥½çš„åŠæ³•æ˜¯è®©ç¨‹åºå´©æºƒ, ç„¶å QA ä¸­, é€šè¿‡æ—¥å¿—, å°†è¿™ä¸ªé—®é¢˜è§£å†³æ‰ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ¥è®©ç¨‹åºå´©æºƒå‘¢ã€‚æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ä½¿ç”¨ <code>!</code> æ“ä½œç¬¦ã€‚å½“è¿™ä¸ªå˜é‡ä¸ºç©ºçš„æ—¶å€™å¼ºåˆ¶è§£åŒ…, å°±ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> configuration = loadConfiguration()!</div></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™ç§æ–¹æ³•å¾ˆç®€å•, ä½†æ˜¯å®ƒä¹Ÿæœ‰å¾ˆå¤§çš„ç¼ºç‚¹ã€‚å¦‚æœè¿™ä¸ªä»£ç  crashã€‚ æˆ‘ä»¬å¾—åˆ°çš„æ—¥å¿—æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fatal error: unexpectedly found nil while unwrapping an Optional value</div></pre></td></tr></table></figure>
<p>æ²¡æœ‰é”™è¯¯åŸå› , ä¹Ÿæ²¡æœ‰é”™è¯¯å‘ç”Ÿçš„åœ°ç‚¹ã€‚è¿™æ ·çš„é”™è¯¯ä¿¡æ¯åŸºæœ¬ä¸Šæ²¡æœ‰ä»€ä¹ˆèƒ½å¤Ÿè®©æˆ‘ä»¬è¿…é€Ÿçš„è§£å†³è¿™ä¸ª bug çš„ä¿¡æ¯ã€‚</p>
<p>æ›´å¥½çš„æ–¹æ³•æ˜¯åœ¨ <code>guard</code> è¡¨è¾¾å¼ä¸­ä½¿ç”¨ <code>preconditionFailure()</code> å‡½æ•°è®©ç¨‹åºå‘ç”Ÿå´©æºƒ, æŠ›å‡ºè‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> configuration = loadConfiguration() <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">preconditionFailure</span>(<span class="string">"Configuration couldn't be loaded + verifu that Config.JSON is valid"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è¯, åœ¨ç¨‹åºå´©æºƒçš„æ—¶å€™æˆ‘ä»¬å°±èƒ½å¾—åˆ°æœ‰ç”¨çš„ä¿¡æ¯äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fatal error: <span class="type">Configuration</span> couldnâ€™t be loaded. <span class="type">Verify</span> that <span class="type">Config</span>.<span class="type">JSON</span> <span class="keyword">is</span> valid.: file /<span class="type">Users</span>/<span class="type">John</span>/<span class="type">AmazingApp</span>/<span class="type">Sources</span>/<span class="type">AppDelegate</span>.swift, line <span class="number">17</span></div></pre></td></tr></table></figure>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>å¤„ç†ä¸å¯ç©ºçš„å¯é€‰ç±»å‹æœ‰ä¸€ä¸‹å‡ ä¸ªæ–¹æ³•:</p>
<ol>
<li>ç”¨æ‡’åŠ è½½å±æ€§, æ›¿ä»£ä¸å¯ç©ºçš„å¯é€‰ç±»å‹ã€‚</li>
<li>é€‚å½“çš„ä¾èµ–ç®¡ç†, æ›¿ä»£ä¸å¯ç©ºçš„å¯é€‰ç±»å‹ã€‚</li>
<li>åœ¨é‡åˆ°è¿™ç§æƒ…å†µçš„æ—¶å€™, è®©ç¨‹åºå´©æºƒ, å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ol>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://medium.com/@johnsundell/handling-non-optional-optionals-in-swift-e5706390f56f">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;optional&lt;/strong&gt;, å¯ä»¥è¯´æ˜¯ Swift ä¸­æœ€ä¸ºé‡è¦çš„ç‰¹æ€§, ä¹Ÿæ˜¯å®ƒè·Ÿ &lt;code&gt;Objective-C&lt;/code&gt; ä¸åŒçš„å…³é”®ç‰¹å¾ã€‚åœ¨ç¼–ç çš„æ—¶å€™å¼ºåˆ¶å¤„ç†é‚£äº›å¯èƒ½ä¸ºç©ºçš„å€¼, å¯ä»¥è®©ç¨‹åºæ›´å…·æœ‰å¯é¢„æµ‹æ€§, å‡å°‘é”™è¯¯å‘ç”Ÿçš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œåœ¨å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€äº›å˜é‡, æ˜æ˜æ˜¯ &lt;code&gt;optional&lt;/code&gt; çš„, ä½†åœ¨é€»è¾‘åˆä¸€å®šæ˜¯éç©ºçš„ã€‚æ¯”å¦‚è¯´ &lt;code&gt;controller&lt;/code&gt; ä¸­çš„ &lt;code&gt;view&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Swifty Tips âš¡ï¸</title>
    <link href="http://www.CepheusSun.com/Swifty%20Tips.html"/>
    <id>http://www.CepheusSun.com/Swifty Tips.html</id>
    <published>2017-05-29T16:05:23.000Z</published>
    <updated>2017-05-29T17:23:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>Swift å¼€å‘ä¸­çš„ä¸€äº›å°çš„æŠ€å·§</p>
<p>åˆšå¼€å§‹çš„æ—¶å€™, ç‰¹åˆ«å¥½å¥‡å¤§å‚æ˜¯æ€ä¹ˆæçš„, ä»–ä»¬çš„é¡¹ç›®é•¿ä»€ä¹ˆæ ·å­, ä»–ä»¬ç”¨å“ªäº›åº“â€¦æƒ³åœ¨å·¨äººçš„è‚©è†€ä¸Šå¼€å‘, å…å¾—æµªè´¹æ—¶é—´åœ¨é‚£äº›å·²ç»æœ‰å¾ˆå¥½è§£å†³æ–¹æ¡ˆçš„äº‹æƒ…ä¸Šã€‚</p>
<p>å››å¹´å‰ï¼Œæˆ‘å’Œå›¢é˜Ÿä¸­å¾ˆå¤šå¾ˆå‰å®³çš„äººè®¨è®ºè¿‡ä¸€äº›ç¼–ç¨‹å®è·µã€‚ä»Šå¤©å°±åˆ†äº«ä¸€äº›ä¸œè¥¿å§ã€‚</p>
<p>æ¬¢è¿æŒ‡æ­£ï¼ğŸš€</p>
<a id="more"></a>
<h2 id="æ»¥ç”¨å¼•ç”¨ç±»å‹"><a href="#æ»¥ç”¨å¼•ç”¨ç±»å‹" class="headerlink" title="æ»¥ç”¨å¼•ç”¨ç±»å‹"></a>æ»¥ç”¨å¼•ç”¨ç±»å‹</h2><p>åªæœ‰â€œåŠ¨æ€â€å¯¹è±¡æ‰ä½¿ç”¨å¼•ç”¨ç±»å‹ã€‚è¿™é‡Œçš„â€œåŠ¨æ€â€å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿçœ‹ä¸‹é¢çš„ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Car</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> model: <span class="type">String</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> cars: [<span class="type">Car</span>]</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fetchCars</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">registerCar</span><span class="params">(<span class="number">_</span> car: Car)</span></span> &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ğŸš— åœ¨è¿™é‡Œåªæ˜¯ä¸€ä¸ªå€¼ã€‚ä»–ä»£è¡¨çš„å°±æ˜¯ä¸€äº›æ•°æ®ã€‚å°±åƒ <code>1</code>ã€<code>2</code>ã€<code>3</code>ã€‚ è¿™ç§æ•°æ®æ˜¯â€œé™æ€â€çš„æ•°æ®(æ­»çš„)ã€‚ å®ƒä¸ä¼šå¤„ç†ä»»ä½•ä¸œè¥¿, æ‰€ä»¥å®ƒä¹Ÿæ²¡æœ‰å¿…è¦æ˜¯â€œåŠ¨æ€â€çš„, ä¹Ÿå°±æ˜¯è¯´, æ²¡å¿…è¦æŠŠå®ƒå®šä¹‰æˆå¼•ç”¨ç±»å‹ã€‚</p>
<p><strong>å¦ä¸€æ–¹é¢:</strong></p>
<p><code>CarManager</code> å°±éœ€è¦æ˜¯ä¸€ä¸ªâ€œåŠ¨æ€â€çš„å¯¹è±¡ã€‚å› ä¸ºè¿™ä¸ªå¯¹è±¡ä¼šå‘èµ·ç½‘ç»œè¯·æ±‚, ç„¶åå°†è¯·æ±‚ç»“æœä¿å­˜èµ·æ¥ã€‚åœ¨å€¼ç±»å‹å¯¹è±¡ä¸­æ˜¯ä¸èƒ½æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„, å› ä¸ºä»–ä»¬æ˜¯â€œé™æ€â€çš„æ•°æ®ã€‚æˆ‘ä»¬éœ€è¦çš„ <code>CarManager</code> å¯¹è±¡åœ¨ä¸€å®šçš„èŒƒå›´å†…æ˜¯åº”è¯¥æ˜¯åŠ¨æ€çš„, ä»–ä¼šè¯·æ±‚æ•°æ®, ä¹Ÿä¼šæ³¨å†Œæ–°çš„ <code>Car</code>ã€‚</p>
<p>è¿™ä¸ªä¸»é¢˜å®Œå…¨å¯ä»¥å†™ä¸€ç¯‡æ–‡ç« æ¥æ·±å…¥ã€‚æ¨èçœ‹çœ‹ <a href="https://news.realm.io/news/andy-matuschak-controlling-complexity/">Andy Matuschak çš„æ–‡ç« </a>, å’Œ <a href="https://developer.apple.com/videos/play/wwdc2015/414/">WWDC</a></p>
<h2 id="éšå¼è§£åŒ…å¯é€‰ç±»å‹"><a href="#éšå¼è§£åŒ…å¯é€‰ç±»å‹" class="headerlink" title="éšå¼è§£åŒ…å¯é€‰ç±»å‹(!)"></a>éšå¼è§£åŒ…å¯é€‰ç±»å‹(<code>!</code>)</h2><p>é»˜è®¤ä¸è¦éšå¼è§£åŒ…å¯é€‰ç±»å‹ã€‚ åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ä½ éƒ½å¯èƒ½ä¼šå¿˜æ‰è¿™ä»¶äº‹æƒ…ã€‚ä½†æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹åº”è¯¥è¿™æ ·åšæ¥å‡å°‘ç¼–è¯‘å™¨çš„å‹åŠ›ã€‚è€Œä¸”æˆ‘ä»¬ä¹Ÿéœ€è¦å»ç†è§£è¿™ä»¶äº‹æƒ…èƒŒåçš„é€»è¾‘ã€‚</p>
<p>åŸºæœ¬ä¸Š, å¦‚æœè¿™ä¸ªå±æ€§åœ¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­å¿…é¡»ä¸º <code>nil</code> ä½†æ˜¯ä¹‹åå°±ä¼šè¢«èµ‹å€¼,  å°±å¯ä»¥å®šä¹‰è¿™ä¸ªå±æ€§ä¸º optionalã€‚å› ä¸ºä½ è‚¯å®šä¸ä¼šåœ¨èµ‹å€¼ä¹‹å‰è®¿é—®è¿™ä¸ªå±æ€§, å¦‚æœç¼–è¯‘å™¨ä¸€ç›´è­¦å‘Šè¿™ä¸ªå€¼å¯èƒ½ä¸º <code>nil</code> çœŸçš„æŒºè®¨åŒçš„ã€‚</p>
<p>çœ‹çœ‹xibä¸­æ‹–å‡ºæ¥çš„å±æ€§:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeView</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">let</span> nameLabel: <span class="type">UILabel</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœè¿™æ ·å®šä¹‰çš„è¯, ç¼–è¯‘å™¨å°±ä¼šè®©ä½ åœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­ç»™<code>nameLabel</code>èµ‹å€¼ã€‚å› ä¸ºè¿™è¡Œä»£ç å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ª <code>View</code> æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½æœ‰ <code>nameLabel</code>ã€‚ ä½†æ˜¯, æœ‰ç—…å•Šï¼è‚¯å®šä¸èƒ½è¿™ä¹ˆå¹²å•Šã€‚å› ä¸ºå…¶å®åœ¨ <code>initWithCoder</code> ä¸­å·²ç»å¸®æˆ‘ä»¬å®ç°äº† <code>xib</code> ä¸­çš„ <code>label</code> å’Œè¿™ä¸ªå±æ€§ä¹‹é—´çš„å…³è”ã€‚æ˜ç™½äº†å—ï¼Ÿ è¿™ä¸ªå€¼æ°¸è¿œéƒ½ä¸å¯èƒ½ä¸ºç©º, å°±æ²¡æœ‰å¿…è¦åˆ¤æ–­è¿™ä¸ªä¸œè¥¿æ˜¯ä¸æ˜¯å­˜åœ¨äº†ã€‚æ‰€ä»¥ä¹Ÿä¸éœ€è¦å»èµ‹å€¼äº†å•Šã€‚</p>
<blockquote>
<p>ä½ :è¿™ç©æ„å„¿è‚¯å®šä¸å¯èƒ½æ˜¯ç©º, åˆ«çå‡ æŠŠæŠ¥é”™äº†<br>ç¼–è¯‘å™¨: å¥½çš„!</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeView</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">var</span> nameLabel: <span class="type">UILabel</span>!</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Q:</strong> åœ¨dequeueä¸€ä¸ªtableviewCell çš„æ—¶å€™èƒ½ä¸èƒ½(<code>!</code>)?<br><strong>A:</strong> è¿˜æ˜¯ä¸è¦å§ï¼è‡³å°‘ç»™ä¸€ä¸ª Crash å•Š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> cell = tableView.dequeueCell(...) <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">fatalError</span>(<span class="string">"Cannot dequeue cell with identifier <span class="subst">\(cellID)</span>"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ»¥ç”¨-AppDelegate"><a href="#æ»¥ç”¨-AppDelegate" class="headerlink" title="æ»¥ç”¨ AppDelegate"></a>æ»¥ç”¨ AppDelegate</h2><p><code>AppDelegate</code> ä¸æ˜¯æ‹¿æ¥ç»™ä½ åšä¿å­˜å…¨å±€å˜é‡çš„å®¹å™¨çš„(å…¨å±€å±æ€§ã€å·¥å…·æ–¹æ³•ã€ç®¡ç†ç±»ç­‰ç­‰ã€‚)ä»–åªæ˜¯ä¸€ä¸ªç”¨æ¥å®ç°ä¸€äº›åè®®çš„ç±»è€Œå·²ã€‚æ”¾è¿‡å®ƒå§ï¼</p>
<p>åœ¨ <code>applicationDidFinishLaunching</code> æ–¹æ³•é‡Œè‚¯å®šéƒ½ä¼šåšä¸€äº›å¾ˆé‡è¦çš„äº‹æƒ…, ä½†æ˜¯å½“é¡¹ç›®ä¸æ–­å˜å¤§çš„æ—¶å€™è¿™ç§æƒ…å†µå¾ˆå®¹æ˜“å˜çš„å¾ˆææ€–ã€‚åˆ›å»ºæ–°çš„ç±»(æ–‡ä»¶)æ¥åšè¿™äº›äº‹æƒ…å§ï¼</p>
<p><strong>ğŸ‘ Donâ€™t:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> persistentStoreCoordinator: <span class="type">NSPersistentStoreCoordinator</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">rgb</span><span class="params">(r: CGFloat, g: CGFloat, b: CGFloat)</span></span> -&gt; <span class="type">UIColor</span> &#123; ... &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">appDidFinishLaunching</span>... </span>&#123;</div><div class="line">    <span class="type">Firebase</span>.setup(<span class="string">"3KDSF-234JDF-234D"</span>)</div><div class="line">    <span class="type">Firebase</span>.logLevel = .verbose</div><div class="line">    <span class="type">AnotherSDK</span>.start()</div><div class="line">    <span class="type">AnotherSDK</span>.enableSomething()</div><div class="line">    <span class="type">AnotherSDK</span>.disableSomething()</div><div class="line">    <span class="type">AnotherSDK</span>.anotherConfiguration()</div><div class="line">    persistentStoreCoordinator = ...</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ğŸ‘ Do:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">appDidFinishLaunching</span>... </span>&#123;</div><div class="line">    <span class="type">DependencyManager</span>.configure()</div><div class="line">    <span class="type">CoreDataStack</span>.setup()</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" class="headerlink" title="é»˜è®¤å‚æ•°"></a>é»˜è®¤å‚æ•°</h2><p>ç»™ä¸€ä¸ªæ–¹æ³•çš„æŸäº›å‚æ•°è®¾ç½®é»˜è®¤å€¼æ˜¯éå¸¸æ–¹ä¾¿çš„äº‹æƒ…ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªç‰¹æ€§çš„è¯, å¯èƒ½å°±éœ€è¦ç»™åŒä¸€ä¸ªåŠŸèƒ½å†™å¥½å‡ ä¸ªæ–¹æ³•äº†ã€‚åƒä¸‹é¢ä¸€æ ·:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(<span class="number">_</span> string: String, options: String?)</span></span> &#123; ... &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(<span class="number">_</span> string: String)</span></span> &#123;</div><div class="line">  <span class="built_in">print</span>(string, options: <span class="literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰é»˜è®¤å‚æ•°å€¼, å°±å¯ä»¥æ˜¯è¿™æ ·çš„:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(<span class="number">_</span> string: String, options: String? = <span class="literal">nil</span>)</span></span> &#123;...&#125;</div></pre></td></tr></table></figure>
<p>å¾ˆç®€å•å¯¹å§ï¼ ç»™è‡ªå®šä¹‰ UI ç»„ä»¶è®¾ç½®é»˜è®¤é¢œè‰²ã€æä¾›é»˜è®¤çš„å‚æ•°ã€ç»™ç½‘ç»œè¯·æ±‚æ·»åŠ é»˜è®¤çš„è¶…æ—¶æ—¶é—´ç­‰ç­‰ã€‚ä½†æ˜¯, ä½¿ç”¨è¿™ä¸ªè¯­æ³•ç³–åœ¨é‡åˆ°ä¾èµ–æ³¨å…¥çš„æ—¶å€™å°±è¦å°å¿ƒäº†ã€‚</p>
<p>çœ‹ä¸‹é¢çš„ä¾‹å­:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TicketsViewModel</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> service: <span class="type">TicketService</span></div><div class="line">    <span class="keyword">let</span> database: <span class="type">TicketDatabase</span></div><div class="line">    <span class="keyword">init</span>(service: <span class="type">TicketService</span>,</div><div class="line">       database: <span class="type">TicketDatabase</span>) &#123; ... &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ App target:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> model = <span class="type">TicketsViewModel</span>(</div><div class="line">  service: <span class="type">LiveTicketService</span>()</div><div class="line">  database: <span class="type">LiveTicketDatabase</span>()</div><div class="line">)</div></pre></td></tr></table></figure>
<p>åœ¨ Test target:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> model = <span class="type">TicketsViewModel</span>(</div><div class="line">    service: <span class="type">MockTicketService</span>()</div><div class="line">    database: <span class="type">MockTicketDatabase</span>()</div><div class="line">)</div></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œä½¿ç”¨åè®®çš„åŸå› å°±æ˜¯æŠŠè¿™äº›åŠŸèƒ½ä»å…·ä½“çš„ç±»ä¸­æŠ½è±¡å‡ºæ¥ã€‚è¿™å°±ä½¿å¾—ä½ å¯ä»¥å‘è¿™ä¸ª <code>viewModel</code> ä¸­æ³¨å…¥ä»»ä½•ä½ æƒ³è¦çš„å…·ä½“å®ç°ã€‚ å¦‚æœè¿™é‡Œä½ æŠŠ <code>LiveTicketService</code> ä½œä¸ºé»˜è®¤çš„å‚æ•°, è¿™å°±ä½¿å¾—<code>TicketsViewModel</code> ä¾èµ–äº† <code>LiveTicketService</code>è¿™ä¹ˆä¸€ä¸ªå…·ä½“çš„ç±»å‹ã€‚è¿™è·Ÿæœ€åˆæƒ³è¦è¾¾åˆ°çš„ç›®çš„æœ‰äº†ä¸€äº›å†²çªã€‚</p>
<p><strong>ç°åœ¨æ²¡é‚£ä¹ˆæ–¹ä¾¿äº†å§ï¼Ÿ</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹åœ¨ä½  App è¿˜æœ‰ Test ä¸¤ä¸ª target ä¸­ã€‚ <code>TicketsViewModel</code> ä¼šè¢«åŒæ—¶æ·»åŠ åˆ°ä¸¤ä¸ª target ä¸­, ç„¶åæŠŠ <code>LiveTicketService</code> å’Œ <code>MockTicketService</code> åˆ†åˆ«æ·»åŠ ã€‚å¦‚æœ <code>TicketsViewModel</code>æ·»åŠ äº†å¯¹ <code>LiveTicketService</code> çš„ä¾èµ–ã€‚ Test target è‚¯å®šå°±ç¼–è¯‘ä¸è¿‡äº†ã€‚</p>
<h2 id="å¯å˜å‚æ•°å‡½æ•°"><a href="#å¯å˜å‚æ•°å‡½æ•°" class="headerlink" title="å¯å˜å‚æ•°å‡½æ•°"></a>å¯å˜å‚æ•°å‡½æ•°</h2><p>è¿™â€¦ å°±æ˜¯å¾ˆçˆ½å•Šï¼</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(<span class="number">_</span> numbers: Int...)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">return</span> numbers.<span class="built_in">reduce</span>(<span class="number">0</span>, +)</div><div class="line">&#125;</div><div class="line">sum(<span class="number">1</span>,<span class="number">2</span>)      <span class="comment">// 3</span></div><div class="line">sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)    <span class="comment">// 6</span></div><div class="line">sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)  <span class="comment">// 10</span></div></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨ç±»å‹åµŒå¥—"><a href="#ä½¿ç”¨ç±»å‹åµŒå¥—" class="headerlink" title="ä½¿ç”¨ç±»å‹åµŒå¥—"></a>ä½¿ç”¨ç±»å‹åµŒå¥—</h2><p>Swift æ”¯æŒå†…éƒ¨ç±»ã€‚æ‰€ä»¥æœ‰ç”¨å°±å¯ä»¥è¿™ä¹ˆåšï¼š</p>
<p><strong>ğŸ‘ Donâ€™t:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">PhotoCollectionViewCellStyle</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="keyword">default</span></div><div class="line">    <span class="keyword">case</span> photoOnly</div><div class="line">    <span class="keyword">case</span> photoAndDescription</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæšä¸¾å¯èƒ½åœ¨ <code>PhotoCollectionViewCell</code> ä¹‹å¤–å°±ä¸ä¼šå†ä½¿ç”¨åˆ°äº†ã€‚æ²¡ç†ç”±æŠŠè¿™ä¸ªæšä¸¾å£°æ˜æˆå…¨å±€çš„ã€‚</p>
<p><strong>ğŸ‘ Do:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PhotoCollectionViewCell</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Style</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> <span class="keyword">default</span></div><div class="line">        <span class="keyword">case</span> photoOnly</div><div class="line">        <span class="keyword">case</span> photoAndDescription</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">let</span> style: <span class="type">Style</span> = .<span class="keyword">default</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™å¾ˆå®¹æ˜“ç†è§£, æ¯•ç«Ÿ <code>Style</code> æœ¬æ¥å°±æ˜¯ç”¨æ¥æ ‡è®° <code>PhotoCollectionViewCell</code> çš„ã€‚è€Œä¸”è¿˜å°‘äº†23ä¸ªå­—ç¬¦å‘¢ã€‚</p>
<h2 id="ä½¿ç”¨-final-å…³é”®å­—-ğŸ"><a href="#ä½¿ç”¨-final-å…³é”®å­—-ğŸ" class="headerlink" title="ä½¿ç”¨ final å…³é”®å­— ğŸ"></a>ä½¿ç”¨ final å…³é”®å­— ğŸ</h2><p>å¦‚æœä½ ä¸éœ€è¦æ‹“å±•æŸäº›ç±», ä¹Ÿä¸å¸Œæœ›è¿™äº›ç±»è¢«æ‹“å±•, ä½¿ç”¨ <code>final</code> ä¿®é¥°å®ƒã€‚ä¸ç”¨æ‹…å¿ƒçŠ¯é”™, æ¯”å¦‚ <code>PhotoCollectionViewCell</code> è¿™ä¸ªç±», ä½ è¿˜æœ‰å¯èƒ½ç»§æ‰¿å®ƒå—ï¼Ÿ</p>
<p>è€Œä¸”:<strong>è¿™ä¹ˆåšå¯ä»¥èŠ‚çº¦ç¼–è¯‘æ—¶é—´ã€‚</strong></p>
<h2 id="ç»™å¸¸é‡å‘½åç©ºé—´"><a href="#ç»™å¸¸é‡å‘½åç©ºé—´" class="headerlink" title="ç»™å¸¸é‡å‘½åç©ºé—´"></a>ç»™å¸¸é‡å‘½åç©ºé—´</h2><p>åœ¨ OC ä¸­æ˜¯é€šè¿‡åœ¨å…¨å±€çš„å¸¸é‡å‰é¢åŠ  <code>PFX</code> æˆ–è€… <code>k</code> æ¥ç»™è¿™äº›å¸¸é‡å‘½åç©ºé—´çš„ã€‚ä½†æ˜¯ Swift å¯ä¸è¿™æ ·ã€‚</p>
<p><strong>ğŸ‘ Donâ€™t:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> ket kAnimationDuration: <span class="type">TimeInterval</span> = <span class="number">0.3</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">let</span> kLowAlpha = <span class="number">0.2</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">let</span> kAPIKey = <span class="string">"13511-5234-5234-59234"</span></div></pre></td></tr></table></figure>
<p><strong>ğŸ‘ Do:</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Constant</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">UI</span> </span>&#123;</div><div class="line">        <span class="keyword">static</span> <span class="keyword">let</span> animationDuration: <span class="type">TimeInterval</span> = <span class="number">0.3</span></div><div class="line">        <span class="keyword">static</span> <span class="keyword">let</span> lowAlpha: <span class="type">CGFloat</span> = <span class="number">0.2</span>  </div><div class="line">    &#125;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Analytics</span> </span>&#123;</div><div class="line">        <span class="keyword">static</span> <span class="keyword">let</span> apiKey = <span class="string">"13511-5234-5234-59234"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä¸ªäººçš„åå¥½æ˜¯ä½¿ç”¨ <code>C</code> æ¥ä»£æ›¿ <code>Constant</code>, ä»–å·²ç»å¤Ÿæ¸…æ™°äº†ã€‚è¿™ä¸ªå¯ä»¥çœ‹ä½ è‡ªå·±å–œæ¬¢äº†ã€‚</p>
<p><strong>Before:</strong> <code>kAnimationDuration</code> æˆ–è€… <code>kAnalyticsAPIKey</code><br><strong>After:</strong> <code>C.UI.animationDuration</code> æˆ–è€… <code>C.Analytics.apiKey</code></p>
<h2 id="çš„ä½¿ç”¨"><a href="#çš„ä½¿ç”¨" class="headerlink" title="_ çš„ä½¿ç”¨"></a><code>_</code> çš„ä½¿ç”¨</h2><p><code>_</code> æ˜¯å¯¹æ²¡æœ‰ä½¿ç”¨åˆ°çš„å˜é‡çš„å ä½ç¬¦ã€‚ä»–å°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨â€è¿™ä¸ªå€¼æ˜¯ä»€ä¹ˆä¸é‡è¦â€ã€‚ ä¸ç„¶ç¼–è¯‘å™¨ä¼šæœ‰è­¦å‘Šâš ï¸ã€‚</p>
<p><strong>ğŸ‘ Donâ€™t</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="number">_</span> = name &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Name is not nil."</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>optional</code>å°±åƒä¸€ä¸ªç›’å­ã€‚å¯ä»¥ç›´æ¥çœ‹ä»–æ˜¯ä¸æ˜¯ç©ºçš„, æ²¡å¿…è¦æ¯æ¬¡éƒ½æŠŠé‡Œé¢çš„ä¸œè¥¿æ‹¿å‡ºæ¥ã€‚</p>
<p><strong>ğŸ‘ Do:</strong></p>
<ul>
<li>åˆ¤ç©º</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> name != <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Name is not nil."</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è¿”å›å€¼æ²¡ç”¨</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">_</span> = manager.removeCar(car) <span class="comment">// æˆåŠŸè¿”å›true</span></div></pre></td></tr></table></figure>
<ul>
<li>ConpletionHandler</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">service.fetchItems &#123;data, error , <span class="number">_</span> <span class="keyword">in</span></div><div class="line">    <span class="comment">// ç¬¬ä¸‰ä¸ªå‚æ•°æˆ‘ä¸åœ¨ä¹ä»–æ˜¯ä»€ä¹ˆ</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•å‘½å"><a href="#æ–¹æ³•å‘½å" class="headerlink" title="æ–¹æ³•å‘½å"></a>æ–¹æ³•å‘½å</h2><p>è¿™ç‚¹é€‚ç”¨äºæ‰€æœ‰éœ€è¦äººç±»å»é˜…è¯»çš„è¯­è¨€ã€‚ä»£ç æ€»æ˜¯ä¸é‚£ä¹ˆå®¹æ˜“ç†è§£çš„, ä¸è¦æµªè´¹åˆ«äººçš„ç²¾åŠ›ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">driver.driving()</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>æ˜¯æŠŠ <code>driver</code> æ ‡è®°æˆ <code>driving</code> çŠ¶æ€ï¼Ÿ</li>
<li>è¿˜æ˜¯æ£€æŸ¥ <code>driver</code> æ˜¯ä¸æ˜¯ <code>driving</code> çŠ¶æ€, å¹¶ä¸”è¿”å›ä¸€ä¸ª <code>bool</code> å€¼ï¼Ÿ</li>
</ul>
<p><strong>å¦‚æœè¦ç‚¹è¿›å»çœ‹æ‰çŸ¥é“è¿™æ–¹æ³•æ˜¯å¹²ä»€ä¹ˆçš„, è¿™ä¸ªå‘½åå°±æ˜¯å¤±è´¥äº†ã€‚</strong>å¤šäººååŒå¼€å‘æˆ–è€…å¤„ç†é—ç•™é¡¹ç›®çš„æ—¶å€™, ä½ è¯»åˆ«äººä»£ç çš„æ—¶é—´æ¯”ä½ å†™ä»£ç çš„æ—¶é—´éƒ½è¦é•¿ã€‚æ‰€ä»¥åœ¨å‘½åçš„æ—¶å€™æƒ³ç€åˆ«è®©çœ‹ä½ ä»£ç çš„äººç—›è‹¦ã€‚</p>
<h2 id="å…³äº-print"><a href="#å…³äº-print" class="headerlink" title="å…³äº print"></a>å…³äº print</h2><p>å¾ˆä¸¥è‚ƒçš„è¯´, ä¸è¦å¾—åˆ°ä¸€ä¸ª <code>error</code> æˆ–è€… <code>response</code> å°±åœ¨æ§åˆ¶å°æ‰“å°å‡ºæ¥ã€‚ä½ è¿™ä¹ˆåšè¿˜ä¸å¦‚ä¸æ‰“å°å‘¢ï¼æå¾—æ§åˆ¶å°ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿çœ‹èµ·æ¥çœŸçš„å¾ˆçˆ½å—ï¼Ÿ</p>
<p><strong>Do:</strong></p>
<ul>
<li>åœ¨ <code>framework</code> ä¸­ä½¿ç”¨ <code>error</code> çº§çš„ <code>log level</code>ã€‚</li>
<li>ä½¿ç”¨ä¸€äº›èƒ½å¤Ÿè®©ä½ æœ‰ä¸åŒè¾“å‡ºçº§åˆ«çš„ log åº“ã€‚<em>XGGLogger</em>ã€<em>SwiftyBeaver</em></li>
<li>ä¸è¦ç”¨ log æ¥ debug äº†ã€‚Xcode æœ‰å¾ˆå¤šæœ‰ç”¨çš„å·¥å…·<a href="https://www.objc.io/issues/19-debugging/debugging-case-study/">Debugging: A Case Study</a></li>
</ul>
<h2 id="æ²¡ç”¨çš„ä»£ç "><a href="#æ²¡ç”¨çš„ä»£ç " class="headerlink" title="æ²¡ç”¨çš„ä»£ç "></a>æ²¡ç”¨çš„ä»£ç </h2><p>ç»å¸¸åœ¨ä¸€äº›è€é¡¹ç›®é‡Œé¢è§åˆ°è¢«æ³¨é‡Šæ‰çš„ä»£ç , ä½†æ˜¯å‡ºæ¥æ²¡æœ‰é€šè¿‡æŠŠè¿™äº›ä»£ç æ‰“å¼€æ¥è§£å†³è¿‡é—®é¢˜ã€‚æ‰€ä»¥, æ—¢ç„¶è¿™äº›ä»£ç éƒ½æ²¡æœ‰ä»€ä¹ˆç”¨äº†, å°±åˆ äº†å®ƒ! è¿˜èƒ½å¢åŠ ä»£ç çš„å¯è¯»æ€§, çœ‹èµ·æ¥æ•´æ´çš„ä»£ç æ€»è¦è®©äººèˆ’æœä¸€äº›ã€‚</p>
<p><strong>æœ€åæ¨èä¸€ä¸ªå¥½æ–‡<a href="https://medium.com/@gokselkoksal/swifty-tips-%EF%B8%8F-8564553ba3ec">Using SwiftLint and Danger for Swift Best Practices</a></strong></p>
<p><strong><a href="https://medium.com/@gokselkoksal/swifty-tips-%EF%B8%8F-8564553ba3ec">åŸæ–‡åœ°å€</a></strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Swift å¼€å‘ä¸­çš„ä¸€äº›å°çš„æŠ€å·§&lt;/p&gt;
&lt;p&gt;åˆšå¼€å§‹çš„æ—¶å€™, ç‰¹åˆ«å¥½å¥‡å¤§å‚æ˜¯æ€ä¹ˆæçš„, ä»–ä»¬çš„é¡¹ç›®é•¿ä»€ä¹ˆæ ·å­, ä»–ä»¬ç”¨å“ªäº›åº“â€¦æƒ³åœ¨å·¨äººçš„è‚©è†€ä¸Šå¼€å‘, å…å¾—æµªè´¹æ—¶é—´åœ¨é‚£äº›å·²ç»æœ‰å¾ˆå¥½è§£å†³æ–¹æ¡ˆçš„äº‹æƒ…ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å››å¹´å‰ï¼Œæˆ‘å’Œå›¢é˜Ÿä¸­å¾ˆå¤šå¾ˆå‰å®³çš„äººè®¨è®ºè¿‡ä¸€äº›ç¼–ç¨‹å®è·µã€‚ä»Šå¤©å°±åˆ†äº«ä¸€äº›ä¸œè¥¿å§ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¢è¿æŒ‡æ­£ï¼ğŸš€&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Swift Syntax Cheat Codes</title>
    <link href="http://www.CepheusSun.com/Swift%20Syntax%20Cheat%20Codes.html"/>
    <id>http://www.CepheusSun.com/Swift Syntax Cheat Codes.html</id>
    <published>2017-05-23T16:05:23.000Z</published>
    <updated>2017-05-24T03:24:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä¸€äº›å¾ˆå¸¸è§çš„è¯­æ³•ã€‚</p>
<h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">() -&gt; <span class="type">Void</span></div></pre></td></tr></table></figure>
<p>ä¹Ÿå«åš <code>åŒ¿åå‡½æ•°</code>ã€‚é—­åŒ…æ˜¯è‡ªåŒ…å«çš„å‡½æ•°ä»£ç å—ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­è¢«ä¼ é€’å’Œä½¿ç”¨ã€‚åœ¨ <code>C</code> å’Œ <code>OC</code> ä¸­æœ‰ <code>block</code> ä¸ä¹‹å¯¹åº”ã€‚</p>
<p>å¦‚æœä½ ä¹‹å‰å°±æœ‰ iOS å¼€å‘ç»éªŒ, ä½ è‚¯å®šçœ‹åˆ°è¿‡ UIView åŠ¨ç”»çš„ API</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">animate</span>(<span class="title">withDuration</span> <span class="title">duration</span>: <span class="title">NSTimeInterval</span>,</div><div class="line"> <span class="title">animations</span>: @<span class="title">escaping</span>() -&gt; <span class="title">Void</span>)</span></div></pre></td></tr></table></figure>
<p><code>animations</code>å°±æ˜¯åŠ¨ç”»çš„å‚æ•°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span>.animate(withDuration: <span class="number">10.0</span>, animations: &#123;</div><div class="line">    button.alpha = <span class="number">0</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><code>animationWithDuration</code> æ–¹æ³•å°±ä¼šä½¿ç”¨è¿™ä¸ªé—­åŒ…åšä¸€ä»¶äº‹æƒ…:è®©buttonæ…¢æ…¢çš„æ¶ˆå¤±ã€‚</p>
<h3 id="å°¾éšé—­åŒ…"><a href="#å°¾éšé—­åŒ…" class="headerlink" title="å°¾éšé—­åŒ…"></a>å°¾éšé—­åŒ…</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span>.animate(withDuration: <span class="number">10.0</span>) &#123; </div><div class="line">    button.alpha = <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯ Swift çš„ç‰¹æ€§ä¹‹ä¸€, è¿™æ ·å¯ä»¥èŠ‚çœä¸€äº›æ²¡ä»€ä¹ˆå¿…è¦å­˜åœ¨çš„ä»£ç ã€‚çœ‹è¿™æ®µçš„ä»£ç , è·Ÿä¸Šé¢çš„ä»£ç è°ƒç”¨çš„æ˜¯åŒä¸€ä¸ª API, åªæ˜¯è¿™æ®µä»£ç ä½¿ç”¨äº†æ›´ç®€æ´çš„è¯­æ³•ã€‚</p>
<p>å› ä¸º <code>animate</code> è¿™ä¸ªæ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…â€”<strong>å°¾éšé—­åŒ…</strong>ã€‚å°¾éšé—­åŒ…å…è®¸æˆ‘ä»¬åœ¨ç¼–ç çš„æ—¶å€™çœç•¥æ‰æœ€åçš„å‚æ•°å, å¹¶è®©ä»–ä»å‚æ•°åˆ—è¡¨é‚£ä¸ªæ‹¬å·é‡Œé¢ç§»å‡ºæ¥ã€‚è¿™æ ·ä¼šè®©ä»£ç æ›´ä¼˜é›…ç®€æ´ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">say</span><span class="params">(<span class="number">_</span> message: String, completion: @escaping <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(message)</div><div class="line">    completion()</div><div class="line">&#125;</div><div class="line"><span class="comment">// æ²¡æœ‰ä½¿ç”¨å°¾éšé—­åŒ…</span></div><div class="line">say(<span class="string">"Hello"</span>, completion: &#123;</div><div class="line">    <span class="comment">// prints: "Hello" </span></div><div class="line">    <span class="comment">// Do some other stuff</span></div><div class="line">&#125;)</div><div class="line"><span class="comment">// ä½¿ç”¨äº†å°¾éšé—­åŒ…</span></div><div class="line">say(<span class="string">"Hello"</span>) &#123;</div><div class="line">    <span class="comment">// prints: "Hello"</span></div><div class="line">    <span class="comment">// Do some other stuff</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typealias</span></div></pre></td></tr></table></figure>
<p>ç±»å‹åˆ«åæ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å°å·¥å…·, èƒ½å°½å¯èƒ½å°‘çš„å‡å°‘é‡å¤ä»£ç ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">dance</span><span class="params">(<span class="keyword">do</span>:<span class="params">(Int, String, Double)</span></span></span> -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)) &#123;&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç çš„åŠŸèƒ½å…¶å®å¾ˆç®€å•, ä½†æ˜¯å¦‚æœåœ¨å…¶ä»–æ–¹æ³•ä¸­ä¹Ÿéœ€è¦ä¼ é€’è¿™ä¸ªé—­åŒ…çš„è¯, æˆ‘ä»¬å°±åº”è¯¥è®°ä½è¿™ä¸ªé—­åŒ…, å¹¶ä¸”ä¿è¯åœ¨ä»»ä½•æˆ‘ä»¬ä½¿ç”¨å®ƒçš„åœ°æ–¹éƒ½æ˜¯ä¸€è‡´çš„, ä¸ç„¶ç¼–è¯‘å™¨å¯èƒ½å°±ä¸é«˜å…´äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">dance</span><span class="params">(<span class="keyword">do</span>: <span class="params">(Int, String, Double)</span></span></span> -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)) &#123; &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sing</span><span class="params">(<span class="keyword">do</span>: <span class="params">(Int, String, Double)</span></span></span> -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)) &#123; &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">act</span><span class="params">(<span class="keyword">do</span>: <span class="params">(Int, String, Double)</span></span></span> -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)) &#123; &#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æœæŸä¸ªæ—¶åˆ»æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªé—­åŒ…ã€‚è¿™å°±å°´å°¬äº†, ä¸Šé¢ä¸‰ä¸ªæ–¹æ³•éƒ½éœ€è¦å»ä¿®æ”¹ã€‚ è¿™å°±æ˜¯ä½¿ç”¨<strong>ç±»å‹åˆ«å</strong>çš„åœºæ™¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typealias</span> <span class="type">TripleThreat</span> = (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>) -&gt; (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Double</span>)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">dance</span><span class="params">(dance: TripleThreat)</span></span> &#123; &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">act</span><span class="params">(act: TripleThreat)</span></span> &#123; &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sing</span><span class="params">(sing: TripleThreat)</span></span> &#123; &#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å†™çš„è¯, åªè¦æˆ‘ä»¬éœ€è¦ä¿®æ”¹è¿™ä¸ªé—­åŒ…çš„æ—¶å€™, å°±åªéœ€è¦ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹äº†ã€‚</p>
<p><strong>å–œé—»ä¹è§çš„ç±»å‹åˆ«å</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">typealias Void = ()</div><div class="line">typealias NSTimeInterval = Double</div></pre></td></tr></table></figure>
<h3 id="å‚æ•°åç¼©å†™"><a href="#å‚æ•°åç¼©å†™" class="headerlink" title="å‚æ•°åç¼©å†™"></a>å‚æ•°åç¼©å†™</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$<span class="number">0</span>,$<span class="number">1</span>,$<span class="number">2</span></div></pre></td></tr></table></figure>
<p>ä¸€ä¸ªé—­åŒ…å†…æœ‰å‚æ•°çš„æƒ…å†µä¸‹, ä½ å¯ä»¥åœ¨é—­åŒ…å®šä¹‰ä¸­çœç•¥å‚æ•°åˆ—è¡¨ï¼Œå¹¶ä¸”å¯¹åº”å‚æ•°åç§°ç¼©å†™çš„ç±»å‹ä¼š é€šè¿‡å‡½æ•°ç±»å‹è¿›è¡Œæ¨æ–­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">say</span><span class="params">(<span class="number">_</span> message: String, completion: <span class="params">(<span class="number">_</span> goodbye: String)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(message)</div><div class="line">    completion(<span class="string">"Goodbye"</span>)</div><div class="line">&#125;</div><div class="line">...</div><div class="line">say(<span class="string">"Hi"</span>) &#123; (goodbye: <span class="type">String</span>) -&gt; <span class="type">Void</span> <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(goodbye)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints: "Hi"</span></div><div class="line"><span class="comment">// prints: "Goodbye"</span></div></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿™ä¸ªå°¾éšé—­åŒ…æœ‰ä¸€ä¸ª <code>String</code> ç±»å‹çš„ <code>goodbye</code> å‚æ•°ã€‚Xcode ä¼šè‡ªåŠ¨æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªå…ƒç»„é‡Œé¢ã€‚ç”¨ <code>in</code> æ¥è¡¨ç¤ºå‚æ•°ã€è¿”å›å€¼çš„ç»“æŸã€‚å¹¶å¦èµ·ä¸€è¡Œæ¥å®ç°æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ã€‚å½“è¿™ä¸ªé—­åŒ…å¾ˆå°çš„æ—¶å€™ï¼Œè¿™æ ·å†™å°±æ˜¾å¾—ä»£ç éå¸¸çš„å†—é•¿äº†ã€‚æˆ‘ä»¬æ¥æ”¹é€ ä¸€ä¸‹æ®µä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(goodbye: <span class="type">String</span>) -&gt; <span class="type">Void</span> <span class="keyword">in</span></div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å®Œå…¨æ²¡æœ‰å¿…è¦å†™å‡ºæ¥ã€‚ä½¿ç”¨å‚æ•°åç¼©å†™å°±å¥½äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">say(<span class="string">"Hi"</span>) &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line"><span class="comment">// prints: "Hi"</span></div><div class="line"><span class="comment">// prints: "Goodbye"</span></div></pre></td></tr></table></figure>
<p>ä½ çœ‹, è¿™æ ·å†™å®Œå…¨çœç•¥æ‰äº†é—­åŒ…çš„å‚æ•°è¿˜æœ‰è¿”å›å€¼å£°æ˜çš„ä»£ç ã€‚å› ä¸ºåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨å‚æ•°åã€‚æ¯ä¸ªå‚æ•°éƒ½æŒ‰ç…§å£°æ˜çš„é¡ºåºå‘½åå¥½äº†ã€‚è¿™ä¹ˆç®€å•, ç›´æ¥æ”¾åœ¨ä¸€è¡Œä»£ç é‡Œå°±å¯ä»¥äº†ã€‚</p>
<p>å¦‚æœæœ‰ä¸æ­¢ä¸€ä¸ªå‚æ•°çš„æ—¶å€™åº”è¯¥æ€ä¹ˆå¼„å‘¢ï¼Ÿæˆ‘ä¹Ÿä¸æƒ³è§£é‡Šäº†, ç›´æ¥çœ‹ä¸‹é¢çš„ä»£ç : </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(goodbye: <span class="type">String</span>, name: <span class="type">String</span>, age: <span class="type">Int</span>) -&gt; <span class="type">Void</span> <span class="keyword">in</span></div><div class="line"><span class="comment">// $0: goodbye</span></div><div class="line"><span class="comment">// $1: name</span></div><div class="line"><span class="comment">// $2: age</span></div></pre></td></tr></table></figure>
<h3 id="è¿”å›-Self"><a href="#è¿”å›-Self" class="headerlink" title="è¿”å› Self"></a>è¿”å› Self</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-&gt; <span class="type">Self</span></div></pre></td></tr></table></figure>
<p>Swift2.0 å¸¦æ¥çš„ä¸€å¤§å †æ“ä½œç¬¦(map, flatmap), è¿™äº›æ“ä½œç¬¦æ›´ç»™åŠ›çš„æ˜¯è®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ <code>.</code> è¯­æ³•é“¾å¼çš„è°ƒç”¨ä¸€ç³»åˆ—æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span> , <span class="number">2</span>, <span class="number">3</span>, <span class="literal">nil</span>, <span class="number">5</span>]</div><div class="line">    .flatMap &#123;$<span class="number">0</span>&#125;    <span class="comment">// ç§»é™¤ç©º</span></div><div class="line">    .<span class="built_in">filter</span> &#123;$<span class="number">0</span> &lt; <span class="number">3</span>&#125; <span class="comment">// è¿‡æ»¤å¤§äº2çš„å€¼</span></div><div class="line">    .<span class="built_in">map</span> &#123;$<span class="number">0</span> * <span class="number">100</span>&#125;  <span class="comment">// æ¯ä¸ªå€¼æ”¾å¤§100å€</span></div><div class="line"><span class="comment">// [100, 200]</span></div></pre></td></tr></table></figure>
<p>è¿™æ ·å¤ªä¼˜é›…äº†, æ—¢å¯è¯»åˆæ˜“äºç†è§£ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬ä¸º<code>String</code>å»ºä¸€ä¸ªæ‰©å±•, åœ¨å­—ç¬¦ä¸²çš„æœ¬èº«ä¸Šæ‰§è¡Œä¸€äº›æ“ä½œ, è€Œä¸ä½¿å‡½æ•°è¿”å› <code>Void</code> è€Œæ˜¯ä»–è‡ªå·±.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// extension UIView</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">with</span><span class="params">(backgroundColor: UIColor)</span></span> -&gt; <span class="type">Self</span> &#123;</div><div class="line">    backgroundColor = color</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">with</span><span class="params">(cornerRadius: CGFloat)</span></span> -&gt; <span class="type">Self</span> &#123;</div><div class="line">    layer.cornerRadius = <span class="number">3</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> view = <span class="type">UIView</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">10</span>, height: <span class="number">10</span>))</div><div class="line">          .with(backgroundColor: .black)</div><div class="line">          .with(cornerRadius: <span class="number">3</span>)</div></pre></td></tr></table></figure>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://medium.com/swift-programming/swift-syntax-cheat-codes-9ce4ab4bc82e">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä¸€äº›å¾ˆå¸¸è§çš„è¯­æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é—­åŒ…&quot;&gt;&lt;a href=&quot;#é—­åŒ…&quot; class=&quot;headerlink&quot; title=&quot;é—­åŒ…&quot;&gt;&lt;/a&gt;é—­åŒ…&lt;/h3&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;() -&amp;gt; &lt;span class=&quot;type&quot;&gt;Void&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¹Ÿå«åš &lt;code&gt;åŒ¿åå‡½æ•°&lt;/code&gt;ã€‚é—­åŒ…æ˜¯è‡ªåŒ…å«çš„å‡½æ•°ä»£ç å—ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­è¢«ä¼ é€’å’Œä½¿ç”¨ã€‚åœ¨ &lt;code&gt;C&lt;/code&gt; å’Œ &lt;code&gt;OC&lt;/code&gt; ä¸­æœ‰ &lt;code&gt;block&lt;/code&gt; ä¸ä¹‹å¯¹åº”ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¹‹å‰å°±æœ‰ iOS å¼€å‘ç»éªŒ, ä½ è‚¯å®šçœ‹åˆ°è¿‡ UIView åŠ¨ç”»çš„ API&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Picking the right way of failing in Swift</title>
    <link href="http://www.CepheusSun.com/Picking%20the%20right%20way%20of%20failing%20in%20Swift.html"/>
    <id>http://www.CepheusSun.com/Picking the right way of failing in Swift.html</id>
    <published>2017-05-20T04:37:45.000Z</published>
    <updated>2017-05-20T04:37:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>Swift çš„ä¸€å¤§ç‰¹è‰²å°±æ˜¯ç¼–è¯‘å®‰å…¨ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“çš„ç¼–å†™å‡ºå¯é¢„æµ‹æ€§çš„ä»£ç , å¹¶ä¸”èƒ½å‹¾å‡å°‘è¿è¡Œæ—¶é”™è¯¯çš„å‘ç”Ÿã€‚ä½†æ˜¯, åœ¨å®é™…çš„æƒ…å†µä¸­, é”™è¯¯å‘ç”Ÿçš„åŸå› æ˜¯åƒå¥‡ç™¾æ€ªçš„ã€‚</p>
<p>æˆ‘ä»¬ä»Šå¤©æ¥çœ‹ä¸€ä¸‹å¦‚æœæ­£ç¡®çš„å»å¤„ç†å„ç±»é”™è¯¯, ä»¥åŠæˆ‘ä»¬æœ‰ä»€ä¹ˆå·¥å…·æ¥åšè¿™ä»¶äº‹æƒ…ã€‚ä¸Šä¸€ç¯‡æ–‡ç« ç ”ç©¶äº†å¦‚ä½•å¤„ç† <code>non-optional</code>ã€‚ åœ¨é‚£ç¯‡æ–‡ç« ä¸­æˆ‘ä½¿ç”¨ <code>guard</code> + <code>preconditionFailure()</code> ä»£æ›¿äº†å¼ºåˆ¶è§£åŒ…ã€‚</p>
<p>ä¹‹åå¾ˆå¤šäººéƒ½åœ¨é—® <code>preconditionFailure()</code> å’Œ <code>assert()</code> æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ã€‚æˆ‘ä»¬å†ä»”ç»†çš„çœ‹çœ‹è¿™äº›è¯­è¨€ç‰¹æ€§ã€‚æœ€é‡è¦çš„æ˜¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨å“ªä¸€ç§ï¼Ÿ</p>
<a id="more"></a>
<h3 id="Letâ€™s-start-with-a-list"><a href="#Letâ€™s-start-with-a-list" class="headerlink" title="Letâ€™s start with a list"></a>Letâ€™s start with a list</h3><p>æˆ‘å…ˆæŠŠæˆ‘çŸ¥é“çš„æ‰€æœ‰å¼‚å¸¸å¤„ç†æ–¹æ³•åˆ—ä¸¾å‡ºæ¥ã€‚</p>
<ul>
<li><strong>è¿”å› <code>nil</code> æˆ–è€…æ˜¯ä¸€ä¸ª error æšä¸¾å€¼</strong>, æœ€ç®€å•çš„å¼‚å¸¸å¤„ç†æœºåˆ¶å°±æ˜¯ç›´æ¥åœ¨å‘ç”Ÿé”™è¯¯çš„æ–¹æ³•ä¸­è¿”å› <code>nil</code> æˆ–è€…æ˜¯ <code>.error</code>(ä½¿ç”¨äº†ä¸€ä¸ªæšä¸¾æ¥åšä¸ºè¿”å›å€¼ç±»å‹çš„æ—¶å€™)ã€‚è¿™ä¸­åšæ³•åœ¨å¾ˆå¤šçš„åœºæ™¯ä¸­éƒ½æ˜¯æœ‰æ•ˆçš„, ä½†æ˜¯å¦‚æœä»»ä½•æƒ…å†µä¸‹éƒ½è¿™ä¹ˆå¹²çš„è¯ã€‚å¯èƒ½ä¼šå¯¼è‡´ä½ ä»£ç ä¸­çš„ API ç¼–çš„éå¸¸ç¹çã€‚ä¹Ÿä¼šå¸¦æ¥ä¸€äº›é€»è¾‘çš„é”™è¯¯ã€‚</li>
<li><strong>æŠ›å‡ºé”™è¯¯ä¿¡æ¯</strong>, è¿™è¦æ±‚åœ¨å¤„ç†æ½œåœ¨çš„é”™è¯¯æ˜¯ä½¿ç”¨<code>do</code>ã€<code>try</code>ã€<code>catch</code> è¯­å¥ã€‚å¦å¤–å¦‚æœä½¿ç”¨ <code>tryï¼Ÿ</code>é”™è¯¯ä¼šè¢«å¿½ç•¥æ‰ã€‚</li>
<li><strong>ä½¿ç”¨æ–­è¨€ <code>assert()</code> å’Œ <code>assertionFailure()</code></strong>, æ¥ç¡®å®šè¿™ä¸ªè¡¨è¾¾å¼æ˜¯ä¸æ˜¯æˆç«‹ã€‚é»˜è®¤æƒ…å†µä¸‹, åœ¨ Debug ç¯å¢ƒä¸‹ä¼šå¯¼è‡´å¼‚å¸¸çš„æŠ›å‡ºã€‚åœ¨ release ä¸‹ä¸€åœºä¼šè¢«å¿½ç•¥ã€‚æ‰€ä»¥æ— æ³•ä¿è¯è¿™ä¸ªæ–­è¨€åœ¨å‡ºå‘çš„æ—¶å€™, ç¨‹åºä¼šç«‹é©¬åœæ­¢ã€‚æ‰€ä»¥è¿™ç§æ¨¡å¼ä¹Ÿå¯ä»¥è¢«ç†è§£è¿è¡Œæ—¶è­¦å‘Šã€‚</li>
<li><strong>ä½¿ç”¨ <code>precondition()</code> å’Œ <code>preconditionFailure()</code></strong>æ¥ä»£æ›¿æ–­è¨€ã€‚è·Ÿæ–­ä¹‰æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å®ƒä»¬åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šå‘ç”Ÿ, å¯ä»¥ç¡®ä¿åœ¨å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ç¨‹åºä¼šç«‹é©¬åœæ­¢ã€‚</li>
<li><strong>è°ƒç”¨ <code>fataError()</code></strong>, è¿™ä¸ªå‡½æ•°åœ¨ Xcode è‡ªåŠ¨ç”Ÿæˆçš„ <code>init(coder:)</code> ä¸­å¤§æ¦‚éƒ½çœ‹åˆ°è¿‡ã€‚åªè¦è¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨å°±ä¼šç«‹é©¬æ€æ‰å½“å‰è¿›ç¨‹ã€‚</li>
<li><strong>è°ƒç”¨ <code>exit()</code></strong>, ä½¿ç”¨è¿™ä¸ªä»£ç ç›´æ¥ç»“æŸè¿›ç¨‹ã€‚è¿™åœ¨å‘½ä»¤è¡Œè¿˜æœ‰è„šæœ¬ä¸­æ˜¯éå¸¸æœ‰æ•ˆçš„æ–¹æ³•ã€‚</li>
</ul>
<h3 id="æ˜¯å¦å¯æ¢å¤"><a href="#æ˜¯å¦å¯æ¢å¤" class="headerlink" title="æ˜¯å¦å¯æ¢å¤"></a>æ˜¯å¦å¯æ¢å¤</h3><p>è¿™ä¸ªå¼‚å¸¸å‘ç”Ÿä¹‹åç¨‹åºè¿˜èƒ½å¦ä»å¼‚å¸¸ä¸­æ¢å¤æ˜¯é€‰æ‹©å¼‚å¸¸å¤„ç†æ–¹å¼çš„é‡è¦å› ç´ ã€‚</p>
<p>æ¯”å¦‚è¯´ã€‚æˆ‘ä»¬å‘æœåŠ¡å™¨å‘å¼ºè¯·æ±‚, ç„¶åå¾—åˆ°äº†é”™è¯¯çš„è¯·æ±‚ç»“æœã€‚è¿™ç§æƒ…å†µæ— è®ºæˆ‘ä»¬æ˜¯å¤šä¹ˆç‰›é€¼çš„ç¨‹åºå‘˜, æˆ‘ä»¬ä½¿ç”¨äº†å¤šä¹ˆå¼ºå¤§çš„æœåŠ¡å™¨åŸºæœ¬ä¸Šè‚¯å®šéƒ½ä¼šå‘ç”Ÿã€‚æŠŠè¿™ç§å¼‚å¸¸çœ‹ä½œæ˜¯è‡´å‘½å¼‚å¸¸æˆ–è€…æ˜¯ä¸å¯æ¢å¤çš„å¼‚å¸¸å¯èƒ½å°±ä¸å¯¹äº†ã€‚è¿™ç§åœºæ™¯ä¸­, æˆ‘ä»¬å¸Œæœ›çš„å¯èƒ½å°±æ˜¯ç»™ç”¨æˆ·å±•ç¤ºä¸€äº›é”™è¯¯ä¿¡æ¯å°±å¯ä»¥äº†ã€‚</p>
<p>æ—¢ç„¶è¿™æ ·, åœ¨è¿™ç§åœºæ™¯ä¸­, é€‰æ‹©ä»€ä¹ˆæ ·çš„æ–¹æ³•æ¥å¤„ç†å¼‚å¸¸å‘¢ï¼Ÿå¦‚æœä½ ä»”ç»†çœ‹äº†ä¸Šé¢çš„åˆ—è¡¨, æˆ‘ä»¬å…¶å®å¯ä»¥æŠŠè¿™äº›æŒ‰ç…§æ˜¯å¦å¯æ¢å¤å½’ä½ä¸¤ç±»:</p>
<p><strong>å¯æ¢å¤çš„</strong></p>
<ul>
<li>è¿”å› <code>nil</code> æˆ–è€…ä¸€ä¸ª <code>error</code> æšä¸¾å€¼ã€‚</li>
<li>æŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚</li>
</ul>
<p><strong>ä¸å¯æ¢å¤çš„</strong></p>
<ul>
<li>assert()</li>
<li>precondition()</li>
<li>fatalError()</li>
<li>exit()</li>
</ul>
<p>æ—¢ç„¶æˆ‘ä»¬å¤„ç†çš„æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ä»»åŠ¡, è¿”å› <code>nil</code> æˆ–è€… <code>error</code> æšä¸¾å€¼å°±æ˜¯æœ€å¥½çš„é€‰æ‹©äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataLoader</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Result</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> success(<span class="type">Data</span>)</div><div class="line">        <span class="keyword">case</span> failure(<span class="type">Error</span>?)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadData</span><span class="params">(from url: URL, completionHandler: @escaping <span class="params">(Result)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">        <span class="keyword">let</span> task = <span class="type">URLSession</span>.shared.dataTask(with: url) &#123;</div><div class="line">            data, response, error <span class="keyword">in</span></div><div class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> data = data <span class="keyword">else</span> &#123;</div><div class="line">                completionHandler(.failure(error))</div><div class="line">                <span class="keyword">return</span></div><div class="line">            &#125;</div><div class="line">            completionHandler(.success(data))</div><div class="line">        &#125;</div><div class="line">        task.resume()</div><div class="line">    &#125;   </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä»»åŠ¡æ˜¯åŒæ­¥çš„, æŠ›å‡ºé”™è¯¯åº”è¯¥æ˜¯æœ€å¥½çš„æ–¹æ³•äº†ã€‚æ¯•ç«Ÿ API ä¹Ÿæ˜¯è¿™æ ·è®¾è®¡çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StringFormatter</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Error</span>: <span class="title">Swift</span>.<span class="title">Error</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> emptyString</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">format</span><span class="params">(<span class="number">_</span> string:String)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">guard</span> !string.isEmpty <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">Error</span>.emptyString</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> string.replacingOccurrences(of: <span class="string">"\n"</span>, with: <span class="string">" "</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨æœ‰äº›æƒ…å†µä¸‹, é”™è¯¯æ˜¯ä¸å¯æ¢å¤çš„ã€‚æ¯”å¦‚è¯´, æˆ‘ä»¬éœ€è¦åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™åŠ è½½é…ç½®æ–‡ä»¶ã€‚å¦‚æœè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸¢å¤±äº†, è¿™ä¼šæŠŠç¨‹åºå¸¦å…¥æœªå®šä¹‰çš„çŠ¶æ€ä¸­ã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ crash å¯èƒ½å°±è¦æ¯”è®©ç¨‹åºå°±è¿è¡Œå¥½å¾—å¤šäº†ã€‚è¿™ç§æƒ…å†µä¸‹, ä½¿ç”¨æ›´å¼ºçš„å¹¶ä¸”ä¸å¯æ¢å¤çš„æ–¹æ³•æ¥è®©ç¨‹åºå´©æºƒä¼šæ˜¯æ›´åˆé€‚çš„ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, ä½¿ç”¨ <code>preconditionFailure()</code> æ¥åœæ­¢è¿è¡Œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> config = <span class="type">FileLoader</span>().loadFile(name: <span class="string">"Config.json"</span>) <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">preconditionFailure</span>(<span class="string">"Failed to load config file"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç¨‹åºé”™è¯¯å’Œè¿è¡Œé”™è¯¯"><a href="#ç¨‹åºé”™è¯¯å’Œè¿è¡Œé”™è¯¯" class="headerlink" title="ç¨‹åºé”™è¯¯å’Œè¿è¡Œé”™è¯¯"></a>ç¨‹åºé”™è¯¯å’Œè¿è¡Œé”™è¯¯</h3><p>å¦å¤–ä¸€ä¸ªé‡è¦çš„æ ‡å‡†æ˜¯:å¼‚å¸¸çš„å‘ç”ŸåŸå› æ˜¯é€»è¾‘è¿˜æ˜¯é…ç½®, æˆ–è€…è¯´è¿™ä¸ªé”™è¯¯æ˜¯ä¸æ˜¯ç¨‹åºæµç¨‹ä¸­åˆæ³•çš„éƒ¨åˆ†ã€‚åŸºæœ¬ä¸Šåˆ¤æ–­çš„æ ‡å‡†å°±æ˜¯è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯å› ä¸ºç¨‹åºå‘˜è¿˜æ˜¯å¤–éƒ¨å› ç´ ã€‚</p>
<p>ä¸ºäº†å‡å°‘éº»çƒ¦, å¯èƒ½ä½ æ›´æ„¿æ„ä½¿ç”¨ä¸å¯æ¢å¤çš„æ–¹æ³•æ¥å¤„ç†å„ç±»é”™è¯¯ã€‚è¿™æ ·ä½ å°±ä¸ç”¨å†™å„ç§ä»£ç æ¥å¤„ç†å„ç§ç‰¹æ®Šæƒ…å†µäº†, å¹¶ä¸”å¦‚æœæµ‹è¯•åšå¾—å¥½çš„è¯, è¿™äº›é”™è¯¯å°±èƒ½å¤Ÿæ—©çš„è¢«æ•è·åˆ°äº†ã€‚</p>
<p>æ¯”å¦‚ã€‚ æˆ‘ä»¬åœ¨åšä¸€ä¸ªç•Œé¢, éœ€è¦ä¸€ä¸ª <code>viewModel</code> åœ¨ä½¿ç”¨ä¹‹å‰è·Ÿä»–åšå¥½ç»‘å®šã€‚è¿™ä¸ª <code>viewModel</code> åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­æ˜¯ä¸€ä¸ª <code>optional</code> ç±»å‹, ä½†æ˜¯æˆ‘ä»¬åˆä¸å¸Œæœ›æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½è¦å¼ºåˆ¶è§£åŒ…ã€‚æˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›åœ¨è¿™ä¸ª <code>viewmodel</code> è«åå…¶å¦™æ¶ˆå¤±çš„æ—¶å€™ç¨‹åºåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å´©æºƒã€‚ä½¿ç”¨æ–­è¨€åœ¨ <code>debug</code> ä¸‹è·å¾—é”™è¯¯ä¿¡æ¯å°±è¶³å¤Ÿäº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailView</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ViewModel</span> </span>&#123;</div><div class="line">        <span class="keyword">var</span> title: <span class="type">String</span></div><div class="line">        <span class="keyword">var</span> subtitle: <span class="type">String</span></div><div class="line">        <span class="keyword">var</span> action: <span class="type">String</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> viewModel: <span class="type">ViewModel</span>?</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> titleLabel = <span class="type">UILabel</span>()</div><div class="line">    <span class="keyword">let</span> subtitleLabel = <span class="type">UILabel</span>()</div><div class="line">    <span class="keyword">let</span> actionButton = <span class="type">UIButton</span>()</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didMoveToSuperview</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.didMoveToSuperview()</div><div class="line">        </div><div class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> viewModel = viewModel <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">assertionFailure</span>(<span class="string">"No view model assigned to DetailView."</span>)</div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        titleLabel.text = viewModel.title</div><div class="line">        subtitleLabel.text = viewModel.subtitle</div><div class="line">        actionButton.setTitle(viewModel.action, <span class="keyword">for</span>: .normal)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯: æˆ‘ä»¬å¿…é¡»åœ¨ä¸Šé¢çš„ <code>guard</code> è¡¨è¾¾å¼ä¸­ <code>return</code>, ä¸ç„¶åœ¨ <code>release</code> æ¡ä»¶ä¸‹ <code>assertFailure()</code> ä¹Ÿæ²¡ä»€ä¹ˆä½œç”¨ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« æœ‰åŠ©äºè®©ä½ ç†è§£åˆ°å„ç§å¼‚å¸¸å¤„ç†æ–¹æ³•çš„åŒºåˆ«ã€‚æˆ‘çš„å»ºè®®æ˜¯ä¸è¦åªæ˜¯ä¸“æ³¨äºæŠ€æœ¯, è€Œæ˜¯è¦åœ¨ä¸åŒçš„åœºæ™¯ä¸­å°è¯•ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹, æˆ‘æ›´å»ºè®®å¤§å®¶å°½é‡åœ¨ç¨‹åºå‡ºé”™çš„æ—¶å€™æ¢å¤è¿‡æ¥, é™¤éå¼‚å¸¸æ˜¯è‡´å‘½çš„, éƒ½ä¸è¦å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>å¦å¤– <code>print(error)</code> å¹¶ä¸æ˜¯ä¸€ä¸ªå¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚</p>
<p>Thanks for reading! ğŸš€</p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://medium.com/@johnsundell/picking-the-right-way-of-failing-in-swift-e89125a6b5b5">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Swift çš„ä¸€å¤§ç‰¹è‰²å°±æ˜¯ç¼–è¯‘å®‰å…¨ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“çš„ç¼–å†™å‡ºå¯é¢„æµ‹æ€§çš„ä»£ç , å¹¶ä¸”èƒ½å‹¾å‡å°‘è¿è¡Œæ—¶é”™è¯¯çš„å‘ç”Ÿã€‚ä½†æ˜¯, åœ¨å®é™…çš„æƒ…å†µä¸­, é”™è¯¯å‘ç”Ÿçš„åŸå› æ˜¯åƒå¥‡ç™¾æ€ªçš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»Šå¤©æ¥çœ‹ä¸€ä¸‹å¦‚æœæ­£ç¡®çš„å»å¤„ç†å„ç±»é”™è¯¯, ä»¥åŠæˆ‘ä»¬æœ‰ä»€ä¹ˆå·¥å…·æ¥åšè¿™ä»¶äº‹æƒ…ã€‚ä¸Šä¸€ç¯‡æ–‡ç« ç ”ç©¶äº†å¦‚ä½•å¤„ç† &lt;code&gt;non-optional&lt;/code&gt;ã€‚ åœ¨é‚£ç¯‡æ–‡ç« ä¸­æˆ‘ä½¿ç”¨ &lt;code&gt;guard&lt;/code&gt; + &lt;code&gt;preconditionFailure()&lt;/code&gt; ä»£æ›¿äº†å¼ºåˆ¶è§£åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹åå¾ˆå¤šäººéƒ½åœ¨é—® &lt;code&gt;preconditionFailure()&lt;/code&gt; å’Œ &lt;code&gt;assert()&lt;/code&gt; æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ã€‚æˆ‘ä»¬å†ä»”ç»†çš„çœ‹çœ‹è¿™äº›è¯­è¨€ç‰¹æ€§ã€‚æœ€é‡è¦çš„æ˜¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨å“ªä¸€ç§ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Using lazy properties in Swift</title>
    <link href="http://www.CepheusSun.com/Using%20lazy%20properties%20in%20Swift.html"/>
    <id>http://www.CepheusSun.com/Using lazy properties in Swift.html</id>
    <published>2017-05-20T04:36:45.000Z</published>
    <updated>2017-05-20T04:37:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ‡’åŠ è½½å±äºè®©ä½ å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆå§‹åŒ–, è€Œä¸æ˜¯åœ¨åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™å°±å¿…é¡»è¦ã€‚æ‡’åŠ è½½å¯ä»¥ç”¨æ¥é¿å… optional çš„ä½¿ç”¨, å½“æŸä¸ªå±æ€§çš„åˆå§‹åŒ–è€—è´¹å¾ˆå¤šèµ„æºçš„æ—¶å€™ä¼šæå‡æ€§èƒ½ã€‚å½“ç„¶ä½¿ç”¨æ‡’åŠ è½½ä¹Ÿèƒ½è®©å¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•çœ‹èµ·æ¥å¾ˆæ¸…çˆ½, å› ä¸ºæŸäº›è®¾ç½®ä¼šåœ¨è¿™ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­è¢«æ¨è¿Ÿã€‚</p>
<p>è¿™å‘¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ Swift ä¸­æ‡’åŠ è½½çš„å®šä¹‰, ä»¥åŠä½¿ç”¨ã€‚</p>
<a id="more"></a>
<h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>å®šä¹‰ä¸€ä¸ªæ‡’åŠ è½½å±æ€§æœ€ç®€å•çš„åŠæ³•å°±æ˜¯åœ¨ <code>var</code> å‰åŠ ä¸€ä¸ª <code>lazy</code> å…³é”®å­—, å¹¶ä¸”è¿˜è¦ç»™ å‡ºé»˜è®¤çš„å€¼ã€‚è¿™ä¸ªé»˜è®¤å€¼ä¼šåœ¨è¿™ä¸ªå±æ€§è¢«ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™è¢«æŒ‡å®š, ä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•ä¸­è¿™ä¸ªå°±ä¸éœ€è¦å†å»åˆå§‹åŒ–è¿™ä¸ªå±æ€§äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileLoader</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> cahce = <span class="type">Cache</span>&lt;<span class="type">File</span>&gt;()</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadFile</span><span class="params">(name name: String)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">File</span> &#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> cachedFile = cahce[name] &#123;</div><div class="line">            <span class="keyword">return</span> cachedFile</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> file = <span class="keyword">try</span> loadFileFromDisk(fileName: name)</div><div class="line">        cahce[name] = file</div><div class="line">        <span class="keyword">return</span> file</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨å·¥å‚æ–¹æ³•"><a href="#ä½¿ç”¨å·¥å‚æ–¹æ³•" class="headerlink" title="ä½¿ç”¨å·¥å‚æ–¹æ³•"></a>ä½¿ç”¨å·¥å‚æ–¹æ³•</h3><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨è¿™ä¸ªå±æ€§åœ¨æ‡’åŠ è½½çš„æ—¶å€™è®¾ç½®ä¸€äº›ä¸œè¥¿, åªæ˜¯ç®€å•çš„ä½¿ç”¨å®ƒçš„åˆå§‹åŒ–æ–¹æ³•å¯èƒ½å°±æ²¡æœ‰é‚£ä¹ˆæ–¹ä¾¿äº†ã€‚è¿™ç§æƒ…å†µä¸‹, æ›´æ–¹ä¾¿çš„æ–¹æ³•æ˜¯æŠŠè¿™ä¸ªå±æ€§çš„åˆå§‹åŒ–ä»£ç†ç»™ä¸€ä¸ªå·¥å‚æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Scene</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> eventManager: <span class="type">EventManager</span> = <span class="keyword">self</span>.makeEventManager()</div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeEventManager</span><span class="params">()</span></span> -&gt; <span class="type">EventManager</span>&#123;</div><div class="line">        <span class="keyword">let</span> manager = <span class="type">EventManager</span>()</div><div class="line">        <span class="keyword">return</span> manager</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ ä¸å¸Œæœ›ä½ çš„ç±»é‡Œé¢å…¨æ˜¯å„ç§ <code>make..()</code> è¿™ç±»å·¥å‚æ–¹æ³•, ä½ å¯ä»¥æŠŠè¿™äº›æ–¹æ³•æ”¾åœ¨ä¸€ä¸ªä¸“é—¨çš„ <code>extension</code> ä¸­</p>
<h3 id="ä½¿ç”¨è‡ªæ‰§è¡Œé—­åŒ…"><a href="#ä½¿ç”¨è‡ªæ‰§è¡Œé—­åŒ…" class="headerlink" title="ä½¿ç”¨è‡ªæ‰§è¡Œé—­åŒ…"></a>ä½¿ç”¨è‡ªæ‰§è¡Œé—­åŒ…</h3><p>é™¤äº†ä½¿ç”¨å·¥å‚æ–¹æ³•æ¥è¿”å›è¿™ä¸ªå±æ€§å€¼ä»¥å¤–, ä½ ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨è¿™ä¸ªå±æ€§å£°æ˜çš„åœ°æ–¹é€šè¿‡ä¸€ä¸ªè‡ªæ‰§è¡Œçš„é—­åŒ…æ¥å‡ºåˆå§‹åŒ–è¿™ä¸ªå±æ€§ã€‚æˆ‘ä»¬çœ‹çœ‹ä¸Šé¢è¿™ä¸ªæƒ…å†µ, æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå§ï¼</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> eventManager: <span class="type">EventManager</span> = &#123;</div><div class="line">   <span class="keyword">let</span> manager = <span class="type">EventManager</span>()</div><div class="line">    <span class="keyword">return</span> manager</div><div class="line">&#125;()</div></pre></td></tr></table></figure>
<p>è¿™è¦åšæœ‰ä¸€ä¸ªå¥½å¤„: è®©è¿™ä¸ªå±æ€§çš„åœ¨åŒä¸€ä¸ªåœ°æ–¹å£°æ˜å’Œè®¾ç½®ã€‚å½“ç„¶é˜…è¯»è¿™äº›ä»£ç å¯èƒ½ä¼šæ¯”è¾ƒä¸çˆ½ã€‚ç‰¹åˆ«æ˜¯åœ¨è¿™ä¸ªå±æ€§çš„è®¾ç½®éœ€è¦å¾ˆé•¿çš„ä»£ç çš„æ—¶å€™ã€‚æˆ‘è‡ªå·±çš„è§„åˆ™æ˜¯å½“è¿™ä¸ªå±æ€§çš„åˆå§‹åŒ–æ–¹æ³•åªæœ‰ä¸¤ä¸‰è¡Œä»£ç çš„æ—¶å€™ã€‚å°±æ˜¯ä½¿ç”¨è¿™æ ·çš„æ–¹æ³•æ¥åˆå§‹åŒ–æ‡’åŠ è½½å±æ€§ã€‚</p>
<h3 id="ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•"><a href="#ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•" class="headerlink" title="ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•"></a>ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•</h3><p>å¯¹äºé‚£äº›è®¾ç½®èµ·æ¥æ›´å¤æ‚å±æ€§, æŠŠè¿™äº›ä»£ç æ”¾åˆ°å…¶ä»–çš„ç±»ä¸­, ä¼šæ˜¯æ›´å¥½çš„åŠæ³•ã€‚è¿™ä¹ˆåš, å¯ä»¥è®©è¿™ä¸ªç±»æ›´åŠ ä¸“æ³¨äºå®ƒè‡ªå·±çš„èŒè´£, è®©è¿™ä¸ªç±»ä¸è‡³äºé‚£ä¹ˆå¤æ‚ã€‚å½“ç„¶è¿™ä¹Ÿå¯ä»¥åœ¨ä¸ä½¿ç”¨å­ç±»çš„æ¡ä»¶ä¸‹, åœ¨å¤šä¸ªç±»ä¸­å…±äº«ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> actionButton: <span class="type">UIButton</span> = <span class="type">ViewFactory</span>.makeActionButton()</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, <code>ViewFactory</code> è¿™ä¸ªç±»åŒ…å«äº†è¿™ä¸ª <code>controller</code> ä¸­æ‰€æœ‰æ§ä»¶çš„åˆå§‹åŒ–æ–¹æ³•ã€‚ä¸ç”¨å¼•å…¥æ›´å¤šçš„ç±», ä¹Ÿä¸ç”¨è®©ç»§æ‰¿æ ‘å˜å¤æ‚ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨å¦å¤–ä¸€ä¸ª <code>controller</code> ä¸­ä½¿ç”¨è¿™ä¸ªæŒ‰é’®, ä¹Ÿåªéœ€è¦è°ƒç”¨åŒä¸€ä¸ª API å°±å¥½äº† <code>ViewFactory.makeActionButton()</code></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¯èƒ½æœ‰äººä¼šé—®, æœ‰æ²¡æœ‰ä»€ä¹ˆå¤§ä¸€ç»Ÿçš„æ–¹æ³•æ¥ä½¿ç”¨æ‡’åŠ è½½å‘¢ï¼Ÿ ä¸ªäººè®¤ä¸ºæ²¡æœ‰. å†™ä»£ç å°±æ˜¯è¿™æ ·, é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ³•æ¥å¤„ç†ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚æ‰æ˜¯æœ€æ­£ç¡®çš„åšæ³•ã€‚è€Œä¸”æˆ‘è‡ªå·±ä¹Ÿåœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨ä¸Šé¢æ‰€æœ‰çš„æ–¹æ³•ã€‚</p>
<p>Twitter åˆä¸€ä¸ªé—®é¢˜: ä½¿ç”¨ä¸åŒçš„æ–¹æ³•, å¯¹ç¼–è¯‘æ—¶é—´æœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿæˆ‘åšäº†ä¸€äº›åŸºæœ¬çš„æµ‹è¯•, å¹¶æ²¡æœ‰å‘ç°è¿™å…¶ä¸­æœ‰ä»€ä¹ˆå·®åˆ«ã€‚å½“ç„¶è¿™ä¹Ÿè·Ÿè¿™ä¸ªæ‡’åŠ è½½å±æ€§æœ‰å…³ã€‚</p>
<p>Thanks for reading! ğŸš€</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‡’åŠ è½½å±äºè®©ä½ å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆå§‹åŒ–, è€Œä¸æ˜¯åœ¨åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™å°±å¿…é¡»è¦ã€‚æ‡’åŠ è½½å¯ä»¥ç”¨æ¥é¿å… optional çš„ä½¿ç”¨, å½“æŸä¸ªå±æ€§çš„åˆå§‹åŒ–è€—è´¹å¾ˆå¤šèµ„æºçš„æ—¶å€™ä¼šæå‡æ€§èƒ½ã€‚å½“ç„¶ä½¿ç”¨æ‡’åŠ è½½ä¹Ÿèƒ½è®©å¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•çœ‹èµ·æ¥å¾ˆæ¸…çˆ½, å› ä¸ºæŸäº›è®¾ç½®ä¼šåœ¨è¿™ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­è¢«æ¨è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;è¿™å‘¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ Swift ä¸­æ‡’åŠ è½½çš„å®šä¹‰, ä»¥åŠä½¿ç”¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/categories/Swift/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Protocol Oriented Programming View in Swift 3</title>
    <link href="http://www.CepheusSun.com/Protocol%20Oriented%20Programming%20View%20in%20Swift%203.html"/>
    <id>http://www.CepheusSun.com/Protocol Oriented Programming View in Swift 3.html</id>
    <published>2017-05-14T09:28:23.000Z</published>
    <updated>2017-05-14T09:28:46.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å­¦ä¹ å¦‚ä½•åœ¨ä¸åˆ›å»ºä¸€å¤§å †ç±»çš„å‰æä¸‹åšæŒ‰é’®ã€labelã€å›¾ç‰‡çš„åŠ¨ç”»ã€‚</p>
</blockquote>
<p>æŒæ¡äº†è¶³å¤Ÿçš„çŸ¥è¯†è€Œä¸å»ä½¿ç”¨å®ƒ, å°±åƒä½ é•¿äº†æ»¡å£çš„ç‰™é½¿, ä½†æ˜¯æˆå¤©éƒ½å–ç‰›å¥¶ä¸€æ ·ã€‚ æŒæ¡äº†è¶³å¤Ÿçš„ç†è®ºçŸ¥è¯†, åœ¨é¡¹ç›®ä¸­æ€ä¹ˆä½¿ç”¨ POP å‘¢ï¼ŸğŸ¤”</p>
<a id="more"></a>
<h3 id="What-I-think-you-will-learn"><a href="#What-I-think-you-will-learn" class="headerlink" title="What I think you will learn"></a>What I think you will learn</h3><p>ä½¿ç”¨åè®®è®© UI ç»„ä»¶åšåŠ¨ç”»ã€‚ä¹Ÿä¼šç”¨ä¼ ç»Ÿçš„æ–¹æ³•æ¥æ›´ POP æ¯”è¾ƒã€‚ğŸ˜</p>
<h4 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h4><p>è¿™ä¸ª demo å« â€œWelcome to My House Partyâ€ã€‚ æˆ‘å†™è¿™ä¸ªapp æ¥éªŒè¯ä½ æ˜¯å¦è¢«é‚€è¯·ã€‚ä½ å¾—è¾“å…¥ä½ çš„é‚€è¯·ç ã€‚<strong>è¿™ä¸ª app æ²¡æœ‰é€»è¾‘ç›¸å…³çš„ä¸œè¥¿ï¼ŒæŒ‰ä¸‹è¿™ä¸ªæŒ‰é’®ä¹‹å, ä¸Šé¢çš„æ§ä»¶éƒ½ä¼šåŠ¨èµ·æ¥</strong> ç•Œé¢ä¸Šæœ‰4ä¸ªç»„ä»¶ä¼šåŠ¨ã€‚ <code>passcodeTextField</code>ã€<code>loginButton</code>ã€<code>errorMessageLabel</code>ã€<code>profileImageView</code>.</p>
<p>ä¸€å…±æœ‰ä¸¤ç§åŠ¨ç”»ç±»å‹ </p>
<ol>
<li>Buzzing </li>
<li>Popping</li>
</ol>
<center><br><img src="https://cdn-images-1.medium.com/max/1600/1*uN6sB588ehZIivOmmAsLPg.gif" alt=""><br></center>

<p>ä¸è¦æ‹…å¿ƒè·Ÿä¸ä¸Šï¼Œåªéœ€è¦è·Ÿç€èŠ‚å¥å¾€ä¸‹èµ°å°±è¡Œäº†ã€‚å¦‚æœä½ æ²¡ä¿¡å¿ƒäº†ï¼Œæ»‘åˆ°æœ€åé¢ï¼ŒæŠŠ Demo ä¸‹ä¸‹æ¥, ç›´æ¥çœ‹ä»£ç å°±è¡Œäº†ã€‚</p>
<h4 id="Things-Back-Then"><a href="#Things-Back-Then" class="headerlink" title="Things Back Then"></a>Things Back Then</h4><p>è¦çœŸæ­£æŒæ¡åœ¨å®é™…æƒ…å†µä¸­ POP çš„é­”åŠ›ï¼Œæˆ‘ä»¬å…ˆæ¯”è¾ƒä¸€ä¸‹ä¼ ç»Ÿçš„å†™æ³•ã€‚ä½ å¯èƒ½ä¼šåˆ›é€ ä¸¤ä¸ªå­ç±»ç„¶åç»™å¥¹æ·»åŠ ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableButton</span>: <span class="title">UIButton</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123;<span class="comment">// Animation Logic&#125;</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableLabel</span>: <span class="title">UILabel</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123;<span class="comment">// Animation Logic&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åè®©ä»–åŠ¨èµ·æ¥ï¼Œå½“ä½ ç‚¹å‡»è¿™ä¸ªæŒ‰é’®</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> errorMessageLabel: <span class="type">BuzzableLabel</span>!</div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">BuzzableButton</span>!</div><div class="line"></div><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">didtapLoginButton</span><span class="params">(<span class="number">_</span> sender: UIButton)</span></span> &#123;</div><div class="line">    errorMessageLabel.buzz()</div><div class="line">    loginButton.buzz()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ çœ‹åˆ°æˆ‘ä»¬é‡å¤äº†å‡ æ¬¡ç›¸åŒçš„äº‹æƒ…äº†å—ï¼Ÿ åŠ¨ç”»çš„é€»è¾‘è‡³å°‘éƒ½éœ€è¦5è¡Œä»£ç ã€‚æ—¢ç„¶ç”¨ extension æ˜¯æ›´å¥½çš„åŠæ³•ã€‚ UILabel å’Œ UIButton éƒ½ç»§æ‰¿äº† UIViewã€‚ æˆ‘ä»¬å¯ä»¥è¿™æ ·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123; <span class="comment">// Animation Logic &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨ <code>BuzzableButton</code> è¿˜æœ‰ <code>BuzzableLabel</code> éƒ½æœ‰ <code>buzz</code> è¿™ä¸ªæ–¹æ³•äº†ã€‚ ç°åœ¨æˆ‘ä»¬å°±æ²¡æœ‰é‡å¤äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableButton</span>: <span class="title">UIButton</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableLabel</span>: <span class="title">UILabel</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> errorMessageLabel: <span class="type">BuzzableLabel</span>!</div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">BuzzableButton</span>!</div><div class="line"></div><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">didTapLoginButton</span><span class="params">(<span class="number">_</span> sender: UIButton)</span></span> &#123;</div><div class="line"> errorMessageLabel.buzz()</div><div class="line"> loginButton.buzz() </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Okay-then-why-POP-ğŸ¤”"><a href="#Okay-then-why-POP-ğŸ¤”" class="headerlink" title="Okay, then why POP? ğŸ¤”"></a>Okay, then why POP? ğŸ¤”</h4><p>ä½ åº”è¯¥ä¹Ÿçœ‹è§äº†é‚£ä¸ªå†™ç€ â€œPlease enter valid code ğŸ˜‚â€ çš„<code>errorMessageLabel</code> è¿˜æœ‰å¦å¤–ä¸€ä¸ªåŠ¨ç”»ã€‚å¥¹å…ˆæ˜¯å‡ºç°ç„¶ååœ¨æ¶ˆå¤±ã€‚æ‰€ä»¥, ä¹‹å‰çš„æ–¹æ³•æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p>
<p>æœ‰ä¸¤ä¸ªæ–¹æ³•æ¥åšè¿™ä»¶äº‹æƒ…ã€‚é¦–å…ˆä½ éœ€è¦å†ç»™ <code>UIView</code> æ·»åŠ ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// Extend UIView</div><div class="line">extension UIView &#123;</div><div class="line">    func buzz() &#123; // Animation Logic&#125;</div><div class="line">    func pop() &#123; // UILable Animation Logic &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç»™ UIView æ·»åŠ äº†è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åœ¨å…¶ä»–çš„ç»„ä»¶ä¸Šä¹Ÿæœ‰äº†ã€‚åŒ…æ‹¬ä»–çš„å­ç±» <code>UILabel</code>ã€‚ æˆ‘ä»¬ç»§æ‰¿äº†æ²¡æœ‰å¿…è¦çš„æ–¹æ³•ã€‚è¿™äº›ç»„ä»¶ä¹Ÿè«åå…¶å¦™çš„å˜çš„å¾ˆè‡ƒè‚¿äº†ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ç»™ <code>UILabel</code> æ·»åŠ ä¸€ä¸ªå­ç±»ï¼Œ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Subclass UILabel</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableLabel</span>: <span class="title">UILabel</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> &#123; <span class="comment">// UILabel Animation Logic &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¹Ÿèƒ½å®ç°ã€‚ä½†æ˜¯å¯èƒ½æˆ‘ä»¬è¿˜éœ€è¦æŠŠè¿™ä¸ªç±»çš„åå­—æ”¹ä¸€ä¸‹ï¼Œç„¶å®ƒæ›´ç›´è§‚ä¸€ç‚¹.æ¢æˆ <code>BuzzablePoppableLabel</code> å§ï¼</p>
<p>å¦‚æœä½ æƒ³ç»™è¿™ä¸ª Label æ·»åŠ æ›´å¤šçš„æ–¹æ³•ã€‚ä¸ºäº†è®©è¿™ä¸ª Label æ›´ç›´è§‚çš„è¡¨è¾¾å®ƒçš„ä½œç”¨ï¼Œå¯èƒ½åå­—åˆå¾—æ”¹äº† <code>BuzzablePoppableFlashableDopeFancyLovelyLabel</code> è¿™æ˜¾ç„¶éå¸¸çš„ä¸å¯æŒç»­ã€‚</p>
<h3 id="Protocol-Oriented-Programming"><a href="#Protocol-Oriented-Programming" class="headerlink" title="Protocol Oriented Programming"></a>Protocol Oriented Programming</h3><p>ç”¨å­ç±»æ¥å®ç°å°±æ˜¯è¿™æ ·çš„ã€‚é€‰æ‹©æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªåè®®å§ï¼ Buzzing</p>
<p>å› ä¸ºåŠ¨ç”»çš„ä»£ç éƒ½æ¯”è¾ƒé•¿ï¼Œæˆ‘æ²¡æœ‰åœ¨è¿™é‡Œå†™å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Buzzable</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIview</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buzz</span><span class="params">()</span></span> &#123; <span class="comment">// Animation Logic&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªè¦éµå®ˆäº†è¿™ä¸ªåè®®çš„ UI ç»„ä»¶å°±éƒ½æœ‰ Buzz è¿™ä¸ªæ–¹æ³•äº†ã€‚ä¸ extension ä¸åŒçš„æ˜¯ï¼Œåªæœ‰éµå®ˆçš„è¿™ä¸ªåè®®æ‰ä¼šæœ‰è¿™ä¸ªæ–¹æ³•ã€‚å¹¶ä¸”æˆ‘æ˜¯ç”¨äº† <code>where Self: UIView</code> æ¥å£°æ˜è¿™ä¸ªåè®®åªèƒ½è¢« UIView åŠå…¶å­ç±»éµå®ˆã€‚</p>
<p>æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å°±å…ˆç»™ <code>loginButton</code>, <code>passcodeTextField</code>, <code>errorMessageLabel</code>ã€<code>profileImageView</code> åŠ ä¸Šè¿™ä¸ªåè®®å§ã€‚<br>å¯¹äº†ï¼Œè¿˜æœ‰ pop</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Poppable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Poppable</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> &#123; <span class="comment">// Pop Animation Logic &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¥½äº†ç°åœ¨å¯ä»¥å¼€å§‹å†™äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableTextField</span>: <span class="title">UITextField</span>, <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableButton</span>: <span class="title">UIButton</span>, <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzableImageView</span>: <span class="title">UIImageView</span>, <span class="title">Buzzable</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuzzablePoppableLabel</span>: <span class="title">UILabel</span>, <span class="title">Buzzable</span>, <span class="title">Poppable</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> passcodTextField: <span class="type">BuzzableTextField</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">BuzzableButton</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> errorMessageLabel: <span class="type">BuzzablePoppableLabel</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> profileImageView: <span class="type">BuzzableImageView</span>!</div><div class="line">  </div><div class="line">  <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">didTabLoginButton</span><span class="params">(<span class="number">_</span> sender: UIButton)</span></span> &#123;</div><div class="line">    passcodTextField.buzz()</div><div class="line">    loginButton.buzz()</div><div class="line">    errorMessageLabel.buzz()</div><div class="line">    errorMessageLabel.pop()</div><div class="line">    profileImageView.buzz()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€æ–¹ä¾¿çš„äº‹æƒ…æ˜¯æˆ‘ä»¬éƒ½ä¸éœ€è¦ä½¿ç”¨å­ç±»å°±å¯èƒ½ç»™ä»»ä½•çš„ UI ç»„ä»¶æ·»åŠ  pop è¿™ä¸ªæ–¹æ³•äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class MyImageView: UIImageVIew, Buzzable, Poppable</div></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œç±»çš„åç§°å°±å¯ä»¥å˜çš„æ›´åŠ çš„çµæ´»äº†ã€‚å› ä¸ºä½ å·²ç»çŸ¥é“äº†è¿™äº›åè®®çš„æ–¹æ³•ï¼Œå¹¶ä¸”è¿™äº›åè®®ä¹Ÿæè¿°äº†è¿™äº›ç±»ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨ <code>MyBuzzablePoppableProfileImage</code> äº†ã€‚</p>
<ul>
<li>æ²¡æœ‰å­ç±»</li>
<li>ç±»åæ›´çµæ´»</li>
<li>æ›´ Swifty</li>
</ul>
<p><a href="https://github.com/CepheusSun/Translate/tree/master/demos/Protocol%20Oriented%20Programming%20View%20in%20Swift%203">SourceCode</a></p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://blog.bobthedeveloper.io/protocol-oriented-programming-view-in-swift-3-8bcb3305c427">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å­¦ä¹ å¦‚ä½•åœ¨ä¸åˆ›å»ºä¸€å¤§å †ç±»çš„å‰æä¸‹åšæŒ‰é’®ã€labelã€å›¾ç‰‡çš„åŠ¨ç”»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŒæ¡äº†è¶³å¤Ÿçš„çŸ¥è¯†è€Œä¸å»ä½¿ç”¨å®ƒ, å°±åƒä½ é•¿äº†æ»¡å£çš„ç‰™é½¿, ä½†æ˜¯æˆå¤©éƒ½å–ç‰›å¥¶ä¸€æ ·ã€‚ æŒæ¡äº†è¶³å¤Ÿçš„ç†è®ºçŸ¥è¯†, åœ¨é¡¹ç›®ä¸­æ€ä¹ˆä½¿ç”¨ POP å‘¢ï¼ŸğŸ¤”&lt;/p&gt;
    
    </summary>
    
      <category term="POP" scheme="http://www.CepheusSun.com/categories/POP/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="POP" scheme="http://www.CepheusSun.com/tags/POP/"/>
    
  </entry>
  
  <entry>
    <title>Introduction to Protocol Oriented Programming in Swift</title>
    <link href="http://www.CepheusSun.com/Introduction%20to%20Protocol%20Oriented%20Programming%20in%20Swift.html"/>
    <id>http://www.CepheusSun.com/Introduction to Protocol Oriented Programming in Swift.html</id>
    <published>2017-05-13T16:05:23.000Z</published>
    <updated>2017-05-13T16:07:48.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>OOP is okay, but couldâ€™ve been better</p>
</blockquote>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>å³ä½¿ä½ è¿˜ä¸çŸ¥é“ Class å’Œ Struct åŸºæœ¬çš„åŒºåˆ«, ä½ ä¹Ÿå¯ä»¥çœ‹è¿™ä¸ªæ–‡ç« ã€‚éƒ½çŸ¥é“ Struct ä¸èƒ½ç»§æ‰¿, ä½†æ˜¯, ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å¦‚æœä½ è¿˜ä¸çŸ¥é“ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆ, èŠ±ä¸¤åˆ†é’Ÿæ—¶é—´è¯»ä¸€ä¸‹ä¸‹é¢è¿™æ®µä»£ç ã€‚è¿™äº›ä»£ç æ˜¯å†™åœ¨ playground ä¸Šçš„</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HumanClass</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> classHuman = <span class="type">HumanClass</span>(name: <span class="string">"Bob"</span>)</div><div class="line"><span class="comment">// "Bob"</span></div><div class="line">classHuman.name</div><div class="line"><span class="comment">// Created a "copied" object</span></div><div class="line"><span class="keyword">var</span> newClassHuman = classHuman</div><div class="line">newClassHuman.name = <span class="string">"Bobby"</span></div><div class="line">classHuman.name <span class="comment">//"Bobby"</span></div></pre></td></tr></table></figure>
<p>ç­‰æˆ‘ä»¬æ”¹å˜ <code>newClassHuman</code> çš„ <code>name</code> å±æ€§ä¸º <code>â€œBobbyâ€</code> ä¹‹å, <code>classHuman</code> çš„ <code>name</code> å±æ€§ä¹Ÿå˜æˆ <code>â€œBobbyâ€</code> äº†ã€‚</p>
<p>æˆ‘ä»¬å†çœ‹çœ‹ Struct </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">HumanStruct</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> humanStruct = <span class="type">HumanStruct</span>(name: <span class="string">"Bob"</span>)</div><div class="line"><span class="keyword">var</span> newHumanStruct = humanStruct</div><div class="line">newHumanStruct.name = <span class="string">"Bobby"</span></div><div class="line">humanStruct.name  <span class="comment">// "Bobby"</span></div></pre></td></tr></table></figure>
<p>çœ‹å‡ºæ¥åŒºåˆ«äº†å—ï¼Ÿ æ”¹å˜å¤åˆ¶å‡ºæ¥çš„ <code>newHumanStruct</code> çš„ <code>name</code> å±æ€§æ¯”å‘¢æ²¡æœ‰æ”¹å˜åŸå§‹çš„ <code>humanStruct</code> çš„ <code>name</code> å±æ€§ã€‚</p>
<p>å¯¹äº Class æ¥è¯´, è¿™æ ·çš„å¤åˆ¶å‡ºæ¥çš„å¯¹è±¡, å’ŒåŸæ¥çš„å¯¹è±¡éƒ½æŒ‡å‘çš„æ˜¯å†…å­˜ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚å¯¹ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜, éƒ½ä¼šæ”¹å˜å…¶ä»–çš„å¯¹è±¡(å¼•ç”¨ç±»å‹)ã€‚ å¯¹äº Struct æ¥è¯´, åœ¨ä¼ é€’å’Œèµ‹å€¼çš„æ—¶å€™ä¼šåˆ›é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡(å€¼ç±»å‹)</p>
<p><a href="https://www.youtube.com/watch?v=MNnfUwzJ4ig">è¿™é‡Œæœ‰ä¸€ä¸ªä»‹ç»è¿™ä¸ªæ¦‚å¿µçš„è§†é¢‘</a></p>
<h3 id="Bye-OOP"><a href="#Bye-OOP" class="headerlink" title="Bye OOP"></a>Bye OOP</h3><p>ä½ å¯èƒ½ä¼šæ¯”è¾ƒå¥½å¥‡ä¸ºä»€ä¹ˆæˆ‘è®²äº†åŠå¤©è·Ÿé¢å‘åè®®ç¼–ç¨‹æ²¡å…³ç³»çš„ä¸œè¥¿ã€‚åœ¨æˆ‘å¼€å§‹å°† POP å¯¹æ¯” OOP çš„ä¼˜åŠ¿ä¹‹å‰ï¼Œ ä½ å¾—ç†è§£å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹çš„åŒºåˆ«ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€äº›æ¯‹åº¸ç½®ç–‘çš„ OOP çš„ä¼˜åŠ¿, ä¹Ÿæ˜¯åŠ£åŠ¿ã€‚</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå­ç±», è¿™ä¸ªå­ç±»ä¼šç»§æ‰¿ä¸€äº›å¹¶ä¸éœ€è¦çš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™ä¼šè®©è¿™ä¸ªå­ç±»å˜çš„è‡ƒè‚¿ã€‚</li>
<li>å½“ä½ æœ‰å¾ˆå¤šçš„ç»§æ‰¿å…³ç³»çš„æ—¶å€™, æ‰¾åˆ°å„ä¸ªç±»ä¹‹é—´çš„å…³ç³», å°±å˜çš„æ¯”è¾ƒå›°éš¾äº†ã€‚</li>
<li>å½“å¯¹è±¡æŒ‡å‘çš„å†…å­˜ä¸­çš„åŒä¸€å—åœ°å€çš„æ—¶å€™, å¦‚æœå¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†ä¿®æ”¹, æ‰€æœ‰çš„éƒ½ä¼šå˜ã€‚</li>
</ol>
<p>é¡ºä¾¿çœ‹ä¸€ä¸‹ UIKit ä¸­çš„ OOP å§</p>
<center><br><img src="https://cdn-images-1.medium.com/max/1600/1*hjEXB3PGUOSbxet0qUJRNA.png" alt=""><br>2015 WWDC_Hideous Structure<br></center>

<p>å¦‚æœä½ æ˜¯åˆšè¿›è‹¹æœçš„å·¥ç¨‹å¸ˆ, ä½ èƒ½å¤Ÿæå®šè¿™äº›ä¸œè¥¿å—ï¼Ÿæˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™æ€»è§‰çš„ä¼šæ¯”è¾ƒæ··ä¹±ã€‚</p>
<p>æœ‰äººè¯´ OOP æ˜¯ä¸€ä¸ªè®©ä½ çš„ä»£ç å˜çš„æƒ³æ„å¤§åˆ©é¢é‚£æ ·ä¹±çš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚å¦‚æœä½ æƒ³è¦æ›´å¤šåæ§½ OOP çš„å†…å®¹. <a href="https://content.pivotal.io/blog/all-evidence-points-to-oop-being-bullshit">è¿™å„¿</a><a href="https://krakendev.io/blog/subclassing-can-suck-and-heres-why">è¿™å„¿</a><a href="http://www.smashcompany.com/technology/object-oriented-programming-is-an-expensive-disaster-which-must-end">è¿™å„¿</a><a href="https://www.leaseweb.com/labs/2015/08/object-oriented-programming-is-exceptionally-bad/">è¿˜æœ‰è¿™å„¿</a></p>
<h3 id="Welcome-POP"><a href="#Welcome-POP" class="headerlink" title="Welcome POP"></a>Welcome POP</h3><p>ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†, POP çš„åŸºç¡€ä¸æ˜¯ç±», è€Œæ˜¯å€¼ç±»å‹å˜é‡ã€‚æ²¡æœ‰å¼•ç”¨ï¼Œä¸åƒåˆšåˆšçœ‹åˆ°çš„é‡‘å­—å¡”ç»“æ„ã€‚ POP å–œæ¬¢æ‰å¹³çš„, æ²¡é‚£ä¹ˆå¤šåµŒå¥—å…³ç³»çš„ä»£ç ã€‚</p>
<p>åªæ˜¯å“ä½ ä¸€ä¸‹å•¦, ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è‹¹æœçˆ¸çˆ¸çš„å®˜æ–¹å®šä¹‰ã€‚</p>
<blockquote>
<p>â€œA protocol defines a blueprint of methods, propertiesâ€¦ The protocol can then be adopted by a class, structure, or enumerationâ€â€Šâ€”â€ŠApple</p>
<p>åè®®å®šä¹‰äº†æ–¹æ³•å±æ€§çš„è“å›¾, åè®®å¯ä»¥è¢«ç±»ã€ç»“æ„ä½“ã€è¿˜æœ‰æšä¸¾å®ç°ã€‚</p>
</blockquote>
<h3 id="Getting-Real-with-POP"><a href="#Getting-Real-with-POP" class="headerlink" title="Getting Real with POP"></a>Getting Real with POP</h3><p>é¦–å…ˆæˆ‘ä»¬è®¾è®¡ä¸€ä¸‹ human è¿™ä¸ªä¸œè¥¿ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123;<span class="keyword">get</span> <span class="keyword">set</span>&#125;</div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> &#123;<span class="keyword">get</span> <span class="keyword">set</span>&#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªåè®®ä¸­, æˆ‘æ²¡æœ‰ç”³æ˜ <code>drinking</code>. å®ƒåªæ˜¯å£°æ˜ä¸€äº›ä¸€å®šå­˜åœ¨çš„ä¸œè¥¿ã€‚ç°åœ¨å…ˆä¸è¦çº ç»“ <code>{get set}</code>. å®ƒåªæ˜¯è¡¨æ˜ä½ å¯ä»¥ç»™è¿™ä¸ªå±æ€§èµ‹å€¼ä¹Ÿå¯ä»¥å–å€¼ã€‚å…ˆä¸è¦æ‹…å¿ƒ, é™¤éä½ è¦ä½¿ç”¨è®¡ç®—å±æ€§ã€‚</p>
<p>æˆ‘ä»¬åœ¨å®šä¹‰ä¸€ä¸ªéŸ©å›½äºº ğŸ‡°ğŸ‡· ç»“æ„ä½“, æ¥å®ç°è¿™ä¸ªåè®®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Korean</span>: <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Bob Lee"</span></div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> = <span class="string">"Asian"</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªè¦è¿™ä¸ªç»“æ„ä½“éµå®ˆäº†è¿™ä¸ªåè®®ï¼Œå®ƒå°±å¿…é¡»è¦å®ç°è¿™ä¸ªåè®®ä¸­çš„å¤šæœ‰æ–¹æ³•å’Œå±æ€§ã€‚å¦‚æœæ²¡æœ‰çš„è¯ Xcode å°±ä¼šæŠ¥é”™ğŸ˜¡</p>
<p>åªè¦æ˜¯éµå®ˆäº†è¿™ä¸ªè“å›¾ã€‚ä½ å°±å¯ä»¥åšå…¶ä»–ä»»ä½•äº‹æƒ…äº†, ç›–ä¸€åº§é•¿åŸä¹Ÿæ²¡å…³ç³»ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ¥å®ç°ä¸€ä¸ªç¾å›½äºº ğŸ‡ºğŸ‡¸</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Korean</span>: <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Joe Smith"</span></div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> = <span class="string">"White"</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¾ˆé…·å§ï¼ ä¸éœ€è¦ç”¨é‚£äº› <code>init</code> <code>override</code> å…³é”®å­—ã€‚ å¼€å§‹æ„Ÿå…´è¶£äº†å—ï¼Ÿ</p>
<p><a href="https://www.youtube.com/watch?v=lyzcERHGH_8&amp;t=2s&amp;list=PL8btZwalbjYm5xDXDURW9u86vCtRKaHML&amp;index=1">Intro to Protocol Lesson</a></p>
<h3 id="Protocol-Inheritance"><a href="#Protocol-Inheritance" class="headerlink" title="Protocol Inheritance"></a>Protocol Inheritance</h3><p>å¦‚æœä½ æƒ³è¦ä¸€ä¸ª <code>superman</code> çš„åè®®ã€‚è¿™ä¸ªåè®®ä¹Ÿéœ€è¦éµå®ˆ <code>Human</code> è¿™ä¸ªåè®®å‘¢ï¼Ÿ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SuperHuman</span>: <span class="title">Human</span> </span>&#123;</div><div class="line"> <span class="keyword">var</span> canFly: <span class="type">Bool</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125; </div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">punch</span><span class="params">()</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨å¦‚æœä½ æœ‰ä¸€ä¸ªéµå®ˆäº† <code>SuperMan</code> è¿™ä¸ªåè®®çš„ç±»æˆ–è€…ç»“æ„ä½“çš„è¯ï¼Œè¿™ä¸ªç±»ä¹Ÿå¿…é¡»å®ç° <code>Human</code> è¿™ä¸ªåè®®ä¸­çš„æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SuperSaiyan</span>: <span class="title">SuperMan</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Goku"</span></div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> = <span class="string">"Asian"</span></div><div class="line">    <span class="keyword">var</span> canFly: <span class="type">Bool</span> = <span class="literal">true</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>) &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">punch</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"Puuooookkk"</span>) &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥éµå®ˆå¤šä¸ªåè®®ã€‚å°±å¯ä»¥å®ç°å¤šç»§æ‰¿äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Example</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Example</span>: <span class="title">ProtocolOne</span>, <span class="title">ProtocolTwo</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<h3 id="Protocol-Extension"><a href="#Protocol-Extension" class="headerlink" title="Protocol Extension"></a>Protocol Extension</h3><p>ä¸‹é¢æ‰æ˜¯åè®®æœ€å¼ºå¤§çš„ç‰¹æ€§äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Super Animal speaks English</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SuperAnimal</span> </span>&#123;</div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">speakEnglish</span><span class="params">()</span></span> </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»™è¿™ä¸ªåè®®åŠ ä¸€ä¸ª <code>Extension</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">SuperAnimal</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">speakEnglish</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"I speak English, pretty cool, huh?"</span>)&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨å†åˆ›å»ºä¸€ä¸ªéµå®ˆè¿™ä¸ªåè®®çš„ç±»</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Donkey</span>: <span class="title">SuperAnimal</span> </span>&#123;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> ramon = <span class="type">Donkey</span>()</div><div class="line">ramon.speakEnglish()</div><div class="line"><span class="comment">//  "I speak English, pretty cool, huh?"</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä½ ä½¿ç”¨äº† <code>Extension</code> å°±å¯ä»¥ç»™è¿™ä¸ªåè®®æ·»åŠ é»˜è®¤çš„å®ç°å’Œå±æ€§å€¼äº†ã€‚è¿™æ ·ä¸çˆ½å—ï¼Ÿ</p>
<h3 id="Protocol-as-Type-Last"><a href="#Protocol-as-Type-Last" class="headerlink" title="Protocol as Type(Last)"></a>Protocol as Type(Last)</h3><p>å¦‚æœæˆ‘è·Ÿä½ è¯´æˆ‘èƒ½åœ¨ä¸€ä¸ªæ•°ç»„ä¸­åŒæ—¶æ”¾ä¸€ä¸ªå¯¹è±¡å’Œä¸€ä¸ªç»“æ„ä½“å‘¢ï¼ŸğŸ˜®</p>
<p>æˆ‘è¦ç”¨è¢‹é¼ æ‰“æ¶æ±‚å¶æ¥å†™ä¸€ä¸ª demo äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Fightable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">legKick</span><span class="params">()</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">StructKangaroo</span>: <span class="title">Fightable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">legKick</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Puuook"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassKangroo</span>: <span class="title">Fightable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">legKick</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Pakkkk"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶ååˆå§‹åŒ–ä¿©è¢‹é¼ å‡ºæ¥</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> structKangroo = <span class="type">StructKangaroo</span>()</div><div class="line"><span class="keyword">let</span> classKangroo = <span class="type">ClassKangroo</span>()</div></pre></td></tr></table></figure>
<p>ç°åœ¨å°±å¯ä»¥æŠŠä»–ä»¬æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> kangaroos: [<span class="type">Fightable</span>] = [structKang, classKang]</div></pre></td></tr></table></figure>
<p>éš¾ä»¥ç½®ä¿¡å§ï¼ å†çœ‹çœ‹</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> kang <span class="keyword">in</span> kangaroos &#123; </div><div class="line"> kang.legKick() </div><div class="line">&#125;</div><div class="line"><span class="comment">// "Puuook"</span></div><div class="line"><span class="comment">// "Pakkkk"</span></div></pre></td></tr></table></figure>
<p>è¿™å¾ˆçˆ½å§ï¼ æƒ³è±¡åœ¨ OOP ä¸­æˆ‘ä»¬æ€ä¹ˆå®ç°è¿™ä¸ªä¸œè¥¿å‘¢ï¼Ÿ</p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://blog.bobthedeveloper.io/protocol-oriented-programming-view-in-swift-3-8bcb3305c427">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;OOP is okay, but couldâ€™ve been better&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction&quot;&gt;&lt;/a&gt;Introduction&lt;/h3&gt;&lt;p&gt;å³ä½¿ä½ è¿˜ä¸çŸ¥é“ Class å’Œ Struct åŸºæœ¬çš„åŒºåˆ«, ä½ ä¹Ÿå¯ä»¥çœ‹è¿™ä¸ªæ–‡ç« ã€‚éƒ½çŸ¥é“ Struct ä¸èƒ½ç»§æ‰¿, ä½†æ˜¯, ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è¿˜ä¸çŸ¥é“ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆ, èŠ±ä¸¤åˆ†é’Ÿæ—¶é—´è¯»ä¸€ä¸‹ä¸‹é¢è¿™æ®µä»£ç ã€‚è¿™äº›ä»£ç æ˜¯å†™åœ¨ playground ä¸Šçš„&lt;/p&gt;
    
    </summary>
    
      <category term="POP" scheme="http://www.CepheusSun.com/categories/POP/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="POP" scheme="http://www.CepheusSun.com/tags/POP/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift MVVM API Manual ğŸ“ƒ</title>
    <link href="http://www.CepheusSun.com/RxSwift%20MVVM%20API%20Manual.html"/>
    <id>http://www.CepheusSun.com/RxSwift MVVM API Manual.html</id>
    <published>2017-05-07T11:02:57.000Z</published>
    <updated>2017-05-19T02:40:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç°åœ¨æˆ‘ä»¬æŒæ¡äº†æ‰€æœ‰çš„å·¥å…·, ä¹Ÿæ˜ç¡®äº†ä»–å­˜åœ¨çš„é£é™©ä»¥åŠè§„é¿çš„æ–¹æ³•ã€‚ç°åœ¨æ˜¯æ—¶å€™æƒ³æƒ³åº”è¯¥æ€ä¹ˆæ ·æœ€å¤§å¯èƒ½çš„è¿ç”¨å®ƒäº†ã€‚ä»¥ MVVM ä¸ºä¾‹ã€‚</p>
<p>åˆå¾ˆå¤šæ–¹æ³•æ¥å†™ RxSwift çš„ APIã€‚ æˆ‘æ€•çš„åšæ³•æ˜¯: åˆ©ç”¨ RxSwift å¾ˆé…·çš„è§‚å¯Ÿè€…æ¨¡å¼å’Œå¾ˆæ–¹ä¾¿çš„æ“ä½œç¬¦, ç®¡ç†å¼‚æ­¥çš„ä»»åŠ¡ã€‚å¯èƒ½ä¸æ˜¯ 100% çº¯æ­£çš„ RxSwiftã€‚ åœ¨å°†æˆ‘åšè¿‡å¾ˆå¤šçš„å°è¯•è¯•å›¾å°†ä¸¤ç§ç¼–ç¨‹æ€ç»´ç»Ÿä¸€èµ·æ¥,ä½†æ˜¯æˆ‘éƒ½å¤±è´¥äº†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›æˆ‘ä½¿ç”¨ RxSwift çš„æ–¹æ³•ã€‚</p>
<a id="more"></a>
<h3 id="Be-Consistent"><a href="#Be-Consistent" class="headerlink" title="Be Consistent"></a>Be Consistent</h3><p>è¿™æ˜¯åœ¨æ¥å£è®¾è®¡ä¸­æœ€é‡è¦çš„äº‹æƒ…, å¦‚æœä½ åšå‡ºäº†é€‰æ‹©ã€‚å°±åšæŒä¸‹å»ã€‚</p>
<p>æ—¢ç„¶å¦‚æ­¤, ç°åœ¨å°±å¼€å§‹å§ï¼<strong>input vs output</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FilterViewModel</span> </span>&#123;</div><div class="line">    <span class="comment">//Input</span></div><div class="line">    <span class="keyword">let</span> filterButtonEvents: <span class="type">BehaviorSubject</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">    <span class="keyword">let</span> filterSelectionEvent: <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">    </div><div class="line">    <span class="comment">//OutPut</span></div><div class="line">    <span class="keyword">let</span> currentFilter: <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">    <span class="keyword">let</span> shouldShowFilter: <span class="type">Observable</span>&lt;<span class="type">Bool</span>&gt;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ‰å¥½å‡ ä¸ªå¯ä»¥ç”¨æ¥å£°æ˜ inout å’Œ output çš„ç»„åˆã€‚è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªã€‚</p>
<h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><p>é€šè¿‡å°† <code>input</code> å£°æ˜æˆ <code>subject</code> ç±»å‹ã€‚æˆ‘å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ <code>RxSwift</code> ä¸­çš„å„ç§æ“ä½œç¬¦ã€‚æˆ‘ç”¨çš„æœ€å¤šçš„åº”è¯¥æ˜¯ <strong>throttle</strong>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">filterButtonEvents</div><div class="line">    .throttle(<span class="number">0.5</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (counter) <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>?.makeRequest()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>å½“ç„¶ç”¨ observable åš input ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<h4 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h4><p>è®°ä½ <code>output</code> åº”è¯¥æ˜¯ <code>Observable</code>, ç”šè‡³æ˜¯ <code>Subject</code>ã€‚ å¦‚æœä¸è¿™æ ·çš„è¯ï¼Œä¸€äº›å¤–éƒ¨çš„ç±»å¯èƒ½ä¼šé”™è¯¯çš„æŠŠè¿™ä»–å½“åšæ˜¯ <code>input</code> è¿™æ ·å°±æ‰“ç ´äº†å°è£…äº†ã€‚å½“æˆ‘æƒ³è¦å‘å‡ºä¸€ä¸ªå˜é‡çš„æ—¶å€™, å°±æ˜¯å¼ºåˆ¶çš„é‡Šæ”¾ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(observable <span class="keyword">as</span>! <span class="type">PublishSubject</span>)</div><div class="line">    .onNext(<span class="string">"Ugly..."</span>)</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ çŸ¥é“æœ‰æ›´å¥½çš„æ–¹æ³•, ä¸€å®šè¦å‘Šè¯‰æˆ‘ã€‚æˆ‘æ„Ÿè§‰è¿™ä¹ˆå¹²æ˜¯åœ¨æ˜¯ä¸ä¼˜é›…ğŸ˜±ã€‚</p>
<h3 id="Safety"><a href="#Safety" class="headerlink" title="Safety"></a>Safety</h3><p>å¦‚æœåœ¨ä¸€ä¸ªç®€å•çš„ Demo ä¸­, ä½ å¯èƒ½è®°å¾—åšæ‰€æœ‰çš„ç»†èŠ‚ã€‚ä½†åœ¨ä¸€ä¸ªå¤æ‚çš„ app ä¸­, ä½ å‡ ä¹ä¸å¯èƒ½è®°å¾—ä½æ‰€æœ‰çš„å®ç°ç»†èŠ‚ã€‚è¿™é‡Œé¢å¯èƒ½æœ‰å¥½å‡ ç™¾ä¸ªè®¢é˜…è€…ã€‚ <code>Observable</code> åˆæ˜¯ä¸€ä¸ªéå¸¸å¹¿æ³›çš„ç±»å‹ã€‚éƒ½è¿˜æ²¡æœ‰è¯´è¿™ä¸ªä¿¡å·æ˜¯çƒ­ä¿¡å·è¿˜æ˜¯å†·ä¿¡å·, ä»–æ˜¯åœ¨ä¸»çº¿ç¨‹è¿˜æ˜¯åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œã€‚è¿™ä¹Ÿæ˜¯ <code>Driver</code> è¢«è®¾è®¡å‡ºæ¥çš„åŸå› , ä¸ºäº†è®© API æ›´åŠ æ˜ç¡®ã€‚æˆ‘ä»¬é¼“åŠ±è‡ªå·±å»åˆ›å»ºä¸€äº›å•å…ƒã€‚</p>
<p><strong>Driver</strong> æ˜¯ä¸€ä¸ªçƒ­ä¿¡å·, è€Œä¸”æ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹å½“ä¸­çš„ã€‚å¥½æƒ³å¿½ç•¥æ‰äº†å†·ä¿¡å·ï¼Ÿæ²¡å…³ç³», åˆ›é€ ä¸€ä¸ªå°±æ˜¯äº†ã€‚æˆ‘ç§°ä»–ä½œ <strong>Template</strong> å› ä¸ºå†·ä¿¡å·å°±æ˜¯æ˜¯ä¸€ä¸ªæ¨¡ç‰ˆ, åœ¨è¿™ä¸ªæ¨¡ç‰ˆä¸­ä½ å¯ä»¥ç”¨ <code>subscribe</code> æ¥è¿è¡Œä»–ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Template</span>&lt;<span class="title">Element</span>&gt; </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">Element</span>&gt;</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(<span class="number">_</span> subscribe: @escaping (<span class="type">AnyObserver</span>&lt;<span class="type">Element</span>&gt;) -&gt; <span class="type">Disposable</span>) &#123;</div><div class="line">        observable = <span class="type">Observable</span>.create(subscribe)</div><div class="line">            .subscribeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ · <code>Template</code> å°±èƒ½ç¡®ä¿æ˜¯ä¸€ä¸ªåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„å†·ä¿¡å·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">class MyViewModel &#123;</div><div class="line"> //Cold â„ï¸</div><div class="line"> let createRequest : Template&lt;Int&gt;</div><div class="line"> //Hot ğŸŒ¶</div><div class="line"> let shouldShowElement : Driver&lt;Bool&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·çœ‹, ç¨‹åºä¸­æš´éœ²çš„æ¥å£å°±å¾ˆæ˜ç¡®äº†ã€‚</p>
<h3 id="MVVM-State-Machine"><a href="#MVVM-State-Machine" class="headerlink" title="MVVM State Machine"></a>MVVM State Machine</h3><p>æ¶‰åŠåˆ°çŠ¶æ€çš„ç®¡ç†çš„æ—¶å€™, <code>ViewController</code> ç»å¸¸ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚å¦‚æœåœ¨ <code>viewModel</code> ä¸­ä½¿ç”¨çŠ¶æ€æœº, æ¥å‘Šè¯‰ <code>ViewController</code> åœ¨ä»€ä¹ˆæ—¶å€™åº”è¯¥æ€ä¹ˆåšã€‚<a href="http://curtclifton.net/generic-state-machine-in-swift">è¿™é‡Œæœ‰ä¸€ç¯‡ä¸é”™çš„æ–‡ç« </a></p>
<ul>
<li>æŠŠè¿™äº›çŠ¶æ€æ”¾åœ¨ä¸€ä¸ªæšä¸¾é‡Œé¢, è€Œä¸æ˜¯åˆ†æ•£åœ¨å„ä¸ªåœ°æ–¹ã€‚è¿™æ ·åšå¯ä»¥æå¤§çš„å‡å°‘ä½ çš„ <code>Observable</code>ã€‚</li>
<li>è¿™ä¹Ÿä¼šå¼ºè¿«ä½ å§æ›´å¤šçš„é€»è¾‘ç§»åˆ° <code>ViewModel</code> é‡Œé¢ã€‚</li>
<li>è®©ä½ çš„ä»£ç æ›´åŠ çš„å…·æœ‰å£°æ˜æ€§ã€‚<br>ğŸ‘‹</li>
</ul>
<p><a href="http://swiftpearls.com/mvvm-state-manage.html">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç°åœ¨æˆ‘ä»¬æŒæ¡äº†æ‰€æœ‰çš„å·¥å…·, ä¹Ÿæ˜ç¡®äº†ä»–å­˜åœ¨çš„é£é™©ä»¥åŠè§„é¿çš„æ–¹æ³•ã€‚ç°åœ¨æ˜¯æ—¶å€™æƒ³æƒ³åº”è¯¥æ€ä¹ˆæ ·æœ€å¤§å¯èƒ½çš„è¿ç”¨å®ƒäº†ã€‚ä»¥ MVVM ä¸ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;åˆå¾ˆå¤šæ–¹æ³•æ¥å†™ RxSwift çš„ APIã€‚ æˆ‘æ€•çš„åšæ³•æ˜¯: åˆ©ç”¨ RxSwift å¾ˆé…·çš„è§‚å¯Ÿè€…æ¨¡å¼å’Œå¾ˆæ–¹ä¾¿çš„æ“ä½œç¬¦, ç®¡ç†å¼‚æ­¥çš„ä»»åŠ¡ã€‚å¯èƒ½ä¸æ˜¯ 100% çº¯æ­£çš„ RxSwiftã€‚ åœ¨å°†æˆ‘åšè¿‡å¾ˆå¤šçš„å°è¯•è¯•å›¾å°†ä¸¤ç§ç¼–ç¨‹æ€ç»´ç»Ÿä¸€èµ·æ¥,ä½†æ˜¯æˆ‘éƒ½å¤±è´¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€äº›æˆ‘ä½¿ç”¨ RxSwift çš„æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift Safety Manual ğŸ“š</title>
    <link href="http://www.CepheusSun.com/RxSwift%20Safety%20Manual.html"/>
    <id>http://www.CepheusSun.com/RxSwift Safety Manual.html</id>
    <published>2017-05-07T09:19:57.000Z</published>
    <updated>2017-05-19T02:41:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>RxSwift æä¾›äº†å¤§é‡éå¸¸å¥½ç”¨çš„å·¥å…·, è®©å†™ä»£ç æ›´çˆ½, ä½†æ˜¯ä»–ä¹Ÿå¯èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¤´ç–¼çš„åœ°æ–¹, ä¹Ÿå¯èƒ½æ˜¯bugğŸ˜±ã€‚ ç”¨äº†ä¸‰ä¸ªæœˆä¹‹åæˆ‘è§‰å¾—æˆ‘åº”è¯¥ä¹Ÿå¯ä»¥ç»™å‡ºä¸€äº›å»ºè®®æ¥é¿å…ä¸€äº›é—®é¢˜ã€‚</p>
<a id="more"></a>
<h3 id="Side-Effects"><a href="#Side-Effects" class="headerlink" title="Side Effects"></a>Side Effects</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­å‰¯ä½œç”¨è¿™ä¸ªè¯å¯èƒ½æ²¡é‚£ä¹ˆå®¹æ˜“ç†è§£, å› ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸å®½æ³›çš„å†…å®¹ã€‚åœ¨ <a href="http://softwareengineering.stackexchange.com/questions/40297/what-is-a-side-effect">Stackoverflow</a> æœ‰ä¸€äº›æ¯”è¾ƒå¥½çš„è®¨è®ºã€‚</p>
<p>ç®€å•ç‚¹è¯´, ä¸€ä¸ªå‡½æ•°/é—­åŒ…/â€¦å¦‚æœä»–ä»¬æ”¹å˜äº† app çš„çŠ¶æ€, éƒ½æœ‰å¯èƒ½å¸¦æ¥ä¸€äº›å‰¯ä½œç”¨ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="comment">// è¿™æ ·å†™æ²¡æœ‰å‰¯ä½œç”¨</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> observableWithSideEffect = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="comment">// è¿™é‡Œå°±ä¼šæœ‰å‰¯ä½œç”¨: è¿™ä¸ª closure æ”¹å˜äº† counter çš„å€¼</span></div><div class="line">    counter = counter + <span class="number">1</span></div><div class="line">    observer.onNext(counter)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆåœ¨ RxSwift ä¸­è¿™ä¸ªå¾ˆé‡è¦å‘¢? å› ä¸ºå¯¹äºå†·ä¿¡å·â„ï¸æ¥è¯´ã€‚<strong>æ¯æ¬¡è¢«è®¢é˜…ä»–éƒ½ä¼šæ‰§è¡Œä¸€ä¸‹é‡Œé¢çš„ä»»åŠ¡</strong></p>
<p>æˆ‘ä»¬ä¸¤æ¬¡è®¢é˜…è¿™ä¸ª <code>observableWithSideEffect</code>: </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯èƒ½å¸Œæœ›ä»–è¾“å‡ºçš„æ˜¯ä¸¤ä¸ª2.ä½†æ˜¯äº‹å®ä¸Šå®ƒä¼šè¾“å‡º2ï¼Œ3. å› ä¸ºæ¯æ¬¡è®¢é˜…éƒ½ä¼šåˆ†åˆ«æ‰§è¡Œ, æ‰€ä»¥åœ¨é—­åŒ…é‡Œé¢çš„ä»£ç ä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ã€‚<strong>æ‰€ä»¥ counter + 1 ä¼šæ‰§è¡Œä¸¤æ¬¡</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´, å¦‚æœä½ åœ¨è¿™é‡Œé¢æˆ¿é‡Œä¸¤ä¸ªç½‘ç»œè¯·æ±‚ã€‚<strong>å®ƒä¼šå‘å‡ºä¸¤æ¬¡è¯·æ±‚</strong></p>
<p>æˆ‘ä»¬æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ æŠŠè¿™ä¸ªå†·ä¿¡å·è½¬æ¢æˆçƒ­ä¿¡å·ğŸ’¡ã€‚ ä½¿ç”¨ <strong>publish</strong> connect è¿˜æœ‰ refCount å°±å¯ä»¥äº†,è¿™æ˜¯<a href="http://www.tailec.com/blog/understanding-publish-connect-refcount-share">å®Œæ•´ç»†èŠ‚</a>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> counter = <span class="number">1</span></div><div class="line"><span class="keyword">let</span> observableWithSideEffect = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    counter = counter + <span class="number">1</span></div><div class="line">    observer.onNext(counter)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;.publish()</div><div class="line"><span class="comment">// publish returns an observable with a shared subscription(hot).</span></div><div class="line"><span class="comment">// It's not active yet</span></div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .connect()</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™ä¼šè¾“å‡º 2ï¼Œ2</p>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹è¿™å°±å¤Ÿäº†ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæ›´é«˜çº§çš„ <em>shareReplay</em> æ“ä½œç¬¦ã€‚ä»–ä½¿ç”¨äº† <code>refCont</code> æ“ä½œç¬¦åˆ <code>replay</code>. <code>refCount</code> ä¹Ÿæ˜¯ä¸€ç§ <code>connect</code> ä½†æ˜¯å®ƒæ˜¯è‡ªåŠ¨ç®¡ç†çš„ã€‚ä»–ä¼šåœ¨ç¬¬ä¸€æ¬¡è®¢é˜…å¼€å§‹çš„æ—¶å€™å¼€å§‹ã€‚ replay ä¼šæŠŠä¸€äº›å…ƒç´ å‘é€ç»™é‚£äº› â€œè¿Ÿåˆ°äº†â€ çš„è®¢é˜…è€…/</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> counter = <span class="number">1</span></div><div class="line"><span class="keyword">let</span> observableWithSideEffect = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    counter = counter + <span class="number">1</span></div><div class="line">    observer.onNext(counter)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;.shareReplay(<span class="number">1</span>)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Main-Queue"><a href="#Main-Queue" class="headerlink" title="Main Queue"></a>Main Queue</h3><p>å½“è®¢é˜…è¡Œä¸ºæ˜¯å‘ç”Ÿåœ¨ viewcontroller ä¸Š, ç„¶åä½ ä¸çŸ¥é“è®¢é˜…è¡Œä¸ºæ˜¯åœ¨é‚£ä¸ªçº¿ç¨‹ä¸­è¿›è¡Œçš„ã€‚åœ¨åˆ·æ–° UI çš„æ—¶å€™ç¡®å®šè¿™æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œçš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observableWithSideEffect</div><div class="line">    .observeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="comment">// update UI</span></div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Error-Events"><a href="#Error-Events" class="headerlink" title="Error Events"></a>Error Events</h3><p>å¦‚æœä½ æŠŠå¥½å‡ ä¸ª <code>Observerable</code> åˆå¹¶åœ¨äº†ä¸€èµ·ã€‚å¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªå‘ç”Ÿäº†é”™è¯¯ã€‚æ‰€æœ‰çš„ <code>Observerable</code> éƒ½ä¼šç»“æŸã€‚å¦‚æœæœ€å¼€å§‹æ˜¯UIçš„è¯, ä»–å°±ä¼šåœæ­¢å“åº”ã€‚ä½ åº”è¯¥å¥½å¥½çš„è®¾è®¡ä½ çš„ä»£ç , è€ƒè™‘å¥½å¦‚æœå‘ç”Ÿäº† <code>complete</code> æˆ–è€… <code>error</code> ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">viewModel.importantText</div><div class="line">    .bindTo(myImportantLabel.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>å¦‚æœ viewModel.importantText å› ä¸ºä»€ä¹ˆåŸå› å‘é€å‡ºæ¥ä¸€ä¸ªerroräº‹ä»¶ã€‚è¿™ä¸ª <code>bingding</code> è®¢é˜…ä¹Ÿä¼šç»“æŸã€‚</p>
<p>å¦‚æœä½ æƒ³é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿä½ å¯ä»¥ä½¿ç”¨ <strong>catchErrorJustReturn</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.importantText</div><div class="line">    .catchErrorJustReturn(<span class="string">"default text"</span>)</div><div class="line">    .bind(to: lable.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Driver"><a href="#Driver" class="headerlink" title="Driver"></a>Driver</h3><p><strong>Driver</strong> æ˜¯ä¸€ä¸ªèƒ½å¤Ÿ <code>observeOn</code>ã€<code>catchErrorJustReturn</code>ã€<code>shareReplay</code> <strong>Observable</strong>.å¦‚æœä½ æƒ³åœ¨viewModelä¸­æš´éœ²ä¸€ä¸ªå®‰å…¨çš„APIã€‚ä½¿ç”¨ <strong>Driver</strong> æ˜¯æ›´å¥½çš„åšæ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.importantText</div><div class="line">    .asDriver(onErrorJustReturn: <span class="string">"default text"</span>)</div><div class="line">    .drive(lable.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Reference-Cycles"><a href="#Reference-Cycles" class="headerlink" title="Reference Cycles"></a>Reference Cycles</h3><p>é˜²æ­¢å†…å­˜æ³„æ¼éœ€è¦åœ¨è¯å¾ˆå¤šå¿ƒæ€åœ¨é¿å…å¼•ç”¨å¾ªç¯ä¸Šï¼Œå½“æˆ‘ä»¬ä½¿ç”¨åœ¨è®¢é˜…é—­åŒ…ä¸­ä½¿ç”¨å¤–éƒ¨å˜é‡çš„æ—¶å€™ã€‚è¿™ä¸ªå˜é‡ä¼šè¢«æ•è·ä¸ºä¸€ä¸ªå¼ºå¼•ç”¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.priceString</div><div class="line">    .subscribe(onNext: &#123;(text) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.priceLabel.text = text</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ª vc å¼ºå¼•ç”¨äº† viewModelã€‚ç°åœ¨è¿™ä¸ª viewmodel åˆå› ä¸ºåœ¨è¿™ä¸ªé—­åŒ…ä¸­å¼ºå¼•ç”¨äº†è¿™ä¸ª vcã€‚è¿™å°±å¸¦æ¥äº†å¾ªç¯å¼•ç”¨ã€‚ <a href="https://krakendev.io/blog/weak-and-unowned-references-in-swift">â€œWEAK, STRONG, UNOWNED, OH MY!â€ - A GUIDE TO REFERENCES IN SWIFT</a></p>
<p>ä¸‹é¢æ˜¯è§£å†³åŠæ³•</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.priceString</div><div class="line">    .subscribe(onNext: &#123;[<span class="keyword">unowned</span> <span class="keyword">self</span>] (text) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.priceLabel.text = text</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <strong>[unowned self]</strong> è¯­å¥ä¹‹åå°±ä¸ç”¨å»è€ƒè™‘è¿™ä¸ªé—®é¢˜äº†ğŸ¤—ã€‚</p>
<p>self å¹¶ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªä½ éœ€è¦æ‹…å¿ƒçš„ä¸œè¥¿ã€‚ä½ å¯èƒ½éœ€è¦è€ƒè™‘æ‰€æœ‰ä½ åœ¨åœ¨é—­åŒ…ä¸­æ•è·çš„å˜é‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// out side the view controller</span></div><div class="line">        viewModel.priceString</div><div class="line">            .subscribe(onNext: &#123;[<span class="keyword">weak</span> viewController] (text) <span class="keyword">in</span></div><div class="line">                viewController?.priceLabel.text = text</div><div class="line">            &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™å¯èƒ½ä¼šæ¯”è¾ƒå¤æ‚ã€‚è¿™ä¹Ÿæ˜¯æˆ‘<strong>å¼ºçƒˆå»ºè®®ä½ å°½é‡è®©ä½ çš„é—­åŒ…å¾ˆçŸ­</strong>çš„åŸå› ã€‚å¦‚æœä¸€ä¸ªé—­åŒ…è¶…è¿‡äº†3ã€4è¡Œä»£ç çš„è¯ã€‚å¯ä»¥è€ƒè™‘æŠŠè¿™éƒ¨åˆ†é€»è¾‘æ”¾åœ¨ä¸€ä¸ªæ–°çš„æ–¹æ³•é‡Œé¢å»ã€‚è¿™æ ·çš„è¯ï¼Œè¿™äº›ä¾èµ–å…³ç³»å°±ä¼šå˜çš„å¾ˆæ˜ç¡®äº†ã€‚ä½ æ‰èƒ½å¤Ÿå¾ˆå¥½çš„å»è€ƒè™‘å¼ºå¼±åº”ç”¨çš„é—®é¢˜ã€‚</p>
<h3 id="Managing-your-subscriptions"><a href="#Managing-your-subscriptions" class="headerlink" title="Managing your subscriptions"></a>Managing your subscriptions</h3><p>è®°ä½è¦æŠŠä½ ä¸éœ€è¦è®¢é˜…çš„è®¢é˜…æ¸…æ¥šæ‰ã€‚æˆ‘æ›¾ç»é‡åˆ°è¿‡ä¸€æ¬¡, ç”±äºæˆ‘æ²¡æœ‰åŠæ—¶çš„æ¸…é™¤æ‰æˆ‘çš„è®¢é˜…, å½“ <code>cell</code> è¢«é‡ç”¨çš„æ—¶å€™, å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è®¢é˜…, å¯¼è‡´äº†éå¸¸å£®è§‚çš„ <strong>bug</strong>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reuseBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="comment">// Called each time a cell is reused</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">configCell</span><span class="params">()</span></span> &#123;</div><div class="line">    viewModel</div><div class="line">        .subscribe(onNext: &#123; [<span class="keyword">unowned</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">            <span class="keyword">self</span>.sendOpenNewDetailsScreen()</div><div class="line">        &#125;)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Creating a new bag for each cell</span></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">prepareForReuse</span><span class="params">()</span></span> &#123;</div><div class="line">    reuseBag = <span class="type">DisposeBag</span>()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>RxSwift æ˜¯éå¸¸å¤æ‚çš„ä¸œè¥¿ã€‚ä½†æ˜¯å¦‚æœä½ è®¾å®šå¥½äº†è‡ªå·±çš„ä¸€å¥—è§„åˆ™, ç„¶ååœ¨ç¼–ç çš„æ—¶å€™åšæŒè¿™ä¸ªè§„åˆ™ã€‚è¿™ä¹Ÿæ²¡ä»€ä¹ˆå¥½éš¾å—çš„ğŸ˜‡ã€‚ åœ¨ä½¿ç”¨ RxSwift åšçš„æ—¶å€™åœ¨æ¯ä¸€å±‚ä¸­è€ƒè™‘æ¸…æ¥šä½ éœ€è¦æŠŠå“ªäº› API æš´éœ²å‡ºæ¥ã€‚è¿™ä¹Ÿèƒ½å¸®åŠ©ä½ å¾ˆå¿«çš„å‘ç° bugã€‚</p>
<p><a href="http://swiftpearls.com/RxSwift-Safety-Manual.html">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;RxSwift æä¾›äº†å¤§é‡éå¸¸å¥½ç”¨çš„å·¥å…·, è®©å†™ä»£ç æ›´çˆ½, ä½†æ˜¯ä»–ä¹Ÿå¯èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¤´ç–¼çš„åœ°æ–¹, ä¹Ÿå¯èƒ½æ˜¯bugğŸ˜±ã€‚ ç”¨äº†ä¸‰ä¸ªæœˆä¹‹åæˆ‘è§‰å¾—æˆ‘åº”è¯¥ä¹Ÿå¯ä»¥ç»™å‡ºä¸€äº›å»ºè®®æ¥é¿å…ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift For Dummies ğŸ£ Part3</title>
    <link href="http://www.CepheusSun.com/RxSwift%20For%20Dummies%20Part3.html"/>
    <id>http://www.CepheusSun.com/RxSwift For Dummies Part3.html</id>
    <published>2017-05-07T07:27:57.000Z</published>
    <updated>2017-05-19T02:41:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¥½äº†, æ¥ä¸‹æ¥æ˜¯ç¬¬ä¸‰ä¸ªéƒ¨åˆ†ã€‚<strong>Subjects</strong></p>
<p>å­¦äº†ä¹‹å‰å†…å®¹. æˆ‘ä»¬å¯èƒ½å·²ç»å‘ç°äº†ã€‚ä¹‹å‰å­¦ä¹ çš„å†…å®¹éƒ½æ˜¯ <code>Observables</code> è¾“å‡ºäº‹ä»¶çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥è®¢é˜…ä»–, å°±èƒ½çŸ¥é“ä»–è¾“å‡ºçš„äº‹ä»¶äº†ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜ä¸èƒ½æ”¹å˜ä»–ã€‚</p>
<a id="more"></a>
<p><strong>Subject</strong> ä¹Ÿæ˜¯ä¸€ä¸ª <code>Observable</code> ä½†æ˜¯ä»–æ˜¯èƒ½å¤ŸåŒæ—¶è¾“å…¥å’Œè¾“å‡ºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´, æˆ‘ä»¬å¯ä»¥åŠ¨æ€(å¼ºåˆ¶)çš„åœ¨ä¸€ä¸ªåºåˆ—ä¸­å‘å‡ºä¿¡å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="comment">// å¯ä»¥ç›´æ¥è½¬æ¢ï¼Œå› ä¸ºä»–ä¹Ÿæ˜¯ä¸€ä¸ª `Observable`</span></div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line"><span class="comment">// åªè¦ä½ æƒ³å‘å‡ºä¸€ä¸ªæ–°çš„äº‹ä»¶, å°±å¯ä»¥ç”¨ onNext æ–¹æ³• </span></div><div class="line">subject.onNext(<span class="string">"Hey!"</span>)</div><div class="line">subject.onNext(<span class="string">"I'm back!"</span>)</div></pre></td></tr></table></figure>
<p><strong>onNext</strong> æ˜¯ä¸€ä¸ªè¾“å‡ºäº‹ä»¶çš„æ–¹æ³•ã€‚æœ€åæ§åˆ¶å°ä¼šè¾“å‡º</p>
<blockquote>
<p>â€œHey!â€<br>â€œIâ€™m back!â€</p>
</blockquote>
<p><code>Subject</code> åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢? ä¸ºäº†å¾ˆè½»æ¾çš„å°† Rxswift ä¸­å£°æ˜å¼çš„ä¸–ç•Œå’Œæˆ‘ä»¬å¹³å¸¸çš„ä¸–ç•Œè¿æ¥èµ·æ¥ã€‚è®©æˆ‘ä»¬åœ¨éœ€è¦å†™å®ç°å¼çš„ä»£ç çš„æ—¶å€™æ›´ Rx </p>
<p>åœ¨ä¸€ä¸ªçº¯æ­£çš„ Rx çš„ä¸–ç•Œé‡Œã€‚å½“ä½ éœ€è¦æœ‰ä¸€ä¸ªæ›´å®Œç¾çš„æµçš„æ—¶å€™, ä¸ç”¨å»ç®¡è¿™ä¸ª <code>Observable</code> æ˜¯æ€ä¹ˆå®ç°çš„ã€‚è¿™ä¸ªä¸œè¥¿æˆ‘ä¼šå¦å¤–çš„è§£é‡Šã€‚åæ­£, å¦‚æœä½ éœ€è¦ï¼Œ å¤§èƒ†çš„ç”¨å§ã€‚</p>
<p>ä¸Šé¢å¼å…³äº Subject æœ€åŸºæœ¬çš„å†…å®¹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆæ›´å¥½çš„ä½¿ç”¨ <strong>Subject</strong></p>
<h3 id="HotğŸ”¥-vs-Coldâ„ï¸"><a href="#HotğŸ”¥-vs-Coldâ„ï¸" class="headerlink" title="HotğŸ”¥ vs Coldâ„ï¸"></a>HotğŸ”¥ vs Coldâ„ï¸</h3><p>åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­å°±å·²ç»æåˆ°è¿‡äº†çƒ­ä¿¡å·ğŸ”¥å’Œå†·ä¿¡å·â„ï¸ã€‚ä»Šå¤©æˆ‘ä»¬åœ¨æ·±å…¥çš„äº†è§£ä¸€ç‚¹å§ï¼Œå› ä¸º <strong>Subject</strong> å®é™…ä¸Šæ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°çœŸæ­£çš„çƒ­ä¿¡å·ã€‚</p>
<p>æˆ‘ä»¬ä¸€å®šç¡®å®šäº†ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ <strong>create</strong> åˆ›å»ºä¸€ä¸ª <strong>Observable</strong> çš„æ—¶å€™, ç”±äºæ²¡æœ‰äººè®¢é˜…ä»–ï¼Œæ‰€ä»¥å¥¹æ˜¯ä¸ä¼šå‘é€æ¶ˆæ¯çš„ã€‚åªæœ‰è¢« <strong>subscribe</strong>(è®¢é˜…)ä¹‹åæ‰ä¼šå¼€å§‹å‘é€æ¶ˆæ¯å‡ºæ¥ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å«å®ƒä¸ºå†·ä¿¡å·â„ï¸çš„åŸå› ã€‚å¦‚æœå¾ˆä¸å¹¸ä½ å¿˜äº†è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚ä½ å¯ä»¥å›åˆ°ç¬¬ä¸€ç¯‡æ–‡ç« å»çœ‹çœ‹ã€‚çƒ­ä¿¡å·ğŸ”¥ å°±æ˜¯é‚£ç§å³ä½¿æ²¡æœ‰è¢«è®¢é˜…ä¹Ÿä¼šå‘å‡ºæ¶ˆæ¯çš„ä¿¡å·, è¿™ä¹Ÿæ˜¯ <code>subject</code> åšçš„äº‹æƒ…ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line"><span class="comment">// è¿™ä¸ªä¿¡å·è¿˜æ²¡æœ‰è¢«è®¢é˜…, æ‰€ä»¥è¿™ä¸ªå€¼ä¸å›è¢«æ¥å—åˆ°</span></div><div class="line">subject.onNext(<span class="string">"Am I too early for the party?"</span>)</div><div class="line"></div><div class="line">observable</div><div class="line">    .subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(text)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"><span class="comment">// è¿™ä¸ªå€¼å‘å‡ºæ¥çš„æ—¶å€™å·²ç»æœ‰ä¸€ä¸ªè®¢é˜…è€…äº†, æ‰€ä»¥è¿™ä¸ªå€¼ä¼šæ‰“å°å‡ºæ¥</span></div><div class="line">subject.onNext(<span class="string">"ğŸ‰ğŸ‰ğŸ‰"</span>)</div></pre></td></tr></table></figure>
<p>å¾ˆç®€å•ç›´æ¥å§ã€‚å¦‚æœåœ¨ç¬¬ä¸€ç¯‡ä¸­ä½ ç†è§£äº†å†·ä¿¡å·çš„è¯, ç†è§£çƒ­ä¿¡å·ä¹Ÿæ˜¯å¾ˆè‡ªç„¶çš„äº‹æƒ…ã€‚</p>
<h3 id="Subject-Types"><a href="#Subject-Types" class="headerlink" title="Subject Types"></a>Subject Types</h3><p>å¸¸ç”¨çš„ <code>Subject</code> æœ‰ä¸‰ç§ã€‚ ä»–ä»¬å…¶å®éƒ½å·®ä¸å¤š, å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯: åœ¨è®¢é˜…ä¹‹å‰, å®ƒä¼šå¹²ä»€ä¹ˆã€‚</p>
<h4 id="Publish-Subject"><a href="#Publish-Subject" class="headerlink" title="Publish Subject"></a>Publish Subject</h4><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å·²ç»è¯´åˆ°äº†ã€‚ <strong>PublishSubject</strong> ä¼šå¿½ç•¥æ‰åœ¨è®¢é˜…ä¹‹å‰å‘å‡ºæ¥çš„ä¿¡å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line">subject.onNext(<span class="string">"Ignored..."</span>)</div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div></pre></td></tr></table></figure>
<p>å½“ä½ åªå…³æ³¨ä½ è®¢é˜…ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆçš„æ—¶å€™, å°±å¯ä»¥ä½¿ç”¨ <code>PublishSubject</code></p>
<h4 id="Replay-Subjects"><a href="#Replay-Subjects" class="headerlink" title="Replay Subjects"></a>Replay Subjects</h4><p><strong>ReplaySubject</strong> ä¼šå°†æœ€å n ä¸ªå€¼å‘å‡ºæ¥, å³ä½¿æ˜¯è®¢é˜…å‘ç”Ÿä¹‹å‰çš„å€¼ã€‚ è¿™ä¸ª n ä¸ªå€¼è¢«è¢«æ”¾åœ¨ä¸€ä¸ªç¯ä»åŒºé‡Œé¢ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¼šç¼“æœ‰ 3 ä¸ªå€¼è¢«ä¿ç•™ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">ReplaySubject</span>&lt;<span class="type">String</span>&gt;.create(bufferSize: <span class="number">3</span>)</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line"></div><div class="line">subject.onNext(<span class="string">"Not printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div><div class="line"></div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">subject .onNext(<span class="string">"Printed!"</span>)</div></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬éœ€è¦çŸ¥é“è®¢é˜…ä¹‹å‰å‘ç”Ÿäº†ä»€ä¹ˆçš„æ—¶å€™, æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ <code>ReplaySubject</code> äº†ã€‚</p>
<h4 id="Behavior-Subject"><a href="#Behavior-Subject" class="headerlink" title="Behavior Subject"></a>Behavior Subject</h4><p><strong>BehaviorSubject</strong> åªä¼šé‡å¤æœ€åä¸€ä¸ªå€¼ã€‚ æ›´å…¶ä»–çš„ Subject çš„åŒï¼Œ ä»–åœ¨åˆ›å»ºçš„æ—¶å€™å°±éœ€è¦ç»™å®šä¸€ä¸ªåˆå§‹å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">BehaviorSubject</span>&lt;<span class="type">String</span>&gt;(value: <span class="string">"Initial value"</span>)</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line"></div><div class="line">subject.onNext(<span class="string">"Not printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Not printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div><div class="line"></div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div></pre></td></tr></table></figure>
<p>å½“ä½ åªéœ€è¦çŸ¥é“æœ€åä¸€ä¸ªå€¼çš„æ—¶å€™ã€‚å°±éœ€è¦ä½¿ç”¨ <code>BehaviorSubject</code></p>
<h3 id="Binding"><a href="#Binding" class="headerlink" title="Binding"></a>Binding</h3><p>ä½ å¯ä»¥æŠŠä¸€ä¸ª <code>Observable</code> å’Œ <code>Subject</code> ç»‘å®šåˆ°ä¸€èµ·ã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥è®©è¿™ä¸ª <code>Observable</code> å°†å®ƒçš„åºåˆ—é‡Œçš„æ‰€æœ‰å€¼éƒ½å‘é€ç»™è¿™ä¸ª <code>Subject</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.just(<span class="string">"I'm being passed around ğŸ˜²"</span>)</div><div class="line">subject.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observable.subscribe &#123; (event) <span class="keyword">in</span></div><div class="line">    subject.on(event)</div><div class="line">&#125;.addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>æœ‰ä¸€ä¸ªè¯­æ³•ç³–æ¥ç®€åŒ–è¿™äº›ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.just(<span class="string">"I'm being passed around ğŸ˜²"</span>)</div><div class="line">subject.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observable.bind(to: subject).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<blockquote>
<p>Iâ€™m being passed around ğŸ˜²</p>
</blockquote>
<p><strong>Warning</strong></p>
<p>Binding ä¸ä»…ä»…ä¼šä¼ é€’å€¼, ä»–ä¹Ÿä¼šæŠŠå®Œæˆå’Œé”™è¯¯éƒ½ä¼ é€’è¿‡æ¥ã€‚è¿™ç§æƒ…å†µä¸‹è¿™ä¸ª <code>Subject</code> å°±ä¼šè¢«é‡Šæ”¾ã€‚</p>
<h3 id="Quick-Example"><a href="#Quick-Example" class="headerlink" title="Quick Example"></a>Quick Example</h3><p>è¿˜æ˜¯æŠŠç¬¬ä¸€ç¯‡æ–‡ç« ä¸­çš„ Demo ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> RxCocoa</div><div class="line"><span class="keyword">import</span> RxSwift</div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">GoogleModel</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> googleString = <span class="type">BehaviorSubject</span>&lt;<span class="type">String</span>&gt;(value: <span class="string">""</span>)</div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fetchNetString</span><span class="params">()</span></span>  &#123;</div><div class="line">        <span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">            <span class="keyword">let</span> session = <span class="type">URLSession</span>.shared</div><div class="line">            <span class="keyword">let</span> task = session.dataTask(with: <span class="type">URL</span>(string: <span class="string">"https://www.google.com"</span>)!, completionHandler: &#123; (data, response, error) <span class="keyword">in</span></div><div class="line">                </div><div class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> err = error &#123;</div><div class="line">                        observer.onError(err)</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="keyword">let</span> googleString = <span class="type">NSString</span>(data: data!, encoding: <span class="number">1</span>) <span class="keyword">as</span> <span class="type">String</span>?</div><div class="line">                        </div><div class="line">                        observer.onNext(googleString!)</div><div class="line">                        observer.onCompleted()</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;)</div><div class="line">            task.resume()</div><div class="line">            <span class="keyword">return</span> <span class="type">Disposables</span>.create&#123;</div><div class="line">                task.cancel()</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// Bind the observable to the subject</span></div><div class="line">        observable.bind(to: googleString).addDisposableTo(disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;        </div><div class="line"><span class="comment">// Bind the observable to the subject</span></div><div class="line">observable.bind(to: googleString).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè§†å›¾æ¨¡å‹å°† <code>googleString</code> è¿™ä¸ª <code>subject</code> æš´éœ²å‡ºæ¥ã€‚è®© <code>ViewController</code> èƒ½å¤Ÿè®¢é˜…ã€‚æˆ‘ä»¬å°†è¿™ä¸ª <code>observable</code> ç»‘å®šåˆ°è¿™ä¸ª <code>subject</code> ä¸Š, è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ç½‘ç»œè¯·æ±‚æœ‰ç»“æœçš„æ—¶å€™, ç«‹é©¬å°†è¯·æ±‚ç»“æœä¼ é€’åˆ°è¿™ç»™ <code>subject</code>ã€‚</p>
<h3 id="Bonus-Variable"><a href="#Bonus-Variable" class="headerlink" title="Bonus: Variable"></a>Bonus: Variable</h3><p>è·ç¦»å®Œå®Œå…¨å…¨çš„ Rx è¿˜å·®æœ€åä¸€ç‚¹äº†ã€‚å¼ºè¡Œçš„è·å–ä¹‹å‰å‘é€å‡ºæ¥çš„å€¼ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼šæœ‰ <strong>Variable</strong> è¿™ä¸ªä¸œè¥¿äº†ã€‚Variable æ˜¯å¯¹ BehaviorSubject çš„ç®€å•åŒ…è£…ã€‚<a href="https://github.com/ReactiveX/RxSwift/blob/master/RxSwift/Subjects/Variable.swift">å¯ä»¥çœ‹ä¸€ä¸‹</a> å®ƒçš„å®ç°æ˜¯éå¸¸ç®€å•çš„ã€‚ä½†å®ƒå´éå¸¸çš„æ–¹ä¾¿ã€‚</p>
<p>è¿˜æ˜¯ç”¨ä¸€ä¸ªå°ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜å§ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬éœ€è¦åœ¨ä»»ä½•æ—¶é—´éƒ½å¯ä»¥å¾—åˆ° â€œgoogleStringâ€ â€œå½“å‰â€ çš„å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> googleString = <span class="type">Variable</span>(<span class="string">"currentString"</span>)</div><div class="line"><span class="comment">// get</span></div><div class="line"><span class="built_in">print</span>(googleString.value)</div><div class="line"><span class="comment">// set</span></div><div class="line">googleString.value = <span class="string">"newString"</span></div><div class="line"><span class="comment">// è®¢é˜…</span></div><div class="line">googleString.asObservable().subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ä½ ä¸€å®šä¼šçˆ±ä¸Šä»–çš„ã€‚è¿™åŸºæœ¬ä¸Šå°±æ˜¯ <strong>RxSwift</strong> çš„ç®€å•æ¨¡å¼äº†ã€‚</p>
<p>çœ‹èµ·æ¥å¾ˆç®€å•å§ï¼Œä½†æ˜¯åˆ«å¿˜äº†ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šçš„å‘çš„ã€‚è¿˜æ˜¯å°å¿ƒä¸ºä¸Šã€‚ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä¼šè®²è®²: æ€ä¹ˆå†™ Rxswift æœ€ä¿é™©ã€‚</p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p>ä½ çŸ¥é“äº†å¤ªå¤šäº†ã€‚å‰©ä¸‹çš„å°±æ˜¯ <code>Subjects</code> äº†</p>
<p><a href="http://swiftpearls.com/RxSwift-for-dummies-3-Subjects.html">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¥½äº†, æ¥ä¸‹æ¥æ˜¯ç¬¬ä¸‰ä¸ªéƒ¨åˆ†ã€‚&lt;strong&gt;Subjects&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å­¦äº†ä¹‹å‰å†…å®¹. æˆ‘ä»¬å¯èƒ½å·²ç»å‘ç°äº†ã€‚ä¹‹å‰å­¦ä¹ çš„å†…å®¹éƒ½æ˜¯ &lt;code&gt;Observables&lt;/code&gt; è¾“å‡ºäº‹ä»¶çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥è®¢é˜…ä»–, å°±èƒ½çŸ¥é“ä»–è¾“å‡ºçš„äº‹ä»¶äº†ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜ä¸èƒ½æ”¹å˜ä»–ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift For Dummies ğŸ£ Part2</title>
    <link href="http://www.CepheusSun.com/RxSwift%20For%20Dummies%20Part2.html"/>
    <id>http://www.CepheusSun.com/RxSwift For Dummies Part2.html</id>
    <published>2017-05-06T16:26:57.000Z</published>
    <updated>2017-05-19T02:42:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº† RxSwift åŸºç¡€çš„éƒ¨åˆ†. ç°åœ¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€äº›æ“ä½œç¬¦, æ¥å­¦ä¹ ä¸€ä¸‹ <strong>FRP</strong> ä¸­çš„<strong>F</strong>(unctional) éƒ¨åˆ†</p>
<a id="more"></a>
<h3 id="Schedulers"><a href="#Schedulers" class="headerlink" title="Schedulers"></a>Schedulers</h3><p>æˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹ä¹‹å‰å°±å·²ç»æåˆ°è¿‡çš„, ä½†æ˜¯æ²¡æœ‰è¯¦ç»†ä»‹ç»çš„ <strong>Schedulers</strong></p>
<p><strong>Schedulers</strong> æœ€å¸¸è§çš„ç”¨æ³•å°±æ˜¯å‘Šè¯‰ <code>Observables</code> å’Œè®¢é˜…è€… åº”è¯¥åœ¨å“ªä¸ªçº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ä¸­å‘é€äº‹ä»¶,æˆ–è€…é€šçŸ¥ã€‚</p>
<p>å…³äº <code>Schedulers</code> æœ€å¸¸è§çš„æ“ä½œç¬¦æ˜¯<code>observerOn</code> å’Œ <code>subscribleOn</code></p>
<p>é€šå¸¸æƒ…å†µä¸‹ <code>Observables</code> ä¼šåœ¨å®ƒè¢«è®¢é˜…çš„é‚£ä¸ªçº¿ç¨‹å‘é€äº‹ä»¶æˆ–è€…é€šçŸ¥ã€‚</p>
<h4 id="ObserveOn"><a href="#ObserveOn" class="headerlink" title="ObserveOn"></a>ObserveOn</h4><p><strong>ObserveOn</strong> æŒ‡å®š <code>Observables</code> å‘é€äº‹ä»¶çš„çº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ã€‚å®ƒä¸ä¼šæ”¹å˜å®ƒæ‰§è¡Œçš„çº¿ç¨‹ã€‚</p>
<p>ä¸¾ä¸€ä¸ªè·Ÿ part1 å¾ˆç›¸ä¼¼çš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">            observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">            observer.onCompleted()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡è®¾è®¢é˜…è€…æ˜¯ä¸€ä¸ª UI å±‚çš„ä¸œè¥¿ï¼Œ æ¯”å¦‚è¯´æ˜¯ä¸€ä¸ª <code>UIViewController</code> æˆ–è€… <code>UIView</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠè¿™ä¸ªä»»åŠ¡æ”¾åœ¨å­çº¿ç¨‹ä¸­å»æ‰§è¡Œï¼Œ ä»¥å…é˜»å¡ UI </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DispatchQueue.main.async&#123; ...</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­å»æ›´æ–° UI, ä½ åº”è¯¥çŸ¥é“ <code>UIKit</code> è¦æ±‚å¯¹ <code>UI</code> çš„æ“ä½œéƒ½å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œã€‚æ‰€ä»¥è¿™äº›æ“ä½œå¯¹ä½ æ¥è¯´ä¸€å®šæ˜¯å¾ˆç†Ÿæ‚‰çš„äº†ã€‚</p>
<p>è®°ä¸‹æ¥ä½¿ç”¨ <strong>ObserveOn</strong> æ¥é‡æ„ä¸€ä¸‹è¿™æ®µä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create(&#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">        observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">        observer.onCompleted()</div><div class="line">    &#125;</div><div class="line">        <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;).observeOn(<span class="type">MainScheduler</span>.instance)</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åˆ æ‰äº† <code>DispatchQueue.main.async {}</code> ç„¶åæ·»åŠ äº† <code>.observeOn(MainScheduler.instance)</code>ã€‚ è¿™ä¸ªå°±å¯ä»¥è®©æ‰€æœ‰çš„äº‹ä»¶éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ <code>&quot;Hello dummy ğŸ¥&quot;</code> è¿™ä¸ªå…ƒç´ å°±èƒ½å¤Ÿå¾ˆå®‰å…¨çš„è¢«å‘é€ç»™ UI çš„å…ƒç´ ï¼Œ å› ä¸ºæˆ‘ä»¬å¯ä»¥å¾ˆç¡®å®šä»–ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">observable.subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>?.label.text = element</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>ObserveOn</strong> å¤§æ¦‚æ˜¯æœ€å¸¸è§çš„çº¿ç¨‹è°ƒåº¦æ“ä½œç¬¦äº†ã€‚ä½ å¸Œæœ› <code>Observables</code> åŒ…å«äº†æ‰€æœ‰çš„é€»è¾‘, å’Œçº¿ç¨‹æ“ä½œ, è®©è®¢é˜…è€…å°½å¯èƒ½çš„ç®€å•ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å†äº†è§£ä¸€ä¸‹ <code>subscribeOn</code> è¿™ä¸ªæ“ä½œç¬¦ã€‚</p>
<h4 id="SubscribeOn-Optional"><a href="#SubscribeOn-Optional" class="headerlink" title="SubscribeOn (Optional)"></a>SubscribeOn (Optional)</h4><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å…ˆè¿›çš„æ“ä½œç¬¦ã€‚ä½ å¯ä»¥å…ˆè·³è¿‡è¿™éƒ¨åˆ†, ä»¥åå†æ¥ç ”ç©¶ğŸ¤</p>
<p><code>subscribeOn</code> è·Ÿ <code>ObserveOn</code> éå¸¸çš„ç›¸ä¼¼ã€‚<strong>ä½†æ˜¯ä»–åªèƒ½æ”¹å˜ <code>Observable</code> å°†è¦æ‰§è¡Œçš„ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹ã€‚</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">    observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">    observer.onCompleted()</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125; </div><div class="line">observable</div><div class="line">    .subscribeOn(<span class="type">ConcurrentDispatchQueueScheduler</span>(qos: .<span class="keyword">default</span>))</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.label.text = element</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘åˆ æ‰äº† <code>Observable</code> ä¸­çš„ <code>DispatchQueue.global(qos: .default).async {}</code>  æ˜¯è¿™ä¸ªè®¢é˜…è€…å‘Šè¯‰ä»–åº”è¯¥åœ¨ä¸€ä¸ª <code>global queue</code> ä¸­æ‰§è¡Œä¸‹é¢çš„æ“ä½œ, ä»¥å…é˜»å¡ UI. å¾ˆæ˜æ˜¾è¿™å›å¯¼è‡´ä¸€ä¸ªå¼‚å¸¸çš„æŠ›å‡º, ä¹‹å‰æåˆ°è¿‡ï¼š è¿™å›å¯¼è‡´ <code>Observable</code> åœ¨å…¨å±€é˜Ÿåˆ—ä¸­æ‰§è¡Œ, <strong>ä¹Ÿä¼šåœ¨å…¨å±€é˜Ÿåˆ—ä¸­å‘å‡ºäº‹ä»¶</strong>ã€‚åªéœ€è¦æ·»åŠ åœ¨ <code>Observable</code> ä¸­æ·»åŠ  <code>.observeOn(MainScheduler.instance)</code>å°±èƒ½é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">    observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">    observer.onCompleted()</div><div class="line">        <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;.observeOn(<span class="type">MainScheduler</span>.instance)      </div><div class="line">observable</div><div class="line">    .subscribeOn(<span class="type">ConcurrentDispatchQueueScheduler</span>(qos: .<span class="keyword">default</span>))</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.label.text = element</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>æ·»åŠ ä¹‹åï¼Œå°±èƒ½å¤Ÿå‘ç°åˆšåˆšè¯´åˆ°çš„é—®é¢˜å·²ç»è§£å†³æ‰äº†ã€‚</p>
<p>æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨ <code>observeOn</code> å‘¢ï¼Ÿæœ€å¸¸è§çš„åœºæ™¯æ˜¯:å¦‚æœåœ¨ <code>Observable</code> ä¸éœ€è¦åœ¨åå°æ‰§è¡Œè€—æ—¶æ“ä½œ(è¯»å–æ•°æ®, å¤§çš„è®¡ç®—ä»»åŠ¡)çš„è¯.æˆ‘ä¸è®¤ä¸ºè¿™æ˜¯éå¸¸é¢‘ç¹çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œcome on!  å¤šçŸ¥é“ä¸€ä¸ªä½ èƒ½ç”¨çš„å·¥å…· ğŸ› ä¸æ˜¯ä»¶å¾ˆ cool çš„äº‹æƒ…å—ï¼Ÿ</p>
<h4 id="Scheduler-Types"><a href="#Scheduler-Types" class="headerlink" title="Scheduler Types"></a>Scheduler Types</h4><p>åšä¸º RxSwift èœé¸Ÿ, å¥½å¥‡ <code>observeOn</code> å’Œ <code>MainScheduler.instance</code> æ²¡ä»€ä¹ˆå…³ç³»ã€‚ä½ å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æˆ–è€…ç›´æ¥ä½¿ç”¨å·²ç»åˆ›å»ºå¥½äº†çš„ã€‚å¦‚æœä½ å¾ˆå¥½å¥‡çš„è¯<a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/Schedulers.md">è¿™é‡Œæœ‰å¾ˆå¤š</a>ã€‚ è¿™ä¹Ÿæ²¡ä»€ä¹ˆå¥½å¤æ‚çš„ï¼Œ å°±æ˜¯å¯¹ GCD å’Œ NSOperation çš„å°è£…è€Œå·²ã€‚</p>
<h3 id="Transforming-Operators"><a href="#Transforming-Operators" class="headerlink" title="Transforming Operators"></a>Transforming Operators</h3><p>ç°åœ¨ä½ å·²ç»çŸ¥é“ä¸¤ç§æ“ä½œç¬¦äº†: åˆ›å»ºæ“ä½œç¬¦(<code>create</code>ã€<code>interval</code>ã€<code>just</code>)  å’Œ åŠŸèƒ½æ“ä½œç¬¦(<code>observeOn</code>, <code>subscribeOn</code>)ã€‚ ç°åœ¨å†å­¦ä¸€äº›è½¬æ¢æ“ä½œç¬¦å§ï¼</p>
<h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>è¿™æ˜¯éå¸¸ç®€å•ï¼Œä½†éå¸¸æœ‰ç”¨çš„æ“ä½œç¬¦ã€‚å®ƒä¹Ÿå¯èƒ½æ˜¯ä½ æœªæ¥æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ“ä½œç¬¦å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observerable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;        </div><div class="line"><span class="keyword">let</span> boolObservable: <span class="type">Observable</span>&lt;<span class="type">Bool</span>&gt; = observerable.<span class="built_in">map</span>&#123;(element) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">if</span> element == <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div><div class="line">boolObservable.subscribe(onNext: &#123; (boolElement) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(boolElement)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>Map</strong> æ“ä½œç¬¦å·ï¼Œæ”¹å˜äº†åºåˆ—ä¸­å€¼çš„ç±»å‹ã€‚ä»–æ˜ å°„äº†ä¸€ä¸ª <code>Observable</code> æ‰€ä»¥ä»–ä»¥ä½ å‘Šè¯‰ä»–çš„æ–°çš„æ–¹å¼å‘é€äº‹ä»¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬å°†ä¸€ä¸ª <code>Int</code> ç±»å‹çš„ <code>Observable</code> æ˜ å°„æˆäº†ä¸€ä¸ª <code>Bool</code> ç±»å‹ã€‚ </p>
<p>æ‰€ä»¥è¿™ä¸ªä¾‹å­çš„ç»“æœæ˜¯</p>
<blockquote>
<p>true</p>
</blockquote>
<h4 id="Scan"><a href="#Scan" class="headerlink" title="Scan"></a>Scan</h4><p><strong>scan</strong> è¦å¤æ‚ä¸€äº›äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"D"</span>)</div><div class="line">    observer.onNext(<span class="string">"U"</span>)</div><div class="line">    observer.onNext(<span class="string">"M"</span>)</div><div class="line">    observer.onNext(<span class="string">"M"</span>)</div><div class="line">    observer.onNext(<span class="string">"Y"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">observable.scan(<span class="string">""</span>) &#123; (lastValue, currentValue) -&gt; <span class="type">String</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> lastValue + currentValue</div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¼šè¾“å‡º</p>
<blockquote>
<p>D<br>DU<br>DUM<br>DUMM<br>DUMMY</p>
</blockquote>
<p><strong>scan</strong>æ“ä½œç¬¦, è®©ä½ å¯ä»¥é€šè¿‡ä¸Šä¸€ä¸ªå€¼æ¥æ”¹å˜è¿™ä¸€ä¸ªå€¼ã€‚ä»–ä¹Ÿè¢«ç§°ä½œå…ƒç´ å †ç§¯ã€‚ä¸Šé¢ä»£ç ä¸­çš„ <code>â€œâ€</code>æ˜¯æ‰«æå‚æ•°ä¼ é€’çš„èµ·å§‹å€¼ã€‚è¿˜æ˜¯æƒ³ç€èƒ½å¹²ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    observer.onNext(<span class="number">2</span>)</div><div class="line">    observer.onNext(<span class="number">3</span>)</div><div class="line">    observer.onNext(<span class="number">4</span>)</div><div class="line">    observer.onNext(<span class="number">5</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">observable.scan(<span class="number">1</span>) &#123; (lastValue, currentValue) -&gt; <span class="type">Int</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> lastValue + currentValue</div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯é€šè¿‡ <strong>scan</strong> æ“ä½œç¬¦è®¡ç®— 5 çš„é˜¶å±‚ã€‚ ç®—å‡ºæ¥çš„ç­”æ¡ˆæ˜¯: 120</p>
<p><a href="http://rx-marin.com/post/rxswift-state-with-scan/">Marin ç»™äº†ä¸€ä¸ªæ›´æœ‰ç”¨çš„ä¾‹å­</a> å…³äºæŒ‰é’®çš„ selected çŠ¶æ€</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> button = <span class="type">UIButton</span>()</div><div class="line">button.rx.tap.scan(<span class="literal">false</span>) &#123; last, new <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> !last</div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"tap: <span class="subst">\(element)</span>"</span>)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ çŸ¥é“ä»–èƒ½å¹²ä»€ä¹ˆäº†å§ï¼Ÿ å½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„è½¬æ¢æ“ä½œç¬¦ã€‚</p>
<h3 id="Filtering-Operators"><a href="#Filtering-Operators" class="headerlink" title="Filtering Operators"></a>Filtering Operators</h3><p>å‘å‡ºäº‹ä»¶æ˜¯å¾ˆé‡è¦çš„äº‹æƒ…, ä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬è¿˜éœ€è¦è¿‡æ»¤æ‰ä¸€äº›æ²¡ç”¨çš„äº‹ä»¶ã€‚è¿™å°±æ˜¯ filter æ“ä½œç¬¦æ‰€åšçš„äº‹ä»€ä¹ˆã€‚</p>
<h4 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h4><p>å†³å®šé‚£äº›äº‹ä»¶æ˜¯è¦å“åº”çš„é‚£äº›æ˜¯è¦è¿‡æ»¤æ‰çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observerable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">observerable.<span class="built_in">filter</span> &#123; (element) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> element == <span class="string">"ğŸ"</span></div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<blockquote>
<p>ğŸ<br>ğŸ</p>
</blockquote>
<h4 id="Debounce"><a href="#Debounce" class="headerlink" title="Debounce"></a>Debounce</h4><p>ç®€å•ä¸”æœ‰ç”¨</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observerable</div><div class="line">    .debounce(<span class="number">2</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(element)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>debounce</strong> ä¼šè¿‡æ»¤æ‰2ç§’ä»¥å†…çš„æ‰€æœ‰äº‹ä»¶, å¦‚æœäº‹ä»¶aåœ¨ä¸Šä¸€æ¬¡äº‹ä»¶ä¹‹åçš„0.5ç§’è¢«å‘é€å‡ºæ¥ã€‚é‚£ä¹ˆä»–å°±ä¼šè¢«è¿‡æ»¤æ‰ã€‚å¦‚æœä»–åœ¨ä¸Šæ¬¡äº‹ä»¶çš„2.5ç§’è¢«å‘é€å‡ºæ¥ã€‚é‚£ä¹ˆä»–å°±ä¼šè¢«æ¥å—åˆ°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯, å¦‚æœå°±ç®—å½“å‰æ—¶é—´ä¹‹åæ²¡æœ‰å…¶ä»–çš„äº‹ä»¶ï¼Œä»–ä¹Ÿè¦åœ¨2ç§’ä¹‹åè¢«å‘é€å‡ºæ¥ã€‚</p>
<blockquote>
<p>è¯‘è€…: éœ€è¦æ³¨æ„çš„ <code>debounce</code> å’Œ <code>throttle</code> çš„åŒºåˆ«ã€‚è¿˜æœ‰ Obj-C ä¸­çš„ <code>ReactiveCocoa</code> ä¸­çš„ throttle çš„åŒºåˆ«ã€‚</p>
</blockquote>
<h3 id="Combining-Operator"><a href="#Combining-Operator" class="headerlink" title="Combining Operator"></a>Combining Operator</h3><p>è”åˆæ“ä½œç¬¦è®©ä½ å¯ä»¥æŠŠå¤šä¸ª <code>Observable</code> è½¬æ¢æˆä¸€ä¸ªã€‚</p>
<h4 id="Merge"><a href="#Merge" class="headerlink" title="Merge"></a>Merge</h4><p>åˆå¹¶åªæ˜¯å°†å¤šä¸ª <code>Observable</code> å‘é€çš„äº‹ä»¶åˆå¹¶åˆ°ä¸€ä¸ª <code>Observable</code> ä¸­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> observable2 = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="type">Observable</span>.of(observable, observable2).merge().subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ğŸ<br>ğŸ<br>ğŸ’©<br>ğŸ’©</p>
</blockquote>
<h4 id="Zip"><a href="#Zip" class="headerlink" title="Zip"></a>Zip</h4><p><strong>Zip</strong> å°†æ¯ä¸ª <code>Observable</code> å‘å‡ºæ¥çš„å€¼åˆå¹¶æˆä¸€ä¸ªå€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> observable2 = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="type">Observable</span>.<span class="built_in">zip</span>(observable ,observable2).subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ğŸğŸ’©<br>ğŸğŸ’©</p>
</blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ“ä½œç¬¦ã€‚è¿˜æ˜¯ä¸¾ä¸€ä¸ªä¾‹å­å§ï¼ å‡å¦‚ä½ æœ‰ä¸¤ä¸ªç½‘ç»œè¯·æ±‚, ä½ éœ€è¦ç­‰åˆ°ä»–ä»¬éƒ½ç»“æŸä¹‹åå†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">3</span>)</div><div class="line">        observer.onNext(<span class="string">"fetched from sever 1"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> observable2 = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">2</span>)</div><div class="line">        observer.onNext(<span class="string">"fetched from sever 2"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="type">Observable</span>.<span class="built_in">zip</span>(observable, observable2)</div><div class="line">    .subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(element)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>Zip</strong> ä¼šç­‰åˆ°ä¸¤ä¸ª <code>Observable</code> éƒ½ç»“æŸä¹‹åå°†ä¸¤ä¸ªè¯·æ±‚çš„ç»“æœåˆå¹¶æˆä¸€ä¸ªå€¼å‘é€å‡ºæ¥ã€‚</p>
<h3 id="Other-Operators"><a href="#Other-Operators" class="headerlink" title="Other Operators"></a>Other Operators</h3><p>è¿˜æœ‰å¾ˆå¤šæœ‰è¶£çš„æ“ä½œç¬¦, æ¯”å¦‚ <code>reduce</code>ã€ <code>takeUntil</code> ç­‰ç­‰ã€‚æˆ‘è®¤ä¸ºå¦‚æœä½ ä»€ä¹ˆæ—¶å€™æœ‰äº†ä¸€äº›æƒ³æ³•, ä½ ä¹Ÿä¼šå¾ˆå®¹æ˜“çš„æ‰¾åˆ°ä»–ä»¬ã€‚ä»–ä»¬éå¸¸çš„å¼ºå¤§, èƒ½è®©ä½ å¿«é€Ÿç®€å•çš„æ“ä½œäº‹ä»¶åºåˆ—ã€‚</p>
<h3 id="Mixing-Operators"><a href="#Mixing-Operators" class="headerlink" title="Mixing Operators"></a>Mixing Operators</h3><p>è¿™ä¸ªæ•™ç¨‹ä¸éœ€è¦å…·ä½“çš„å®ä¾‹é¡¹ç›®, ä½†æ˜¯èƒ½å¿«çš„å°†å„ç§æ“ä½œç¬¦æ­é…ä½¿ç”¨ã€‚æˆ‘ä»¬æ¥åšä¸€ä¸ªå®éªŒå§ï¼šå·¥å…·æ ¹æ®äº‹ä»¶æ”¹å˜è§†å›¾çš„é¢œè‰²ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="type">Observable</span>&lt;<span class="type">NSDate</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="keyword">while</span> <span class="literal">true</span> &#123;</div><div class="line">            <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">0.01</span>)</div><div class="line">            observer.onNext(<span class="type">NSDate</span>())</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;<span class="comment">// éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­åˆ·æ–° UI</span></div><div class="line">    .observeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">    <span class="comment">// æˆ‘ä»¬åªéœ€è¦èƒ½å¤Ÿè¢«2æ•´é™¤çš„äº‹ä»¶</span></div><div class="line">    .<span class="built_in">filter</span> &#123; (date) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">        <span class="keyword">return</span> <span class="type">Int</span>(date.timeIntervalSince1970) % <span class="number">2</span> == <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// å°†æ•°æ®è½¬æ¢æˆé¢œè‰²</span></div><div class="line">    .<span class="built_in">map</span> &#123; (date) -&gt; <span class="type">UIColor</span> <span class="keyword">in</span></div><div class="line">        <span class="keyword">let</span> interval: <span class="type">Int</span> = <span class="type">Int</span>(date.timeIntervalSince1970)</div><div class="line">        <span class="keyword">let</span> color1 = <span class="type">CGFloat</span>( <span class="type">Double</span>(((interval * <span class="number">1</span>) % <span class="number">255</span>)) / <span class="number">255.0</span>)</div><div class="line">        <span class="keyword">let</span> color2 = <span class="type">CGFloat</span>( <span class="type">Double</span>(((interval * <span class="number">2</span>) % <span class="number">255</span>)) / <span class="number">255.0</span>)</div><div class="line">        <span class="keyword">let</span> color3 = <span class="type">CGFloat</span>( <span class="type">Double</span>(((interval * <span class="number">3</span>) % <span class="number">255</span>)) / <span class="number">255.0</span>)</div><div class="line">        <span class="keyword">return</span> <span class="type">UIColor</span>(red: color1, green: color2, blue: color3, alpha: <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">    .subscribe(onNext: &#123;[<span class="keyword">weak</span> <span class="keyword">self</span>] (color) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.demoView.backgroundColor = color</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>You can find more examples in the <a href="https://github.com/ReactiveX/RxSwift/blob/master/Rx.playground/Pages/Combining_Operators.xcplaygroundpage/Contents.swift">RxSwfit playgrounds</a></p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p>ä½ çŸ¥é“äº†å¤ªå¤šäº†ã€‚å‰©ä¸‹çš„å°±æ˜¯ <code>Subjects</code> äº†</p>
<p><a href="http://swiftpearls.com/RxSwift-for-dummies-2-Operators.html">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº† RxSwift åŸºç¡€çš„éƒ¨åˆ†. ç°åœ¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€äº›æ“ä½œç¬¦, æ¥å­¦ä¹ ä¸€ä¸‹ &lt;strong&gt;FRP&lt;/strong&gt; ä¸­çš„&lt;strong&gt;F&lt;/strong&gt;(unctional) éƒ¨åˆ†&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift For Dummies ğŸ£ Part1</title>
    <link href="http://www.CepheusSun.com/RxSwift%20For%20Dummies%20Part1.html"/>
    <id>http://www.CepheusSun.com/RxSwift For Dummies Part1.html</id>
    <published>2017-05-06T10:41:59.000Z</published>
    <updated>2017-05-19T02:42:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>RxSwift</strong> çœŸçš„æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å­¦ä¹ çš„ä¸œè¥¿ã€‚éå¸¸é—æ†¾çš„æ˜¯æˆ‘æ²¡æœ‰ç ”ç©¶æ‰€æœ‰çš„æ¶æ„æ¨¡å¼MVVM VIPER Routingã€‚</p>
<p>è¦éå¸¸å¥½çš„è®²å‡ºæ¥RxSwiftåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¹Ÿè¯´ä¸å¥½ã€‚æ¯•ç«Ÿä»–èƒ½åšå¤ªå¤šçš„äº‹æƒ…äº†ã€‚æ™®éè®¤ä¸ºï¼Œä»–æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ä¸­éå¸¸é‡è¦çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚åœ¨æœ€åˆçš„å®šä¹‰ä¸­,ä»–å¹¶ä¸å°±æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ã€‚ä»–æœ€åˆçš„è®¾è®¡çµæ„Ÿå°±æ˜¯æ¥è‡ªäºå‡½æ•°å“åº”å¼(<strong>FRP</strong>), æ‰€ä»¥ä¹Ÿå¯ä»¥è¯´å®ƒåŒ…å«äº†å‡½æ•°å“åº”å¼çš„ç‰¹æ€§ã€‚</p>
<p>å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ <strong>FRP</strong> çš„è¯, ä¸ç”¨æ‹…å¿ƒ, åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ä½ ä¼šè‡ªç„¶è€Œç„¶çš„ç†è§£ä»€ä¹ˆæ˜¯ <strong>FRP</strong>ã€‚</p>
<p>é€šè¿‡å¯¹ RXSwift çš„æ·±å…¥ç ”ç©¶, æˆ‘å¾—åˆ°äº†å¾ˆå¤šçš„å¯å‘, åŒæ—¶ä¹Ÿè¢«å¾ˆå¤šçš„é—®é¢˜å›°æ‰°ã€‚ç›¸ä¿¡ä½ ä¹Ÿä¼šè¿™æ ·ã€‚</p>
<p>éœ€è¦èŠ±å¾ˆå¤šä¸ªå°æ—¶çš„æ—¶é—´æ¥é€‚åº”æ–°çš„æ€ç»´æ¨¡å¼ï¼Œå”¯ä¸€èƒ½ç¡®å®šçš„æ˜¯ï¼Œä¸€æ—¦ä½ é€‚åº”äº†ï¼Œä½ å°±å†ä¹Ÿä¸æƒ³å›åˆ°ä»å‰äº†ã€‚</p>
<p>åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä¼šå°½å¯èƒ½çš„èŠ‚çº¦ä½ çš„æ—¶é—´ï¼Œå¹¶ä¸”è§£é‡Šçš„å°½å¯èƒ½çš„è¯¦ç»†ã€‚æƒ³æ•™å¹¼å„¿å›­çš„å°æœ‹å‹ä¸€æ ·ã€‚</p>
<p>å¼€å§‹å­¦ä¹ ä¹‹å‰, è¯·ç¡®å®šä½ å·²ç»æŒæ¡äº† Swift å’Œ UIkit çš„åŸºç¡€çŸ¥è¯†. </p>
<a id="more"></a>
<h3 id="The-Why"><a href="#The-Why" class="headerlink" title="The Why?"></a>The Why?</h3><p>å†™ UI çš„æ—¶å€™ç»å¸¸ä¼šå¤„ç†ä¸€äº›å¼‚æ­¥çš„æ“ä½œã€‚æˆ‘ä»¬å¾ˆæ—©å°±çŸ¥é“è¦ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°è¿™ä¸ªä¸œè¥¿ã€‚æˆ‘ç›¸ä¿¡ä½ ç°åœ¨å·²ç»éå¸¸ç†Ÿæ‚‰ä»£ç†æ¨¡å¼äº†ã€‚ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§å¾ˆé…·çš„è®¾è®¡æ¨¡å¼ã€‚ä½†æ˜¯å†™èµ·æ¥çœŸçš„å¾ˆçƒ¦ğŸ˜¡ã€‚</p>
<center><br><img src="http://swiftpearls.com/images/cry.jpg" alt=""><br></center>

<ul>
<li>ä»£ç†æ¨¡å¼éœ€è¦äº›å¾ˆå¤šçš„æ¨¡ç‰ˆä»£ç : åˆ›å»ºä¸€ä¸ªåè®®, å£°æ˜ä¸€ä¸ª <code>delegate</code> å˜é‡, éµå®ˆåè®®, è®¾ç½®ä»£ç†â€¦</li>
<li>å†™å®Œè¿™ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ,å¯èƒ½ä½ ä¸å°å¿ƒå°±å¿˜äº†å…¶ä¸­çš„æŸä¸ªæ­¥éª¤ã€‚ æ¯”å¦‚è¯´ <code>object.delegete = self</code></li>
<li>ç®¡ç†èµ·æ¥éå¸¸éº»çƒ¦ã€‚ä»–éœ€è¦åœ¨å¥½å‡ ä¸ªæ–‡ä»¶ä¸­è·³è·ƒã€‚</li>
</ul>
<p>RxSwift è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä»–èƒ½å¤Ÿè®©ä½ é€šè¿‡å£°æ˜çš„æ–¹å¼ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚å‡å°‘äº†ç®¡ç†çš„è´Ÿæ‹…, å½“ç„¶ï¼Œä¹Ÿä¸ç”¨å†™é‚£ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ã€‚</p>
<p>æˆ‘åˆšåˆšå¼€å§‹äº†ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œè‡³ä»Šè¿˜æ²¡æœ‰å†™ä¸€ä¸ª <code>delegate</code></p>
<h3 id="Basic-Example"><a href="#Basic-Example" class="headerlink" title="Basic Example"></a>Basic Example</h3><p>talk is cheap, show you the code.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleClass</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">runExample</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">// OBSERVABLE //</span></div><div class="line">        <span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span></div><div class="line">            <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">                <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">                observer.onNext(<span class="string">"Hello dummy ğŸ£"</span>)</div><div class="line">                observer.onCompleted()</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// OBSERVER //</span></div><div class="line">        </div><div class="line">        observable.subscribe(onNext:&#123; (element) <span class="keyword">in</span></div><div class="line">            <span class="built_in">print</span>(element)</div><div class="line">        &#125;).addDisposableTo(disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯æœ€åŸºæœ¬çš„ä¾‹å­, åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­, æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª runExample æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œçš„æ˜¯ä¸€äº› RxSwift ä¸­çš„äº‹æƒ…ã€‚æƒ³ä¸€ä¸‹åœ¨è¿™ä¸ªä¾‹å­ä¸­å‘ç”Ÿäº†ä»€ä¹ˆå§ã€‚</p>
<h3 id="Observable-ğŸ“¡"><a href="#Observable-ğŸ“¡" class="headerlink" title="Observable ğŸ“¡"></a>Observable ğŸ“¡</h3><p>æˆ‘ä»¬è¿˜æ˜¯ä» RxSwift ä¸­æœ€åŸºæœ¬çš„æ„å»ºå•å…ƒå¼€å§‹å§ã€‚ <code>Observable</code>ã€‚ å®ƒå…¶å®éå¸¸çš„ç®€å•ã€‚ <code>Observable</code> æ‰§è¡ŒæŸäº›åŠ¨ä½œ, ç„¶åè§‚å¯Ÿè€…èƒ½å¤Ÿå¯¹æ­¤ä½œå‡ºä¸€äº›ååº”ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="comment">// Simulate some work</span></div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">        observer.onNext(<span class="string">"Hello dummy ğŸ£"</span>)</div><div class="line">        observer.onCompleted()</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">                </div><div class="line">observable.subscribe(onNext:&#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ª <code>Observable</code> ä¿¡å·äº†ã€‚è¿™ç§ä¿¡å·åªæœ‰åœ¨è¢«è®¢é˜…ä¹‹åæ‰ä¼šæ‰§è¡Œå®ƒä¹Ÿè¢«å«åš:å†·ä¿¡å·â„ï¸ã€‚ç›¸åçƒ­ä¿¡å·ğŸ”¥æ˜¯é‚£ç§æ—¢æ˜¯æ²¡æœ‰è¢«è®¢é˜…ä¹Ÿä¼šæ‰§è¡Œçš„ä¿¡å·ã€‚</p>
<p>åœ¨ä¸‹ä¸€æ­¥ä»¬æˆ‘ä»¬ä¼šå…·ä½“çš„è®²è§£äºŒè€…çš„åŒºåˆ«ã€‚ç°åœ¨ä½ åªéœ€è¦ç†è§£çš„æ˜¯: å› ä¸ºä½ åˆå§‹åŒ–å‡ºæ¥çš„æ˜¯ä¸€ä¸ªå†·â„ï¸ä¿¡å·<code>Hello dummy ğŸ£</code>è¿™ä¸ªå€¼æ˜¯ä¸ä¼šè¢«å‘é€å‡ºæ¥çš„ã€‚å†·ä¿¡å·â„ï¸åªæœ‰åœ¨æœ‰ä¸œè¥¿è®¢é˜…ä¹‹åæ‰ä¼šå‘é€æ¶ˆæ¯ã€‚</p>
<p>æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„æ¥åˆ†æä¸€ä¸‹è¿™ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ„æ€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;...&#125;</div></pre></td></tr></table></figure>
<p>è¿™è¡Œä»£ç ä¿è¯è¿™ä¸ª <code>Observable</code> ä¿¡å·åœ¨ä¸»çº¿ç¨‹ä¸­å‘é€æ¶ˆæ¯ã€‚å…¶å® RxSwift æ˜¯æœ‰ä¸€ä¸ªè°ƒåº¦æœºåˆ¶, ä½†æ˜¯æˆ‘ç°åœ¨è¿˜ä¸æƒ³é‚£ä¹ˆæ—©å‘Šè¯‰ä½ , ä¸ç„¶ä½ è¯¥è®°ä¸å€¼äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">observer.onNext(<span class="string">"Hello dummy ğŸ£"</span>)</div></pre></td></tr></table></figure>
<p>ä¸€ä¸ª <code>Observable</code> ä¿¡å·å‘å‡ºçš„æ¶ˆæ¯ä»æ—¶é—´ä¸Šæ¥çœ‹, å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ª <strong>åºåˆ—</strong>ã€‚åœ¨è¿™ä¸ªåºåˆ—ä¸­å¯èƒ½æœ‰æ— é™å¤šçš„å€¼ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>onNext</code> æ–¹æ³•ç±»å°†è¿™äº›å€¼å‘é€å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">observer.onCompleted()</div></pre></td></tr></table></figure>
<p>å½“è¿™ä¸ªåºåˆ—å·²ç»å‘é€å®Œäº†æ‰€æœ‰çš„å€¼ä¹‹åï¼Œå®ƒå¯ä»¥å‘é€ä¸€ä¸ª <code>Completed</code> æˆ–è€… <code>Error</code>å‡ºæ¥ã€‚ä¹‹åè¿™ä¸ªä¿¡å·å°±ä¸èƒ½åœ¨äº§ç”Ÿæ›´å¤šçš„å€¼äº†, ç„¶åå°±ä¼šéšç€ä¸€ä¸ªé—­åŒ…è¢«é‡Šæ”¾æ‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">Disposables</span>.create()</div></pre></td></tr></table></figure>
<p>æ¯ä¸€ä¸ª  <code>Observable</code> ä¿¡å·éƒ½è¦è¿”å›ä¸€ä¸ª <code>Disposable</code>.</p>
<p>ä½¿ç”¨ <code>Disposables.create()</code> å¦‚æœä½ ä¸æƒ³åœ¨ä¿¡å·è¢«é‡Šæ”¾çš„æ—¶å€™å¤„ç†å…¶ä»–äº‹æƒ…ã€‚ä½ å¯ä»¥çœ‹çœ‹<a href="https://github.com/ReactiveX/RxSwift/blob/master/RxSwift/Disposables/NopDisposable.swift">NopDisposable</a>çš„å®ç°ï¼Œä½ ä¼šå‘ç°ï¼Œä»–ä»€ä¹ˆäº‹æƒ…éƒ½æ²¡æœ‰åšï¼Œåªæ˜¯ä¸€äº›ç©ºæ–¹æ³•ã€‚</p>
<h3 id="Disposable"><a href="#Disposable" class="headerlink" title="Disposable"></a>Disposable</h3><p><code>Disposable</code> å¯¹è±¡å¿…é¡»è¦åœ¨ <code>Observable</code> ä¸­è¿”å›, å®ƒæ˜¯ç”¨æ¥åœ¨<code>Observable</code>ä¸èƒ½å†æ­£å¸¸çš„å®Œæˆçš„æ—¶å€™æ¸…é™¤æ‰è¿™äº›ä¿¡å·çš„ã€‚æ¯”å¦‚è¯´ä½ å¯ä»¥ä½¿ç”¨ <strong>AnonymousDisposable</strong>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">Disposables</span>.create(with: &#123;</div><div class="line">    connection.close()</div><div class="line">    database.closeImportantSomething()</div><div class="line">    cache.clear()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>åªæœ‰å½“ä¿¡å·è¢«æå‰é‡Šæ”¾æˆ–è€…ç¨‹åºæ‰‹åŠ¨è°ƒç”¨äº† <code>dispose()</code> æ–¹æ³•, <code>Disposable</code> æ‰ä¼šè¢«è°ƒç”¨ã€‚ä½†æ˜¯åœ¨å¤šæ•°æƒ…å†µä¸‹, <code>dispose()</code> æ–¹æ³•éƒ½æ˜¯é€šè¿‡ <strong>Dispose Bags</strong> è‡ªåŠ¨è°ƒç”¨çš„ã€‚åˆ«ç€æ€¥ï¼Œä½ å¯ä»¥åœ¨ä¸€äº›æ›´å…·ä½“çš„ä¾‹å­ä¸­è‡ªå·±å®ç°è¿™ä¸ªä¸œè¥¿ã€‚</p>
<h3 id="Observer-ğŸ•µ"><a href="#Observer-ğŸ•µ" class="headerlink" title="Observer ğŸ•µ"></a>Observer ğŸ•µ</h3><p>æˆ‘ä»¬åˆ›å»ºçš„ <code>Observable</code> æ˜¯å†·ä¿¡å·â„ï¸ã€‚ é™¤éæˆ‘ä»¬è®¢é˜…äº†å®ƒï¼Œä¸ç„¶å®ƒæ˜¯ä¸ä¼šå‘é€ä¿¡å·çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">observable.subscribe(onNext: &#123;(element) <span class="keyword">in</span></div><div class="line">  <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯è®¢é˜…ä¿¡å·çš„æ–¹æ³•ã€‚åœ¨ <code>subscribeNext</code> æ–¹æ³•ä¸­ä¸€ä¸ªè®¢é˜…å°±å‘ç”Ÿäº†ã€‚è¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ª <code>Disposable</code>.è¿™ä¸ª <code>Disposable</code> å°±æ˜¯å¯¹è¿™ä¸ªè®¢é˜…çš„è®°å½•</p>
<p>è¿™ä¸ª <code>Observable</code> å°±å¼€å§‹å·¥ä½œäº†, 10ç§’ä¹‹å, ä½ å°±ä¼šåœ¨æ§åˆ¶å°çœ‹è§</p>
<blockquote>
<p>Hello dummy ğŸ£</p>
</blockquote>
<p><code>subscribe(onNext:)</code> åªä¼šåœ¨Nextäº‹ä»¶å‘é€å‡ºæ¥çš„æ—¶å€™å“åº”ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>subscribe(onCompleted:)</code> å’Œ <code>subscribe(onError:)</code> å“åº”å¯¹åº”çš„äº‹ä»¶ã€‚</p>
<h3 id="Dispose-Bag-ğŸ—‘"><a href="#Dispose-Bag-ğŸ—‘" class="headerlink" title="Dispose Bag ğŸ—‘"></a>Dispose Bag ğŸ—‘</h3><p>å”¯ä¸€ä¸€ä¸ªè¿˜æœ‰ç‚¹ç¥ç§˜çš„ä¸œè¥¿å°±æ˜¯ <code>addDisposableTo</code> è¿™ä¸ªæ–¹æ³•äº†ã€‚</p>
<blockquote>
<p>Dispose bags are used to return ARC like behavior to RX. When a DisposeBag is deallocated, it will call dispose on each of the added disposables.</p>
<p>Dispose bags å°±åƒæ˜¯ä¸€ä¸ªåƒåœ¾ç­ã€‚å°±åƒæ˜¯ AutoreleasePool ä¸€æ ·ï¼Œå½“è¿™ä¸ªåƒåœ¾ç­è¢«é‡Šæ”¾çš„æ—¶å€™, é‡Œé¢çš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè¢«é‡Šæ”¾æ‰ã€‚</p>
</blockquote>
<p>å½“ä½ è®¢é˜…ä¸€ä¸ªä¿¡å·çš„æ—¶å€™, ä½ å°±éœ€è¦æŠŠä½ åˆ›å»ºå‡ºæ¥çš„ <code>Disposable</code> æ·»åŠ åˆ°è¿™ä¸ªæ¡†é‡Œé¢ã€‚å½“è¿™çš„æ¡†è¢«é‡Šæ”¾çš„æ—¶å€™(ExampleClass å¯¹è±¡ dealloc çš„æ—¶å€™)ã€‚è¿™äº›æ²¡æœ‰æ‰§è¡Œå®Œçš„<code>Disposable</code>å°±ä¼šè¢«é‡Šæ”¾æ‰ã€‚</p>
<p>å®ƒè¢«ç”¨ä½œé‡Šæ”¾åœ¨é—­åŒ…ä¸­å¼•ç”¨çš„å€¼, ä»¥åŠæ²¡ç”¨çš„èµ„æº, æ¯”å¦‚è¯´, ä¸€ä¸ª HTTP ç½‘ç»œè¿æ¥, æ•°æ®åº“è¿æ¥, æˆ–è€…æ˜¯ç¼“å­˜çš„å¯¹è±¡ã€‚</p>
<p>å¦‚æœä½ è¿˜æ˜¯ä¸æ‡‚, ä¸€ä¼šå„¿å†ä¸¾ä¸€ä¸ªä¾‹å­ã€‚</p>
<h3 id="Observable-operators"><a href="#Observable-operators" class="headerlink" title="Observable operators"></a>Observable operators</h3><p><code>create</code> åªæ˜¯ä¿¡å·è¯¸å¤šæ“ä½œæ–¹æ³•ä¸­çš„ä¸€ä¸ªè€Œå·²ï¼Œå®ƒè¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ä¿¡å·ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ ReactiveX<br>çš„<a href="http://reactivex.io/documentation/operators.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚å“ªé‡Œæœ‰æ‰€æœ‰çš„æ“ä½œæ–¹æ³•ã€‚æˆ‘åªæ˜¯ä¸¾ä¸€äº›å¸¸è§çš„ä¾‹å­ã€‚</p>
<h4 id="Just"><a href="#Just" class="headerlink" title="Just"></a>Just</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.just(<span class="string">"Hello again dummy ğŸ¥"</span>);</div><div class="line">observable.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">        </div><div class="line">observable.subscribe(onCompleted: &#123; </div><div class="line">    <span class="built_in">print</span>(<span class="string">"I'm done"</span>)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>Hello again dummy ğŸ¥<br>Iâ€™m done</p>
</blockquote>
<p><strong>Just</strong> just åˆ›å»ºäº†ä¸€ä¸ªæ™ºèƒ½é‡Šæ”¾ä¸€ä¸ªå€¼çš„ä¿¡å·ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªä¿¡å·åºåˆ—ä¸­çš„äº‹ä»¶ï¼Œæ˜¯è¿™æ ·çš„:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.Next(&quot;Hello&quot;) -&gt;  .Completed</div></pre></td></tr></table></figure>
<h4 id="Interval"><a href="#Interval" class="headerlink" title="Interval"></a>Interval</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">0.3</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">observable.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">   <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>0<br>1<br>2<br>3<br>â€¦</p>
</blockquote>
<p><strong>Interval</strong> æ˜¯ä¸€ä¸ªéå¸¸å…·ä½“çš„æ“ä½œç¬¦å·ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­, å®ƒä» 0 æ¯0.3ç§’é€’å¢, <code>scheduler</code> æ˜¯ç”¨æ¥å®šä¹‰å¼‚æ­¥è¡Œä¸ºçš„ã€‚</p>
<h4 id="Repeat"><a href="#Repeat" class="headerlink" title="Repeat"></a>Repeat</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.repeatElement(<span class="string">"This is fun ğŸ™„"</span>)</div><div class="line">observable.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">   <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>This is fun ğŸ™„<br>This is fun ğŸ™„<br>This is fun ğŸ™„<br>This is fun ğŸ™„<br>â€¦</p>
</blockquote>
<p><strong>repeat</strong> ä¼šæ— é™çš„é‡å¤æˆ‘ä»¬ç»™å®šçš„å€¼ã€‚ä½ å¯ä»¥é€šè¿‡å®šä¹‰ <code>scheduler</code> ç±»å‹çš„æ–¹æ³•æ¥æ§åˆ¶çº¿ç¨‹çš„è¡Œä¸ºã€‚</p>
<p>ç›®å‰ä¸ºæ­¢, å¯èƒ½éƒ½ä¸æ˜¯éå¸¸çš„ç»™åŠ›ã€‚ä½†æ˜¯çŸ¥é“å…¶ä»–çš„æ“ä½œæ˜¯å¿…è¦çš„ã€‚å¦å¤–ä¸€ä»¶å¾ˆé‡è¦çš„äº‹æƒ…æ¶˜ï¼Œè¿™æ˜¯ RxSwift æœ€æœ‰ç”¨çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="Real-life-example"><a href="#Real-life-example" class="headerlink" title="Real life example"></a>Real life example</h3><p>ç°åœ¨æˆ‘ä»¬å¼€å§‹å¿«é€Ÿçš„é€šè¿‡ä¸€ä¸ªä¾‹å­å·©å›ºä¸€ä¸‹è¿™äº›çŸ¥è¯†ã€‚æˆ‘ä»¬å¯¹ RxSwift çš„äº†è§£ç›®å‰ä¸ºæ­¢æ˜¯éå¸¸æœ‰é™çš„ã€‚æ‰€æœ‰æˆ‘ä»¬å…ˆä½¿ç”¨ä¸€ä¸ªç®€å•çš„ MVC çš„ä¾‹å­ã€‚æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼Œ å®ƒå¯ä»¥ä» google ä¸Šè·å–æ•°æ®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> RxCocoa</div><div class="line"><span class="keyword">import</span> RxSwift</div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">GoogleModel</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createGoogleDataObservable</span><span class="params">()</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create(&#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">            </div><div class="line">            <span class="keyword">let</span> session = <span class="type">URLSession</span>.shared</div><div class="line">            <span class="keyword">let</span> task = session.dataTask(with: <span class="type">URL</span>(string: <span class="string">"https://www.google.com"</span>)!) &#123; (data, response, error) <span class="keyword">in</span></div><div class="line">                </div><div class="line">                <span class="comment">// æˆ‘ä»¬éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­æ›´æ–°</span></div><div class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> err = error &#123;</div><div class="line">                        <span class="comment">// å¦‚æœè¯·æ±‚å¤±è´¥, ç›´æ¥å‘å¤„å¤±è´¥çš„äº‹ä»¶</span></div><div class="line">                        observer.onError(err)</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="comment">// è§£ææ•°æ®</span></div><div class="line">                        <span class="keyword">if</span> <span class="keyword">let</span> googleString = <span class="type">String</span>(data: data!, encoding: .ascii) &#123;</div><div class="line">                            <span class="comment">// å°†æ•°æ®å‘é€å‡ºå»</span></div><div class="line">                            observer.onNext(googleString)</div><div class="line">                        &#125; <span class="keyword">else</span> &#123;</div><div class="line">                            <span class="comment">// å¦‚æœè§£æå¤±è´¥å‘é€å¤±è´¥çš„äº‹ä»¶</span></div><div class="line">                            observer.onNext(<span class="string">"Error! Unable to parse the response data from google!"</span>)</div><div class="line">                        &#125;</div><div class="line">                        <span class="comment">// ç»“æŸè¿™ä¸ªåºåˆ—</span></div><div class="line">                        observer.onCompleted()</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            task.resume()</div><div class="line">            </div><div class="line">            <span class="comment">// è¿”å›ä¸€ä¸ª AnonymousDisposable</span></div><div class="line">            <span class="keyword">return</span> <span class="type">Disposables</span>.create(with: &#123;</div><div class="line">                <span class="comment">// å–æ¶ˆè¯·æ±‚</span></div><div class="line">                task.cancel()</div><div class="line">            &#125;)</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯éå¸¸ç®€å•çš„ã€‚ <code>createGoogleDataObservable</code>ä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥è¢«è®¢é˜…çš„ä¿¡å·ã€‚è¿™ä¸ªä¿¡å·åˆ›å»ºäº†ä¸€ä¸ªä» google è·å–æ•°æ®çš„ä»»åŠ¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.main.async &#123;...&#125;</div></pre></td></tr></table></figure>
<p>URLSession çš„ä»»åŠ¡æ˜¯åœ¨åå°çº¿ç¨‹ä¸­è¿›è¡Œçš„, æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ UI çº¿ç¨‹ä¸­æ›´æ–°ã€‚è®°ä½è¿˜æœ‰ä¸€ä¸ª <code>schedulers</code> è¿™ä¼šåœ¨æ›´é«˜çº§çš„é˜¶æ®µä»‹ç»å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">Disposables</span>.create(with: &#123;</div><div class="line"> task.cancel()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><code>Disposable</code> æ˜¯ä¸€ä¸ªç»™é•¿ç»™åŠ›çš„æœºåˆ¶ï¼š å¦‚æœè®¢é˜…è€…åœæ­¢è®¢é˜…è¿™ä¸ªä¿¡å·äº†ã€‚è¿™ä¸ªä»»åŠ¡å°±ä¼šè¢«å–æ¶ˆã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯è®¢é˜…è€…è¿™éƒ¨åˆ†çš„å†…å®¹äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"><span class="keyword">import</span> RxCocoa</div><div class="line"><span class="keyword">import</span> RxSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// é€šå¸¸å°±æ˜¯è¿™æ ·åˆ›å»º DisposeBag çš„</span></div><div class="line">    <span class="comment">// å½“è¿™ä¸ª controller è¢«é‡Šæ”¾æ‰çš„æ—¶å€™ï¼Œdisposebag</span></div><div class="line">    <span class="comment">// ä¹Ÿä¼šé‡Šæ”¾æ‰, å¹¶ä¸”æ‰€æœ‰ bag ä¸­çš„å…ƒç´ éƒ½ä¼šè°ƒç”¨ dispose() æ–¹æ³•</span></div><div class="line">    <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    <span class="keyword">let</span> model = <span class="type">GoogleModel</span>()</div><div class="line">    </div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> googleText: <span class="type">UITextView</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        <span class="comment">// è®°ä½ä½¿ç”¨ [weak self] æˆ–è€… [unowned self] æ¥é¿å…å¾ªç¯å¼•ç”¨</span></div><div class="line">        model.createGoogleDataObservable()</div><div class="line">            .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">                <span class="keyword">self</span>?.googleText.text = element</div><div class="line">            &#125;).addDisposableTo(disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¥å¥‡å—ï¼Ÿæ²¡æœ‰åè®®, æ²¡æœ‰ä»£ç†ã€‚åªæ˜¯å£°æ˜äº†ä¸€ä¸‹åœ¨ä¸€ä¸ªäº‹æƒ…å‘ç”Ÿçš„æ—¶å€™åº”è¯¥åšä»€ä¹ˆã€‚</p>
<p>åœ¨é—­åŒ…ä¸­è®°å¾—ä½¿ç”¨ <code>[weak self]</code> æˆ–è€… <code>[unowned self]</code> æ¥é¿å…å¾ªç¯å¼•ç”¨</p>
<p>è¿˜æœ‰ä¸€ç§æ›´å“åº”å¼çš„æ–¹æ³•æ¥ä¸º <code>UITextView</code> ç»‘å®šæ–‡æœ¬, ç»‘å®šã€‚ä½†é‚£æ˜¯æ›´é«˜çº§çš„å†…å®¹ã€‚</p>
<h3 id="Dispose-Bag-Example"><a href="#Dispose-Bag-Example" class="headerlink" title="Dispose Bag Example"></a>Dispose Bag Example</h3><p>ä½ å¯èƒ½å·²ç»å‘ç°äº† <code>disposeBag</code> æ˜¯ <code>ViewController</code> çš„ä¸€ä¸ªæˆå‘˜å˜é‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div></pre></td></tr></table></figure>
<p>å½“è¿™ä¸ªæ§åˆ¶å™¨è¢«é‡Šæ”¾çš„æ—¶å€™ï¼Œå®ƒä¹Ÿä¼šé‡Šæ”¾æ‰è¿™ä¸ª <code>disposeBag</code> .</p>
<p>å¦‚æœè¿™ä¸ª <code>disposeBag</code> è¢«é‡Šæ”¾æ‰ä¹‹å, å®ƒæˆ‘ä»¬æ·»åŠ åˆ°è¿™ä¸ª bag é‡Œé¢æ‰€æœ‰çš„ä¿¡å·éƒ½ä¼šè¢«é‡Šæ”¾æ‰ã€‚è€Œè¿™ä¸ªç½‘ç»œè¯·æ±‚ä»»åŠ¡å¦‚æœè¿˜æ²¡æœ‰ç»“æŸçš„è¯ä¹Ÿä¼šè¢«å–æ¶ˆã€‚<br>å¸Œæœ›æˆ‘è®²æ¸…æ¥šäº† <code>DisposeBag</code> çš„æœºåˆ¶ã€‚</p>
<h3 id="Thatâ€˜s-itï¼"><a href="#Thatâ€˜s-itï¼" class="headerlink" title="Thatâ€˜s itï¼"></a>Thatâ€˜s itï¼</h3><p>Demo æˆ‘å·²ç»æ”¾åœ¨ <a href="https://github.com/CepheusTeam/Translate">GitHub</a> ä¸Šäº†ã€‚</p>
<p>åˆ°ç°åœ¨, æˆ‘ä»¬å·²ç»å­¦åˆ°äº†å¦‚ä½•åˆ›å»ºä¸€ä¸ª Observable å’Œ è®¢é˜…è€…ã€‚ä»¥åŠ disposing æœºåˆ¶æ˜¯æ€ä¹ˆå›äº‹ã€‚å¸Œæœ›ä½ èƒ½å¤Ÿç†è§£åˆ°è¿™æ ·åšæ¯”å¹³å¸¸çš„è§‚å¯Ÿè€…æ¨¡å¼æœ‰ä»€ä¹ˆä¼˜åŠ¿ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æ˜¯å…³äº RxSwift æ“ä½œç¬¦çš„ã€‚</p>
<p><a href="http://swiftpearls.com/RxSwift-for-dummies-1-Observables.html#basic-example">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;RxSwift&lt;/strong&gt; çœŸçš„æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å­¦ä¹ çš„ä¸œè¥¿ã€‚éå¸¸é—æ†¾çš„æ˜¯æˆ‘æ²¡æœ‰ç ”ç©¶æ‰€æœ‰çš„æ¶æ„æ¨¡å¼MVVM VIPER Routingã€‚&lt;/p&gt;
&lt;p&gt;è¦éå¸¸å¥½çš„è®²å‡ºæ¥RxSwiftåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¹Ÿè¯´ä¸å¥½ã€‚æ¯•ç«Ÿä»–èƒ½åšå¤ªå¤šçš„äº‹æƒ…äº†ã€‚æ™®éè®¤ä¸ºï¼Œä»–æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ä¸­éå¸¸é‡è¦çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚åœ¨æœ€åˆçš„å®šä¹‰ä¸­,ä»–å¹¶ä¸å°±æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ã€‚ä»–æœ€åˆçš„è®¾è®¡çµæ„Ÿå°±æ˜¯æ¥è‡ªäºå‡½æ•°å“åº”å¼(&lt;strong&gt;FRP&lt;/strong&gt;), æ‰€ä»¥ä¹Ÿå¯ä»¥è¯´å®ƒåŒ…å«äº†å‡½æ•°å“åº”å¼çš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ &lt;strong&gt;FRP&lt;/strong&gt; çš„è¯, ä¸ç”¨æ‹…å¿ƒ, åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ä½ ä¼šè‡ªç„¶è€Œç„¶çš„ç†è§£ä»€ä¹ˆæ˜¯ &lt;strong&gt;FRP&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¯¹ RXSwift çš„æ·±å…¥ç ”ç©¶, æˆ‘å¾—åˆ°äº†å¾ˆå¤šçš„å¯å‘, åŒæ—¶ä¹Ÿè¢«å¾ˆå¤šçš„é—®é¢˜å›°æ‰°ã€‚ç›¸ä¿¡ä½ ä¹Ÿä¼šè¿™æ ·ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦èŠ±å¾ˆå¤šä¸ªå°æ—¶çš„æ—¶é—´æ¥é€‚åº”æ–°çš„æ€ç»´æ¨¡å¼ï¼Œå”¯ä¸€èƒ½ç¡®å®šçš„æ˜¯ï¼Œä¸€æ—¦ä½ é€‚åº”äº†ï¼Œä½ å°±å†ä¹Ÿä¸æƒ³å›åˆ°ä»å‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä¼šå°½å¯èƒ½çš„èŠ‚çº¦ä½ çš„æ—¶é—´ï¼Œå¹¶ä¸”è§£é‡Šçš„å°½å¯èƒ½çš„è¯¦ç»†ã€‚æƒ³æ•™å¹¼å„¿å›­çš„å°æœ‹å‹ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å§‹å­¦ä¹ ä¹‹å‰, è¯·ç¡®å®šä½ å·²ç»æŒæ¡äº† Swift å’Œ UIkit çš„åŸºç¡€çŸ¥è¯†. &lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>MVVM design pattern and RxSwift</title>
    <link href="http://www.CepheusSun.com/MVVM%20design%20pattern%20and%20RxSwift.html"/>
    <id>http://www.CepheusSun.com/MVVM design pattern and RxSwift.html</id>
    <published>2017-05-05T17:35:57.000Z</published>
    <updated>2017-05-19T02:44:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç¿»è¯‘è‡ª(<a href="http://lukagabric.com/mvvm-design-pattern-and-rxswift/">http://lukagabric.com/mvvm-design-pattern-and-rxswift/</a>)</p>
<h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><p>MVVM æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚ä»–æ˜¯ç¨‹åºçš„ä»£ç åˆ†ç¦»æˆä¸‰ä¸ªéƒ¨åˆ†: <code>Model</code>ã€<code>View</code>ã€<code>ViewModel</code>ã€‚ <code>Model</code> ä»£è¡¨æ•°æ®çš„è¡¨ç°, <code>View</code> ä»£è¡¨ç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ï¼Œ<code>ViewModel</code> ä»£è¡¨ç€æ¨¡å‹å±‚å’Œè§†å›¾å±‚çš„ä¸»è¦å…³è”å…³ç³»ã€‚</p>
<a id="more"></a>
<h4 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h4><p><code>Model</code> å°±æ˜¯æ•°æ®å±‚ã€‚ä»–åŒ…æ‹¬ä¸€å®šèŒƒå›´å†…çš„æ¨¡å‹ï¼Œå’Œä¸šåŠ¡é€»è¾‘ã€‚ <code>Model</code> å¹¶ä¸åªæ˜¯ä½ ç¨‹åºä¸­çš„é‚£äº›æ¨¡å‹ç»“æ„ä½“æˆ–è€…æ•°æ®åº“, ä»–ä¹ŸåŒ…å«äº†ä¸€äº› Service æˆ–è€…ç»„ä»¶, æ¯”å¦‚è¯´ <code>Alamofire</code>å’Œä¸€äº› SDK ç­‰ç­‰ã€‚</p>
<p><code>Model</code> å±‚æ‰§è¡Œæ‰€æœ‰è·Ÿæ•°æ®æœ‰å…³çš„æ“ä½œã€‚æ¯”å¦‚å¸¸è§çš„å¢åˆ æ”¹æŸ¥ç­‰ç­‰ã€‚è¿™äº›æ“ä½œç”± <code>ViewModel</code> å‘èµ·ã€‚å½“ <code>Model</code>æ“ä½œå®Œäº†æ•°æ®ä¹‹åå®ƒå†å‘Šè¯‰ <code>ViewModel</code> ç»“æœã€‚</p>
<p><code>Model</code> è¢« ViewModel æŒæœ‰ã€‚ä»–ä¹Ÿå¹¶ä¸çŸ¥é“è§†å›¾å±‚å’Œ <code>ViewModel</code> å±‚çš„äº‹æƒ…ã€‚å› ä¸ºä»–æ˜¯å’Œè¿™ä¸¤ä¸ªä¸œè¥¿å®Œå…¨éš”ç¦»å¼€çš„ã€‚</p>
<h4 id="View"><a href="#View" class="headerlink" title="View"></a>View</h4><p><code>View</code> æ˜¯ç¨‹åºä¸­æ•°æ®çš„å¯è§†åŒ–å±•ç¤ºã€‚å®ƒæ²¡æœ‰é€»è¾‘ç›¸å…³çš„ä¸œè¥¿ã€‚ä»–ä¸»è¦æœ‰æ¥å—ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œå’Œå°†æ•°æ®å±•ç¤ºåœ¨ç•Œé¢ä¸Šä¸¤ä¸ªäººç‰©ã€‚å®ƒå°†ç”¨æˆ·äº¤äº’çš„äº‹ä»¶è½¬å‘åˆ° <code>ViewModel</code> ä¸­è¿›è¡Œå¤„ç†ã€‚<code>View</code> è§‚å¯Ÿ <code>ViewModel</code> ä¸­æ•°æ®çš„å˜åŒ–, å¹¶ä¸”å°†è¿™äº›å˜åŒ–å±•ç°å‡ºæ¥ã€‚</p>
<p><code>View</code> å’Œ <code>Model</code> ä¹‹é—´æ²¡æœ‰ä»»ä½•ç›´æ¥çš„å…³è”ã€‚ ä»–ä»¬é€šè¿‡ <code>View</code> æŒæœ‰çš„ <code>ViewModel</code> äº§ç”Ÿå…³è”ã€‚</p>
<p>ç•Œé¢ä¿¡æ¯åœ¨ <code>xib</code> æˆ–è€… <code>StoryBoard</code> ä¸­é€šè¿‡ <code>UIKit</code> ä¸­çš„ç»„ä»¶è¢«å®šä¹‰ã€‚<code>ViewController</code> æ˜¯ç›´æ¥è·Ÿ <code>xib</code> æˆ–è€… <code>StoryBoard</code> å…³è”çš„ã€‚å®ƒåŒ…å«äº† <code>Xib</code> æˆ–è€… <code>StoryBoard</code> ä¸­çš„ <code>outlets</code> å’Œä¸€äº›å®šä¹‰ UI çš„é¢å¤–é…ç½®ã€‚ä»–ä¹Ÿè´Ÿè´£ç®¡ç† <code>View</code> çš„ç”Ÿå‘½å‘¨æœŸã€‚ åœ¨ MVVM ä¸­ä»–å’Œ <code>View</code> çš„å…³è”æ˜¯éå¸¸ç´§å¯†çš„, ä»–å…¶å®å°±æ˜¯ <code>View</code> å±‚çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h4 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h4><p><code>ViewModel</code> æ˜¯ç¨‹åºçš„é€»è¾‘å±‚ã€‚ä»–å¤„ç†ç”¨æˆ·äº¤äº’è¡Œä¸ºã€‚ç„¶åæ›´æ–°æ•°æ®ã€‚ç„¶ååœ¨é€šçŸ¥ <code>View</code> æ–°çš„æ•°æ®å’Œæ˜¾ç¤ºçš„æ–¹å¼ã€‚ä¸¾ä¸€ä¸ªå¾ˆå¹³å¸¸çš„ä¾‹å­ã€‚ä¸€ä¸ª ViewModel ä»Modelå±‚ä¸­è¯·æ±‚åˆ°äº†ä¸€äº›åŒ…å« <code>Date</code> çš„æ¨¡å‹ã€‚ è¿™ä¸ª Date å€¼å¹¶ä¸ä¼šè¢«å‘Šè¯‰ç»™ View, ViewModel å‘Šè¯‰ View çš„åº”è¯¥æ˜¯è¢«æ ¼å¼åŒ–ä¹‹åçš„å­—ç¬¦ä¸²ã€‚è§†å›¾ä¸ä¼šæ“ä½œæ•°æ®æœ¬èº«ï¼Œä»–åªè´Ÿè´£å°† ViewModel å‡†å¤‡å¥½çš„æ•°æ®å±•ç¤ºå‡ºæ¥ã€‚</p>
<h4 id="Similar-to-MVC"><a href="#Similar-to-MVC" class="headerlink" title="Similar to MVC"></a>Similar to MVC</h4><p>åœ¨ MVC è®¾è®¡æ¨¡å¼ä¸­, <code>ViewController</code> æ˜¯ <code>Model</code> å’Œ <code>View</code> ä¹‹é—´çš„æ¡¥æ¢ã€‚ä»–åªæœ‰è§†å›¾, ç®¡ç†è§†å›¾çš„ç»“æ„ï¼Œç®¡ç†ç”¨æˆ·çš„äº¤äº’ã€‚ä»–è¿˜è´Ÿè´£ç®¡ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸ,åŠ è½½ã€æ˜¾ç¤ºã€æ¶ˆå¤±ç­‰ã€‚ä»–å…·æœ‰çš„å¦å¤–ä¸€ä¸ªæŒ‡è´£æ˜¯æ›´æ–°æ¨¡å‹æ•°æ®, è¿™å°±åŒ…æ‹¬äº†æ˜¾ç¤ºæ•°æ®çš„ç›¸å…³é€»è¾‘(ä¹Ÿå°±æ˜¯æ•°æ®çš„å¤„ç†,å¦‚ä¸Šæ–‡æåˆ°çš„è®² <code>Date</code> è½¬åŒ–æˆ <code>String</code> çš„é€»è¾‘)ã€‚å› ä¸ºä»–å…·æœ‰è¿™ä¹ˆå¤šçš„èŒè´£ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹ <code>Viewcontroller</code> å°±ä¼šå˜çš„éå¸¸å¤§ã€‚æ‰€ä»¥ä¹Ÿæœ‰äººç§°MVC ä¸º Massive View Controller</p>
<p>å‡ºç°å¤æ‚çš„ <code>viewController</code> ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ã€‚ç”±äº <code>Controller</code> æœ‰å¾ˆå¤šçš„èŒè´£ã€‚ä»£ç å°±ä¼šå˜çš„éå¸¸çš„å¤æ‚ã€‚è¿™å¾ˆæ˜æ˜¾å°±è¿èƒŒäº†å•ä¸€èŒè´£è¿™ä¸ªåŸåˆ™ã€‚è¿™ä¹Ÿè®©æµ‹è¯• <code>Controller</code> ä¸­çš„é€»è¾‘å˜æˆä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ã€‚<code>Controller</code> å’Œ <code>View</code> çš„é«˜åº¦è€¦åˆã€‚<code>view</code> çš„ç”Ÿå‘½å‘¨æœŸä½¿å¾—é€»è¾‘çš„åˆ†ç¦»å˜çš„ä¸é‚£ä¹ˆå®¹æ˜“ã€‚æˆ‘ä»¬å°±éœ€è¦èŠ±å¾ˆå¤§çš„ç²¾åŠ›æ¥å¤„ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>MVVM å’Œ MVC éå¸¸ç›¸ä¼¼ã€‚ æ­£å¦‚å‰æ–‡æ‰€è¯´ã€‚ MVC ä¸­çš„ <code>Controller</code> åŒæ—¶åŒ…å«äº†è§†å›¾å’Œç¨‹åºçš„é€»è¾‘ã€‚å°†é€»è¾‘ç›¸å…³çš„ä»£ç ä» <code>Controller</code> ä¸­åˆ†ç¦»å‡ºæ¥, æ”¾åˆ°ä»–è‡ªå·±æŠ½è±¡å‡ºæ¥çš„ç±»é‡Œé¢å»ã€‚è¿™æ—¶å€™çš„ <code>Controller</code>å°±åªå…³æ³¨è§†å›¾ç›¸å…³çš„äº‹æƒ…ã€‚åˆšåˆšåˆ†ç¦»å‡ºæ¥çš„è¿™ä¸ªç±»å¤„ç†ç›¸å…³çš„é€»è¾‘ã€‚è¿™ä¸ªç±»å°±æ˜¯ ViewModelã€‚ä»–å’Œ <code>Controller</code> å…·æœ‰ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚æ‰€ä»¥è¯´ MVVM å°±æ˜¯å°†é€»è¾‘ä»£ç ä» <code>controller</code>ä¸­åˆ†ç¦»åˆ° <code>ViewModel</code> ä¸­çš„ MVC</p>
<h4 id="Binding-data-from-ViewModel-to-View"><a href="#Binding-data-from-ViewModel-to-View" class="headerlink" title="Binding data from ViewModel to View"></a>Binding data from ViewModel to View</h4><p>æœ‰å¾ˆå¤šå°†æ•°æ®ç»‘å®šçš„æœºåˆ¶, æ¯”å¦‚ Swift ä¸­çš„å±æ€§è§‚å¯Ÿã€‚è§†å›¾å¯ä»¥å¯¹å¤–æä¾›ä¸€ä¸ª Closure æ¥è¿›è¡Œè§†å›¾çš„æ›´æ–°ã€‚è¿™ä¸ª Closure ç”¨æ¥é€šçŸ¥ View ä»–å…³è”çš„å±æ€§çš„æ›´æ–°ã€‚é™¤äº†ç†Ÿæ‚‰è§‚å¯Ÿã€‚æˆ‘ä»¬çš„ç¨‹åºè¿˜ç»å¸¸éœ€è¦å¤„ç†å„ç§å¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œå’Œé€šçŸ¥æˆ–è€…äº‹ä»¶çš„æµä¿¡æ¯ã€‚å‡½æ•°å“åº”å¼ç¼–ç¨‹(FRP)æ¡†æ¶ç®€ç›´å°±æ˜¯ä¸ºäº†å¤„ç†è¿™ç±»äº‹ä»¶è€Œç”Ÿçš„ã€‚ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šFRP æ¡†æ¶ï¼Œå¯¹ iOS å¼€å‘æ¥è¯´ï¼Œæœ€å‡ºåçš„åº”è¯¥æ˜¯ <code>RxSwift</code> å’Œ <code>ReactiveCocoa</code>äº†ã€‚ä¹‹å‰åœ¨ä¸€ç¯‡å¯¹æ¯”æ–‡ç« ä¸­æœ‰æåˆ°è¿‡, ä¸ç®¡æ€æ ·ï¼Œæˆ‘æ›´å–œæ¬¢ <code>RxSwift</code> </p>
<h3 id="RxSwift"><a href="#RxSwift" class="headerlink" title="RxSwift"></a>RxSwift</h3><p>æŒ‡ä»¤å¼ç¼–ç¨‹æ˜¯åŸºäºä¸€æ­¥ä¸€æ­¥æ˜ç¡®çš„æŒ‡ä»¤æ¥æ‰§è¡Œçš„ã€‚ä»–è¯¦ç»†çš„æè¿°äº†ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ã€‚å€¼åšä¸ºçŠ¶æ€è€Œå­˜åœ¨ã€‚ç”±äºç¨‹åºæ˜¯ä¸€æ­¥ä¸€æ­¥çš„æ‰§è¡Œçš„,æ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå€¼åœ¨ä¹‹åå‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™ä¸€æ”¹å˜ä¹Ÿä¸ä¼šè¢«ä¼ åˆ°ä¸‹ä¸€æ­¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æŒ‡ä»¤å¼ç¼–ç¨‹</span></div><div class="line">a = <span class="number">1</span></div><div class="line">b = <span class="number">2</span></div><div class="line"><span class="built_in">c</span> = a + b  <span class="comment">// c = 3</span></div><div class="line">a = <span class="number">5</span>   <span class="comment">// c = 3</span></div></pre></td></tr></table></figure>
<p>å“åº”å¼ç¼–ç¨‹,è·ŸæŒ‡ä»¤å¼ç›¸åã€‚ä»–æ˜¯åŸºäºå˜åŒ–çš„ã€‚ä»–åŸºäºå£°æ˜å¼ç¼–ç¨‹ï¼Œè¿™å°±æ„å‘³ç€ä»–å…³æ³¨çš„æ˜¯ç¨‹åºåº”è¯¥å®Œæˆä»€ä¹ˆï¼Œè€Œä¸æ˜¯ç¨‹åºæ˜¯æ€ä¹ˆè¿è¡Œçš„ã€‚å®ƒæ˜¯é€šè¿‡æ•°å­¦è¿ç®—å’Œå…¶ä»–åƒæ˜¯ <code>filter</code> <code>map</code> <code>reduce</code> ä¹‹ç±»çš„è¿ç®—æ“ä½œçš„è¿ç”¨æ¥å®ç°çš„ã€‚å¦‚ä½•å‡†ç¡®çš„è¿è¡Œè¢«äº¤ç»™åº•å±‚çš„ç¨‹åºè¯­è¨€æˆ–è€…æ¡†æ¶æ¥è€ƒè™‘äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å“åº”å¼ç¼–ç¨‹</span></div><div class="line">a = <span class="number">1</span></div><div class="line">b = <span class="number">2</span></div><div class="line"><span class="built_in">c</span> = a + b <span class="comment">// c = 3</span></div><div class="line">a = <span class="number">5</span>     <span class="comment">// c = 7</span></div></pre></td></tr></table></figure>
<p>RxSwift è®©ä½ èƒ½ç”¨é€šè¿‡å‡½æ•°å“åº”å¼ç¼–ç¨‹æ¥ç¼–å†™ä½ çš„ä»£ç ã€‚ä½¿ç”¨ RxSwift å¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºäº‹ä»¶æˆ–è€…æ•°æ®æµã€‚è¿™äº›äº‹ä»¶æˆ–è€…æ•°æ®æµå¯ä»¥äº’ç›¸ç»„åˆã€è½¬æ¢ã€‚å¹¶ä¸”æœ€ç»ˆè¢«è§‚å¯Ÿåˆ°ï¼ŒåŸºäºå€¼æ¥è¿›è¡Œä¸€äº›æ“ä½œã€‚</p>
<p>æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼Œåœ¨ MVVM ä¸­ View è§‚å¯Ÿ ViewModel ä¸­æ¨¡å‹çš„æ•°æ®ã€‚RxSwift æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•å¹¶ä¸”å¹²å‡€çš„æ–¹æ³•æ¥è§‚å¯Ÿè¿™äº›å€¼ï¼Œå¹¶ç»‘å®šåˆ°å¯¹åº”çš„ View ä¸Šã€‚</p>
<h4 id="Observable"><a href="#Observable" class="headerlink" title="Observable"></a>Observable</h4><p>Observable æ˜¯ RxSwift çš„ä¸»è¦æ„æˆéƒ¨åˆ†ã€‚ä»–æ˜¯ä¸€ä¸ªå¯ä»¥å¼‚æ­¥çš„æ¥å—å…ƒç´ çš„åºåˆ—ã€‚è¿™ä¸ªåºåˆ—å¯ä»¥æœ‰0ä¸ªæˆ–è€…å¾ˆå¤šä¸ªçš„å…ƒç´ ã€‚æœ‰ä¸‰ç§äº‹ä»¶èƒ½å¤ŸåŸºäºå®ƒå‘ç”Ÿã€‚ä¸‹ä¸€æ­¥(Next)ã€å®Œæˆ(Completed)ã€é”™è¯¯(Error)</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Event</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> next(<span class="type">Element</span>)   <span class="comment">// è¿™ä¸ªåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span></div><div class="line">    <span class="keyword">case</span> error(<span class="type">Swift</span>.<span class="type">Error</span>)<span class="comment">// è¿™ä¸ªåºåˆ—å‘ç”Ÿäº†é”™è¯¯</span></div><div class="line">    <span class="keyword">case</span> completed      <span class="comment">// è¿™ä¸ªåºåˆ—æˆåŠŸçš„å®Œæˆçš„æ‰€æœ‰äººä»»åŠ¡</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨ <code>Observable</code> çš„ <code>subscribe</code> æ–¹æ³•æ¥è®¢é˜…è¿™äº›äº‹ä»¶ã€‚ ç”¨è¿™ç§æ–¹æ³•å¯ä»¥åˆ†åˆ«å¤„ç†è¿™ä¸ªäº‹ä»¶çš„å„ç§æƒ…å†µã€‚</p>
<ul>
<li>OnNext: å¯ä»¥ä½¿ç”¨è¢«è®¢é˜…çš„å…ƒç´ å€¼ã€‚</li>
<li>OnCompleted: å½“è¿™ä¸ªåºåˆ—æˆåŠŸçš„å‘é€å®Œæ‰€æœ‰å…ƒç´ ä¹‹åä¼šè¢«è°ƒç”¨ã€‚</li>
<li>OnError: å½“è¿™ä¸ªåºåˆ—ä¸èƒ½å®Œæˆçš„æ—¶å€™è¢«è°ƒç”¨ã€‚</li>
</ul>
<p>åªè¦ <code>Complete</code> æˆ–è€… <code>Error</code> è¢«è§‚å¯Ÿåˆ°äº†, è¿™ä¸ªåºåˆ—å°±ä¸èƒ½äº§ç”Ÿä»»ä½•æ–°çš„å…ƒç´ äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observable.subscribe(</div><div class="line">    onNext: &#123; element <span class="keyword">in</span> ... &#125;, </div><div class="line">    onError: &#123; error <span class="keyword">in</span> ... &#125;,</div><div class="line">    onCompleted: &#123; ... &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<h4 id="Hot-and-cold-observables"><a href="#Hot-and-cold-observables" class="headerlink" title="Hot and cold observables"></a>Hot and cold observables</h4><p>å³ä½¿æ²¡æœ‰è¢«è§‚å¯Ÿä¹Ÿä¼šå‘é€æ¶ˆæ¯çš„ä¿¡å·è¢«ç§°ä½œçƒ­ä¿¡å·ã€‚æƒ³è±¡ä¸€ä¸‹ <code>NotificationCenter</code> æŠ€æœ¯æ²¡æœ‰å…¶ä»–å¯¹è±¡æ¥å—é€šçŸ¥, ä¹Ÿä¹Ÿç„¶ä¼šå‘é€å‡ºæ¥ã€‚å¦‚æœä½ åœ¨æŸä¸ªæ—¶å€™è®¢é˜…äº†è¿™ä¸ªä¿¡å·, ä¹‹å‰å‘å‡ºæ¥çš„æ¶ˆæ¯ä½ å°±ä¼šé”™è¿‡ã€‚</p>
<p>é‚£äº›åªæœ‰è¢«è®¢é˜…ä¹‹åæ‰å¼€å§‹å‘é€æ¶ˆæ¯çš„ä¿¡å·è¢«ç§°ä½œå†·ä¿¡å·ã€‚è¿™äº›èµ„æºä¼šè¢«åˆ†é…ç»™æ¯ä¸ªè®¢é˜…å¯¹è±¡ã€‚(æ¯”å¦‚è¯´ï¼Œä½ æ¯æ¬¡è®¢é˜…çš„ç½‘ç»œè¯·æ±‚å°±ä¼šè¢«é‡Šæ”¾)ä½†æ˜¯è¿™äº›èµ„æºå¯ä»¥è¢«å¤šä¸ªå¯¹è±¡å…±äº«(åªæœ‰ä¸€ä¸ªç½‘ç»œè¯·æ±‚è¢«é‡Šæ”¾äº†,ä½†å¯èƒ½è¿™è¢«å¾ˆå¤šä¸ªè§‚å¯Ÿè€…è®¢é˜…)</p>
<h4 id="Driver"><a href="#Driver" class="headerlink" title="Driver"></a>Driver</h4><p>Driver æ˜¯ RxCocoa æ¡†æ¶ä¸­çš„ä¸€ä¸ªå€¼ç±»å‹ã€‚å®ƒæ˜¯å¯¹ä¸€ä¸ªå¯è®¢é˜…çš„åºåˆ—çš„å°è£…ï¼Œå¦‚æœè¦æŠŠä¸€ä¸ªç®€å•çš„å€¼ç»‘å®šåˆ°Viewä¸Š, å®ƒä¼šæ˜¯ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ã€‚å¦‚æœ <code>Observables</code> å‘ç”Ÿäº†é”™è¯¯, ä½ éœ€è¦å¾ˆæ–¹ä¾¿çš„å°†ä¸€äº›ä¸œè¥¿å±•ç¤ºå‡ºæ¥ã€‚æ¯ä¸ªä¿¡å·éƒ½å¯ä»¥å¾ˆå®¹æ˜“çš„è¢«è½¬æ¢æˆ <code>Driver</code>ã€‚ å½“ä½ æä¾›äº†è¿™ä¸ªä¿¡å·å‘ç”Ÿé”™è¯¯çš„è¿”å›ä»€ä¹ˆçš„æ—¶å€™ï¼Œåªéœ€è¦ä½¿ç”¨ <code>asDriver</code> æ–¹æ³•å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.asDriver(onErrorJustReturn: <span class="string">"No items to display."</span>)</div></pre></td></tr></table></figure>
<p>æƒ³è±¡ä¸€ä¸‹å¼‚æ­¥æ“ä½œçš„åœºæ™¯ã€‚æ¯”å¦‚è¯´ç½‘ç»œè¯·æ±‚ã€‚æˆ‘ä»¬éœ€è¦åœ¨ç•Œé¢ä¸Šå±•ç¤ºè¿”å›å€¼çš„ä¸ªæ•°ã€‚åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿”å›å€¼çš„ä¸ªæ•°æ˜ å°„æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¯èƒ½è¿™ä¸ªå­—ç¬¦ä¸²çš„æ ¼å¼å¯èƒ½æ˜¯ <code>&quot;X item(s)&quot;</code> <code>Driver</code> è¿˜èƒ½å¤Ÿç¡®ä¿æˆ‘ä»¬éœ€è¦ä¿®æ”¹ UI çš„è¿™ä¸ªè®¢é˜…æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹å½“ä¸­çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> results: <span class="type">Observable</span>&lt;[<span class="type">SomeItem</span>]&gt; = ...</div><div class="line"><span class="keyword">let</span> resultsCountDriver = results</div><div class="line">    .<span class="built_in">map</span> &#123; <span class="string">"<span class="subst">\($<span class="number">0</span>.<span class="built_in">count</span>)</span> item(s)"</span> &#125;</div><div class="line">    .asDriver(onErrorJustReturn: <span class="string">"No items to display."</span>)</div></pre></td></tr></table></figure>
<p>æŠŠè¿™ä¸ªæ•°æ®ç»‘å®šåˆ° Label ä¸­å°±å¾ˆç®€å•äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">resultsCountDriver.drive(resultCountLabel.rx.text).disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h4 id="DisposeBag"><a href="#DisposeBag" class="headerlink" title="DisposeBag"></a>DisposeBag</h4><p>å¦‚æœä¸€ä¸ªåºåˆ—åœæ­¢äº†, ä½†æ˜¯å®ƒå¹¶æ²¡æœ‰è¢«é‡Šæ”¾æ‰ã€‚åœ¨ä»–å°±ä¼šé€ æˆèµ„æºçš„æµªè´¹å’Œå†…å­˜çš„æ³„æ¼ã€‚çŸ¥é“ä»–å®Œæˆäº†æˆ–è€…å¤„é”™äº†ã€‚å¦‚æœä¸€ä¸ªåºåˆ—æ²¡æœ‰åœæ­¢ï¼Œä¹Ÿæ²¡æœ‰å‡ºé”™ï¼Œè¿™ä¸ªèµ„æºå°±ä¼šè¢«æ°¸ä¹…çš„å ç”¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åœ¨éœ€è¦è®¢é˜…çš„å¯¹è±¡ä¸­ç”Ÿå‘½ä¸€ä¸ª <code>DisposeBag</code> çš„æˆå‘˜å˜é‡çš„åŸå› äº†ã€‚è¿™æ ·çš„è¯ï¼Œåªè¦è¿™ä¸ªå¯¹è±¡å‘—é‡Šæ”¾æ‰äº†ï¼Œæ‰€æœ‰ç›¸å…³çš„èµ„æºéƒ½ä¼šè¢«é‡Šæ”¾å¹¶ä¸”è¢«ç³»ç»Ÿå›æ”¶ã€‚</p>
<h4 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h4><p><code>Variable</code>è¡¨ç¤ºå¯ä»¥è¢«è®¢é˜…çš„çŠ¶æ€ã€‚å®ƒæ˜¯ä¿¡å·å’ŒåŠŸèƒ½èŒƒå¼ä¹‹é—´çš„æ¡¥æ¢ã€‚<code>Variable</code> æ€»æ˜¯åŒ…å«äº†æä¾›ç»™æ„é€ å‡½æ•°çš„åˆå§‹å€¼å½“ä½ è®¢é˜…å½“å‰çš„å€¼çš„æ—¶å€™ï¼Œè¿™ä¸ªåˆå§‹å€¼ä¼šç«‹é©¬è¢«å‘é€åˆ°è¿‡æ¥ã€‚(åªæœ‰æœ€æ–°å’Œå½“å‰å€¼ä¼šè¢«å‘å‡ºï¼Œæ—§çš„å€¼ä¸ä¼š)ã€‚ä¹Ÿå¯ä»¥ç›´æ¥è·å–æˆ–è€…è®¾ç½® <code>Variable</code> çš„å€¼ã€‚ä»–å†…éƒ¨çš„ä¿¡å·å¯ä»¥é€šè¿‡ <code>asObservable</code> æ–¹æ³•è·å–åˆ°ã€‚å¦å¤–, <code>Variable</code> æ°¸è¿œéƒ½ä¸ä¼šå‡ºé”™ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> variable = <span class="type">Variable</span>(<span class="string">"My Variable"</span>)</div><div class="line">variable.value = <span class="string">"Some value"</span></div><div class="line"><span class="keyword">let</span> variableObservable = variable.asObservable()</div><div class="line">variableObservable.subscribe(onNext: &#123; value <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(value) <span class="comment">//prints "Some value"</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œ æˆ‘å†™äº†ä¸€ä¸ª Demo æ¥æ¼”ç¤º MVVM + RxSwift. è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¨‹åºè·å–å¹¶ä¸”æ˜¾ç¤ºå¤©æ°”çš„æ•°æ®ã€‚è¿™ä¸ªappæœ‰ä¸‰ç§çŠ¶æ€ï¼Œ åŠ è½½ä¸­ï¼Œæ˜¾ç¤ºä¸­ï¼Œé”™è¯¯ã€‚æœ‰ä¸¤ç§å¯¹é”™è¯¯çš„å¤„ç†ï¼Œä¸€æ˜¯ï¼Œæˆ‘ä»¬åªæ˜¾ç¤ºé”™è¯¯ã€‚å¦ä¸€ä¸ªæ˜¯æ˜¾ç¤ºä¹‹å‰çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±æ˜¾ç¤ºé”™è¯¯ã€‚è¿™ä¸¤ç§å¤„ç†æ–¹å¼éƒ½æ˜¯é€šè¿‡å“åº”å¼ç¼–ç¨‹å’ŒæŒ‡ä»¤å¼ç¼–ç¨‹å®ç°çš„ã€‚</p>
<p>åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œåªæœ‰ ViewMoel ä¼šå‘ç”Ÿæ”¹å˜ã€‚ä½ å¯ä»¥çœ‹åˆ°ç»™åŠŸèƒ½å¢åŠ å¤æ‚æ€§(æ˜¾ç¤ºé”™è¯¯æˆ–è€…æ—§çš„æ•°æ®)ã€‚å¦‚æœä½¿ç”¨æŒ‡ä»¤å¼ç¼–ç¨‹ï¼Œå¯èƒ½ä¼šå¯¹ä»£ç å¸¦æ¥å¾ˆå¤šçš„å˜åŠ¨ã€‚è€Œä½¿ç”¨å“åº”å¼ç¼–ç¨‹ï¼Œåªéœ€è¦å¢åŠ é¢å¤–çš„çŠ¶æ€è€Œå·²ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ç¿»è¯‘è‡ª(&lt;a href=&quot;http://lukagabric.com/mvvm-design-pattern-and-rxswift/&quot;&gt;http://lukagabric.com/mvvm-design-pattern-and-rxswift/&lt;/a&gt;)&lt;/p&gt;
&lt;h3 id=&quot;MVVM&quot;&gt;&lt;a href=&quot;#MVVM&quot; class=&quot;headerlink&quot; title=&quot;MVVM&quot;&gt;&lt;/a&gt;MVVM&lt;/h3&gt;&lt;p&gt;MVVM æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚ä»–æ˜¯ç¨‹åºçš„ä»£ç åˆ†ç¦»æˆä¸‰ä¸ªéƒ¨åˆ†: &lt;code&gt;Model&lt;/code&gt;ã€&lt;code&gt;View&lt;/code&gt;ã€&lt;code&gt;ViewModel&lt;/code&gt;ã€‚ &lt;code&gt;Model&lt;/code&gt; ä»£è¡¨æ•°æ®çš„è¡¨ç°, &lt;code&gt;View&lt;/code&gt; ä»£è¡¨ç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ï¼Œ&lt;code&gt;ViewModel&lt;/code&gt; ä»£è¡¨ç€æ¨¡å‹å±‚å’Œè§†å›¾å±‚çš„ä¸»è¦å…³è”å…³ç³»ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://www.CepheusSun.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I</title>
    <link href="http://www.CepheusSun.com/RxSwift%20and%20the%20awesome%20things%20you%20can%20do%20with%20Reactive%20Programming%E2%80%8A%E2%80%94%E2%80%8APart%20I.html"/>
    <id>http://www.CepheusSun.com/RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I.html</id>
    <published>2017-05-04T16:00:00.000Z</published>
    <updated>2017-05-23T07:32:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç¿»è¯‘è‡ªå›½å¤–çš„ç¾å¥³å·¥ç¨‹å¸ˆ <a href="https://medium.com/@kenzai">Kenza Iraki</a> çš„æ–‡ç«  <a href="https://medium.com/@kenzai/rxswift-and-the-awesome-things-you-can-do-with-reactive-programming-part-i-3921137d251">RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I</a></p>
<p>ç¬¬ä¸€æ¬¡å¬è§å“åº”å¼ç¼–ç¨‹ï¼Œæˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„</p>
<center><br><img src="https://cdn-images-1.medium.com/max/1600/1*28RdzpfQBHklPcgLGsg0jw.png"><br></center>

<p>æ¥ä¸‹æ¥çš„å‡ æ¬¡å‡ æ¬¡æ¥è§¦, ä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ã€‚æ•´æ•´ä¸¤ä¸ªæ˜ŸæœŸä¹‹å,å³ä½¿æˆ‘åœ¨é¡¹ç›®ä¸­å†™äº†ä¸€äº›å“åº”å¼ä»£ç ã€‚æˆ‘ä¾ç„¶æ˜¯è¿™ç§æ„Ÿè§‰ã€‚</p>
<p>ç°åœ¨æˆ‘æ‰çŸ¥é“æœ‰å¾ˆå¤šçš„äººåœ¨ç¬¬ä¸€æ¬¡é‡è§å“åº”å¼ç¼–ç¨‹çš„æ—¶å€™è·Ÿæˆ‘æœ‰ä¸€æ ·çš„æ„Ÿè§‰ã€‚æˆ‘ä¹ŸçŸ¥é“å¾ˆå¤šäººçœ‹è¿‡å“åº”å¼çš„ä»£ç ä¹‹åå†ä¹Ÿä¸æƒ³å†è§åˆ°å®ƒäº†ï¼Œå› ä¸ºå¥¹çš„å­¦ä¹ æ›²çº¿å¤ªè¿‡é™¡å³­äº†ã€‚ä½†æ˜¯æˆ‘èƒ½å‘Šè¯‰ä½ ä¸€ä¸ªäº‹å®, æˆ‘è¿˜æ²¡å¬è¯´è¿‡ä¸€ä¸ªäººï¼Œ åœ¨æœ€ç»ˆç†è§£äº†ä»–æ˜¯æ€ä¹ˆå›äº‹ä¹‹å,åæ‚”å­¦ä¹ å“åº”å¼ç¼–ç¨‹ã€‚</p>
<p>æˆ‘çŸ¥é“ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºå“åº”å¼ç¼–ç¨‹ç†è®ºå’Œæ€æƒ³è¿˜æœ‰ RxSwift çš„çš„èµ„æº, ä¹Ÿæœ‰å¾ˆå¤šæ•™ä½ ç”¨Rxæ¥åšå„ç§äº‹æƒ…çš„æ•™ç¨‹(æ–‡æœ«æˆ‘ä¼šç»™å‡ºä¸€äº›é“¾æ¥)ã€‚è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ˜¯ä¸€ä¸ªæ•™ç¨‹, ä¹Ÿä¸ä¼šè§£é‡Š <code>stream</code> å’Œ <code>observables</code> æ˜¯æ€ä¹ˆå›äº‹ã€‚ æˆ‘è¦åšçš„æ˜¯æä¾›ä¸€ä¸ªç›´æ¥ã€æ˜ç¡®å¹¶ä¸”å°½é‡å°‘çš„ç†è®ºæ€»ç»“æ¥å‘Šè¯‰ä½  RxSwift èƒ½åšä»€ä¹ˆ, å¹¶ä¸”å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆä½ ä¼šå–œæ¬¢ä¸Šå®ƒã€‚ç”±äº Rx çš„ä¸–ç•Œæ·±ä¼¼æµ·, æ‰€ä»¥æˆ‘æ‰“ç®—å†™ä¸‰ç¯‡æ–‡ç« æ¥è®¨è®ºè¿™ä»¶äº‹æƒ…, è¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚</p>
<h2 id="Part1-Data-Binding-control-events-and-gesture-recognizers"><a href="#Part1-Data-Binding-control-events-and-gesture-recognizers" class="headerlink" title="Part1: Data Binding, control events and gesture recognizers"></a>Part1: Data Binding, control events and gesture recognizers</h2><h3 id="Data-Binding"><a href="#Data-Binding" class="headerlink" title="Data Binding"></a>Data Binding</h3><p>æ•°æ®ç»‘å®šçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªé«˜ç«¯çš„è¯è¯­, ä½†æ˜¯å®ƒå´æ˜¯ä¸€ä»¶éå¸¸ç®€å•çš„äº‹æƒ…ã€‚å‡å¦‚ä½ æœ‰ä¸€ä¸ª App éœ€è¦ç”¨æˆ·åœ¨ <code>UITextField</code> ä¸­è¾“å…¥å®ƒä»¬çš„åå­—ã€‚å½“ä»–ä»¬åœ¨æ‰“å­—çš„æ—¶å€™, ç”¨ â€œä½ å¥½ + ç”¨æˆ·è¾“å…¥çš„æ–‡å­—â€ å±•ç¤ºåœ¨ç•Œé¢ä¸Šã€‚è¿™æ ·ä¸€ä¸ªå¾ˆåŸºæœ¬çš„åœºæ™¯ã€‚å¦‚æœåœ¨ä¸æ˜¯å“åº”å¼çš„ç¨‹åºä¸­, æˆ‘ä»¬éœ€è¦éµå®ˆ <code>UITextFieldDelegate</code> è¿™ä¸ªåè®®, ç„¶ååœ¨ <code>ViewController</code> ä¸­å®ç° <code>textFieldDidEndEditing</code> è¿™ä¸ªæ–¹æ³•, æ¥ç›‘å¬ç”¨æˆ·ç”¨æˆ·çš„è¡Œä¸ºï¼Œç„¶åç»™ <code>Label</code> èµ‹å€¼ã€‚</p>
<p>è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯å‡å¦‚æœ‰å¾ˆå¤šçš„ <code>UITextField</code> æˆ‘ä»¬è¿˜è¦åœ¨ä»£ç†æ–¹æ³•ä¸­åˆ¤æ–­, åˆæˆ–è€…, æˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨è¾“å…¥çš„è¿‡ç¨‹ä¸­æ—¶æ—¶çš„åˆ·æ–° <code>Label</code>ã€‚è¿™ç§åœºæ™¯, æˆ‘ä»¬çš„ä»£ç ï¼Œçœ‹èµ·æ¥å°±ä¼šå¾ˆç³Ÿç³•ã€‚è‡³å°‘ä¸ä¼šå¾ˆä¼˜é›…å§ã€‚</p>
<p>åœ¨å“åº”å¼ä¸­, è¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨æ•°æ®ç»‘å®šæ¥å®ç°ã€‚è¯´ç™½äº†,å°±æ˜¯å°†ç”¨æˆ·åœ¨ <code>UITextField</code> ä¸­è¾“å…¥çš„æ–‡å­—ç»‘å®šåˆ° <code>UILabel</code> ä¸Šã€‚åœ¨ <code>RxSwift</code> çš„ä¸–ç•Œé‡Œ,  æ²¡æœ‰ä»€ä¹ˆæ¯”å¤„ç†æ•°æ®ç»‘å®šæ›´ç®€å•çš„äº†ã€‚åˆšæ‰æè¿°çš„éœ€æ±‚, æˆ‘ä»¬åªéœ€è¦é€šè¿‡ä»¥ä¸‹ä»£ç å°±å¯ä»¥å®ç°äº†ã€‚</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> namefield = <span class="type">UITextField</span>()</div><div class="line"><span class="keyword">var</span> helloLabel = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    nameField.rx.text.<span class="built_in">map</span> &#123; <span class="string">"Hello <span class="subst">\($<span class="number">0</span>)</span>"</span> &#125;</div><div class="line">                     .bindTo(helloLabel.rx.text)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ï¼Œ æˆ‘ä»¬é¦–å…ˆæ˜¯è·å–åˆ°äº† <code>UITextField</code> çš„æ–‡å­—ã€‚ ç„¶åæˆ‘ä»¬å°†è¿™æ®µæ–‡å­—æ˜ å°„æˆæƒ³è¦çš„æ ¼å¼ï¼Œç„¶åèµ‹å€¼ç»™ <code>UILabel</code>ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¹‹é—´è§åˆ°çš„åœ¨æ–‡å­—å‰é¢åŠ äº†ä¸€ä¸ª <code>&#39;hello&#39;</code>ï¼Œ å› ä¸º map æ˜¯ä¸€ä¸ªé—­åŒ…, å¯ä»¥ç®€å•çš„è¢«çœ‹ä½œä¸€ä¸ªåŒ¿åå‡½æ•°, å®ƒçš„å‚æ•°:<code>$0</code>(ç¬¬ä¸€ä¸ªå‚æ•°)ã€<code>$1</code>(ç¬¬äºŒä¸ªå‚æ•°)ä»¥æ­¤ç±»æ¨ã€‚ç„¶åå°†æ˜ å°„åçš„æ–‡å­—ç»‘å®šåˆ° <code>UILabel</code> çš„ <code>text</code> å±æ€§ä¸Šã€‚å°±è¿™ä¹ˆç®€å•ï¼Œè¿™ä¸ªéœ€æ±‚å°±å®Œæˆäº†ã€‚æ²¡æœ‰ä½¿ç”¨ä»£ç†ï¼Œä¹Ÿæ²¡æœ‰ç”¨å„ç§ if è¯­å¥, å°±ç®€å•æ˜äº†çš„å‡ è¡Œä»£ç ã€‚</p>
<p>ä½ å…ˆåœ¨è‚¯å®šåœ¨æƒ³,â€æ˜¯ï¼Œè¿™æ˜¯å¾ˆç¥å¥‡, ä½†æ˜¯çœŸçš„æœ‰å¾ˆå¤š app åœ¨è¿™æ ·åšå—â€ æˆ‘å¯ä»¥å‘Šè¯‰ä½ ï¼Œæ˜¯çš„ã€‚ä¸è¦ä»…ä»…æ˜¯é™åˆ¶åœ¨è¿™ç®€å•çš„å‡ ä¸ªä¾‹å­ä¸­ã€‚èƒ½å¤Ÿå°†æ•°æ®ç»‘å®šåˆ°è§†å›¾æ˜¯éå¸¸å¼ºå¤§çš„äº‹æƒ…ã€‚ä½ æƒ³æƒ³çœ‹ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªè§†å›¾çš„èƒŒæ™¯é¢œè‰²éœ€è¦æ ¹æ®å¤©æ°”ç”¨æˆ·çš„åœ°ç†ä½ç½®è€Œæ”¹å˜ã€‚åŸºäºå¯èƒ½å˜åŒ–çš„æ•°æ®å’Œä¸€äº›ç®€å•çš„é€»è¾‘, ä¸éœ€è¦å¤ªè¿‡æ·±å…¥çš„ç ”ç©¶å®ƒèƒŒåçš„ä¸œè¥¿ã€‚è¿™å°±æ˜¯æ•°æ®ç»‘å®šæœ€ä¸»è¦çš„æ€æƒ³ã€‚</p>
<h3 id="Control-Events-and-Gesture-Recognizers"><a href="#Control-Events-and-Gesture-Recognizers" class="headerlink" title="Control Events and Gesture Recognizers"></a>Control Events and Gesture Recognizers</h3><p>ç®€å•çš„è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯äº‹ä»¶å§ï¼äº‹ä»¶åŸºæœ¬ä¸Šæ˜¯ç”¨æˆ·èƒ½åœ¨ä½ çš„ app ä¸Šæ“ä½œçš„æ‰€æœ‰è¡Œä¸ºï¼Œç‚¹å‡»ã€æ»‘åŠ¨ã€æ‹–æ‹½ç­‰ç­‰ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é’®çš„æ—¶å€™ï¼Œä½ çš„ç¨‹åºä¼šç›‘å¬åˆ°ä¸€ä¸ª <code>UIControlEvent</code> çš„äº‹ä»¶ç±»å‹ <code>.touchUpInSide</code>ã€‚ å¦‚æœä½ ç”¨çš„æ˜¯ <code>StoryBoary</code> ï¼Œä½ å¯èƒ½åœ¨åˆ›å»º <code>IBAction</code> çš„æ—¶å€™ï¼Œæ²¡æœ‰æƒ³è¿‡è¿™ä¸ªæŒ‰é’®çš„è¡Œä¸ºã€‚æˆ‘å·²ç»å†™äº†ä¸€ç¯‡<a href="">why I never use storyboards</a> ã€‚å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·,è¿™æ®µä»£ç ä½ è‚¯å®šä¼šå¾ˆç†Ÿæ‚‰äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> button = <span class="type">UIButton</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    button.addTarget(#selector(<span class="type">ViewController</span>.loginUser), target: <span class="keyword">self</span>, event: .touchUpInside</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">loginUser</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// Implementation here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘çœŸçš„å¾ˆè®¨åŒ Selector, è¿™äº›ä»£ç å¤ªä¸æ˜ç¡®äº†ï¼Œè®©ä»£ç çœ‹èµ·æ¥å¾ˆä¹±ï¼Œä¹Ÿè®©æˆ‘ä»¬æ›´å®¹æ˜“çŠ¯é”™ã€‚ä½†æ˜¯ç”¨ Rx è¿™æ ·å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> button = <span class="type">UIButton</span>()</div><div class="line"><span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    button.rx.tap.subscribe &#123; onNext <span class="number">_</span> <span class="keyword">in</span></div><div class="line">        <span class="comment">// Implementation here</span></div><div class="line">    &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸è¦å¤ªè¿‡çº ç»“ <code>disposeBag</code> å’Œ <code>subscribe</code> è¿™äº›ä¸œè¥¿ã€‚ä½ åªè¦çŸ¥é“è¿™äº›æ˜¯ä¸€äº›å¿…é¡»çš„åŠ¨ä½œå°±å¯ä»¥äº†ã€‚(ä¸‹é¢ä¼šæœ‰ä»‹ç»)</p>
<p>å½“ä½ éœ€è¦ç»™ä¸å…·æœ‰ control event çš„æ§ä»¶æ·»åŠ ä¸€äº›é€»è¾‘äº‹ä»¶, æ¯”å¦‚ç»™ <code>UILabel</code> æˆ–è€… <code>UIImageView</code> æ·»åŠ ç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ã€‚æˆ‘ä»¬åªèƒ½ç»™ä»–æ·»åŠ æ‰‹åŠ¿ã€‚(è¿™æ˜¯æˆ‘åšè®¨åŒçš„ UIKit ç‰¹ç‚¹ä¹‹ä¸€)ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// Show example of gesture recognizers</span></div><div class="line">    <span class="keyword">let</span> gestureRecognizer = <span class="type">UITapGestureRecognizer</span>(target: <span class="keyword">self</span>, action: â€œhandleTap:â€)</div><div class="line">    label.addGestureRecognizer(gestureRecognizer)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">handleTap</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// Your logic here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¶ä»–çš„æ‰‹åŠ¿ï¼Œå¦‚æœä½ éœ€è¦å“åº”çš„è¯ã€‚ä½ å°±éœ€è¦ç»™è¿™ä¸ªæ§ä»¶æ·»åŠ å¤šä¸ª <code>gesture recognizer</code> ,ä½ è¦åˆ›å»ºå¤šä¸ªæ‰‹åŠ¿ï¼Œç„¶åæŒ¨ä¸ªæ·»åŠ åˆ°è¿™ä¸ªæ§ä»¶ä¸Šã€‚è¿™ä¸ä»…æ˜¯å¾ˆå¤šæ ·æ¿ä»£ç è¿™ä¹ˆç®€å•ï¼Œè¿™ä¹Ÿå¯èƒ½å¸¦æ¥ä¸€äº›éš¾ä»¥æƒ³è±¡çš„æ··ä¹±å’Œæ½œåœ¨çš„é”™è¯¯ã€‚</p>
<p>ä½ å¯ä»¥å·²ç»æƒ³åˆ°äº†ã€‚Rx è®©è¿™ä¸ªä¸œè¥¿å˜çš„å¼‚å¸¸çš„ç®€å•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    label.rx.gesture(.tap).subscribe &#123;onNext (gesture) <span class="keyword">in</span></div><div class="line">        <span class="comment">// Your logic here</span></div><div class="line">    &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡å¦‚ä½ éœ€è¦æ·»åŠ å¤šä¸ªæ‰‹åŠ¿çš„è¯:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    label.rx.gesture(.tap, .pan, .swipeUp).subscribe &#123; onNext (gesture) <span class="keyword">in</span></div><div class="line">        <span class="keyword">switch</span> gesture &#123;</div><div class="line">        <span class="keyword">case</span> .tap: <span class="comment">// Do something</span></div><div class="line">        <span class="keyword">case</span> .pan: <span class="comment">// Do something</span></div><div class="line">        <span class="keyword">case</span> .swipeUp: <span class="comment">// Do something </span></div><div class="line">        <span class="keyword">default</span>: <span class="keyword">break</span>       </div><div class="line">        &#125;        </div><div class="line">    &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™äº›éƒ½æ˜¯ä¸€ä¸ªå« <a href="https://github.com/RxSwiftCommunity/RxGesture">RxGesture</a> çš„ RxSwift åº“æä¾›çš„ã€‚</p>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p><a href="https://github.com/ReactiveX/RxSwift">ReactiveX/RxSwift</a></p>
<p><a href="https://realm.io/news/altconf-ash-furrow-functional-reactive-swift/">Functional Reactive Awesomeness With Swift</a></p>
<p><a href="https://medium.com/swift-programming/reactive-swift-3b6050375534">My journey with reactive programming in Swiftâ€Šâ€”â€Šand the iOS app that came out of it.</a></p>
<p><a href="https://github.com/DTVD/The-introduction-to-RxSwift-you-have-been-missing">DTVD/The-introduction-to-RxSwift-you-have-been-missing</a></p>
<p><a href="https://www.thedroidsonroids.com/blog/ios/rxswift-by-examples-1-the-basics/">RxSwift by Examples #1 â€“ The basics.</a></p>
<p><a href="https://news.realm.io/news/tryswift-Marin-Todorov-I-create-iOS-apps-is-RxSwift-for-me/">I create iOS apps - is RxSwift for me?</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ç¿»è¯‘è‡ªå›½å¤–çš„ç¾å¥³å·¥ç¨‹å¸ˆ &lt;a href=&quot;https://medium.com/@kenzai&quot;&gt;Kenza Iraki&lt;/a&gt; çš„æ–‡ç«  &lt;a href=&quot;https://medium.com/@kenzai/rxswift-and-the-awesome-things-you-can-do-with-reactive-programming-part-i-3921137d251&quot;&gt;RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å¬è§å“åº”å¼ç¼–ç¨‹ï¼Œæˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;center&gt;&lt;br&gt;&lt;img src=&quot;https://cdn-images-1.medium.com/max/1600/1*28RdzpfQBHklPcgLGsg0jw.png&quot;&gt;&lt;br&gt;&lt;/center&gt;

&lt;p&gt;æ¥ä¸‹æ¥çš„å‡ æ¬¡å‡ æ¬¡æ¥è§¦, ä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ã€‚æ•´æ•´ä¸¤ä¸ªæ˜ŸæœŸä¹‹å,å³ä½¿æˆ‘åœ¨é¡¹ç›®ä¸­å†™äº†ä¸€äº›å“åº”å¼ä»£ç ã€‚æˆ‘ä¾ç„¶æ˜¯è¿™ç§æ„Ÿè§‰ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘æ‰çŸ¥é“æœ‰å¾ˆå¤šçš„äººåœ¨ç¬¬ä¸€æ¬¡é‡è§å“åº”å¼ç¼–ç¨‹çš„æ—¶å€™è·Ÿæˆ‘æœ‰ä¸€æ ·çš„æ„Ÿè§‰ã€‚æˆ‘ä¹ŸçŸ¥é“å¾ˆå¤šäººçœ‹è¿‡å“åº”å¼çš„ä»£ç ä¹‹åå†ä¹Ÿä¸æƒ³å†è§åˆ°å®ƒäº†ï¼Œå› ä¸ºå¥¹çš„å­¦ä¹ æ›²çº¿å¤ªè¿‡é™¡å³­äº†ã€‚ä½†æ˜¯æˆ‘èƒ½å‘Šè¯‰ä½ ä¸€ä¸ªäº‹å®, æˆ‘è¿˜æ²¡å¬è¯´è¿‡ä¸€ä¸ªäººï¼Œ åœ¨æœ€ç»ˆç†è§£äº†ä»–æ˜¯æ€ä¹ˆå›äº‹ä¹‹å,åæ‚”å­¦ä¹ å“åº”å¼ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çŸ¥é“ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºå“åº”å¼ç¼–ç¨‹ç†è®ºå’Œæ€æƒ³è¿˜æœ‰ RxSwift çš„çš„èµ„æº, ä¹Ÿæœ‰å¾ˆå¤šæ•™ä½ ç”¨Rxæ¥åšå„ç§äº‹æƒ…çš„æ•™ç¨‹(æ–‡æœ«æˆ‘ä¼šç»™å‡ºä¸€äº›é“¾æ¥)ã€‚è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ˜¯ä¸€ä¸ªæ•™ç¨‹, ä¹Ÿä¸ä¼šè§£é‡Š &lt;code&gt;stream&lt;/code&gt; å’Œ &lt;code&gt;observables&lt;/code&gt; æ˜¯æ€ä¹ˆå›äº‹ã€‚ æˆ‘è¦åšçš„æ˜¯æä¾›ä¸€ä¸ªç›´æ¥ã€æ˜ç¡®å¹¶ä¸”å°½é‡å°‘çš„ç†è®ºæ€»ç»“æ¥å‘Šè¯‰ä½  RxSwift èƒ½åšä»€ä¹ˆ, å¹¶ä¸”å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆä½ ä¼šå–œæ¬¢ä¸Šå®ƒã€‚ç”±äº Rx çš„ä¸–ç•Œæ·±ä¼¼æµ·, æ‰€ä»¥æˆ‘æ‰“ç®—å†™ä¸‰ç¯‡æ–‡ç« æ¥è®¨è®ºè¿™ä»¶äº‹æƒ…, è¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Part1-Data-Binding-control-events-and-gesture-recognizers&quot;&gt;&lt;a href=&quot;#Part1-Data-Binding-control-events-and-gesture-recognizers&quot; class=&quot;headerlink&quot; title=&quot;Part1: Data Binding, control events and gesture recognizers&quot;&gt;&lt;/a&gt;Part1: Data Binding, control events and gesture recognizers&lt;/h2&gt;&lt;h3 id=&quot;Data-Binding&quot;&gt;&lt;a href=&quot;#Data-Binding&quot; class=&quot;headerlink&quot; title=&quot;Data Binding&quot;&gt;&lt;/a&gt;Data Binding&lt;/h3&gt;&lt;p&gt;æ•°æ®ç»‘å®šçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªé«˜ç«¯çš„è¯è¯­, ä½†æ˜¯å®ƒå´æ˜¯ä¸€ä»¶éå¸¸ç®€å•çš„äº‹æƒ…ã€‚å‡å¦‚ä½ æœ‰ä¸€ä¸ª App éœ€è¦ç”¨æˆ·åœ¨ &lt;code&gt;UITextField&lt;/code&gt; ä¸­è¾“å…¥å®ƒä»¬çš„åå­—ã€‚å½“ä»–ä»¬åœ¨æ‰“å­—çš„æ—¶å€™, ç”¨ â€œä½ å¥½ + ç”¨æˆ·è¾“å…¥çš„æ–‡å­—â€ å±•ç¤ºåœ¨ç•Œé¢ä¸Šã€‚è¿™æ ·ä¸€ä¸ªå¾ˆåŸºæœ¬çš„åœºæ™¯ã€‚å¦‚æœåœ¨ä¸æ˜¯å“åº”å¼çš„ç¨‹åºä¸­, æˆ‘ä»¬éœ€è¦éµå®ˆ &lt;code&gt;UITextFieldDelegate&lt;/code&gt; è¿™ä¸ªåè®®, ç„¶ååœ¨ &lt;code&gt;ViewController&lt;/code&gt; ä¸­å®ç° &lt;code&gt;textFieldDidEndEditing&lt;/code&gt; è¿™ä¸ªæ–¹æ³•, æ¥ç›‘å¬ç”¨æˆ·ç”¨æˆ·çš„è¡Œä¸ºï¼Œç„¶åç»™ &lt;code&gt;Label&lt;/code&gt; èµ‹å€¼ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯å‡å¦‚æœ‰å¾ˆå¤šçš„ &lt;code&gt;UITextField&lt;/code&gt; æˆ‘ä»¬è¿˜è¦åœ¨ä»£ç†æ–¹æ³•ä¸­åˆ¤æ–­, åˆæˆ–è€…, æˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨è¾“å…¥çš„è¿‡ç¨‹ä¸­æ—¶æ—¶çš„åˆ·æ–° &lt;code&gt;Label&lt;/code&gt;ã€‚è¿™ç§åœºæ™¯, æˆ‘ä»¬çš„ä»£ç ï¼Œçœ‹èµ·æ¥å°±ä¼šå¾ˆç³Ÿç³•ã€‚è‡³å°‘ä¸ä¼šå¾ˆä¼˜é›…å§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å“åº”å¼ä¸­, è¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨æ•°æ®ç»‘å®šæ¥å®ç°ã€‚è¯´ç™½äº†,å°±æ˜¯å°†ç”¨æˆ·åœ¨ &lt;code&gt;UITextField&lt;/code&gt; ä¸­è¾“å…¥çš„æ–‡å­—ç»‘å®šåˆ° &lt;code&gt;UILabel&lt;/code&gt; ä¸Šã€‚åœ¨ &lt;code&gt;RxSwift&lt;/code&gt; çš„ä¸–ç•Œé‡Œ,  æ²¡æœ‰ä»€ä¹ˆæ¯”å¤„ç†æ•°æ®ç»‘å®šæ›´ç®€å•çš„äº†ã€‚åˆšæ‰æè¿°çš„éœ€æ±‚, æˆ‘ä»¬åªéœ€è¦é€šè¿‡ä»¥ä¸‹ä»£ç å°±å¯ä»¥å®ç°äº†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://www.CepheusSun.com/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="http://www.CepheusSun.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>RAC æœ€åŸºæœ¬çš„ä¸œè¥¿-- RACSignal</title>
    <link href="http://www.CepheusSun.com/RAC%20%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E4%B8%9C%E8%A5%BF--%20RACSignal.html"/>
    <id>http://www.CepheusSun.com/RAC æœ€åŸºæœ¬çš„ä¸œè¥¿-- RACSignal.html</id>
    <published>2017-04-26T16:00:00.000Z</published>
    <updated>2017-04-27T09:20:19.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åŸºç¡€ç”¨æ³•"><a href="#åŸºç¡€ç”¨æ³•" class="headerlink" title="åŸºç¡€ç”¨æ³•"></a>åŸºç¡€ç”¨æ³•</h3><ul>
<li>åˆ›å»ºä¿¡å·</li>
<li>è®¢é˜…ä¿¡å·</li>
<li>å‘é€ä¿¡å·</li>
</ul>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1.åˆ›å»ºä¿¡å·(cold)</span></div><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;</div><div class="line">    <span class="comment">// 3.å‘é€ä¿¡å·</span></div><div class="line">    [subscriber sendNext:<span class="string">@"hello, RAC."</span>];</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 2.è®¢é˜…ä¿¡å·(hot)</span></div><div class="line">[signal subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>åœ¨åˆ›å»º RACSignal çš„æ—¶å€™, </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (RACSignal&lt;ValueType&gt; *)createSignal:(RACDisposable * _Nullable (^)(id&lt;RACSubscriber&gt; subscriber))didSubscribe;</div></pre></td></tr></table></figure>
<p>æ–¹æ³•ä¼ å…¥çš„ block ä¼šè¿”å›ä¸€ä¸ª <code>RACDisposable</code> å¯¹è±¡ã€‚</p>
<p>å°†ä»¥ä¸Šä»£ç ä¸­çš„ <code>return nilï¼›</code> æ›¿æ¢æˆå¦‚ä¸‹ä»£ç </p>
<a id="more"></a>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line"><span class="comment">// è®¢é˜…è€…é‡Šæ”¾æ—¶ä¼šè‡ªåŠ¨å–æ¶ˆè®¢é˜…ä¿¡å·, ä½†æ˜¯åªè¦è®¢é˜…è€…æ²¡æœ‰é‡Šæ”¾, å°±ä¸ä¼šå–æ¶ˆè®¢é˜…ä¿¡å·.</span></div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ä¿¡å·è¢«å–æ¶ˆè®¢é˜…äº†!"</span>);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™åœ¨ <code>[subscriber sendComplete]</code> çš„æ—¶å€™ä¼šæ‰§è¡Œåˆ›å»º <code>RACDisposable</code> ä¼ å…¥çš„ <code>block</code> </p>
<p><strong>å¦‚ä½•ä¸»åŠ¨å–æ¶ˆè®¢é˜…</strong></p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">_disposable = [signal subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, x);</div><div class="line">&#125;];<span class="comment">// å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™é‡Œçš„ subscribeNext è¿”å›çš„å°±æ˜¯å–æ¶ˆè®¢é˜…è¿™ä¸ª signal çš„ RACDisoisable</span></div><div class="line"><span class="comment">// ä¸ç®¡ åœ¨åˆ›å»º signal çš„æ—¶å€™ return çš„æ˜¯ nil è¿˜æ˜¯ RACDisposable å¯¹è±¡</span></div><div class="line">[_disposable dispose]</div></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;ReactiveObjC.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) RACDisposable *disposable;    </div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    RACSignal *signal = [RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber ) &#123;       </div><div class="line">        [subscriber sendNext:<span class="string">@"hello, RAC."</span>];</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                    [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                        [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                            [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                                [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                                    [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                                    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                                        [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                                        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                                            [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">                                        &#125;);</div><div class="line">                                    &#125;);</div><div class="line">                                &#125;);</div><div class="line">                            &#125;);</div><div class="line">                        &#125;);</div><div class="line">                    &#125;);</div><div class="line">                &#125;);</div><div class="line">            &#125;);</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// å¦‚æœä¿¡å·ä¸å†å‘é€æ•°æ®, æœ€å¥½è°ƒç”¨ä¿¡å·çš„å‘é€å®Œæˆæ–¹æ³•, è¯¥æ–¹æ³•ä¼šè°ƒç”¨ [RACDisposable disposable] å–æ¶ˆè®¢é˜…ä¿¡å·.</span></div><div class="line">        <span class="comment">//[subscriber sendCompleted];</span></div><div class="line">        </div><div class="line">        <span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line">            <span class="comment">// è®¢é˜…è€…é‡Šæ”¾æ—¶ä¼šè‡ªåŠ¨å–æ¶ˆè®¢é˜…ä¿¡å·, ä½†æ˜¯åªè¦è®¢é˜…è€…æ²¡æœ‰é‡Šæ”¾, å°±ä¸ä¼šå–æ¶ˆè®¢é˜…ä¿¡å·.</span></div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ä¿¡å·è¢«å–æ¶ˆè®¢é˜…äº†!"</span>);</div><div class="line">        &#125;];</div><div class="line">        <span class="comment">//å¦‚æœå–æ¶ˆè®¢é˜…çš„æ—¶å€™ä¸éœ€è¦åšä»€ä¹ˆäº‹æƒ…, return nil ä¹Ÿæ²¡æœ‰å…³ç³»</span></div><div class="line">        <span class="comment">//return nil;</span></div><div class="line">    &#125;];</div><div class="line">    _disposable = [signal subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)touchesBegan:(<span class="built_in">NSSet</span>&lt;<span class="built_in">UITouch</span> *&gt; *)touches withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</div><div class="line">    <span class="comment">// ä¸»åŠ¨å–æ¶ˆè®¢é˜…ä¿¡å·</span></div><div class="line">    [_disposable dispose];</div><div class="line">&#125;  </div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h3 id="timer"><a href="#timer" class="headerlink" title="timer"></a>timer</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[[RACSignal interval:<span class="number">2.0</span> onScheduler:[RACScheduler currentScheduler]] subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="delay"><a href="#delay" class="headerlink" title="delay"></a>delay</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"first"</span>);</div><div class="line">[[[RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">    [subscriber sendNext:<span class="string">@"sendï¼Œsignal"</span>];</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;] </div><div class="line">delay:<span class="number">2.0</span>] <span class="comment">// ä¿¡å·å»¶è¿Ÿä¸¤ç§’</span></div><div class="line">subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="timeout"><a href="#timeout" class="headerlink" title="timeout"></a>timeout</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [[RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">    [subscriber sendNext:<span class="string">@"sendï¼Œsignal"</span>];</div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">3</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        [subscriber sendNext:<span class="string">@"sendï¼Œsignal2"</span>];</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;] timeout:<span class="number">2.0</span> onScheduler:[RACScheduler currentScheduler]];</div><div class="line"><span class="comment">// 2s åå‘é€é”™è¯¯ä¿¡å·ã€‚2s ä¹‹åçš„ä¿¡å·è¢«å¿½ç•¥</span></div><div class="line"></div><div class="line">[signal subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125; error:^(<span class="built_in">NSError</span> *error) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,error);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="retry"><a href="#retry" class="headerlink" title="retry"></a>retry</h3><p>é‡è¯•, é‡åˆ° error å°±ä¼šé‡æ–°æ‰§è¡Œåˆ›å»ºä¿¡å·ä¸­çš„block,ç›´åˆ°æˆåŠŸ. ä¹Ÿå¯ä»¥ä¼ å…¥ retry çš„æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ¬¡æ•°è¿˜æ˜¯ error åˆ™è¿”å› error</p>
<h2 id="å¯¹-RACSignal-çš„æ“ä½œ"><a href="#å¯¹-RACSignal-çš„æ“ä½œ" class="headerlink" title="å¯¹ RACSignal çš„æ“ä½œ"></a>å¯¹ RACSignal çš„æ“ä½œ</h2><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;</div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">5</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        [subscriber sendNext:<span class="string">@"1"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"5"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">        [subscriber sendNext:<span class="string">@"6"</span>];</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="map-æ˜ å°„"><a href="#map-æ˜ å°„" class="headerlink" title="map æ˜ å°„"></a>map æ˜ å°„</h3><h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</div><div class="line">Mapä½¿ç”¨æ­¥éª¤:</div><div class="line">1.ä¼ å…¥ä¸€ä¸ªblock,ç±»å‹æ˜¯è¿”å›å¯¹è±¡ï¼Œå‚æ•°æ˜¯value</div><div class="line">2.valueå°±æ˜¯æºä¿¡å·çš„å†…å®¹ï¼Œç›´æ¥æ‹¿åˆ°æºä¿¡å·çš„å†…å®¹åšå¤„ç†</div><div class="line">3.æŠŠå¤„ç†å¥½çš„å†…å®¹ï¼Œç›´æ¥è¿”å›å°±å¥½äº†ï¼Œä¸ç”¨åŒ…è£…æˆä¿¡å·ï¼Œè¿”å›çš„å€¼ï¼Œå°±æ˜¯æ˜ å°„çš„å€¼ã€‚</div><div class="line">*/</span></div><div class="line">[[signal map:^<span class="keyword">id</span> _Nullable(<span class="keyword">id</span>  _Nullable value) &#123;</div><div class="line">    <span class="keyword">return</span> @([value integerValue] * <span class="number">10</span>);</div><div class="line">&#125;] subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 10,20,30,50,30,60</span></div></pre></td></tr></table></figure>
<h4 id="flattenMap"><a href="#flattenMap" class="headerlink" title="flattenMap"></a>flattenMap</h4><p>æŠŠæºä¿¡å·çš„å†…å®¹æ˜ å°„æˆä¸€ä¸ªæ–°çš„ä¿¡å·ï¼Œä¿¡å·å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</div><div class="line">flattenMapä½¿ç”¨æ­¥éª¤:</div><div class="line">1.ä¼ å…¥ä¸€ä¸ªblockï¼Œblockç±»å‹æ˜¯è¿”å›å€¼RACStreamï¼Œå‚æ•°value</div><div class="line">2.å‚æ•°valueå°±æ˜¯æºä¿¡å·çš„å†…å®¹ï¼Œæ‹¿åˆ°æºä¿¡å·çš„å†…å®¹åšå¤„ç†</div><div class="line">3.åŒ…è£…æˆRACReturnSignalä¿¡å·ï¼Œè¿”å›å‡ºå»ã€‚</div><div class="line">*/</span></div><div class="line">[[signal flattenMap:^__kindof RACSignal * _Nullable(<span class="keyword">id</span>  _Nullable value) &#123;</div><div class="line">    <span class="keyword">return</span> [RACReturnSignal <span class="keyword">return</span>:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@%@"</span>,value,value]];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="flattenmap-å’Œ-map-çš„åŒºåˆ«"><a href="#flattenmap-å’Œ-map-çš„åŒºåˆ«" class="headerlink" title="flattenmap å’Œ map çš„åŒºåˆ«"></a>flattenmap å’Œ map çš„åŒºåˆ«</h4><ol>
<li>FlatternMapä¸­çš„Blockè¿”å›ä¿¡å·ã€‚</li>
<li>Mapä¸­çš„Blockè¿”å›å¯¹è±¡ã€‚</li>
<li>å¼€å‘ä¸­ï¼Œå¦‚æœä¿¡å·å‘å‡ºçš„å€¼ä¸æ˜¯ä¿¡å·ï¼Œæ˜ å°„ä¸€èˆ¬ä½¿ç”¨Map</li>
<li>å¼€å‘ä¸­ï¼Œå¦‚æœä¿¡å·å‘å‡ºçš„å€¼æ˜¯ä¿¡å·ï¼Œæ˜ å°„ä¸€èˆ¬ä½¿ç”¨flatternMapã€‚</li>
</ol>
<h4 id="mapReplace"><a href="#mapReplace" class="headerlink" title="mapReplace"></a>mapReplace</h4><p>ä¼ å…¥ä¸€ä¸ªå€¼ x , å°†æ¯ä¸ªä¿¡å·çš„å€¼éƒ½æ”¹ä¸º x</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal mapReplace:<span class="string">@"4"</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line">    <span class="comment">// 4,4,4,4,4,4,4</span></div></pre></td></tr></table></figure>
<h3 id="filter-è¿‡æ»¤"><a href="#filter-è¿‡æ»¤" class="headerlink" title="filter è¿‡æ»¤"></a>filter è¿‡æ»¤</h3><h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p>ä¼ å…¥ä¸€ä¸ª block , å½“è¿™ä¸ª block è¿”å› YES çš„æ—¶å€™æ‰èƒ½å“åº”</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;</div><div class="line">    [subscriber sendNext:<span class="string">@"1"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"2"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"5"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"3"</span>];</div><div class="line">    [subscriber sendNext:<span class="string">@"6"</span>];</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div><div class="line">[[signal filter:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable value) &#123;</div><div class="line"><span class="comment">// åªæœ‰ value ä¸º @â€œ3â€ çš„æ—¶å€™æ‰è¿›å…¥ä¸‹ä¸€æ­¥</span></div><div class="line">    <span class="keyword">return</span> [value isEqualToString:<span class="string">@"3"</span>];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="ignore"><a href="#ignore" class="headerlink" title="ignore"></a>ignore</h4><p>ä¼ å…¥ä¸€ä¸ªå‚æ•° x å¿½ç•¥ value == x çš„ä¿¡å·</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal ignore:<span class="string">@"3"</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,5,6</span></div></pre></td></tr></table></figure>
<h4 id="distinctUntilChanged"><a href="#distinctUntilChanged" class="headerlink" title="distinctUntilChanged"></a>distinctUntilChanged</h4><blockquote>
<p>å¦‚æœè¿™æ¬¡å—åˆ°çš„ä¿¡å· <code>value</code> è·Ÿä¸Šæ¬¡çš„ä¿¡å· <code>value</code> ç›¸åŒ, è¿™æ¬¡ä¿¡å·è¢«å¿½ç•¥ã€‚</p>
</blockquote>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal distinctUntilChanged] </div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,3,5,3,6</span></div></pre></td></tr></table></figure>
<h4 id="startWith"><a href="#startWith" class="headerlink" title="startWith"></a>startWith</h4><p>ä¼ å…¥ä¸€ä¸ªå‚æ•° x , è®¢é˜…çš„æ—¶å€™é¦–å…ˆæ”¶åˆ° value = x çš„ä¿¡å·ã€‚ ç±»ä¼¼äºåœ¨åˆ›å»º RACSignal çš„ç¬¬ä¸€è¡Œ <code>[subscriber sendNext:x];</code></p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal startWith:<span class="string">@"1"</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,1,2,3,3,5,3,6</span></div></pre></td></tr></table></figure>
<h4 id="take"><a href="#take" class="headerlink" title="take"></a>take</h4><p>ä¼ å…¥ä¸€ä¸ªæ•°ç»„ nï¼Œ è¡¨æ˜åªå“åº”å‰ n ä¸ªä¿¡å·</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal take:<span class="number">3</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,3</span></div></pre></td></tr></table></figure>
<h4 id="takeLast"><a href="#takeLast" class="headerlink" title="takeLast"></a>takeLast</h4><p>ä¼ å…¥ä¸€ä¸ªæ•°å€¼ n, å–æœ€å n ä¸ªä¿¡å·</p>
<p>åªæœ‰æ”¶åˆ°äº†completeæ‰çŸ¥é“ç»“æœã€‚</p>
<h4 id="takeUntilBlock"><a href="#takeUntilBlock" class="headerlink" title="takeUntilBlock"></a>takeUntilBlock</h4><p>ä¸€ç›´å“åº”ï¼Œç›´åˆ°ä¼ å…¥çš„ block ç¬¬ä¸€æ¬¡è¿”å› YES</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[signal takeUntilBlock:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="keyword">return</span> [x isEqualToString:<span class="string">@"5"</span>];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,3,3</span></div></pre></td></tr></table></figure>
<h4 id="takeWhileBlock"><a href="#takeWhileBlock" class="headerlink" title="takeWhileBlock"></a>takeWhileBlock</h4><p>ä¸€ç›´å“åº”ï¼Œç›´åˆ°ä¼ å…¥çš„ block ç¬¬ä¸€æ¬¡è¿”å› NO</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[signal takeWhileBlock:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="keyword">return</span> [x integerValue] &lt; <span class="number">5</span>;</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,2,3,3</span></div></pre></td></tr></table></figure>
<h4 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h4><p>ä¼ å…¥ä¸€ä¸ªæ•°å­— n è¡¨æ˜å¿½ç•¥å‰é¢ç¬¬ n ä¸ªä¿¡å·, ç¬¬ n + 1 ä¸ªä¿¡å·å¼€å§‹å“åº”ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[signal skip:<span class="number">3</span>]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 3,5,3,6</span></div></pre></td></tr></table></figure>
<h4 id="skipUntilBlock"><a href="#skipUntilBlock" class="headerlink" title="skipUntilBlock"></a>skipUntilBlock</h4><p>ä¸€ç›´å¿½ç•¥ä¿¡å·, ç›´åˆ°ä¼ å…¥çš„ block ç¬¬ä¸€æ¬¡è¿”å› YES</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[signal skipUntilBlock:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="keyword">return</span> ![x isEqualToString:<span class="string">@"1"</span>];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 2ï¼Œ3ï¼Œ3ï¼Œ5ï¼Œ3ï¼Œ6</span></div></pre></td></tr></table></figure>
<h4 id="skipWhileBlock"><a href="#skipWhileBlock" class="headerlink" title="skipWhileBlock"></a>skipWhileBlock</h4><p>ä¸€ç›´å¿½ç•¥ä¿¡å·, ç›´åˆ°ä¼ å…¥çš„ block ç¬¬ä¸€æ¬¡è¿”å› NO</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[signal skipWhileBlock:^<span class="built_in">BOOL</span>(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="keyword">return</span> [x isEqualToString:<span class="string">@"1"</span>];</div><div class="line">&#125;]</div><div class="line">subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 2ï¼Œ3ï¼Œ3ï¼Œ5ï¼Œ3ï¼Œ6</span></div></pre></td></tr></table></figure>
<h4 id="scanWithStart-reduce"><a href="#scanWithStart-reduce" class="headerlink" title="scanWithStart:reduce"></a>scanWithStart:reduce</h4><p>è§£å†³ç±»ä¼¼æ•°ç»„æ±‚å’Œçš„é—®é¢˜</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">RACSequence *number = @[@<span class="number">1</span>,@<span class="number">2</span>,@<span class="number">3</span>,@<span class="number">4</span>].rac_sequence;</div><div class="line">RACSequence *sums =[number scanWithStart:@<span class="number">2</span> reduce:^<span class="keyword">id</span> _Nullable(<span class="built_in">NSNumber</span> *running, <span class="built_in">NSNumber</span> *next) &#123;</div><div class="line">    <span class="keyword">return</span> @(running.integerValue + next.integerValue);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯èµ·ç‚¹å€¼, ç¬¬äºŒä¸ªæ˜¯ä¾¿åˆ©çš„block block ä¸­ç¬¬ä¸€ä¸ªæ˜¯ä¸Šä¸€æ¬¡ä¾¿åˆ©çš„ç»“æœï¼Œ ç¬¬äºŒä¸ªæ˜¯å½“å‰ä½ç½®çš„å€¼</span></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, sums.array);</div><div class="line"><span class="comment">//3,5,8,12</span></div></pre></td></tr></table></figure>
<h3 id="ç»„åˆ"><a href="#ç»„åˆ" class="headerlink" title="ç»„åˆ"></a>ç»„åˆ</h3><h4 id="contact"><a href="#contact" class="headerlink" title="contact"></a>contact</h4><p>æŠŠsignalAæ‹¼æ¥åˆ°signalBåï¼ŒsignalAå‘é€å®Œæˆï¼ŒsignalBæ‰ä¼šè¢«æ¿€æ´»ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;  dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">2</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        [subscriber sendNext:<span class="string">@"1"</span>];</div><div class="line">        [subscriber sendCompleted];<span class="comment">// å¿…é¡»conpleted æ‰ä¼šåˆ°ç¬¬äºŒä¸ª signal</span></div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div><div class="line">RACSignal *singnal2 = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) &#123;</div><div class="line">    [subscriber sendNext:<span class="string">@"11"</span>];</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">&#125;];</div><div class="line">RACSignal *contact = [signal concat:singnal2];</div><div class="line">[contact subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// 1,11</span></div></pre></td></tr></table></figure>
<h4 id="then"><a href="#then" class="headerlink" title="then"></a>then</h4><p>ç±»ä¼¼ contact å°†ä¸¤ä¸ª signal é“¾æ¥</p>
<ol>
<li>åªæœ‰ç­‰ç¬¬ä¸€ä¸ª signal ä»‹ç»ä¹‹åæ‰ä¼šæ¿€æ´»ç¬¬äºŒä¸ª signalã€‚ </li>
<li>åœ¨ç¬¬ä¸€ä¸ª signal ç»“æŸä¹‹å‰ signal2 çš„ä¿¡å·ä¼šè¢«å¿½ç•¥ã€‚  </li>
<li>ç¬¬ä¸€ä¸ª signal åªå…³æ³¨ <code>complete</code> sendNext è¢«å¿½ç•¥</li>
</ol>
<p><strong>åŒºåˆ«: contact signal1 çš„ sendNext ä¼šå“åº”, è€Œ then çš„ä¸ä¼šã€‚</strong></p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// signal complete å‘å‡ºä¹‹å signal çš„ä¿¡å·æ‰ä¼šå“åº”.</span></div><div class="line">RACSignal *then = [signal then:^RACSignal * _Nonnull&#123;</div><div class="line">    <span class="keyword">return</span> singnal2;</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h4><p>å°†ä¸¤ä¸ª signal åˆå¹¶ä¸ºä¸€ä¸ª signal åŸå…ˆçš„ä¿¡å·å‘å‡º éƒ½ä¼šå“åº”, æ²¡æœ‰å‰åé¡ºåºã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">RACSignal *merge = [signal merge:singnal2];    </div><div class="line">[merge subscribeNext:^(<span class="keyword">id</span>  _Nullable x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h4><p>å°†ä¸¤ä¸ªsignal åˆå¹¶ä¹‹åçš„ next åˆå¹¶ä¸ºä¸€ä¸ª tuple è¿”å›å›æ¥ã€‚ ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œä¸€ä¸ªä¿¡å·çš„ next ç­‰åˆ°ç¬¬äºŒä¸ªä¿¡å·æœ‰ next ä¹‹å åŒ…è£…æˆ signal è¿”å›ã€‚<br>è¿”å›çš„ zip ç¬¬ä¸€ä¸ªå€¼å°±æ˜¯ç¬¬ä¸€ä¸ªä¿¡å·çš„nextã€‚</p>
<h4 id="combineLatest"><a href="#combineLatest" class="headerlink" title="combineLatest"></a>combineLatest</h4><p>å°†å¤šä¸ªä¿¡å·åˆå¹¶èµ·æ¥ï¼Œå¹¶ä¸”æ‹¿åˆ°å„ä¸ªä¿¡å·çš„æœ€æ–°çš„å€¼,å¿…é¡»æ¯ä¸ªåˆå¹¶çš„signalè‡³å°‘éƒ½æœ‰è¿‡ä¸€æ¬¡sendNextï¼Œæ‰ä¼šè§¦å‘åˆå¹¶çš„ä¿¡å·ã€‚</p>
<p><strong>zip å’Œ combineLatest çš„åŒºåˆ«</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">signal1-----1----2-----3------4-------5-------6--------7-----</div><div class="line"></div><div class="line">signal2----------------5----------------------7--------------</div><div class="line"></div><div class="line"></div><div class="line">combine è¿”å› (3ï¼Œ5)  ï¼ˆ6ï¼Œ7ï¼‰</div><div class="line">zip è¿”å›     (1,5)    (2,7)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;åŸºç¡€ç”¨æ³•&quot;&gt;&lt;a href=&quot;#åŸºç¡€ç”¨æ³•&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€ç”¨æ³•&quot;&gt;&lt;/a&gt;åŸºç¡€ç”¨æ³•&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åˆ›å»ºä¿¡å·&lt;/li&gt;
&lt;li&gt;è®¢é˜…ä¿¡å·&lt;/li&gt;
&lt;li&gt;å‘é€ä¿¡å·&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 1.åˆ›å»ºä¿¡å·(cold)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;&amp;lt;RACSubscriber&amp;gt;  _Nonnull subscriber) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 3.å‘é€ä¿¡å·&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    [subscriber sendNext:&lt;span class=&quot;string&quot;&gt;@&quot;hello, RAC.&quot;&lt;/span&gt;];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 2.è®¢é˜…ä¿¡å·(hot)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[signal subscribeNext:^(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;  _Nullable x) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%@&quot;&lt;/span&gt;, x);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨åˆ›å»º RACSignal çš„æ—¶å€™, &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;+ (RACSignal&amp;lt;ValueType&amp;gt; *)createSignal:(RACDisposable * _Nullable (^)(id&amp;lt;RACSubscriber&amp;gt; subscriber))didSubscribe;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ–¹æ³•ä¼ å…¥çš„ block ä¼šè¿”å›ä¸€ä¸ª &lt;code&gt;RACDisposable&lt;/code&gt; å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;å°†ä»¥ä¸Šä»£ç ä¸­çš„ &lt;code&gt;return nilï¼›&lt;/code&gt; æ›¿æ¢æˆå¦‚ä¸‹ä»£ç &lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>çªç„¶æƒ³èŠèŠ throttle</title>
    <link href="http://www.CepheusSun.com/%E7%AA%81%E7%84%B6%E6%83%B3%E8%81%8A%E8%81%8A%20throttle.html"/>
    <id>http://www.CepheusSun.com/çªç„¶æƒ³èŠèŠ throttle.html</id>
    <published>2017-04-25T16:00:00.000Z</published>
    <updated>2017-04-27T01:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å¦‚æœæˆ‘ä»¬å°†æ°´é¾™å¤´æ‹§ç´§çŸ¥é“æ°´æ˜¯ä»¥æ°´æ»´çš„å½¢å¼æµå‡º, ä¸éš¾å‘ç°, æ¯éš”ä¸€æ®µæ—¶é—´, å°±ä¼šæœ‰ä¸€æ»´æ°´æµå‡ºæ¥ã€‚</p>
</blockquote>
<p>å¦‚æœæˆ‘ä»¬é¢„å…ˆè®¾ç½®ä¸€ä¸ªæ‰§è¡Œå‘¨æœŸ, å½“ç¬¬ä¸€æ¬¡è°ƒç”¨åŠ¨ä½œ(æ»´æ°´)å’Œç¬¬äºŒæ¬¡è°ƒç”¨åŠ¨ä½œä¹‹é—´çš„é—´éš”å¤§äºæ‰§è¡Œå‘¨æœŸ, åˆ™æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œã€‚åæ­£, ä¸æ‰§è¡Œã€‚</p>
<p>ç›´æ¥ç¿»è¯‘ <code>throttle</code> è¿™ä¸ªå•è¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">throttle</div><div class="line"></div><div class="line">n.	èŠ‚æµé˜€; å–‰å’™ï¼Œæ°”ç®¡; [æœº] é£é—¨;</div><div class="line">vt.	æ‰¼æ€ï¼Œå‹åˆ¶; å‹’æ­»ï¼Œä½¿çª’æ¯; ä½¿èŠ‚æµ; ï¼ˆç”¨èŠ‚æ±½é˜€ç­‰ï¼‰ è°ƒèŠ‚;</div><div class="line">vi.	èŠ‚æµï¼Œå‡é€Ÿ; çª’æ¯;</div></pre></td></tr></table></figure>
<p>ä¸éš¾ç†è§£, throttle å…¶å®å°±æ˜¯ä¸€ç§æ§åˆ¶æ•°æ®æˆ–è€…æµé‡å¤§å°çš„æœºåˆ¶ã€‚</p>
<p>MrPeak æ›¾ç»å†™çš„æ–‡ç« ä¸­ä»‹ç»è¿‡ <code>I/O Throttle</code> åœ¨ <code>DISPATCH_QUEUE_PRIORITY_BACKGROUND</code> queue çš„ä½¿ç”¨åœºæ™¯ã€‚åœ¨æ²¡æœ‰éå¸¸ä¸¥è‹›çš„å®æ—¶æ€§è¦æ±‚çš„æƒ…å†µä¸‹, å¯¹äºé‡åº¦ä¾èµ–ç£ç›˜çš„åå°ä»»åŠ¡, ä½¿ç”¨ <code>DISPATCH_QUEUE_PRIORITY_BACKGROUND</code> çš„ queue ä¼šæ›´åŠ å‹å¥½ã€‚æ–‡ä¸­ä¹Ÿå¼•ç”¨äº†å®˜æ–¹æ–‡æ¡£çš„ä¸€æ®µè¯ </p>
<blockquote>
<p>Items dispatched to the queue run at background priority; the queue is scheduled for execution after all high priority queues have been scheduled and the system runs items on a thread whose priority is set for background status. Such a thread has the lowest priority and any disk I/O is throttled to minimize the impact on the system.</p>
</blockquote>
<p>æ„æ€æ˜¯è¯´, è¿™ç§ Global Queue ä¼šåœ¨å…¶ä»–æ‰€æœ‰çš„ queue ç»“æŸä¹‹åæ‰ä¼šåœ¨åå°æ‰§è¡Œã€‚ è¿™æ˜¯æœ€ä½ä¼˜å…ˆçº§çš„ã€‚å¹¶ä¸”ä¸€äº›ç£ç›˜ I/O æ“ä½œä¼šå› ä¸ºæœ€å°åŒ–å¯¹ç³»ç»Ÿçš„å½±å“è€Œè¢«èŠ‚æµã€‚</p>
<a id="more"></a>
<p>æ–‡ä¸­ä¹Ÿä»‹ç»äº† ASI å’Œ AFN ä¸­ä¹Ÿå‡ºç°äº†çš„ throttleã€‚</p>
<blockquote>
<p>æˆ‘ä»¬é€šè¿‡HTTPè¯·æ±‚å‘é€æ•°æ®çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ•°æ®æ˜¯ä»¥Packetçš„å½¢å¼å­˜åœ¨äºä¸€ä¸ªSend Bufferä¸­çš„ï¼Œåº”ç”¨å±‚å¹³æ—¶æ„ŸçŸ¥ä¸åˆ°è¿™ä¸ªBufferçš„å­˜åœ¨ã€‚TCPæä¾›å¯é çš„ä¼ è¾“ï¼Œåœ¨å¼±ç½‘ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªPacketä¸€æ¬¡ä¼ è¾“å¤±è´¥çš„æ¦‚ç‡ä¼šå‡é«˜ï¼Œå³ä½¿ä¸€æ¬¡å¤±è´¥ï¼ŒTCPå¹¶ä¸ä¼šé©¬ä¸Šè®¤ä¸ºè¯·æ±‚å¤±è´¥äº†ï¼Œè€Œæ˜¯ä¼šç»§ç»­é‡è¯•ä¸€æ®µæ—¶é—´ï¼ŒåŒæ—¶TCPè¿˜ä¿è¯Packetçš„æœ‰åºä¼ è¾“ï¼Œæ„å‘³ç€å‰é¢çš„Packetå¦‚æœä¸è¢«ackï¼Œåé¢çš„Packetå°±ä¼šç»§ç»­ç­‰å¾…ï¼Œå¦‚æœæˆ‘ä»¬ä¸€æ¬¡å¾€Send Bufferä¸­å†™å…¥å¤§é‡çš„æ•°æ®ï¼Œé‚£ä¹ˆåœ¨å¼±ç½‘ç¯å¢ƒä¸‹ï¼Œæ’åœ¨åé¢çš„Packetå¤±è´¥çš„æ¦‚ç‡ä¼šå˜é«˜ï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬HTTPè¯·æ±‚å¤±è´¥çš„å‡ ç‡ä¼šå˜å¤§ã€‚</p>
</blockquote>
<p>æ‰€ä»¥åœ¨å¼±ç½‘ç¯å¢ƒä¸‹, ä½¿ç”¨ <code>Network Throttle</code> æœºåˆ¶ å»¶è¿Ÿå‘èµ·ä¸€äº›è¯·æ±‚æˆ–è€…å‡å°‘å¾€ Send Buffer ä¸­çš„æ•°æ®é‡ã€‚ ä¹Ÿä¼šå¤§å¤§çš„æé«˜è¯·æ±‚æˆåŠŸç‡ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</div><div class="line"> Throttles request bandwidth by limiting the packet size and adding a delay for each chunk read from the upload stream.</div><div class="line"></div><div class="line"> When uploading over a 3G or EDGE connection, requests may fail with "request body stream exhausted". Setting a maximum packet size and delay according to the recommended values (`kAFUploadStream3GSuggestedPacketSize` and `kAFUploadStream3GSuggestedDelay`) lowers the risk of the input stream exceeding its allocated bandwidth. Unfortunately, there is no definite way to distinguish between a 3G, EDGE, or LTE connection over `NSURLConnection`. As such, it is not recommended that you throttle bandwidth based solely on network reachability. Instead, you should consider checking for the "request body stream exhausted" in a failure block, and then retrying the request with throttled bandwidth.</div><div class="line"></div><div class="line"> @param numberOfBytes Maximum packet size, in number of bytes. The default packet size for an input stream is 16kb.</div><div class="line"> @param delay Duration of delay each time a packet is read. By default, no delay is set.</div><div class="line"> */</span></div><div class="line"><span class="comment">// AFN ä¸­çš„æ–¹æ³•</span></div><div class="line">- (<span class="keyword">void</span>)throttleBandwidthWithPacketSize:(<span class="built_in">NSUInteger</span>)numberOfBytes</div><div class="line">                                  delay:(<span class="built_in">NSTimeInterval</span>)delay;</div></pre></td></tr></table></figure>
<h2 id="RAC-ä¸­çš„-throttle"><a href="#RAC-ä¸­çš„-throttle" class="headerlink" title="RAC ä¸­çš„ throttle"></a>RAC ä¸­çš„ throttle</h2><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[[[<span class="keyword">self</span>.button rac_signalForControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>] throttle:<span class="number">2</span>] subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"throttle"</span>);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>RAC ä¸­çš„ <code>throttle</code> æ¥å—ä¸€ä¸ªæ—¶é—´é—´éš” <code>interval</code> ä½œä¸ºå‚æ•°, å¦‚æœ <code>RACSignal</code> å‘å‡ºçš„ <code>next</code> äº‹ä»¶ä¹‹åçš„ interval æ—¶é—´å†…ä¸å†å‘å‡º next é‚£ä¹ˆ, ä»–è¿”å›çš„ RACSignal ä¼šå°†è¿™ä¸ªäº‹ä»¶å‘å‡ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå°†å‘é€æ¯”è¾ƒé¢‘ç¹çš„ <code>next</code> äº‹ä»¶èˆå¼ƒ,åªä¿ç•™ç€ä¸€æ®µæ—¶é—´ä¹‹å‰çš„ next äº‹ä»¶ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯:</p>
<p><strong>1ã€å¤„ç†ç”¨æˆ·è¾“å…¥æ¡†çš„ä¿¡å·</strong></p>
<p>åœ¨å¤„ç†æœç´¢è¿™æ ·çš„éœ€æ±‚çš„æ—¶å€™,æœ‰æ—¶å€™å¯èƒ½ä¼šåœ¨ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥ä¹‹åè‡ªåŠ¨è·ŸæœåŠ¡å™¨äº¤äº’ã€‚ç„¶ååœ¨ä¸‹é¢åˆ—è¡¨ä¸­å±•ç¤ºå¤„ç†ç»“æœã€‚å¦‚æœç”¨æˆ·æ‰“å­—å¾ˆå¿«,è¿™ä¸ªæ—¶å€™å¯èƒ½å‡ ç§’é’Ÿä¹‹å†…è¿ç»­å‘å»å¥½å‡ ä¸ªè¯·æ±‚ï¼Œå…¶å®æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚ è¿™ä¸ªæ—¶å€™ä½¿ç”¨ throttle å¯ä»¥å°†ä¿ç•™ç”¨æˆ·è¾“å…¥çš„å°‘æ•°å‡ ä¸ªç»“æœ, ç„¶åè¿”å›ä¸€ä¸ªä¿¡å·, å°†æœ€åçš„æ–‡å­—ä½œä¸º next å‘å‡ºã€‚</p>
<p><strong>2ã€ç›‘å¬æŒ‰é’®ç‚¹å‡»</strong></p>
<p>ç•Œé¢ä¸Šåˆä¸€ä¸ªæŒ‰é’®, ç„¶åç‚¹å‡»è¿™ä¸ªæŒ‰é’®, å‘èµ·ç½‘ç»œè¯·æ±‚, è·Ÿä¸Šé¢çš„ä¾‹å­ç±»ä¼¼ã€‚å¦‚æœç”¨æˆ·å¿«é€Ÿçš„ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ä¹Ÿæ¯”è¾ƒè›‹ç–¼ã€‚æŒ‰ç…§ä»¥å‰çš„å†™æ³•, æˆ‘ä»¬å¯èƒ½ä¼šè®¾ç½®ä¸€ä¸ª <code>flag</code> åœ¨ç‚¹å‡»çš„æ—¶å€™å°†è¿™ä¸ª <code>flag</code> è®¾ç½®ä¸º no, ç„¶ååœ¨ <code>button</code> çš„ <code>action</code> ä¸­åˆ¤æ–­æ˜¯å¦å‘èµ·è¯·æ±‚,ç„¶ååœ¨è¯·æ±‚ç»“æœå›æ¥ä¹‹å, æŠŠè¿™ä¸ª <code>flag</code> æ”¹å›æ¥ã€‚ æƒ³æƒ³éƒ½æ¯”è¾ƒè›‹ç–¼ã€‚è¿™æ—¶å€™ä½¿ç”¨ <code>throttle</code> å°†æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶èŠ‚æµä¸€ä¸‹, å°±å¥½äº†ã€‚</p>
<p>è¿™ä¸ªç›´æ¥æ¬ç”¨ MrPeak <a href="http://mp.weixin.qq.com/s/MsPEZ9GUwCSZN1kngBkJxw">iOSç¼–ç¨‹ä¸­throttleé‚£äº›äº‹</a>ä¸­çš„swiftä»£ç ã€‚ æ¯•ç«Ÿ OC çš„æ„è§åœ¨ä¸Šé¢äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">button.rx_tap</div><div class="line">   .throttle(<span class="number">0.5</span>, <span class="type">MainScheduler</span>.instance)</div><div class="line">   .subscribeNext &#123; <span class="number">_</span> <span class="keyword">in</span> </div><div class="line">      <span class="built_in">print</span>(<span class="string">"Hello World"</span>)</div><div class="line">   &#125;</div><div class="line">   .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>åœ¨ OC çš„ demo ä¸­(ReactiveCocoa 2.5.0) æˆ‘ä¹Ÿå‘ç°äº†ä¸€ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€æ¬¡çš„ç‚¹å‡»ä¹Ÿä¼šåœ¨è¿™ä¸ªé—´éš”ä¹‹åå“åº”ã€‚ä¹‹ååˆä½¿ç”¨äº† ReactiveObjc(3.0) ä¸­ä¹Ÿå‘ç°äº†è¿™ä¸ªé—®é¢˜,è€Œåœ¨ swift çš„ demo ä¸­å¹¶æ²¡æœ‰è¿™ç§æƒ…å†µã€‚</strong></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å…¶å® throttle å¹¶æ²¡æœ‰å‡å°‘å®é™…é€»è¾‘å¤„ç†è¿‡ç¨‹çš„æ‰§è¡Œæ¥æé«˜äº‹ä»¶å¤„ç†å‡½æ•°è¿è¡Œæ€§èƒ½çš„æ‰‹æ®µ, å¹¶æ²¡æœ‰å‡å°‘äº‹ä»¶çš„è§¦å‘æ¬¡æ•°ã€‚å†™åˆ°æœ€å, å‘ç°æ–‡ç« æœ‰ç‚¹å˜æˆå­¦ä¹ å¿ƒå¾—äº†ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬å°†æ°´é¾™å¤´æ‹§ç´§çŸ¥é“æ°´æ˜¯ä»¥æ°´æ»´çš„å½¢å¼æµå‡º, ä¸éš¾å‘ç°, æ¯éš”ä¸€æ®µæ—¶é—´, å°±ä¼šæœ‰ä¸€æ»´æ°´æµå‡ºæ¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬é¢„å…ˆè®¾ç½®ä¸€ä¸ªæ‰§è¡Œå‘¨æœŸ, å½“ç¬¬ä¸€æ¬¡è°ƒç”¨åŠ¨ä½œ(æ»´æ°´)å’Œç¬¬äºŒæ¬¡è°ƒç”¨åŠ¨ä½œä¹‹é—´çš„é—´éš”å¤§äºæ‰§è¡Œå‘¨æœŸ, åˆ™æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œã€‚åæ­£, ä¸æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ç›´æ¥ç¿»è¯‘ &lt;code&gt;throttle&lt;/code&gt; è¿™ä¸ªå•è¯ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;throttle&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;n.	èŠ‚æµé˜€; å–‰å’™ï¼Œæ°”ç®¡; [æœº] é£é—¨;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vt.	æ‰¼æ€ï¼Œå‹åˆ¶; å‹’æ­»ï¼Œä½¿çª’æ¯; ä½¿èŠ‚æµ; ï¼ˆç”¨èŠ‚æ±½é˜€ç­‰ï¼‰ è°ƒèŠ‚;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vi.	èŠ‚æµï¼Œå‡é€Ÿ; çª’æ¯;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸éš¾ç†è§£, throttle å…¶å®å°±æ˜¯ä¸€ç§æ§åˆ¶æ•°æ®æˆ–è€…æµé‡å¤§å°çš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;MrPeak æ›¾ç»å†™çš„æ–‡ç« ä¸­ä»‹ç»è¿‡ &lt;code&gt;I/O Throttle&lt;/code&gt; åœ¨ &lt;code&gt;DISPATCH_QUEUE_PRIORITY_BACKGROUND&lt;/code&gt; queue çš„ä½¿ç”¨åœºæ™¯ã€‚åœ¨æ²¡æœ‰éå¸¸ä¸¥è‹›çš„å®æ—¶æ€§è¦æ±‚çš„æƒ…å†µä¸‹, å¯¹äºé‡åº¦ä¾èµ–ç£ç›˜çš„åå°ä»»åŠ¡, ä½¿ç”¨ &lt;code&gt;DISPATCH_QUEUE_PRIORITY_BACKGROUND&lt;/code&gt; çš„ queue ä¼šæ›´åŠ å‹å¥½ã€‚æ–‡ä¸­ä¹Ÿå¼•ç”¨äº†å®˜æ–¹æ–‡æ¡£çš„ä¸€æ®µè¯ &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Items dispatched to the queue run at background priority; the queue is scheduled for execution after all high priority queues have been scheduled and the system runs items on a thread whose priority is set for background status. Such a thread has the lowest priority and any disk I/O is throttled to minimize the impact on the system.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ„æ€æ˜¯è¯´, è¿™ç§ Global Queue ä¼šåœ¨å…¶ä»–æ‰€æœ‰çš„ queue ç»“æŸä¹‹åæ‰ä¼šåœ¨åå°æ‰§è¡Œã€‚ è¿™æ˜¯æœ€ä½ä¼˜å…ˆçº§çš„ã€‚å¹¶ä¸”ä¸€äº›ç£ç›˜ I/O æ“ä½œä¼šå› ä¸ºæœ€å°åŒ–å¯¹ç³»ç»Ÿçš„å½±å“è€Œè¢«èŠ‚æµã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘ç”¨RACå¹²äº†äº›ä»€ä¹ˆ(ä¸€)</title>
    <link href="http://www.CepheusSun.com/%E6%88%91%E7%94%A8RAC%E5%B9%B2%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88(%E4%B8%80).html"/>
    <id>http://www.CepheusSun.com/æˆ‘ç”¨RACå¹²äº†äº›ä»€ä¹ˆ(ä¸€).html</id>
    <published>2017-04-20T16:00:00.000Z</published>
    <updated>2017-04-21T04:34:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹è±¡é—´çš„äº¤äº’, ä¸»è¦æœ‰ <code>target-action</code>ã€<code>Notification</code>ã€<code>KVO</code>ã€<code>Delegate</code></p>
<h3 id="target-action"><a href="#target-action" class="headerlink" title="target-action"></a>target-action</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[[<span class="keyword">self</span>.loginBtn rac_signalForControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>] subscribeNext:^(<span class="built_in">UIButton</span> *btn) &#123;</div><div class="line"> <span class="comment">// btn, å³ self.loginBtn</span></div><div class="line"> <span class="comment">// è¿™é‡Œæ‰§è¡Œç‚¹å‡»ä¹‹åçš„æ“ä½œ</span></div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨ BlocksKit æ›¿ä»£</p>
<h3 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[RACObserve(<span class="keyword">self</span>, name) subscribeNext:^(<span class="built_in">NSString</span> *name) &#123;</div><div class="line">  <span class="comment">// name å³ self.name</span></div><div class="line">  <span class="comment">// ä¸€æ—¦ name å±æ€§æ”¹å˜å°±ç«‹å³è¿›å…¥åˆ°è¿™ä¸ª block</span></div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// self.myLab.text éšç€ self.myTF.text çš„æ”¹å˜è€Œæ”¹å˜</span></div><div class="line">RAC(<span class="keyword">self</span>.myLab, text) = <span class="keyword">self</span>.myTF.rac_textSignal;</div></pre></td></tr></table></figure>
<h3 id="Notificaiton"><a href="#Notificaiton" class="headerlink" title="Notificaiton"></a>Notificaiton</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[[[<span class="built_in">NSNotificationCenter</span> defaultCenter] </div><div class="line">rac_addObserverForName:<span class="built_in">UIKeyboardWillChangeFrameNotification</span> object:<span class="literal">nil</span>] </div><div class="line">  <span class="comment">// è¿™å¥ä¸å¯å°‘ï¼Œè¡¨ç¤º å½“ self å°†è¦ dealloc çš„æ—¶å€™ï¼Œå°±è¦é‡Šæ”¾ é€šçŸ¥</span></div><div class="line">  takeUntil:<span class="keyword">self</span>.rac_willDeallocSignal] </div><div class="line">  subscribeNext:^(<span class="built_in">NSNotification</span> *notification) &#123;</div><div class="line">      <span class="built_in">NSLog</span>(<span class="string">@"-----%@"</span>, notification.description);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>ä¸è¦å¿˜äº†è¿˜æ˜¯åŸæ¥çš„æ–¹æ³•å‘é€é€šçŸ¥ã€‚</p>
<p><strong>é€šçŸ¥å·²ç»é€šè¿‡ RAC å†…éƒ¨å¾—åˆ°äº†é‡Šæ”¾ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–åœ¨ - dealloc æ·»åŠ ç§»é™¤çš„ä»£ç </strong></p>
<h3 id="RACCommand"><a href="#RACCommand" class="headerlink" title="RACCommand"></a>RACCommand</h3><blockquote>
<p>A command, represented by the RACCommand class, creates and subscribes to a signal in response to some action. This makes it easy to perform side-effecting work as the user interacts with the app.</p>
</blockquote>
<p>ç®€å•çš„ä½¿ç”¨RACCommand å®ç°ä¸€ä¸ª viewModel çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
<a id="more"></a>
<h4 id="æ¯ä¸ªviewModeléƒ½æœ‰ä¸åŒçš„äº‹ä»¶"><a href="#æ¯ä¸ªviewModeléƒ½æœ‰ä¸åŒçš„äº‹ä»¶" class="headerlink" title="æ¯ä¸ªviewModeléƒ½æœ‰ä¸åŒçš„äº‹ä»¶"></a>æ¯ä¸ªviewModeléƒ½æœ‰ä¸åŒçš„äº‹ä»¶</h4><p><code>ViewModel</code> æŒæœ‰ä¸€ä¸ª <code>RACCommand</code> çš„å±æ€§ <code>sourceCommand</code></p>
<h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç›´æ¥æ„å»º</span></div><div class="line">- (<span class="keyword">id</span>)initWithSignalBlock:(RACSignal * (^)(<span class="keyword">id</span> input))signalBlock;</div><div class="line"></div><div class="line"><span class="comment">// åªæœ‰å½“enabledSignalä¸ºtrueæ—¶, commandæ‰æ‰§è¡Œ</span></div><div class="line">- (<span class="keyword">id</span>)initWithEnabled:(RACSignal *)enabledSignal signalBlock:(RACSignal * (^)(<span class="keyword">id</span> input))signalBlock;</div><div class="line"></div><div class="line"></div><div class="line">_sourceCommand = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(<span class="keyword">id</span> input) &#123;</div><div class="line">    <span class="keyword">return</span> [[SYHTTPManager shared] request:[[SFAPI_Find_SectionList alloc] init]];</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="è®¢é˜…"><a href="#è®¢é˜…" class="headerlink" title="è®¢é˜…"></a>è®¢é˜…</h4><p>å¤±è´¥å’ŒæˆåŠŸä¸èƒ½åƒè®¢é˜…å…¶ä»–<code>signal</code>ä¸€æ ·ç›´æ¥<code>Next</code>ã€<code>onError</code>å°±å¯ä»¥ã€‚RACCommand çš„å¤±è´¥æ¶ˆæ¯, éƒ½è¢«åˆ†å‘åˆ°äº† <code>errors</code> è¿™ä¸ªå±æ€§ã€‚æ‰€ä»¥éœ€è¦åœ¨è¿™ä¸ªåœ°æ–¹è®¢é˜…å¤±è´¥çš„æ¶ˆæ¯.</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è®¢é˜…æˆåŠŸ</span></div><div class="line">[_sourceCommand.executionSignals.switchToLatest subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    PSLog(<span class="string">@"---%@"</span>,x);</div><div class="line">&#125;];</div><div class="line"><span class="comment">// è®¢é˜…å¤±è´¥</span></div><div class="line">[_sourceCommand.errors subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    PSLog(<span class="string">@"xxx%@"</span>,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="æ‰§è¡Œ"><a href="#æ‰§è¡Œ" class="headerlink" title="æ‰§è¡Œ"></a>æ‰§è¡Œ</h4><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[command execute:someParameters];</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯¹è±¡é—´çš„äº¤äº’, ä¸»è¦æœ‰ &lt;code&gt;target-action&lt;/code&gt;ã€&lt;code&gt;Notification&lt;/code&gt;ã€&lt;code&gt;KVO&lt;/code&gt;ã€&lt;code&gt;Delegate&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;target-action&quot;&gt;&lt;a href=&quot;#target-action&quot; class=&quot;headerlink&quot; title=&quot;target-action&quot;&gt;&lt;/a&gt;target-action&lt;/h3&gt;&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loginBtn rac_signalForControlEvents:&lt;span class=&quot;built_in&quot;&gt;UIControlEventTouchUpInside&lt;/span&gt;] subscribeNext:^(&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; *btn) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;// btn, å³ self.loginBtn&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;// è¿™é‡Œæ‰§è¡Œç‚¹å‡»ä¹‹åçš„æ“ä½œ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯ä»¥ç”¨ BlocksKit æ›¿ä»£&lt;/p&gt;
&lt;h3 id=&quot;KVO&quot;&gt;&lt;a href=&quot;#KVO&quot; class=&quot;headerlink&quot; title=&quot;KVO&quot;&gt;&lt;/a&gt;KVO&lt;/h3&gt;&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[RACObserve(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, name) subscribeNext:^(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *name) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// name å³ self.name&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// ä¸€æ—¦ name å±æ€§æ”¹å˜å°±ç«‹å³è¿›å…¥åˆ°è¿™ä¸ª block&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// self.myLab.text éšç€ self.myTF.text çš„æ”¹å˜è€Œæ”¹å˜&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;RAC(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.myLab, text) = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.myTF.rac_textSignal;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Notificaiton&quot;&gt;&lt;a href=&quot;#Notificaiton&quot; class=&quot;headerlink&quot; title=&quot;Notificaiton&quot;&gt;&lt;/a&gt;Notificaiton&lt;/h3&gt;&lt;figure class=&quot;highlight obj-c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[[[[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rac_addObserverForName:&lt;span class=&quot;built_in&quot;&gt;UIKeyboardWillChangeFrameNotification&lt;/span&gt; object:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;] &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// è¿™å¥ä¸å¯å°‘ï¼Œè¡¨ç¤º å½“ self å°†è¦ dealloc çš„æ—¶å€™ï¼Œå°±è¦é‡Šæ”¾ é€šçŸ¥&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  takeUntil:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.rac_willDeallocSignal] &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  subscribeNext:^(&lt;span class=&quot;built_in&quot;&gt;NSNotification&lt;/span&gt; *notification) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;-----%@&quot;&lt;/span&gt;, notification.description);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;];&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸è¦å¿˜äº†è¿˜æ˜¯åŸæ¥çš„æ–¹æ³•å‘é€é€šçŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€šçŸ¥å·²ç»é€šè¿‡ RAC å†…éƒ¨å¾—åˆ°äº†é‡Šæ”¾ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–åœ¨ - dealloc æ·»åŠ ç§»é™¤çš„ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;RACCommand&quot;&gt;&lt;a href=&quot;#RACCommand&quot; class=&quot;headerlink&quot; title=&quot;RACCommand&quot;&gt;&lt;/a&gt;RACCommand&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;A command, represented by the RACCommand class, creates and subscribes to a signal in response to some action. This makes it easy to perform side-effecting work as the user interacts with the app.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç®€å•çš„ä½¿ç”¨RACCommand å®ç°ä¸€ä¸ª viewModel çš„ç½‘ç»œè¯·æ±‚ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
      <category term="Reactive" scheme="http://www.CepheusSun.com/tags/Reactive/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Gitlabå’ŒCocoapodsåˆ›å»ºç§æœ‰pod</title>
    <link href="http://www.CepheusSun.com/%E4%BD%BF%E7%94%A8Gitlab%E5%92%8CCocoapods%E5%88%9B%E5%BB%BA%E7%A7%81%E6%9C%89pod.html"/>
    <id>http://www.CepheusSun.com/ä½¿ç”¨Gitlabå’ŒCocoapodsåˆ›å»ºç§æœ‰pod.html</id>
    <published>2017-04-19T14:39:27.000Z</published>
    <updated>2017-05-11T08:44:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ¯ä¸ªç¨å¾®æœ‰ç‚¹å¼€å‘ç»éªŒçš„ iOS å·¥ç¨‹å¸ˆéƒ½å¾ˆå®¹æ˜“çš„å‘ç°ä¸€ä¸‹å‡ ç‚¹: </p>
<ol>
<li>å‡ ä¹æ¯ä¸ª iOS çš„é¡¹ç›®éƒ½é€‚ç”¨äº† <code>Cocoapods</code> </li>
<li>å‡ ä¹æ¯ä¸ª ObjC çš„ iOS é¡¹ç›®æ˜¯ä½¿ç”¨ <code>AFNetworking</code> ã€ <code>SDWebImage</code>ç­‰ä¸‰æ–¹æ¡†æ¶ã€‚</li>
<li>å‡ ä¹æ¯ä¸ª Swift çš„ iOS é¡¹ç›®éƒ½æ˜¯ç”¨äº† <code>Alamofire</code>ã€ <code>Kingfisher</code>ç­‰ä¸‰æ–¹æ¡†æ¶</li>
<li>æ¯ä¸€æ¬¡è¿™äº›æ¡†æ¶æ›´æ–°ä¹‹å, æ— æ•°ä¸ªå·¥ç¨‹å¸ˆåªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œä¸€ä¸‹â€™pod updateâ€™ æˆ– <code>pod install</code>å°±èƒ½å¯¹åº”çš„æ›´æ–°è‡ªå·±é¡¹ç›®ä¸­çš„ä»£ç </li>
</ol>
<p>è¿™å‡ ä¹éƒ½æ˜¯æ¯ä¸ª iOS å·¥ç¨‹å¸ˆç»å¸¸éƒ½ä¼šé‡åˆ°çš„äº‹æƒ…ã€‚ç›®å‰å‡ ä¹æ‰€æœ‰ä¼˜ç§€çš„ iOS å¼€æºæ¡†æ¶éƒ½æ”¯æŒäº† CocoaPodsã€‚ å‡ ä¹æ‰€æœ‰çš„ iOS é¡¹ç›®éƒ½é›†æˆäº† CocoaPods</p>
<p>ä½†æ˜¯æˆ‘ä»¬åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ä¹Ÿå¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜:</p>
<ol>
<li>å¾ˆå¤šå…¬å¸éƒ½æœ‰å¥½ App åŒæ—¶åœ¨è¿›è¡Œå¼€å‘ã€‚</li>
<li>è¿™äº› App æˆ–å¤šæˆ–å°‘åœ¨ä¸šåŠ¡æˆ–è€… UI éƒ½å¾ˆå¾ˆå¤šçš„é‡åˆã€‚</li>
</ol>
<p>ç€å°±æ„å‘³ç€æœ‰å¾ˆå¤šçš„ä»£ç åœ¨è¿™äº› App ä¸­éƒ½æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚ç”±äºå„ç§å„æ ·çš„åŸå› ,åŒä¸ªå…¬å¸çš„ä¸åŒ App å¯èƒ½æ›´æ–°ä¸åŒæ­¥ã€‚ app A å¯èƒ½å·²ç»å‡çº§åˆ°æ–°ç‰ˆæœ¬ app B å¯èƒ½è¿˜åœ¨è€ç‰ˆæœ¬ã€‚æ¯ä¸ª App åˆ†åˆ«ç®¡ç†åŠ¿å¿…ä¼šå‡ºç°æ··ä¹±çš„å±€é¢ã€‚ä¸€èµ·ç®¡ç†åˆå­˜åœ¨æ–°æ—§äº¤æ›¿çš„é—®é¢˜ã€‚å¦‚æœæ¯ä¸ª App åˆä¸åŒçš„å·¥ç¨‹å¸ˆè´Ÿè´£, å³ä½¿å¯èƒ½æœ‰äº¤å‰ review çš„æœºåˆ¶, ä½†ä¹Ÿå¾ˆéš¾ä¿è¯å…¬å¸ä»£ç çš„ç»Ÿä¸€ã€‚å¾ˆå¤šé€»è¾‘éƒ½å­˜åœ¨å¤šæ®µä»£ç ã€‚</p>
<p>å¦‚ä½•ç®¡ç†å…¬å¸çš„å…¬å…±ä»£ç åº“å°±æˆäº†ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦çš„é—®é¢˜ã€‚</p>
<p>é›†æˆ IJKMediaPlayer çš„æ—¶å€™,æƒ³åˆ°äº†ä½¿ç”¨gitæ¥åŒºåˆ«ç‰ˆæœ¬,ç„¶åä½¿ç”¨ framework æ¥ç®¡ç†å…±æœ‰ä»£ç ã€‚ç„¶è€Œåœ¨å‡ºç°äº†ä½ çš„ä»£ç éœ€è¦ä½¿ç”¨åˆ°å…¶ä»–çš„ Framework çš„æ—¶å€™, æˆ–è€…å¥½å‡ ä¸ª Framework éƒ½éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªç¬¬ä¸‰æ–¹æ¡†æ¶çš„æ—¶å€™, è¿™ä¹ˆåšç¡®å®ä¹Ÿæ˜¯ä»¶æ¼ç«çš„äº‹æƒ…ã€‚</p>
<a id="more"></a>
<p>å»å¹´å†™äº†ä¸‰äº†å°ç»„ä»¶ <code>SYNetwork</code> <code>EmptyDataKit</code> <code>SYPhotoBrowser</code>ã€‚å‰ä¸¤ä¸ªå·²ç»æ”¯æŒäº† <code>Cocoapods</code> ä¹‹åç½‘ä¸Šä¸æ–­çš„å¼€å§‹æœ‰ä¸€äº›åˆ©ç”¨ <code>cocoapods</code>è¿›è¡Œç»„ä»¶åŒ–çš„æ–‡ç« ã€‚å‰äº›å¤©åœ¨ å»ç›´æ’­çœ‹äº† casa çš„ä¸¤ä¸ªå…³äºç»„å»ºåŒ–çš„ç›´æ’­ä¹‹åã€‚ä¹Ÿä¸€ç›´è ¢è ¢æ¬²åŠ¨æƒ³è‡ªå·±ä¹Ÿæ¥åšä¸€ä¸‹è¿™ä»¶äº‹æƒ…ã€‚</p>
<p>åšå¼€æºçš„ repo çš„æ—¶å€™ï¼Œè¿˜æ˜¯æ¯”è¾ƒé¡ºåˆ©çš„åšåˆ°äº†è¿™ä»¶äº‹æƒ…ã€‚ä½†æ˜¯å½“æ—¶æƒ³ç”¨ <code>OSChina</code> æ¥åšäº†å‡ æ¬¡éƒ½æ²¡æœ‰æˆåŠŸã€‚å°±ä¸€ç›´æç½®äº†ã€‚</p>
<p>æ˜¥èŠ‚ä¹‹åæ¢äº†ä¸ªå·¥ä½œ, é€‚åº”äº†å…¬å¸çš„ç¯å¢ƒ, ç®€å•çš„å­¦ä¹ äº†ä¸€ä¸‹ Swift ä¹‹å, å…¬å¸è¿˜æ˜¯å†³å®šå¯¹ç°æœ‰çš„é¡¹ç›®è¿›è¡Œä¸€æ¬¡æ¢³ç†,ç„¶ååšä¸€æ¬¡é‡æ„ã€‚ æ‰€ä»¥å¾ˆè‡ªç„¶çš„è¿˜æ˜¯æƒ³åˆ°äº†ä½¿ç”¨ <code>CocoaPods</code> å°†å…¬å¸åŸæœ‰çš„é¡¹ç›®è¿›è¡Œç»„ä»¶åŒ–ã€‚</p>
<p>ç»“æœäº†åŠå¤©æ—¶é—´çš„å°è¯•,æŠ¥é”™create gitlabè´¦å·ç­‰ç­‰ã€‚ç»ˆäºè¾¾åˆ°äº†æœ€åˆçš„æƒ³æ³•ã€‚ æ‰€ä»¥å°†è¿™ä¸ªè¿‡ç¨‹è®°å½•ä¸‹æ¥ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨-GitLab"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨-GitLab" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ GitLab"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ GitLab</h2><p>å…¶å®ä¸Šé¢å·²ç»è¯´åˆ°äº†,ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ CocoaPods æ¥åšè¿™ä»¶äº‹æƒ…ã€‚ä¹Ÿè¯´åˆ°äº†ä¸ºä»€ä¹ˆè¦åšè¿™ä»¶äº‹æƒ…ã€‚ä¸ºä»€ä¹ˆä½¿ç”¨ gitlab å‘¢ï¼Ÿ åŸå› å¾ˆç®€å•ã€‚ æ¯•ç«Ÿ GitHub çš„ç§æœ‰repo æ˜¯æ”¶è´¹çš„ã€‚åŸè°…æˆ‘ç©·, ä¹Ÿå¯ä»¥è¯´æ˜¯å…¬å¸æ‰£é—¨å„¿ã€‚åªèƒ½æŠŠå¼€æºçš„ä¸œè¥¿æ”¾åœ¨, GitHub æŠŠä¸èƒ½å¼€æºçš„ä¸œè¥¿æ”¾åœ¨å…¶ä»–åœ°æ–¹ã€‚</p>
<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>å…¶å®æ²¡ä»€ä¹ˆå¥½å‡†å¤‡çš„ã€‚ ä½†æ˜¯é¦–å…ˆä½ å¾—æœ‰ä¸ª Gitlab è´¦å·å§ï¼ å¦‚æœæ²¡æœ‰æ³¨å†Œä¹‹åæ·»åŠ  SSH å°±å¥½äº†ã€‚</p>
<p>ç„¶ååœ¨ Gitlab ä¸Šåˆ›å»ºä¸€ä¸ªç©ºçš„ä»“åº“:XXX ç„¶åè®°ä½è¿™ä¸ªé¡¹ç›®çš„ åœ°å€: git@gitlab.com:XXX/XXX.git </p>
<h2 id="åˆ›å»ºå·¥ç¨‹"><a href="#åˆ›å»ºå·¥ç¨‹" class="headerlink" title="åˆ›å»ºå·¥ç¨‹"></a>åˆ›å»ºå·¥ç¨‹</h2><p>è¿™äº›å¯ä»¥çœ‹æˆ‘å»å¹´å¹´åº•å†™å¼€æº Cocoapods çš„æ—¶å€™å†™çš„ä¸œè¥¿ã€‚<a href="http://cepheussun.com/2016/12/02/%E4%BD%BF%E7%94%A8Cocoapods%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/">ä½¿ç”¨ Cocoapods ç®¡ç†ä½ çš„é¡¹ç›®</a></p>
<p>åŸºæœ¬ä¸Šç®€åŒ–ä¸€ä¸‹å°±æ˜¯ä»¥ä¸‹</p>
<h3 id="åˆ›å»ºå·¥ç¨‹-1"><a href="#åˆ›å»ºå·¥ç¨‹-1" class="headerlink" title="åˆ›å»ºå·¥ç¨‹"></a>åˆ›å»ºå·¥ç¨‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod lib create XXX</div></pre></td></tr></table></figure>
<p>å›ç­”é—®é¢˜</p>
<h3 id="æ·»åŠ ç§æœ‰åº“åˆ°æœ¬åœ°-pod-åº“-å¤šäººå¼€å‘å…¶ä»–äººä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªæ“ä½œ"><a href="#æ·»åŠ ç§æœ‰åº“åˆ°æœ¬åœ°-pod-åº“-å¤šäººå¼€å‘å…¶ä»–äººä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªæ“ä½œ" class="headerlink" title="æ·»åŠ ç§æœ‰åº“åˆ°æœ¬åœ° pod åº“(å¤šäººå¼€å‘å…¶ä»–äººä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªæ“ä½œ)"></a>æ·»åŠ ç§æœ‰åº“åˆ°æœ¬åœ° pod åº“(å¤šäººå¼€å‘å…¶ä»–äººä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªæ“ä½œ)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod repo add XXX git@gitlab.com:XXX/XXX.git</div></pre></td></tr></table></figure>
<blockquote>
<p>å¯ä»¥æ£€æŸ¥ä¸€ä¸‹: ~./cocoapods/repos ç›®å½•ä¸‹åˆäº† XXX æ–‡ä»¶å¤¹</p>
</blockquote>
<h3 id="å°†ä»£ç æ”¾è¿›å»"><a href="#å°†ä»£ç æ”¾è¿›å»" class="headerlink" title="å°†ä»£ç æ”¾è¿›å»"></a>å°†ä»£ç æ”¾è¿›å»</h3><blockquote>
<p>è¿™ä¸€æ­¥ä¸Šç¯‡æ–‡ç« ä¸­æœ‰ã€‚ <a href="http://cepheussun.com/2016/12/02/%E4%BD%BF%E7%94%A8Cocoapods%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/">ä½¿ç”¨ Cocoapods ç®¡ç†ä½ çš„é¡¹ç›®</a></p>
</blockquote>
<h4 id="ä¿®æ”¹-podspec"><a href="#ä¿®æ”¹-podspec" class="headerlink" title="ä¿®æ”¹ .podspec"></a>ä¿®æ”¹ .podspec</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Pod::Spec.new <span class="keyword">do</span> <span class="params">|s|</span></div><div class="line">  s.name             = <span class="string">'XXX'</span></div><div class="line">  s.version          = <span class="string">'0.0.1'</span></div><div class="line">  s.summary          = <span class="string">'è¿™æ˜¯é¡¹ç›®çš„åŸºç¡€æ¡†æ¶,æ‰€æœ‰é¡¹ç›®éƒ½éœ€è¦é›†æˆ.'</span></div><div class="line"></div><div class="line">  s.homepage         = <span class="string">'https://gitlab.com/XXX/XXX'</span></div><div class="line">  s.license          = &#123; <span class="symbol">:type</span> =&gt; <span class="string">'MIT'</span>, <span class="symbol">:file</span> =&gt; <span class="string">'LICENSE'</span> &#125;</div><div class="line">  s.author           = &#123; <span class="string">'XXX'</span> =&gt; <span class="string">'cd_sunyang@163.com'</span> &#125;</div><div class="line">  s.source           = &#123; <span class="symbol">:git</span> =&gt; <span class="string">'git@gitlab.com:XXX/XXX.git'</span>, <span class="symbol">:tag</span> =&gt; s.version &#125;</div><div class="line"></div><div class="line">  s.ios.deployment_target = <span class="string">'8.0'</span></div><div class="line"></div><div class="line">  s.source_files = <span class="string">'XXX/Classes/**/*'</span></div><div class="line">  s.frameworks = <span class="string">'UIKit'</span></div><div class="line">  s.dependency <span class="string">'AFNetworking'</span></div><div class="line">  s.dependency <span class="string">'MBProgressHUD'</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>æˆ‘è¿™ä¸ªDemoå¼•ç”¨äº†ä¸¤ä¸ªå…¬æœ‰çš„repo</p>
<h4 id="æäº¤ä»£ç "><a href="#æäº¤ä»£ç " class="headerlink" title="æäº¤ä»£ç "></a>æäº¤ä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git add .</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git commit -m &quot;commit comments&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push origin master</div></pre></td></tr></table></figure>
<h4 id="æ£€æŸ¥ä¸€ä¸‹"><a href="#æ£€æŸ¥ä¸€ä¸‹" class="headerlink" title="æ£€æŸ¥ä¸€ä¸‹"></a>æ£€æŸ¥ä¸€ä¸‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ pod lib lint</div><div class="line"></div><div class="line">#æˆ–è€… pod lib lint --allow-warnings å¿½ç•¥è­¦å‘Š</div></pre></td></tr></table></figure>
<p>ç„¶åä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ä¸­çš„ <code>podfile</code>æ–‡ä»¶ä¸­æ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pod &apos;XXX&apos;, :path =&gt; &apos;/Users/xxx/Desktop/XXX&apos;</div><div class="line"></div><div class="line">## æœ€åè·¯å¾„ä»¥å®é™…æƒ…å†µä¸ºå‡†, æœ‰å¯èƒ½ä¸åœ¨æ¡Œé¢</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod install</div></pre></td></tr></table></figure>
<p>æˆåŠŸåæˆ‘ä»¬çš„åº“ä¼šå‡ºç°åœ¨<code>Development Pods</code>æ–‡ä»¶å¤¹é‡Œé¢ã€‚å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰é—®é¢˜ã€‚</p>
<h4 id="æäº¤ç§æœ‰åº“"><a href="#æäº¤ç§æœ‰åº“" class="headerlink" title="æäº¤ç§æœ‰åº“"></a>æäº¤ç§æœ‰åº“</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git tag 0.0.1</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push --tags</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod repo push XXX XXX.podspec</div></pre></td></tr></table></figure>
<h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><h4 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="headerlink" title="æŠ¥é”™"></a>æŠ¥é”™</h4><p>åœ¨æ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod lib lint</div></pre></td></tr></table></figure></p>
<p>çš„æ—¶å€™,å¦‚æœåœ¨ä½ çš„æ–‡ä»¶ä¸­å¼•å…¥äº†ä¸€äº›ä¸‰æ–¹åº“, å¹¶ä¸”åœ¨<code>.podspec</code>æ–‡ä»¶ä¸­ä¹Ÿæ·»åŠ äº†å¯¹ç”¨çš„<code>.dependency</code> ä¾ç„¶å‡ºç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- ERROR | xcodebuild: /Users/xinhuikeji/Library/Developer/Xcode/DerivedData/App-cpgccqdjhyrbqwcpjanyefntolkf/Build/Products/Release-iphonesimulator/wLib/wLib.framework/Headers/BaseModel.h:13:9: error: include of non-modular header inside framework module &apos;wLib.BaseModel&apos; [-Werror,-Wnon-modular-include-in-framework-module]</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„é”™è¯¯ã€‚</p>
<p>åœ¨å‘½ä»¤åé¢æ·»åŠ å‚æ•° <code>--use-libraries</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ pod lib lint xxx.podspec --use-libraries</div><div class="line">$ pod repo push XXX XXX.podspec --use-libraries</div></pre></td></tr></table></figure>
<p>åœ¨<a href="https://segmentfault.com/q/1010000006885674">segmentfault</a>ä¸­çœ‹åˆ°çš„ç­”æ¡ˆã€‚</p>
<h4 id="pod-search-æ‰¾ä¸åˆ°"><a href="#pod-search-æ‰¾ä¸åˆ°" class="headerlink" title="pod search æ‰¾ä¸åˆ°"></a>pod search æ‰¾ä¸åˆ°</h4><p>æœ€åå®Œæˆä¹‹ååœ¨æ–°å»ºçš„å·¥ç¨‹ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod init</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim podfile</div></pre></td></tr></table></figure>
<p>æ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod &quot;SYBase&quot;, :git =&gt; &apos;git@gitlab.com:CepheusSun/SYBase.git&apos;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod install</div></pre></td></tr></table></figure>
<p>ç„¶åè«åå…¶å¦™å‘ç°å¼•å…¥çš„ repo æ˜¯<code>0.1.0</code>æˆ–è€…ä»€ä¹ˆå·´æ‹‰å·´æ‹‰ç‰ˆæœ¬çš„ã€‚è¿™ä¸ªæ—¶å€™æ›´æ–°ä¸€ä¸‹pod</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod update</div></pre></td></tr></table></figure>
<p>å†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod install</div></pre></td></tr></table></figure></p>
<h4 id="å¼ºè¿«ç—‡"><a href="#å¼ºè¿«ç—‡" class="headerlink" title="å¼ºè¿«ç—‡"></a>å¼ºè¿«ç—‡</h4><p>å¦‚æœé‡åˆ°å¼ºè¿«ç—‡æƒ³è¦ç”¨ 1.1.1 è¿™æ ·çš„ä¸‰çº§ç‰ˆæœ¬çš„è¯ã€‚</p>
<p><code>XXX.podspec</code> æ–‡ä»¶ä¸­çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s.source = &#123; :git =&gt; &apos;git@gitlab.com:XXX/XXX.git&apos;, :tag =&gt; s.version &#125;</div></pre></td></tr></table></figure></p>
<p>å¿…é¡»ç”¨ s.version</p>
<p>æˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚</p>
<h3 id="ç»“æŸç¯‡"><a href="#ç»“æŸç¯‡" class="headerlink" title="ç»“æŸç¯‡"></a>ç»“æŸç¯‡</h3><p>å¥½ä¹…æ²¡å†™æ–‡ç« äº†ã€‚ç»ˆäºè¿˜æ˜¯ç»§ç»­å†™äº†ä¸‹å»ã€‚è¿™æ®µæ—¶é—´è‡ªå·±å­¦äº†å­¦Swift å­¦äº†å­¦ å‡½æ•°å“åº”å¼ç¼–ç¨‹, ä¸ƒç‰›äº‘ç›´æ’­çš„è®¤è¯ä¹Ÿä¸‹æ¥çš„ã€‚æ¥ä¸‹æ¥å¯èƒ½è¦ç ”ç©¶ä¸€ä¸‹æ¨æµç›¸å…³çš„ä¸œè¥¿ã€‚2017 çš„å‰åŠæ®µè€å®è¯´å­¦åˆ°äº†å¾ˆå¤šçš„ä¸œè¥¿ã€‚ä¸€ç›´å¾ˆæ„Ÿæ©ä¹Ÿå¾ˆçæƒœè¿™æ ·çš„æƒ…å†µã€‚</p>
<p><strong>å‚è€ƒæ–‡æ¡£</strong></p>
<p><a href="http://www.th7.cn/program/ios/201702/1119967.shtml">ç»„ä»¶åŒ–å¼€å‘ä¹‹CocoaPodsç§æœ‰åº“åˆ¶ä½œ</a><br><a href="http://mt.sohu.com/20160824/n465823814.shtml">ä½¿ç”¨cocoapodsç®¡ç†ç§æœ‰åº“</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¯ä¸ªç¨å¾®æœ‰ç‚¹å¼€å‘ç»éªŒçš„ iOS å·¥ç¨‹å¸ˆéƒ½å¾ˆå®¹æ˜“çš„å‘ç°ä¸€ä¸‹å‡ ç‚¹: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‡ ä¹æ¯ä¸ª iOS çš„é¡¹ç›®éƒ½é€‚ç”¨äº† &lt;code&gt;Cocoapods&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;å‡ ä¹æ¯ä¸ª ObjC çš„ iOS é¡¹ç›®æ˜¯ä½¿ç”¨ &lt;code&gt;AFNetworking&lt;/code&gt; ã€ &lt;code&gt;SDWebImage&lt;/code&gt;ç­‰ä¸‰æ–¹æ¡†æ¶ã€‚&lt;/li&gt;
&lt;li&gt;å‡ ä¹æ¯ä¸ª Swift çš„ iOS é¡¹ç›®éƒ½æ˜¯ç”¨äº† &lt;code&gt;Alamofire&lt;/code&gt;ã€ &lt;code&gt;Kingfisher&lt;/code&gt;ç­‰ä¸‰æ–¹æ¡†æ¶&lt;/li&gt;
&lt;li&gt;æ¯ä¸€æ¬¡è¿™äº›æ¡†æ¶æ›´æ–°ä¹‹å, æ— æ•°ä¸ªå·¥ç¨‹å¸ˆåªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œä¸€ä¸‹â€™pod updateâ€™ æˆ– &lt;code&gt;pod install&lt;/code&gt;å°±èƒ½å¯¹åº”çš„æ›´æ–°è‡ªå·±é¡¹ç›®ä¸­çš„ä»£ç &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™å‡ ä¹éƒ½æ˜¯æ¯ä¸ª iOS å·¥ç¨‹å¸ˆç»å¸¸éƒ½ä¼šé‡åˆ°çš„äº‹æƒ…ã€‚ç›®å‰å‡ ä¹æ‰€æœ‰ä¼˜ç§€çš„ iOS å¼€æºæ¡†æ¶éƒ½æ”¯æŒäº† CocoaPodsã€‚ å‡ ä¹æ‰€æœ‰çš„ iOS é¡¹ç›®éƒ½é›†æˆäº† CocoaPods&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æˆ‘ä»¬åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ä¹Ÿå¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¾ˆå¤šå…¬å¸éƒ½æœ‰å¥½ App åŒæ—¶åœ¨è¿›è¡Œå¼€å‘ã€‚&lt;/li&gt;
&lt;li&gt;è¿™äº› App æˆ–å¤šæˆ–å°‘åœ¨ä¸šåŠ¡æˆ–è€… UI éƒ½å¾ˆå¾ˆå¤šçš„é‡åˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç€å°±æ„å‘³ç€æœ‰å¾ˆå¤šçš„ä»£ç åœ¨è¿™äº› App ä¸­éƒ½æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚ç”±äºå„ç§å„æ ·çš„åŸå› ,åŒä¸ªå…¬å¸çš„ä¸åŒ App å¯èƒ½æ›´æ–°ä¸åŒæ­¥ã€‚ app A å¯èƒ½å·²ç»å‡çº§åˆ°æ–°ç‰ˆæœ¬ app B å¯èƒ½è¿˜åœ¨è€ç‰ˆæœ¬ã€‚æ¯ä¸ª App åˆ†åˆ«ç®¡ç†åŠ¿å¿…ä¼šå‡ºç°æ··ä¹±çš„å±€é¢ã€‚ä¸€èµ·ç®¡ç†åˆå­˜åœ¨æ–°æ—§äº¤æ›¿çš„é—®é¢˜ã€‚å¦‚æœæ¯ä¸ª App åˆä¸åŒçš„å·¥ç¨‹å¸ˆè´Ÿè´£, å³ä½¿å¯èƒ½æœ‰äº¤å‰ review çš„æœºåˆ¶, ä½†ä¹Ÿå¾ˆéš¾ä¿è¯å…¬å¸ä»£ç çš„ç»Ÿä¸€ã€‚å¾ˆå¤šé€»è¾‘éƒ½å­˜åœ¨å¤šæ®µä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä½•ç®¡ç†å…¬å¸çš„å…¬å…±ä»£ç åº“å°±æˆäº†ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;é›†æˆ IJKMediaPlayer çš„æ—¶å€™,æƒ³åˆ°äº†ä½¿ç”¨gitæ¥åŒºåˆ«ç‰ˆæœ¬,ç„¶åä½¿ç”¨ framework æ¥ç®¡ç†å…±æœ‰ä»£ç ã€‚ç„¶è€Œåœ¨å‡ºç°äº†ä½ çš„ä»£ç éœ€è¦ä½¿ç”¨åˆ°å…¶ä»–çš„ Framework çš„æ—¶å€™, æˆ–è€…å¥½å‡ ä¸ª Framework éƒ½éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªç¬¬ä¸‰æ–¹æ¡†æ¶çš„æ—¶å€™, è¿™ä¹ˆåšç¡®å®ä¹Ÿæ˜¯ä»¶æ¼ç«çš„äº‹æƒ…ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="CocoaPods" scheme="http://www.CepheusSun.com/categories/CocoaPods/"/>
    
    
      <category term="CocoaPods" scheme="http://www.CepheusSun.com/tags/CocoaPods/"/>
    
      <category term="iOS" scheme="http://www.CepheusSun.com/tags/iOS/"/>
    
  </entry>
  
</feed>
